/*! For license information please see main.70b742b3.js.LICENSE.txt */
(function(){var __webpack_modules__={5676:function(e,t,g){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var g=function(){};g.prototype=t.prototype,e.prototype=new g,e.prototype.constructor=e}function I(e,t,g){if(I.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(g=t,t=10),this._init(e||0,t||10,g||"be"))}var a;"object"===typeof e?e.exports=I:t.BN=I,I.BN=I,I.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:g(8677).Buffer}catch(W){}function o(e,t){var g=e.charCodeAt(t);return g>=48&&g<=57?g-48:g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:void n(!1,"Invalid character in "+e)}function i(e,t,g){var n=o(e,g);return g-1>=t&&(n|=o(e,g-1)<<4),n}function C(e,t,g,r){for(var I=0,a=0,o=Math.min(e.length,g),i=t;i<o;i++){var C=e.charCodeAt(i)-48;I*=r,a=C>=49?C-49+10:C>=17?C-17+10:C,n(C>=0&&a<r,"Invalid character"),I+=a}return I}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(I.isBN=function(e){return e instanceof I||null!==e&&"object"===typeof e&&e.constructor.wordSize===I.wordSize&&Array.isArray(e.words)},I.max=function(e,t){return e.cmp(t)>0?e:t},I.min=function(e,t){return e.cmp(t)<0?e:t},I.prototype._init=function(e,t,g){if("number"===typeof e)return this._initNumber(e,t,g);if("object"===typeof e)return this._initArray(e,t,g);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,g):(this._parseBase(e,t,r),"le"===g&&this._initArray(this.toArray(),t,g)))},I.prototype._initNumber=function(e,t,g){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===g&&this._initArray(this.toArray(),t,g)},I.prototype._initArray=function(e,t,g){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var I,a,o=0;if("be"===g)for(r=e.length-1,I=0;r>=0;r-=3)a=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[I]|=a<<o&67108863,this.words[I+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,I++);else if("le"===g)for(r=0,I=0;r<e.length;r+=3)a=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[I]|=a<<o&67108863,this.words[I+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,I++);return this._strip()},I.prototype._parseHex=function(e,t,g){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,I=0,a=0;if("be"===g)for(n=e.length-1;n>=t;n-=2)r=i(e,t,n)<<I,this.words[a]|=67108863&r,I>=18?(I-=18,a+=1,this.words[a]|=r>>>26):I+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)r=i(e,t,n)<<I,this.words[a]|=67108863&r,I>=18?(I-=18,a+=1,this.words[a]|=r>>>26):I+=8;this._strip()},I.prototype._parseBase=function(e,t,g){this.words=[0],this.length=1;for(var n=0,r=1;r<=67108863;r*=t)n++;n--,r=r/t|0;for(var I=e.length-g,a=I%n,o=Math.min(I,I-a)+g,i=0,l=g;l<o;l+=n)i=C(e,l,l+n,t),this.imuln(r),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==a){var u=1;for(i=C(e,l,e.length,t),l=0;l<a;l++)u*=t;this.imuln(u),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this._strip()},I.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},I.prototype._move=function(e){l(e,this)},I.prototype.clone=function(){var e=new I(null);return this.copy(e),e},I.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},I.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},I.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{I.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(W){I.prototype.inspect=u}else I.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];I.prototype.toString=function(e,t){var g;if(t=0|t||1,16===(e=e||10)||"hex"===e){g="";for(var r=0,I=0,a=0;a<this.length;a++){var o=this.words[a],i=(16777215&(o<<r|I)).toString(16);I=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,a--),g=0!==I||a!==this.length-1?c[6-i.length]+i+g:i+g}for(0!==I&&(g=I.toString(16)+g);g.length%t!==0;)g="0"+g;return 0!==this.negative&&(g="-"+g),g}if(e===(0|e)&&e>=2&&e<=36){var C=s[e],l=A[e];g="";var u=this.clone();for(u.negative=0;!u.isZero();){var d=u.modrn(l).toString(e);g=(u=u.idivn(l)).isZero()?d+g:c[C-d.length]+d+g}for(this.isZero()&&(g="0"+g);g.length%t!==0;)g="0"+g;return 0!==this.negative&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},I.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},I.prototype.toJSON=function(){return this.toString(16,2)},a&&(I.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),I.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function d(e,t,g){g.negative=t.negative^e.negative;var n=e.length+t.length|0;g.length=n,n=n-1|0;var r=0|e.words[0],I=0|t.words[0],a=r*I,o=67108863&a,i=a/67108864|0;g.words[0]=o;for(var C=1;C<n;C++){for(var l=i>>>26,u=67108863&i,c=Math.min(C,t.length-1),s=Math.max(0,C-e.length+1);s<=c;s++){var A=C-s|0;l+=(a=(r=0|e.words[A])*(I=0|t.words[s])+u)/67108864|0,u=67108863&a}g.words[C]=0|u,i=0|l}return 0!==i?g.words[C]=0|i:g.length--,g._strip()}I.prototype.toArrayLike=function(e,t,g){this._strip();var r=this.byteLength(),I=g||Math.max(1,r);n(r<=I,"byte array longer than desired length"),n(I>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,I);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,r),a},I.prototype._toArrayLikeLE=function(e,t){for(var g=0,n=0,r=0,I=0;r<this.length;r++){var a=this.words[r]<<I|n;e[g++]=255&a,g<e.length&&(e[g++]=a>>8&255),g<e.length&&(e[g++]=a>>16&255),6===I?(g<e.length&&(e[g++]=a>>24&255),n=0,I=0):(n=a>>>24,I+=2)}if(g<e.length)for(e[g++]=n;g<e.length;)e[g++]=0},I.prototype._toArrayLikeBE=function(e,t){for(var g=e.length-1,n=0,r=0,I=0;r<this.length;r++){var a=this.words[r]<<I|n;e[g--]=255&a,g>=0&&(e[g--]=a>>8&255),g>=0&&(e[g--]=a>>16&255),6===I?(g>=0&&(e[g--]=a>>24&255),n=0,I=0):(n=a>>>24,I+=2)}if(g>=0)for(e[g--]=n;g>=0;)e[g--]=0},Math.clz32?I.prototype._countBits=function(e){return 32-Math.clz32(e)}:I.prototype._countBits=function(e){var t=e,g=0;return t>=4096&&(g+=13,t>>>=13),t>=64&&(g+=7,t>>>=7),t>=8&&(g+=4,t>>>=4),t>=2&&(g+=2,t>>>=2),g+t},I.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,g=0;return 0===(8191&t)&&(g+=13,t>>>=13),0===(127&t)&&(g+=7,t>>>=7),0===(15&t)&&(g+=4,t>>>=4),0===(3&t)&&(g+=2,t>>>=2),0===(1&t)&&g++,g},I.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},I.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var g=this._zeroBits(this.words[t]);if(e+=g,26!==g)break}return e},I.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},I.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},I.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},I.prototype.isNeg=function(){return 0!==this.negative},I.prototype.neg=function(){return this.clone().ineg()},I.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},I.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},I.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},I.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},I.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},I.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var g=0;g<t.length;g++)this.words[g]=this.words[g]&e.words[g];return this.length=t.length,this._strip()},I.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},I.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},I.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},I.prototype.iuxor=function(e){var t,g;this.length>e.length?(t=this,g=e):(t=e,g=this);for(var n=0;n<g.length;n++)this.words[n]=t.words[n]^g.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},I.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},I.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},I.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},I.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),g=e%26;this._expand(t),g>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return g>0&&(this.words[r]=~this.words[r]&67108863>>26-g),this._strip()},I.prototype.notn=function(e){return this.clone().inotn(e)},I.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var g=e/26|0,r=e%26;return this._expand(g+1),this.words[g]=t?this.words[g]|1<<r:this.words[g]&~(1<<r),this._strip()},I.prototype.iadd=function(e){var t,g,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(g=this,n=e):(g=e,n=this);for(var r=0,I=0;I<n.length;I++)t=(0|g.words[I])+(0|n.words[I])+r,this.words[I]=67108863&t,r=t>>>26;for(;0!==r&&I<g.length;I++)t=(0|g.words[I])+r,this.words[I]=67108863&t,r=t>>>26;if(this.length=g.length,0!==r)this.words[this.length]=r,this.length++;else if(g!==this)for(;I<g.length;I++)this.words[I]=g.words[I];return this},I.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},I.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var g,n,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(g=this,n=e):(g=e,n=this);for(var I=0,a=0;a<n.length;a++)I=(t=(0|g.words[a])-(0|n.words[a])+I)>>26,this.words[a]=67108863&t;for(;0!==I&&a<g.length;a++)I=(t=(0|g.words[a])+I)>>26,this.words[a]=67108863&t;if(0===I&&a<g.length&&g!==this)for(;a<g.length;a++)this.words[a]=g.words[a];return this.length=Math.max(this.length,a),g!==this&&(this.negative=1),this._strip()},I.prototype.sub=function(e){return this.clone().isub(e)};var h=function(e,t,g){var n,r,I,a=e.words,o=t.words,i=g.words,C=0,l=0|a[0],u=8191&l,c=l>>>13,s=0|a[1],A=8191&s,d=s>>>13,h=0|a[2],m=8191&h,b=h>>>13,p=0|a[3],f=8191&p,Z=p>>>13,y=0|a[4],G=8191&y,B=y>>>13,v=0|a[5],k=8191&v,S=v>>>13,W=0|a[6],V=8191&W,w=W>>>13,R=0|a[7],X=8191&R,J=R>>>13,Y=0|a[8],H=8191&Y,N=Y>>>13,F=0|a[9],K=8191&F,x=F>>>13,E=0|o[0],M=8191&E,D=E>>>13,U=0|o[1],z=8191&U,L=U>>>13,Q=0|o[2],T=8191&Q,j=Q>>>13,P=0|o[3],O=8191&P,_=P>>>13,q=0|o[4],$=8191&q,ee=q>>>13,te=0|o[5],ge=8191&te,ne=te>>>13,re=0|o[6],Ie=8191&re,ae=re>>>13,oe=0|o[7],ie=8191&oe,Ce=oe>>>13,le=0|o[8],ue=8191&le,ce=le>>>13,se=0|o[9],Ae=8191&se,de=se>>>13;g.negative=e.negative^t.negative,g.length=19;var he=(C+(n=Math.imul(u,M))|0)+((8191&(r=(r=Math.imul(u,D))+Math.imul(c,M)|0))<<13)|0;C=((I=Math.imul(c,D))+(r>>>13)|0)+(he>>>26)|0,he&=67108863,n=Math.imul(A,M),r=(r=Math.imul(A,D))+Math.imul(d,M)|0,I=Math.imul(d,D);var me=(C+(n=n+Math.imul(u,z)|0)|0)+((8191&(r=(r=r+Math.imul(u,L)|0)+Math.imul(c,z)|0))<<13)|0;C=((I=I+Math.imul(c,L)|0)+(r>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(m,M),r=(r=Math.imul(m,D))+Math.imul(b,M)|0,I=Math.imul(b,D),n=n+Math.imul(A,z)|0,r=(r=r+Math.imul(A,L)|0)+Math.imul(d,z)|0,I=I+Math.imul(d,L)|0;var be=(C+(n=n+Math.imul(u,T)|0)|0)+((8191&(r=(r=r+Math.imul(u,j)|0)+Math.imul(c,T)|0))<<13)|0;C=((I=I+Math.imul(c,j)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(f,M),r=(r=Math.imul(f,D))+Math.imul(Z,M)|0,I=Math.imul(Z,D),n=n+Math.imul(m,z)|0,r=(r=r+Math.imul(m,L)|0)+Math.imul(b,z)|0,I=I+Math.imul(b,L)|0,n=n+Math.imul(A,T)|0,r=(r=r+Math.imul(A,j)|0)+Math.imul(d,T)|0,I=I+Math.imul(d,j)|0;var pe=(C+(n=n+Math.imul(u,O)|0)|0)+((8191&(r=(r=r+Math.imul(u,_)|0)+Math.imul(c,O)|0))<<13)|0;C=((I=I+Math.imul(c,_)|0)+(r>>>13)|0)+(pe>>>26)|0,pe&=67108863,n=Math.imul(G,M),r=(r=Math.imul(G,D))+Math.imul(B,M)|0,I=Math.imul(B,D),n=n+Math.imul(f,z)|0,r=(r=r+Math.imul(f,L)|0)+Math.imul(Z,z)|0,I=I+Math.imul(Z,L)|0,n=n+Math.imul(m,T)|0,r=(r=r+Math.imul(m,j)|0)+Math.imul(b,T)|0,I=I+Math.imul(b,j)|0,n=n+Math.imul(A,O)|0,r=(r=r+Math.imul(A,_)|0)+Math.imul(d,O)|0,I=I+Math.imul(d,_)|0;var fe=(C+(n=n+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(c,$)|0))<<13)|0;C=((I=I+Math.imul(c,ee)|0)+(r>>>13)|0)+(fe>>>26)|0,fe&=67108863,n=Math.imul(k,M),r=(r=Math.imul(k,D))+Math.imul(S,M)|0,I=Math.imul(S,D),n=n+Math.imul(G,z)|0,r=(r=r+Math.imul(G,L)|0)+Math.imul(B,z)|0,I=I+Math.imul(B,L)|0,n=n+Math.imul(f,T)|0,r=(r=r+Math.imul(f,j)|0)+Math.imul(Z,T)|0,I=I+Math.imul(Z,j)|0,n=n+Math.imul(m,O)|0,r=(r=r+Math.imul(m,_)|0)+Math.imul(b,O)|0,I=I+Math.imul(b,_)|0,n=n+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(d,$)|0,I=I+Math.imul(d,ee)|0;var Ze=(C+(n=n+Math.imul(u,ge)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(c,ge)|0))<<13)|0;C=((I=I+Math.imul(c,ne)|0)+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,n=Math.imul(V,M),r=(r=Math.imul(V,D))+Math.imul(w,M)|0,I=Math.imul(w,D),n=n+Math.imul(k,z)|0,r=(r=r+Math.imul(k,L)|0)+Math.imul(S,z)|0,I=I+Math.imul(S,L)|0,n=n+Math.imul(G,T)|0,r=(r=r+Math.imul(G,j)|0)+Math.imul(B,T)|0,I=I+Math.imul(B,j)|0,n=n+Math.imul(f,O)|0,r=(r=r+Math.imul(f,_)|0)+Math.imul(Z,O)|0,I=I+Math.imul(Z,_)|0,n=n+Math.imul(m,$)|0,r=(r=r+Math.imul(m,ee)|0)+Math.imul(b,$)|0,I=I+Math.imul(b,ee)|0,n=n+Math.imul(A,ge)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(d,ge)|0,I=I+Math.imul(d,ne)|0;var ye=(C+(n=n+Math.imul(u,Ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,ae)|0)+Math.imul(c,Ie)|0))<<13)|0;C=((I=I+Math.imul(c,ae)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(X,M),r=(r=Math.imul(X,D))+Math.imul(J,M)|0,I=Math.imul(J,D),n=n+Math.imul(V,z)|0,r=(r=r+Math.imul(V,L)|0)+Math.imul(w,z)|0,I=I+Math.imul(w,L)|0,n=n+Math.imul(k,T)|0,r=(r=r+Math.imul(k,j)|0)+Math.imul(S,T)|0,I=I+Math.imul(S,j)|0,n=n+Math.imul(G,O)|0,r=(r=r+Math.imul(G,_)|0)+Math.imul(B,O)|0,I=I+Math.imul(B,_)|0,n=n+Math.imul(f,$)|0,r=(r=r+Math.imul(f,ee)|0)+Math.imul(Z,$)|0,I=I+Math.imul(Z,ee)|0,n=n+Math.imul(m,ge)|0,r=(r=r+Math.imul(m,ne)|0)+Math.imul(b,ge)|0,I=I+Math.imul(b,ne)|0,n=n+Math.imul(A,Ie)|0,r=(r=r+Math.imul(A,ae)|0)+Math.imul(d,Ie)|0,I=I+Math.imul(d,ae)|0;var Ge=(C+(n=n+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,Ce)|0)+Math.imul(c,ie)|0))<<13)|0;C=((I=I+Math.imul(c,Ce)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,n=Math.imul(H,M),r=(r=Math.imul(H,D))+Math.imul(N,M)|0,I=Math.imul(N,D),n=n+Math.imul(X,z)|0,r=(r=r+Math.imul(X,L)|0)+Math.imul(J,z)|0,I=I+Math.imul(J,L)|0,n=n+Math.imul(V,T)|0,r=(r=r+Math.imul(V,j)|0)+Math.imul(w,T)|0,I=I+Math.imul(w,j)|0,n=n+Math.imul(k,O)|0,r=(r=r+Math.imul(k,_)|0)+Math.imul(S,O)|0,I=I+Math.imul(S,_)|0,n=n+Math.imul(G,$)|0,r=(r=r+Math.imul(G,ee)|0)+Math.imul(B,$)|0,I=I+Math.imul(B,ee)|0,n=n+Math.imul(f,ge)|0,r=(r=r+Math.imul(f,ne)|0)+Math.imul(Z,ge)|0,I=I+Math.imul(Z,ne)|0,n=n+Math.imul(m,Ie)|0,r=(r=r+Math.imul(m,ae)|0)+Math.imul(b,Ie)|0,I=I+Math.imul(b,ae)|0,n=n+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,Ce)|0)+Math.imul(d,ie)|0,I=I+Math.imul(d,Ce)|0;var Be=(C+(n=n+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(c,ue)|0))<<13)|0;C=((I=I+Math.imul(c,ce)|0)+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(K,M),r=(r=Math.imul(K,D))+Math.imul(x,M)|0,I=Math.imul(x,D),n=n+Math.imul(H,z)|0,r=(r=r+Math.imul(H,L)|0)+Math.imul(N,z)|0,I=I+Math.imul(N,L)|0,n=n+Math.imul(X,T)|0,r=(r=r+Math.imul(X,j)|0)+Math.imul(J,T)|0,I=I+Math.imul(J,j)|0,n=n+Math.imul(V,O)|0,r=(r=r+Math.imul(V,_)|0)+Math.imul(w,O)|0,I=I+Math.imul(w,_)|0,n=n+Math.imul(k,$)|0,r=(r=r+Math.imul(k,ee)|0)+Math.imul(S,$)|0,I=I+Math.imul(S,ee)|0,n=n+Math.imul(G,ge)|0,r=(r=r+Math.imul(G,ne)|0)+Math.imul(B,ge)|0,I=I+Math.imul(B,ne)|0,n=n+Math.imul(f,Ie)|0,r=(r=r+Math.imul(f,ae)|0)+Math.imul(Z,Ie)|0,I=I+Math.imul(Z,ae)|0,n=n+Math.imul(m,ie)|0,r=(r=r+Math.imul(m,Ce)|0)+Math.imul(b,ie)|0,I=I+Math.imul(b,Ce)|0,n=n+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(d,ue)|0,I=I+Math.imul(d,ce)|0;var ve=(C+(n=n+Math.imul(u,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,de)|0)+Math.imul(c,Ae)|0))<<13)|0;C=((I=I+Math.imul(c,de)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(K,z),r=(r=Math.imul(K,L))+Math.imul(x,z)|0,I=Math.imul(x,L),n=n+Math.imul(H,T)|0,r=(r=r+Math.imul(H,j)|0)+Math.imul(N,T)|0,I=I+Math.imul(N,j)|0,n=n+Math.imul(X,O)|0,r=(r=r+Math.imul(X,_)|0)+Math.imul(J,O)|0,I=I+Math.imul(J,_)|0,n=n+Math.imul(V,$)|0,r=(r=r+Math.imul(V,ee)|0)+Math.imul(w,$)|0,I=I+Math.imul(w,ee)|0,n=n+Math.imul(k,ge)|0,r=(r=r+Math.imul(k,ne)|0)+Math.imul(S,ge)|0,I=I+Math.imul(S,ne)|0,n=n+Math.imul(G,Ie)|0,r=(r=r+Math.imul(G,ae)|0)+Math.imul(B,Ie)|0,I=I+Math.imul(B,ae)|0,n=n+Math.imul(f,ie)|0,r=(r=r+Math.imul(f,Ce)|0)+Math.imul(Z,ie)|0,I=I+Math.imul(Z,Ce)|0,n=n+Math.imul(m,ue)|0,r=(r=r+Math.imul(m,ce)|0)+Math.imul(b,ue)|0,I=I+Math.imul(b,ce)|0;var ke=(C+(n=n+Math.imul(A,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(A,de)|0)+Math.imul(d,Ae)|0))<<13)|0;C=((I=I+Math.imul(d,de)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(K,T),r=(r=Math.imul(K,j))+Math.imul(x,T)|0,I=Math.imul(x,j),n=n+Math.imul(H,O)|0,r=(r=r+Math.imul(H,_)|0)+Math.imul(N,O)|0,I=I+Math.imul(N,_)|0,n=n+Math.imul(X,$)|0,r=(r=r+Math.imul(X,ee)|0)+Math.imul(J,$)|0,I=I+Math.imul(J,ee)|0,n=n+Math.imul(V,ge)|0,r=(r=r+Math.imul(V,ne)|0)+Math.imul(w,ge)|0,I=I+Math.imul(w,ne)|0,n=n+Math.imul(k,Ie)|0,r=(r=r+Math.imul(k,ae)|0)+Math.imul(S,Ie)|0,I=I+Math.imul(S,ae)|0,n=n+Math.imul(G,ie)|0,r=(r=r+Math.imul(G,Ce)|0)+Math.imul(B,ie)|0,I=I+Math.imul(B,Ce)|0,n=n+Math.imul(f,ue)|0,r=(r=r+Math.imul(f,ce)|0)+Math.imul(Z,ue)|0,I=I+Math.imul(Z,ce)|0;var Se=(C+(n=n+Math.imul(m,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(m,de)|0)+Math.imul(b,Ae)|0))<<13)|0;C=((I=I+Math.imul(b,de)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(K,O),r=(r=Math.imul(K,_))+Math.imul(x,O)|0,I=Math.imul(x,_),n=n+Math.imul(H,$)|0,r=(r=r+Math.imul(H,ee)|0)+Math.imul(N,$)|0,I=I+Math.imul(N,ee)|0,n=n+Math.imul(X,ge)|0,r=(r=r+Math.imul(X,ne)|0)+Math.imul(J,ge)|0,I=I+Math.imul(J,ne)|0,n=n+Math.imul(V,Ie)|0,r=(r=r+Math.imul(V,ae)|0)+Math.imul(w,Ie)|0,I=I+Math.imul(w,ae)|0,n=n+Math.imul(k,ie)|0,r=(r=r+Math.imul(k,Ce)|0)+Math.imul(S,ie)|0,I=I+Math.imul(S,Ce)|0,n=n+Math.imul(G,ue)|0,r=(r=r+Math.imul(G,ce)|0)+Math.imul(B,ue)|0,I=I+Math.imul(B,ce)|0;var We=(C+(n=n+Math.imul(f,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(f,de)|0)+Math.imul(Z,Ae)|0))<<13)|0;C=((I=I+Math.imul(Z,de)|0)+(r>>>13)|0)+(We>>>26)|0,We&=67108863,n=Math.imul(K,$),r=(r=Math.imul(K,ee))+Math.imul(x,$)|0,I=Math.imul(x,ee),n=n+Math.imul(H,ge)|0,r=(r=r+Math.imul(H,ne)|0)+Math.imul(N,ge)|0,I=I+Math.imul(N,ne)|0,n=n+Math.imul(X,Ie)|0,r=(r=r+Math.imul(X,ae)|0)+Math.imul(J,Ie)|0,I=I+Math.imul(J,ae)|0,n=n+Math.imul(V,ie)|0,r=(r=r+Math.imul(V,Ce)|0)+Math.imul(w,ie)|0,I=I+Math.imul(w,Ce)|0,n=n+Math.imul(k,ue)|0,r=(r=r+Math.imul(k,ce)|0)+Math.imul(S,ue)|0,I=I+Math.imul(S,ce)|0;var Ve=(C+(n=n+Math.imul(G,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(G,de)|0)+Math.imul(B,Ae)|0))<<13)|0;C=((I=I+Math.imul(B,de)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,n=Math.imul(K,ge),r=(r=Math.imul(K,ne))+Math.imul(x,ge)|0,I=Math.imul(x,ne),n=n+Math.imul(H,Ie)|0,r=(r=r+Math.imul(H,ae)|0)+Math.imul(N,Ie)|0,I=I+Math.imul(N,ae)|0,n=n+Math.imul(X,ie)|0,r=(r=r+Math.imul(X,Ce)|0)+Math.imul(J,ie)|0,I=I+Math.imul(J,Ce)|0,n=n+Math.imul(V,ue)|0,r=(r=r+Math.imul(V,ce)|0)+Math.imul(w,ue)|0,I=I+Math.imul(w,ce)|0;var we=(C+(n=n+Math.imul(k,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(k,de)|0)+Math.imul(S,Ae)|0))<<13)|0;C=((I=I+Math.imul(S,de)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(K,Ie),r=(r=Math.imul(K,ae))+Math.imul(x,Ie)|0,I=Math.imul(x,ae),n=n+Math.imul(H,ie)|0,r=(r=r+Math.imul(H,Ce)|0)+Math.imul(N,ie)|0,I=I+Math.imul(N,Ce)|0,n=n+Math.imul(X,ue)|0,r=(r=r+Math.imul(X,ce)|0)+Math.imul(J,ue)|0,I=I+Math.imul(J,ce)|0;var Re=(C+(n=n+Math.imul(V,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(V,de)|0)+Math.imul(w,Ae)|0))<<13)|0;C=((I=I+Math.imul(w,de)|0)+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(K,ie),r=(r=Math.imul(K,Ce))+Math.imul(x,ie)|0,I=Math.imul(x,Ce),n=n+Math.imul(H,ue)|0,r=(r=r+Math.imul(H,ce)|0)+Math.imul(N,ue)|0,I=I+Math.imul(N,ce)|0;var Xe=(C+(n=n+Math.imul(X,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(X,de)|0)+Math.imul(J,Ae)|0))<<13)|0;C=((I=I+Math.imul(J,de)|0)+(r>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,n=Math.imul(K,ue),r=(r=Math.imul(K,ce))+Math.imul(x,ue)|0,I=Math.imul(x,ce);var Je=(C+(n=n+Math.imul(H,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(H,de)|0)+Math.imul(N,Ae)|0))<<13)|0;C=((I=I+Math.imul(N,de)|0)+(r>>>13)|0)+(Je>>>26)|0,Je&=67108863;var Ye=(C+(n=Math.imul(K,Ae))|0)+((8191&(r=(r=Math.imul(K,de))+Math.imul(x,Ae)|0))<<13)|0;return C=((I=Math.imul(x,de))+(r>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,i[0]=he,i[1]=me,i[2]=be,i[3]=pe,i[4]=fe,i[5]=Ze,i[6]=ye,i[7]=Ge,i[8]=Be,i[9]=ve,i[10]=ke,i[11]=Se,i[12]=We,i[13]=Ve,i[14]=we,i[15]=Re,i[16]=Xe,i[17]=Je,i[18]=Ye,0!==C&&(i[19]=C,g.length++),g};function m(e,t,g){g.negative=t.negative^e.negative,g.length=e.length+t.length;for(var n=0,r=0,I=0;I<g.length-1;I++){var a=r;r=0;for(var o=67108863&n,i=Math.min(I,t.length-1),C=Math.max(0,I-e.length+1);C<=i;C++){var l=I-C,u=(0|e.words[l])*(0|t.words[C]),c=67108863&u;o=67108863&(c=c+o|0),r+=(a=(a=a+(u/67108864|0)|0)+(c>>>26)|0)>>>26,a&=67108863}g.words[I]=o,n=a,a=r}return 0!==n?g.words[I]=n:g.length--,g._strip()}function b(e,t,g){return m(e,t,g)}function p(e,t){this.x=e,this.y=t}Math.imul||(h=d),I.prototype.mulTo=function(e,t){var g=this.length+e.length;return 10===this.length&&10===e.length?h(this,e,t):g<63?d(this,e,t):g<1024?m(this,e,t):b(this,e,t)},p.prototype.makeRBT=function(e){for(var t=new Array(e),g=I.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,g,e);return t},p.prototype.revBin=function(e,t,g){if(0===e||e===g-1)return e;for(var n=0,r=0;r<t;r++)n|=(1&e)<<t-r-1,e>>=1;return n},p.prototype.permute=function(e,t,g,n,r,I){for(var a=0;a<I;a++)n[a]=t[e[a]],r[a]=g[e[a]]},p.prototype.transform=function(e,t,g,n,r,I){this.permute(I,e,t,g,n,r);for(var a=1;a<r;a<<=1)for(var o=a<<1,i=Math.cos(2*Math.PI/o),C=Math.sin(2*Math.PI/o),l=0;l<r;l+=o)for(var u=i,c=C,s=0;s<a;s++){var A=g[l+s],d=n[l+s],h=g[l+s+a],m=n[l+s+a],b=u*h-c*m;m=u*m+c*h,h=b,g[l+s]=A+h,n[l+s]=d+m,g[l+s+a]=A-h,n[l+s+a]=d-m,s!==o&&(b=i*u-C*c,c=i*c+C*u,u=b)}},p.prototype.guessLen13b=function(e,t){var g=1|Math.max(t,e),n=1&g,r=0;for(g=g/2|0;g;g>>>=1)r++;return 1<<r+1+n},p.prototype.conjugate=function(e,t,g){if(!(g<=1))for(var n=0;n<g/2;n++){var r=e[n];e[n]=e[g-n-1],e[g-n-1]=r,r=t[n],t[n]=-t[g-n-1],t[g-n-1]=-r}},p.prototype.normalize13b=function(e,t){for(var g=0,n=0;n<t/2;n++){var r=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+g;e[n]=67108863&r,g=r<67108864?0:r/67108864|0}return e},p.prototype.convert13b=function(e,t,g,r){for(var I=0,a=0;a<t;a++)I+=0|e[a],g[2*a]=8191&I,I>>>=13,g[2*a+1]=8191&I,I>>>=13;for(a=2*t;a<r;++a)g[a]=0;n(0===I),n(0===(-8192&I))},p.prototype.stub=function(e){for(var t=new Array(e),g=0;g<e;g++)t[g]=0;return t},p.prototype.mulp=function(e,t,g){var n=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(n),I=this.stub(n),a=new Array(n),o=new Array(n),i=new Array(n),C=new Array(n),l=new Array(n),u=new Array(n),c=g.words;c.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,C,n),this.transform(a,I,o,i,n,r),this.transform(C,I,l,u,n,r);for(var s=0;s<n;s++){var A=o[s]*l[s]-i[s]*u[s];i[s]=o[s]*u[s]+i[s]*l[s],o[s]=A}return this.conjugate(o,i,n),this.transform(o,i,c,I,n,r),this.conjugate(c,I,n),this.normalize13b(c,n),g.negative=e.negative^t.negative,g.length=e.length+t.length,g._strip()},I.prototype.mul=function(e){var t=new I(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},I.prototype.mulf=function(e){var t=new I(null);return t.words=new Array(this.length+e.length),b(this,e,t)},I.prototype.imul=function(e){return this.clone().mulTo(e,this)},I.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var g=0,r=0;r<this.length;r++){var I=(0|this.words[r])*e,a=(67108863&I)+(67108863&g);g>>=26,g+=I/67108864|0,g+=a>>>26,this.words[r]=67108863&a}return 0!==g&&(this.words[r]=g,this.length++),t?this.ineg():this},I.prototype.muln=function(e){return this.clone().imuln(e)},I.prototype.sqr=function(){return this.mul(this)},I.prototype.isqr=function(){return this.imul(this.clone())},I.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),g=0;g<t.length;g++){var n=g/26|0,r=g%26;t[g]=e.words[n]>>>r&1}return t}(e);if(0===t.length)return new I(1);for(var g=this,n=0;n<t.length&&0===t[n];n++,g=g.sqr());if(++n<t.length)for(var r=g.sqr();n<t.length;n++,r=r.sqr())0!==t[n]&&(g=g.mul(r));return g},I.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,g=e%26,r=(e-g)/26,I=67108863>>>26-g<<26-g;if(0!==g){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&I,i=(0|this.words[t])-o<<g;this.words[t]=i|a,a=o>>>26-g}a&&(this.words[t]=a,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},I.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},I.prototype.iushrn=function(e,t,g){var r;n("number"===typeof e&&e>=0),r=t?(t-t%26)/26:0;var I=e%26,a=Math.min((e-I)/26,this.length),o=67108863^67108863>>>I<<I,i=g;if(r-=a,r=Math.max(0,r),i){for(var C=0;C<a;C++)i.words[C]=this.words[C];i.length=a}if(0===a);else if(this.length>a)for(this.length-=a,C=0;C<this.length;C++)this.words[C]=this.words[C+a];else this.words[0]=0,this.length=1;var l=0;for(C=this.length-1;C>=0&&(0!==l||C>=r);C--){var u=0|this.words[C];this.words[C]=l<<26-I|u>>>I,l=u&o}return i&&0!==l&&(i.words[i.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},I.prototype.ishrn=function(e,t,g){return n(0===this.negative),this.iushrn(e,t,g)},I.prototype.shln=function(e){return this.clone().ishln(e)},I.prototype.ushln=function(e){return this.clone().iushln(e)},I.prototype.shrn=function(e){return this.clone().ishrn(e)},I.prototype.ushrn=function(e){return this.clone().iushrn(e)},I.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,g=(e-t)/26,r=1<<t;return!(this.length<=g)&&!!(this.words[g]&r)},I.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,g=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=g)return this;if(0!==t&&g++,this.length=Math.min(g,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},I.prototype.maskn=function(e){return this.clone().imaskn(e)},I.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},I.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},I.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},I.prototype.addn=function(e){return this.clone().iaddn(e)},I.prototype.subn=function(e){return this.clone().isubn(e)},I.prototype.iabs=function(){return this.negative=0,this},I.prototype.abs=function(){return this.clone().iabs()},I.prototype._ishlnsubmul=function(e,t,g){var r,I,a=e.length+g;this._expand(a);var o=0;for(r=0;r<e.length;r++){I=(0|this.words[r+g])+o;var i=(0|e.words[r])*t;o=((I-=67108863&i)>>26)-(i/67108864|0),this.words[r+g]=67108863&I}for(;r<this.length-g;r++)o=(I=(0|this.words[r+g])+o)>>26,this.words[r+g]=67108863&I;if(0===o)return this._strip();for(n(-1===o),o=0,r=0;r<this.length;r++)o=(I=-(0|this.words[r])+o)>>26,this.words[r]=67108863&I;return this.negative=1,this._strip()},I.prototype._wordDiv=function(e,t){var g=(this.length,e.length),n=this.clone(),r=e,a=0|r.words[r.length-1];0!==(g=26-this._countBits(a))&&(r=r.ushln(g),n.iushln(g),a=0|r.words[r.length-1]);var o,i=n.length-r.length;if("mod"!==t){(o=new I(null)).length=i+1,o.words=new Array(o.length);for(var C=0;C<o.length;C++)o.words[C]=0}var l=n.clone()._ishlnsubmul(r,1,i);0===l.negative&&(n=l,o&&(o.words[i]=1));for(var u=i-1;u>=0;u--){var c=67108864*(0|n.words[r.length+u])+(0|n.words[r.length+u-1]);for(c=Math.min(c/a|0,67108863),n._ishlnsubmul(r,c,u);0!==n.negative;)c--,n.negative=0,n._ishlnsubmul(r,1,u),n.isZero()||(n.negative^=1);o&&(o.words[u]=c)}return o&&o._strip(),n._strip(),"div"!==t&&0!==g&&n.iushrn(g),{div:o||null,mod:n}},I.prototype.divmod=function(e,t,g){return n(!e.isZero()),this.isZero()?{div:new I(0),mod:new I(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(a=o.mod.neg(),g&&0!==a.negative&&a.iadd(e)),{div:r,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),g&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new I(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new I(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new I(this.modrn(e.words[0]))}:this._wordDiv(e,t);var r,a,o},I.prototype.div=function(e){return this.divmod(e,"div",!1).div},I.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},I.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},I.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var g=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),r=e.andln(1),I=g.cmp(n);return I<0||1===r&&0===I?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},I.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var g=(1<<26)%e,r=0,I=this.length-1;I>=0;I--)r=(g*r+(0|this.words[I]))%e;return t?-r:r},I.prototype.modn=function(e){return this.modrn(e)},I.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var g=0,r=this.length-1;r>=0;r--){var I=(0|this.words[r])+67108864*g;this.words[r]=I/e|0,g=I%e}return this._strip(),t?this.ineg():this},I.prototype.divn=function(e){return this.clone().idivn(e)},I.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,g=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new I(1),a=new I(0),o=new I(0),i=new I(1),C=0;t.isEven()&&g.isEven();)t.iushrn(1),g.iushrn(1),++C;for(var l=g.clone(),u=t.clone();!t.isZero();){for(var c=0,s=1;0===(t.words[0]&s)&&c<26;++c,s<<=1);if(c>0)for(t.iushrn(c);c-- >0;)(r.isOdd()||a.isOdd())&&(r.iadd(l),a.isub(u)),r.iushrn(1),a.iushrn(1);for(var A=0,d=1;0===(g.words[0]&d)&&A<26;++A,d<<=1);if(A>0)for(g.iushrn(A);A-- >0;)(o.isOdd()||i.isOdd())&&(o.iadd(l),i.isub(u)),o.iushrn(1),i.iushrn(1);t.cmp(g)>=0?(t.isub(g),r.isub(o),a.isub(i)):(g.isub(t),o.isub(r),i.isub(a))}return{a:o,b:i,gcd:g.iushln(C)}},I.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,g=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,a=new I(1),o=new I(0),i=g.clone();t.cmpn(1)>0&&g.cmpn(1)>0;){for(var C=0,l=1;0===(t.words[0]&l)&&C<26;++C,l<<=1);if(C>0)for(t.iushrn(C);C-- >0;)a.isOdd()&&a.iadd(i),a.iushrn(1);for(var u=0,c=1;0===(g.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(g.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(i),o.iushrn(1);t.cmp(g)>=0?(t.isub(g),a.isub(o)):(g.isub(t),o.isub(a))}return(r=0===t.cmpn(1)?a:o).cmpn(0)<0&&r.iadd(e),r},I.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),g=e.clone();t.negative=0,g.negative=0;for(var n=0;t.isEven()&&g.isEven();n++)t.iushrn(1),g.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;g.isEven();)g.iushrn(1);var r=t.cmp(g);if(r<0){var I=t;t=g,g=I}else if(0===r||0===g.cmpn(1))break;t.isub(g)}return g.iushln(n)},I.prototype.invm=function(e){return this.egcd(e).a.umod(e)},I.prototype.isEven=function(){return 0===(1&this.words[0])},I.prototype.isOdd=function(){return 1===(1&this.words[0])},I.prototype.andln=function(e){return this.words[0]&e},I.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,g=(e-t)/26,r=1<<t;if(this.length<=g)return this._expand(g+1),this.words[g]|=r,this;for(var I=r,a=g;0!==I&&a<this.length;a++){var o=0|this.words[a];I=(o+=I)>>>26,o&=67108863,this.words[a]=o}return 0!==I&&(this.words[a]=I,this.length++),this},I.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},I.prototype.cmpn=function(e){var t,g=e<0;if(0!==this.negative&&!g)return-1;if(0===this.negative&&g)return 1;if(this._strip(),this.length>1)t=1;else{g&&(e=-e),n(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},I.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},I.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,g=this.length-1;g>=0;g--){var n=0|this.words[g],r=0|e.words[g];if(n!==r){n<r?t=-1:n>r&&(t=1);break}}return t},I.prototype.gtn=function(e){return 1===this.cmpn(e)},I.prototype.gt=function(e){return 1===this.cmp(e)},I.prototype.gten=function(e){return this.cmpn(e)>=0},I.prototype.gte=function(e){return this.cmp(e)>=0},I.prototype.ltn=function(e){return-1===this.cmpn(e)},I.prototype.lt=function(e){return-1===this.cmp(e)},I.prototype.lten=function(e){return this.cmpn(e)<=0},I.prototype.lte=function(e){return this.cmp(e)<=0},I.prototype.eqn=function(e){return 0===this.cmpn(e)},I.prototype.eq=function(e){return 0===this.cmp(e)},I.red=function(e){return new k(e)},I.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},I.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},I.prototype._forceRed=function(e){return this.red=e,this},I.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},I.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},I.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},I.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},I.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},I.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},I.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},I.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},I.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},I.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},I.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},I.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},I.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},I.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var f={k256:null,p224:null,p192:null,p25519:null};function Z(e,t){this.name=e,this.p=new I(t,16),this.n=this.p.bitLength(),this.k=new I(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function G(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function B(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"===typeof e){var t=I._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new I(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Z.prototype._tmp=function(){var e=new I(null);return e.words=new Array(Math.ceil(this.n/13)),e},Z.prototype.ireduce=function(e){var t,g=e;do{this.split(g,this.tmp),t=(g=(g=this.imulK(g)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:g.ucmp(this.p);return 0===n?(g.words[0]=0,g.length=1):n>0?g.isub(this.p):void 0!==g.strip?g.strip():g._strip(),g},Z.prototype.split=function(e,t){e.iushrn(this.n,0,t)},Z.prototype.imulK=function(e){return e.imul(this.k)},r(y,Z),y.prototype.split=function(e,t){for(var g=4194303,n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var I=e.words[9];for(t.words[t.length++]=I&g,r=10;r<e.length;r++){var a=0|e.words[r];e.words[r-10]=(a&g)<<4|I>>>22,I=a}I>>>=22,e.words[r-10]=I,0===I&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,g=0;g<e.length;g++){var n=0|e.words[g];t+=977*n,e.words[g]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(G,Z),r(B,Z),r(v,Z),v.prototype.imulK=function(e){for(var t=0,g=0;g<e.length;g++){var n=19*(0|e.words[g])+t,r=67108863&n;n>>>=26,e.words[g]=r,t=n}return 0!==t&&(e.words[e.length++]=t),e},I._prime=function(e){if(f[e])return f[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new G;else if("p192"===e)t=new B;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return f[e]=t,t},k.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var g=e.add(t);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var g=e.iadd(t);return g.cmp(this.m)>=0&&g.isub(this.m),g},k.prototype.sub=function(e,t){this._verify2(e,t);var g=e.sub(t);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var g=e.isub(t);return g.cmpn(0)<0&&g.iadd(this.m),g},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var g=this.m.add(new I(1)).iushrn(2);return this.pow(e,g)}for(var r=this.m.subn(1),a=0;!r.isZero()&&0===r.andln(1);)a++,r.iushrn(1);n(!r.isZero());var o=new I(1).toRed(this),i=o.redNeg(),C=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new I(2*l*l).toRed(this);0!==this.pow(l,C).cmp(i);)l.redIAdd(i);for(var u=this.pow(l,r),c=this.pow(e,r.addn(1).iushrn(1)),s=this.pow(e,r),A=a;0!==s.cmp(o);){for(var d=s,h=0;0!==d.cmp(o);h++)d=d.redSqr();n(h<A);var m=this.pow(u,new I(1).iushln(A-h-1));c=c.redMul(m),u=m.redSqr(),s=s.redMul(u),A=h}return c},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new I(1).toRed(this);if(0===t.cmpn(1))return e.clone();var g=new Array(16);g[0]=new I(1).toRed(this),g[1]=e;for(var n=2;n<g.length;n++)g[n]=this.mul(g[n-1],e);var r=g[0],a=0,o=0,i=t.bitLength()%26;for(0===i&&(i=26),n=t.length-1;n>=0;n--){for(var C=t.words[n],l=i-1;l>=0;l--){var u=C>>l&1;r!==g[0]&&(r=this.sqr(r)),0!==u||0!==a?(a<<=1,a|=u,(4===++o||0===n&&0===l)&&(r=this.mul(r,g[a]),o=0,a=0)):o=0}i=26}return r},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},I.mont=function(e){return new S(e)},r(S,k),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var g=e.imul(t),n=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=g.isub(n).iushrn(this.shift),I=r;return r.cmp(this.m)>=0?I=r.isub(this.m):r.cmpn(0)<0&&(I=r.iadd(this.m)),I._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new I(0)._forceRed(this);var g=e.mul(t),n=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=g.isub(n).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=g.nmd(e),this)},7304:function(e,t,g){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var g=function(){};g.prototype=t.prototype,e.prototype=new g,e.prototype.constructor=e}function I(e,t,g){if(I.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(g=t,t=10),this._init(e||0,t||10,g||"be"))}var a;"object"===typeof e?e.exports=I:t.BN=I,I.BN=I,I.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:g(2808).Buffer}catch(W){}function o(e,t){var g=e.charCodeAt(t);return g>=48&&g<=57?g-48:g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:void n(!1,"Invalid character in "+e)}function i(e,t,g){var n=o(e,g);return g-1>=t&&(n|=o(e,g-1)<<4),n}function C(e,t,g,r){for(var I=0,a=0,o=Math.min(e.length,g),i=t;i<o;i++){var C=e.charCodeAt(i)-48;I*=r,a=C>=49?C-49+10:C>=17?C-17+10:C,n(C>=0&&a<r,"Invalid character"),I+=a}return I}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(I.isBN=function(e){return e instanceof I||null!==e&&"object"===typeof e&&e.constructor.wordSize===I.wordSize&&Array.isArray(e.words)},I.max=function(e,t){return e.cmp(t)>0?e:t},I.min=function(e,t){return e.cmp(t)<0?e:t},I.prototype._init=function(e,t,g){if("number"===typeof e)return this._initNumber(e,t,g);if("object"===typeof e)return this._initArray(e,t,g);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,g):(this._parseBase(e,t,r),"le"===g&&this._initArray(this.toArray(),t,g)))},I.prototype._initNumber=function(e,t,g){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===g&&this._initArray(this.toArray(),t,g)},I.prototype._initArray=function(e,t,g){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var I,a,o=0;if("be"===g)for(r=e.length-1,I=0;r>=0;r-=3)a=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[I]|=a<<o&67108863,this.words[I+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,I++);else if("le"===g)for(r=0,I=0;r<e.length;r+=3)a=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[I]|=a<<o&67108863,this.words[I+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,I++);return this._strip()},I.prototype._parseHex=function(e,t,g){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,I=0,a=0;if("be"===g)for(n=e.length-1;n>=t;n-=2)r=i(e,t,n)<<I,this.words[a]|=67108863&r,I>=18?(I-=18,a+=1,this.words[a]|=r>>>26):I+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)r=i(e,t,n)<<I,this.words[a]|=67108863&r,I>=18?(I-=18,a+=1,this.words[a]|=r>>>26):I+=8;this._strip()},I.prototype._parseBase=function(e,t,g){this.words=[0],this.length=1;for(var n=0,r=1;r<=67108863;r*=t)n++;n--,r=r/t|0;for(var I=e.length-g,a=I%n,o=Math.min(I,I-a)+g,i=0,l=g;l<o;l+=n)i=C(e,l,l+n,t),this.imuln(r),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==a){var u=1;for(i=C(e,l,e.length,t),l=0;l<a;l++)u*=t;this.imuln(u),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this._strip()},I.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},I.prototype._move=function(e){l(e,this)},I.prototype.clone=function(){var e=new I(null);return this.copy(e),e},I.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},I.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},I.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{I.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(W){I.prototype.inspect=u}else I.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];I.prototype.toString=function(e,t){var g;if(t=0|t||1,16===(e=e||10)||"hex"===e){g="";for(var r=0,I=0,a=0;a<this.length;a++){var o=this.words[a],i=(16777215&(o<<r|I)).toString(16);I=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,a--),g=0!==I||a!==this.length-1?c[6-i.length]+i+g:i+g}for(0!==I&&(g=I.toString(16)+g);g.length%t!==0;)g="0"+g;return 0!==this.negative&&(g="-"+g),g}if(e===(0|e)&&e>=2&&e<=36){var C=s[e],l=A[e];g="";var u=this.clone();for(u.negative=0;!u.isZero();){var d=u.modrn(l).toString(e);g=(u=u.idivn(l)).isZero()?d+g:c[C-d.length]+d+g}for(this.isZero()&&(g="0"+g);g.length%t!==0;)g="0"+g;return 0!==this.negative&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},I.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},I.prototype.toJSON=function(){return this.toString(16,2)},a&&(I.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),I.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function d(e,t,g){g.negative=t.negative^e.negative;var n=e.length+t.length|0;g.length=n,n=n-1|0;var r=0|e.words[0],I=0|t.words[0],a=r*I,o=67108863&a,i=a/67108864|0;g.words[0]=o;for(var C=1;C<n;C++){for(var l=i>>>26,u=67108863&i,c=Math.min(C,t.length-1),s=Math.max(0,C-e.length+1);s<=c;s++){var A=C-s|0;l+=(a=(r=0|e.words[A])*(I=0|t.words[s])+u)/67108864|0,u=67108863&a}g.words[C]=0|u,i=0|l}return 0!==i?g.words[C]=0|i:g.length--,g._strip()}I.prototype.toArrayLike=function(e,t,g){this._strip();var r=this.byteLength(),I=g||Math.max(1,r);n(r<=I,"byte array longer than desired length"),n(I>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,I);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,r),a},I.prototype._toArrayLikeLE=function(e,t){for(var g=0,n=0,r=0,I=0;r<this.length;r++){var a=this.words[r]<<I|n;e[g++]=255&a,g<e.length&&(e[g++]=a>>8&255),g<e.length&&(e[g++]=a>>16&255),6===I?(g<e.length&&(e[g++]=a>>24&255),n=0,I=0):(n=a>>>24,I+=2)}if(g<e.length)for(e[g++]=n;g<e.length;)e[g++]=0},I.prototype._toArrayLikeBE=function(e,t){for(var g=e.length-1,n=0,r=0,I=0;r<this.length;r++){var a=this.words[r]<<I|n;e[g--]=255&a,g>=0&&(e[g--]=a>>8&255),g>=0&&(e[g--]=a>>16&255),6===I?(g>=0&&(e[g--]=a>>24&255),n=0,I=0):(n=a>>>24,I+=2)}if(g>=0)for(e[g--]=n;g>=0;)e[g--]=0},Math.clz32?I.prototype._countBits=function(e){return 32-Math.clz32(e)}:I.prototype._countBits=function(e){var t=e,g=0;return t>=4096&&(g+=13,t>>>=13),t>=64&&(g+=7,t>>>=7),t>=8&&(g+=4,t>>>=4),t>=2&&(g+=2,t>>>=2),g+t},I.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,g=0;return 0===(8191&t)&&(g+=13,t>>>=13),0===(127&t)&&(g+=7,t>>>=7),0===(15&t)&&(g+=4,t>>>=4),0===(3&t)&&(g+=2,t>>>=2),0===(1&t)&&g++,g},I.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},I.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var g=this._zeroBits(this.words[t]);if(e+=g,26!==g)break}return e},I.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},I.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},I.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},I.prototype.isNeg=function(){return 0!==this.negative},I.prototype.neg=function(){return this.clone().ineg()},I.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},I.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},I.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},I.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},I.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},I.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var g=0;g<t.length;g++)this.words[g]=this.words[g]&e.words[g];return this.length=t.length,this._strip()},I.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},I.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},I.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},I.prototype.iuxor=function(e){var t,g;this.length>e.length?(t=this,g=e):(t=e,g=this);for(var n=0;n<g.length;n++)this.words[n]=t.words[n]^g.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},I.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},I.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},I.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},I.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),g=e%26;this._expand(t),g>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return g>0&&(this.words[r]=~this.words[r]&67108863>>26-g),this._strip()},I.prototype.notn=function(e){return this.clone().inotn(e)},I.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var g=e/26|0,r=e%26;return this._expand(g+1),this.words[g]=t?this.words[g]|1<<r:this.words[g]&~(1<<r),this._strip()},I.prototype.iadd=function(e){var t,g,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(g=this,n=e):(g=e,n=this);for(var r=0,I=0;I<n.length;I++)t=(0|g.words[I])+(0|n.words[I])+r,this.words[I]=67108863&t,r=t>>>26;for(;0!==r&&I<g.length;I++)t=(0|g.words[I])+r,this.words[I]=67108863&t,r=t>>>26;if(this.length=g.length,0!==r)this.words[this.length]=r,this.length++;else if(g!==this)for(;I<g.length;I++)this.words[I]=g.words[I];return this},I.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},I.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var g,n,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(g=this,n=e):(g=e,n=this);for(var I=0,a=0;a<n.length;a++)I=(t=(0|g.words[a])-(0|n.words[a])+I)>>26,this.words[a]=67108863&t;for(;0!==I&&a<g.length;a++)I=(t=(0|g.words[a])+I)>>26,this.words[a]=67108863&t;if(0===I&&a<g.length&&g!==this)for(;a<g.length;a++)this.words[a]=g.words[a];return this.length=Math.max(this.length,a),g!==this&&(this.negative=1),this._strip()},I.prototype.sub=function(e){return this.clone().isub(e)};var h=function(e,t,g){var n,r,I,a=e.words,o=t.words,i=g.words,C=0,l=0|a[0],u=8191&l,c=l>>>13,s=0|a[1],A=8191&s,d=s>>>13,h=0|a[2],m=8191&h,b=h>>>13,p=0|a[3],f=8191&p,Z=p>>>13,y=0|a[4],G=8191&y,B=y>>>13,v=0|a[5],k=8191&v,S=v>>>13,W=0|a[6],V=8191&W,w=W>>>13,R=0|a[7],X=8191&R,J=R>>>13,Y=0|a[8],H=8191&Y,N=Y>>>13,F=0|a[9],K=8191&F,x=F>>>13,E=0|o[0],M=8191&E,D=E>>>13,U=0|o[1],z=8191&U,L=U>>>13,Q=0|o[2],T=8191&Q,j=Q>>>13,P=0|o[3],O=8191&P,_=P>>>13,q=0|o[4],$=8191&q,ee=q>>>13,te=0|o[5],ge=8191&te,ne=te>>>13,re=0|o[6],Ie=8191&re,ae=re>>>13,oe=0|o[7],ie=8191&oe,Ce=oe>>>13,le=0|o[8],ue=8191&le,ce=le>>>13,se=0|o[9],Ae=8191&se,de=se>>>13;g.negative=e.negative^t.negative,g.length=19;var he=(C+(n=Math.imul(u,M))|0)+((8191&(r=(r=Math.imul(u,D))+Math.imul(c,M)|0))<<13)|0;C=((I=Math.imul(c,D))+(r>>>13)|0)+(he>>>26)|0,he&=67108863,n=Math.imul(A,M),r=(r=Math.imul(A,D))+Math.imul(d,M)|0,I=Math.imul(d,D);var me=(C+(n=n+Math.imul(u,z)|0)|0)+((8191&(r=(r=r+Math.imul(u,L)|0)+Math.imul(c,z)|0))<<13)|0;C=((I=I+Math.imul(c,L)|0)+(r>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(m,M),r=(r=Math.imul(m,D))+Math.imul(b,M)|0,I=Math.imul(b,D),n=n+Math.imul(A,z)|0,r=(r=r+Math.imul(A,L)|0)+Math.imul(d,z)|0,I=I+Math.imul(d,L)|0;var be=(C+(n=n+Math.imul(u,T)|0)|0)+((8191&(r=(r=r+Math.imul(u,j)|0)+Math.imul(c,T)|0))<<13)|0;C=((I=I+Math.imul(c,j)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(f,M),r=(r=Math.imul(f,D))+Math.imul(Z,M)|0,I=Math.imul(Z,D),n=n+Math.imul(m,z)|0,r=(r=r+Math.imul(m,L)|0)+Math.imul(b,z)|0,I=I+Math.imul(b,L)|0,n=n+Math.imul(A,T)|0,r=(r=r+Math.imul(A,j)|0)+Math.imul(d,T)|0,I=I+Math.imul(d,j)|0;var pe=(C+(n=n+Math.imul(u,O)|0)|0)+((8191&(r=(r=r+Math.imul(u,_)|0)+Math.imul(c,O)|0))<<13)|0;C=((I=I+Math.imul(c,_)|0)+(r>>>13)|0)+(pe>>>26)|0,pe&=67108863,n=Math.imul(G,M),r=(r=Math.imul(G,D))+Math.imul(B,M)|0,I=Math.imul(B,D),n=n+Math.imul(f,z)|0,r=(r=r+Math.imul(f,L)|0)+Math.imul(Z,z)|0,I=I+Math.imul(Z,L)|0,n=n+Math.imul(m,T)|0,r=(r=r+Math.imul(m,j)|0)+Math.imul(b,T)|0,I=I+Math.imul(b,j)|0,n=n+Math.imul(A,O)|0,r=(r=r+Math.imul(A,_)|0)+Math.imul(d,O)|0,I=I+Math.imul(d,_)|0;var fe=(C+(n=n+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(c,$)|0))<<13)|0;C=((I=I+Math.imul(c,ee)|0)+(r>>>13)|0)+(fe>>>26)|0,fe&=67108863,n=Math.imul(k,M),r=(r=Math.imul(k,D))+Math.imul(S,M)|0,I=Math.imul(S,D),n=n+Math.imul(G,z)|0,r=(r=r+Math.imul(G,L)|0)+Math.imul(B,z)|0,I=I+Math.imul(B,L)|0,n=n+Math.imul(f,T)|0,r=(r=r+Math.imul(f,j)|0)+Math.imul(Z,T)|0,I=I+Math.imul(Z,j)|0,n=n+Math.imul(m,O)|0,r=(r=r+Math.imul(m,_)|0)+Math.imul(b,O)|0,I=I+Math.imul(b,_)|0,n=n+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(d,$)|0,I=I+Math.imul(d,ee)|0;var Ze=(C+(n=n+Math.imul(u,ge)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(c,ge)|0))<<13)|0;C=((I=I+Math.imul(c,ne)|0)+(r>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,n=Math.imul(V,M),r=(r=Math.imul(V,D))+Math.imul(w,M)|0,I=Math.imul(w,D),n=n+Math.imul(k,z)|0,r=(r=r+Math.imul(k,L)|0)+Math.imul(S,z)|0,I=I+Math.imul(S,L)|0,n=n+Math.imul(G,T)|0,r=(r=r+Math.imul(G,j)|0)+Math.imul(B,T)|0,I=I+Math.imul(B,j)|0,n=n+Math.imul(f,O)|0,r=(r=r+Math.imul(f,_)|0)+Math.imul(Z,O)|0,I=I+Math.imul(Z,_)|0,n=n+Math.imul(m,$)|0,r=(r=r+Math.imul(m,ee)|0)+Math.imul(b,$)|0,I=I+Math.imul(b,ee)|0,n=n+Math.imul(A,ge)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(d,ge)|0,I=I+Math.imul(d,ne)|0;var ye=(C+(n=n+Math.imul(u,Ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,ae)|0)+Math.imul(c,Ie)|0))<<13)|0;C=((I=I+Math.imul(c,ae)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(X,M),r=(r=Math.imul(X,D))+Math.imul(J,M)|0,I=Math.imul(J,D),n=n+Math.imul(V,z)|0,r=(r=r+Math.imul(V,L)|0)+Math.imul(w,z)|0,I=I+Math.imul(w,L)|0,n=n+Math.imul(k,T)|0,r=(r=r+Math.imul(k,j)|0)+Math.imul(S,T)|0,I=I+Math.imul(S,j)|0,n=n+Math.imul(G,O)|0,r=(r=r+Math.imul(G,_)|0)+Math.imul(B,O)|0,I=I+Math.imul(B,_)|0,n=n+Math.imul(f,$)|0,r=(r=r+Math.imul(f,ee)|0)+Math.imul(Z,$)|0,I=I+Math.imul(Z,ee)|0,n=n+Math.imul(m,ge)|0,r=(r=r+Math.imul(m,ne)|0)+Math.imul(b,ge)|0,I=I+Math.imul(b,ne)|0,n=n+Math.imul(A,Ie)|0,r=(r=r+Math.imul(A,ae)|0)+Math.imul(d,Ie)|0,I=I+Math.imul(d,ae)|0;var Ge=(C+(n=n+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,Ce)|0)+Math.imul(c,ie)|0))<<13)|0;C=((I=I+Math.imul(c,Ce)|0)+(r>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,n=Math.imul(H,M),r=(r=Math.imul(H,D))+Math.imul(N,M)|0,I=Math.imul(N,D),n=n+Math.imul(X,z)|0,r=(r=r+Math.imul(X,L)|0)+Math.imul(J,z)|0,I=I+Math.imul(J,L)|0,n=n+Math.imul(V,T)|0,r=(r=r+Math.imul(V,j)|0)+Math.imul(w,T)|0,I=I+Math.imul(w,j)|0,n=n+Math.imul(k,O)|0,r=(r=r+Math.imul(k,_)|0)+Math.imul(S,O)|0,I=I+Math.imul(S,_)|0,n=n+Math.imul(G,$)|0,r=(r=r+Math.imul(G,ee)|0)+Math.imul(B,$)|0,I=I+Math.imul(B,ee)|0,n=n+Math.imul(f,ge)|0,r=(r=r+Math.imul(f,ne)|0)+Math.imul(Z,ge)|0,I=I+Math.imul(Z,ne)|0,n=n+Math.imul(m,Ie)|0,r=(r=r+Math.imul(m,ae)|0)+Math.imul(b,Ie)|0,I=I+Math.imul(b,ae)|0,n=n+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,Ce)|0)+Math.imul(d,ie)|0,I=I+Math.imul(d,Ce)|0;var Be=(C+(n=n+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(c,ue)|0))<<13)|0;C=((I=I+Math.imul(c,ce)|0)+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(K,M),r=(r=Math.imul(K,D))+Math.imul(x,M)|0,I=Math.imul(x,D),n=n+Math.imul(H,z)|0,r=(r=r+Math.imul(H,L)|0)+Math.imul(N,z)|0,I=I+Math.imul(N,L)|0,n=n+Math.imul(X,T)|0,r=(r=r+Math.imul(X,j)|0)+Math.imul(J,T)|0,I=I+Math.imul(J,j)|0,n=n+Math.imul(V,O)|0,r=(r=r+Math.imul(V,_)|0)+Math.imul(w,O)|0,I=I+Math.imul(w,_)|0,n=n+Math.imul(k,$)|0,r=(r=r+Math.imul(k,ee)|0)+Math.imul(S,$)|0,I=I+Math.imul(S,ee)|0,n=n+Math.imul(G,ge)|0,r=(r=r+Math.imul(G,ne)|0)+Math.imul(B,ge)|0,I=I+Math.imul(B,ne)|0,n=n+Math.imul(f,Ie)|0,r=(r=r+Math.imul(f,ae)|0)+Math.imul(Z,Ie)|0,I=I+Math.imul(Z,ae)|0,n=n+Math.imul(m,ie)|0,r=(r=r+Math.imul(m,Ce)|0)+Math.imul(b,ie)|0,I=I+Math.imul(b,Ce)|0,n=n+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(d,ue)|0,I=I+Math.imul(d,ce)|0;var ve=(C+(n=n+Math.imul(u,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,de)|0)+Math.imul(c,Ae)|0))<<13)|0;C=((I=I+Math.imul(c,de)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(K,z),r=(r=Math.imul(K,L))+Math.imul(x,z)|0,I=Math.imul(x,L),n=n+Math.imul(H,T)|0,r=(r=r+Math.imul(H,j)|0)+Math.imul(N,T)|0,I=I+Math.imul(N,j)|0,n=n+Math.imul(X,O)|0,r=(r=r+Math.imul(X,_)|0)+Math.imul(J,O)|0,I=I+Math.imul(J,_)|0,n=n+Math.imul(V,$)|0,r=(r=r+Math.imul(V,ee)|0)+Math.imul(w,$)|0,I=I+Math.imul(w,ee)|0,n=n+Math.imul(k,ge)|0,r=(r=r+Math.imul(k,ne)|0)+Math.imul(S,ge)|0,I=I+Math.imul(S,ne)|0,n=n+Math.imul(G,Ie)|0,r=(r=r+Math.imul(G,ae)|0)+Math.imul(B,Ie)|0,I=I+Math.imul(B,ae)|0,n=n+Math.imul(f,ie)|0,r=(r=r+Math.imul(f,Ce)|0)+Math.imul(Z,ie)|0,I=I+Math.imul(Z,Ce)|0,n=n+Math.imul(m,ue)|0,r=(r=r+Math.imul(m,ce)|0)+Math.imul(b,ue)|0,I=I+Math.imul(b,ce)|0;var ke=(C+(n=n+Math.imul(A,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(A,de)|0)+Math.imul(d,Ae)|0))<<13)|0;C=((I=I+Math.imul(d,de)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(K,T),r=(r=Math.imul(K,j))+Math.imul(x,T)|0,I=Math.imul(x,j),n=n+Math.imul(H,O)|0,r=(r=r+Math.imul(H,_)|0)+Math.imul(N,O)|0,I=I+Math.imul(N,_)|0,n=n+Math.imul(X,$)|0,r=(r=r+Math.imul(X,ee)|0)+Math.imul(J,$)|0,I=I+Math.imul(J,ee)|0,n=n+Math.imul(V,ge)|0,r=(r=r+Math.imul(V,ne)|0)+Math.imul(w,ge)|0,I=I+Math.imul(w,ne)|0,n=n+Math.imul(k,Ie)|0,r=(r=r+Math.imul(k,ae)|0)+Math.imul(S,Ie)|0,I=I+Math.imul(S,ae)|0,n=n+Math.imul(G,ie)|0,r=(r=r+Math.imul(G,Ce)|0)+Math.imul(B,ie)|0,I=I+Math.imul(B,Ce)|0,n=n+Math.imul(f,ue)|0,r=(r=r+Math.imul(f,ce)|0)+Math.imul(Z,ue)|0,I=I+Math.imul(Z,ce)|0;var Se=(C+(n=n+Math.imul(m,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(m,de)|0)+Math.imul(b,Ae)|0))<<13)|0;C=((I=I+Math.imul(b,de)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(K,O),r=(r=Math.imul(K,_))+Math.imul(x,O)|0,I=Math.imul(x,_),n=n+Math.imul(H,$)|0,r=(r=r+Math.imul(H,ee)|0)+Math.imul(N,$)|0,I=I+Math.imul(N,ee)|0,n=n+Math.imul(X,ge)|0,r=(r=r+Math.imul(X,ne)|0)+Math.imul(J,ge)|0,I=I+Math.imul(J,ne)|0,n=n+Math.imul(V,Ie)|0,r=(r=r+Math.imul(V,ae)|0)+Math.imul(w,Ie)|0,I=I+Math.imul(w,ae)|0,n=n+Math.imul(k,ie)|0,r=(r=r+Math.imul(k,Ce)|0)+Math.imul(S,ie)|0,I=I+Math.imul(S,Ce)|0,n=n+Math.imul(G,ue)|0,r=(r=r+Math.imul(G,ce)|0)+Math.imul(B,ue)|0,I=I+Math.imul(B,ce)|0;var We=(C+(n=n+Math.imul(f,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(f,de)|0)+Math.imul(Z,Ae)|0))<<13)|0;C=((I=I+Math.imul(Z,de)|0)+(r>>>13)|0)+(We>>>26)|0,We&=67108863,n=Math.imul(K,$),r=(r=Math.imul(K,ee))+Math.imul(x,$)|0,I=Math.imul(x,ee),n=n+Math.imul(H,ge)|0,r=(r=r+Math.imul(H,ne)|0)+Math.imul(N,ge)|0,I=I+Math.imul(N,ne)|0,n=n+Math.imul(X,Ie)|0,r=(r=r+Math.imul(X,ae)|0)+Math.imul(J,Ie)|0,I=I+Math.imul(J,ae)|0,n=n+Math.imul(V,ie)|0,r=(r=r+Math.imul(V,Ce)|0)+Math.imul(w,ie)|0,I=I+Math.imul(w,Ce)|0,n=n+Math.imul(k,ue)|0,r=(r=r+Math.imul(k,ce)|0)+Math.imul(S,ue)|0,I=I+Math.imul(S,ce)|0;var Ve=(C+(n=n+Math.imul(G,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(G,de)|0)+Math.imul(B,Ae)|0))<<13)|0;C=((I=I+Math.imul(B,de)|0)+(r>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,n=Math.imul(K,ge),r=(r=Math.imul(K,ne))+Math.imul(x,ge)|0,I=Math.imul(x,ne),n=n+Math.imul(H,Ie)|0,r=(r=r+Math.imul(H,ae)|0)+Math.imul(N,Ie)|0,I=I+Math.imul(N,ae)|0,n=n+Math.imul(X,ie)|0,r=(r=r+Math.imul(X,Ce)|0)+Math.imul(J,ie)|0,I=I+Math.imul(J,Ce)|0,n=n+Math.imul(V,ue)|0,r=(r=r+Math.imul(V,ce)|0)+Math.imul(w,ue)|0,I=I+Math.imul(w,ce)|0;var we=(C+(n=n+Math.imul(k,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(k,de)|0)+Math.imul(S,Ae)|0))<<13)|0;C=((I=I+Math.imul(S,de)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(K,Ie),r=(r=Math.imul(K,ae))+Math.imul(x,Ie)|0,I=Math.imul(x,ae),n=n+Math.imul(H,ie)|0,r=(r=r+Math.imul(H,Ce)|0)+Math.imul(N,ie)|0,I=I+Math.imul(N,Ce)|0,n=n+Math.imul(X,ue)|0,r=(r=r+Math.imul(X,ce)|0)+Math.imul(J,ue)|0,I=I+Math.imul(J,ce)|0;var Re=(C+(n=n+Math.imul(V,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(V,de)|0)+Math.imul(w,Ae)|0))<<13)|0;C=((I=I+Math.imul(w,de)|0)+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(K,ie),r=(r=Math.imul(K,Ce))+Math.imul(x,ie)|0,I=Math.imul(x,Ce),n=n+Math.imul(H,ue)|0,r=(r=r+Math.imul(H,ce)|0)+Math.imul(N,ue)|0,I=I+Math.imul(N,ce)|0;var Xe=(C+(n=n+Math.imul(X,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(X,de)|0)+Math.imul(J,Ae)|0))<<13)|0;C=((I=I+Math.imul(J,de)|0)+(r>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,n=Math.imul(K,ue),r=(r=Math.imul(K,ce))+Math.imul(x,ue)|0,I=Math.imul(x,ce);var Je=(C+(n=n+Math.imul(H,Ae)|0)|0)+((8191&(r=(r=r+Math.imul(H,de)|0)+Math.imul(N,Ae)|0))<<13)|0;C=((I=I+Math.imul(N,de)|0)+(r>>>13)|0)+(Je>>>26)|0,Je&=67108863;var Ye=(C+(n=Math.imul(K,Ae))|0)+((8191&(r=(r=Math.imul(K,de))+Math.imul(x,Ae)|0))<<13)|0;return C=((I=Math.imul(x,de))+(r>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,i[0]=he,i[1]=me,i[2]=be,i[3]=pe,i[4]=fe,i[5]=Ze,i[6]=ye,i[7]=Ge,i[8]=Be,i[9]=ve,i[10]=ke,i[11]=Se,i[12]=We,i[13]=Ve,i[14]=we,i[15]=Re,i[16]=Xe,i[17]=Je,i[18]=Ye,0!==C&&(i[19]=C,g.length++),g};function m(e,t,g){g.negative=t.negative^e.negative,g.length=e.length+t.length;for(var n=0,r=0,I=0;I<g.length-1;I++){var a=r;r=0;for(var o=67108863&n,i=Math.min(I,t.length-1),C=Math.max(0,I-e.length+1);C<=i;C++){var l=I-C,u=(0|e.words[l])*(0|t.words[C]),c=67108863&u;o=67108863&(c=c+o|0),r+=(a=(a=a+(u/67108864|0)|0)+(c>>>26)|0)>>>26,a&=67108863}g.words[I]=o,n=a,a=r}return 0!==n?g.words[I]=n:g.length--,g._strip()}function b(e,t,g){return m(e,t,g)}function p(e,t){this.x=e,this.y=t}Math.imul||(h=d),I.prototype.mulTo=function(e,t){var g=this.length+e.length;return 10===this.length&&10===e.length?h(this,e,t):g<63?d(this,e,t):g<1024?m(this,e,t):b(this,e,t)},p.prototype.makeRBT=function(e){for(var t=new Array(e),g=I.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,g,e);return t},p.prototype.revBin=function(e,t,g){if(0===e||e===g-1)return e;for(var n=0,r=0;r<t;r++)n|=(1&e)<<t-r-1,e>>=1;return n},p.prototype.permute=function(e,t,g,n,r,I){for(var a=0;a<I;a++)n[a]=t[e[a]],r[a]=g[e[a]]},p.prototype.transform=function(e,t,g,n,r,I){this.permute(I,e,t,g,n,r);for(var a=1;a<r;a<<=1)for(var o=a<<1,i=Math.cos(2*Math.PI/o),C=Math.sin(2*Math.PI/o),l=0;l<r;l+=o)for(var u=i,c=C,s=0;s<a;s++){var A=g[l+s],d=n[l+s],h=g[l+s+a],m=n[l+s+a],b=u*h-c*m;m=u*m+c*h,h=b,g[l+s]=A+h,n[l+s]=d+m,g[l+s+a]=A-h,n[l+s+a]=d-m,s!==o&&(b=i*u-C*c,c=i*c+C*u,u=b)}},p.prototype.guessLen13b=function(e,t){var g=1|Math.max(t,e),n=1&g,r=0;for(g=g/2|0;g;g>>>=1)r++;return 1<<r+1+n},p.prototype.conjugate=function(e,t,g){if(!(g<=1))for(var n=0;n<g/2;n++){var r=e[n];e[n]=e[g-n-1],e[g-n-1]=r,r=t[n],t[n]=-t[g-n-1],t[g-n-1]=-r}},p.prototype.normalize13b=function(e,t){for(var g=0,n=0;n<t/2;n++){var r=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+g;e[n]=67108863&r,g=r<67108864?0:r/67108864|0}return e},p.prototype.convert13b=function(e,t,g,r){for(var I=0,a=0;a<t;a++)I+=0|e[a],g[2*a]=8191&I,I>>>=13,g[2*a+1]=8191&I,I>>>=13;for(a=2*t;a<r;++a)g[a]=0;n(0===I),n(0===(-8192&I))},p.prototype.stub=function(e){for(var t=new Array(e),g=0;g<e;g++)t[g]=0;return t},p.prototype.mulp=function(e,t,g){var n=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(n),I=this.stub(n),a=new Array(n),o=new Array(n),i=new Array(n),C=new Array(n),l=new Array(n),u=new Array(n),c=g.words;c.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,C,n),this.transform(a,I,o,i,n,r),this.transform(C,I,l,u,n,r);for(var s=0;s<n;s++){var A=o[s]*l[s]-i[s]*u[s];i[s]=o[s]*u[s]+i[s]*l[s],o[s]=A}return this.conjugate(o,i,n),this.transform(o,i,c,I,n,r),this.conjugate(c,I,n),this.normalize13b(c,n),g.negative=e.negative^t.negative,g.length=e.length+t.length,g._strip()},I.prototype.mul=function(e){var t=new I(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},I.prototype.mulf=function(e){var t=new I(null);return t.words=new Array(this.length+e.length),b(this,e,t)},I.prototype.imul=function(e){return this.clone().mulTo(e,this)},I.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var g=0,r=0;r<this.length;r++){var I=(0|this.words[r])*e,a=(67108863&I)+(67108863&g);g>>=26,g+=I/67108864|0,g+=a>>>26,this.words[r]=67108863&a}return 0!==g&&(this.words[r]=g,this.length++),t?this.ineg():this},I.prototype.muln=function(e){return this.clone().imuln(e)},I.prototype.sqr=function(){return this.mul(this)},I.prototype.isqr=function(){return this.imul(this.clone())},I.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),g=0;g<t.length;g++){var n=g/26|0,r=g%26;t[g]=e.words[n]>>>r&1}return t}(e);if(0===t.length)return new I(1);for(var g=this,n=0;n<t.length&&0===t[n];n++,g=g.sqr());if(++n<t.length)for(var r=g.sqr();n<t.length;n++,r=r.sqr())0!==t[n]&&(g=g.mul(r));return g},I.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,g=e%26,r=(e-g)/26,I=67108863>>>26-g<<26-g;if(0!==g){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&I,i=(0|this.words[t])-o<<g;this.words[t]=i|a,a=o>>>26-g}a&&(this.words[t]=a,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},I.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},I.prototype.iushrn=function(e,t,g){var r;n("number"===typeof e&&e>=0),r=t?(t-t%26)/26:0;var I=e%26,a=Math.min((e-I)/26,this.length),o=67108863^67108863>>>I<<I,i=g;if(r-=a,r=Math.max(0,r),i){for(var C=0;C<a;C++)i.words[C]=this.words[C];i.length=a}if(0===a);else if(this.length>a)for(this.length-=a,C=0;C<this.length;C++)this.words[C]=this.words[C+a];else this.words[0]=0,this.length=1;var l=0;for(C=this.length-1;C>=0&&(0!==l||C>=r);C--){var u=0|this.words[C];this.words[C]=l<<26-I|u>>>I,l=u&o}return i&&0!==l&&(i.words[i.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},I.prototype.ishrn=function(e,t,g){return n(0===this.negative),this.iushrn(e,t,g)},I.prototype.shln=function(e){return this.clone().ishln(e)},I.prototype.ushln=function(e){return this.clone().iushln(e)},I.prototype.shrn=function(e){return this.clone().ishrn(e)},I.prototype.ushrn=function(e){return this.clone().iushrn(e)},I.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,g=(e-t)/26,r=1<<t;return!(this.length<=g)&&!!(this.words[g]&r)},I.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,g=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=g)return this;if(0!==t&&g++,this.length=Math.min(g,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},I.prototype.maskn=function(e){return this.clone().imaskn(e)},I.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},I.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},I.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},I.prototype.addn=function(e){return this.clone().iaddn(e)},I.prototype.subn=function(e){return this.clone().isubn(e)},I.prototype.iabs=function(){return this.negative=0,this},I.prototype.abs=function(){return this.clone().iabs()},I.prototype._ishlnsubmul=function(e,t,g){var r,I,a=e.length+g;this._expand(a);var o=0;for(r=0;r<e.length;r++){I=(0|this.words[r+g])+o;var i=(0|e.words[r])*t;o=((I-=67108863&i)>>26)-(i/67108864|0),this.words[r+g]=67108863&I}for(;r<this.length-g;r++)o=(I=(0|this.words[r+g])+o)>>26,this.words[r+g]=67108863&I;if(0===o)return this._strip();for(n(-1===o),o=0,r=0;r<this.length;r++)o=(I=-(0|this.words[r])+o)>>26,this.words[r]=67108863&I;return this.negative=1,this._strip()},I.prototype._wordDiv=function(e,t){var g=(this.length,e.length),n=this.clone(),r=e,a=0|r.words[r.length-1];0!==(g=26-this._countBits(a))&&(r=r.ushln(g),n.iushln(g),a=0|r.words[r.length-1]);var o,i=n.length-r.length;if("mod"!==t){(o=new I(null)).length=i+1,o.words=new Array(o.length);for(var C=0;C<o.length;C++)o.words[C]=0}var l=n.clone()._ishlnsubmul(r,1,i);0===l.negative&&(n=l,o&&(o.words[i]=1));for(var u=i-1;u>=0;u--){var c=67108864*(0|n.words[r.length+u])+(0|n.words[r.length+u-1]);for(c=Math.min(c/a|0,67108863),n._ishlnsubmul(r,c,u);0!==n.negative;)c--,n.negative=0,n._ishlnsubmul(r,1,u),n.isZero()||(n.negative^=1);o&&(o.words[u]=c)}return o&&o._strip(),n._strip(),"div"!==t&&0!==g&&n.iushrn(g),{div:o||null,mod:n}},I.prototype.divmod=function(e,t,g){return n(!e.isZero()),this.isZero()?{div:new I(0),mod:new I(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(a=o.mod.neg(),g&&0!==a.negative&&a.iadd(e)),{div:r,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),g&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new I(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new I(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new I(this.modrn(e.words[0]))}:this._wordDiv(e,t);var r,a,o},I.prototype.div=function(e){return this.divmod(e,"div",!1).div},I.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},I.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},I.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var g=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),r=e.andln(1),I=g.cmp(n);return I<0||1===r&&0===I?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},I.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var g=(1<<26)%e,r=0,I=this.length-1;I>=0;I--)r=(g*r+(0|this.words[I]))%e;return t?-r:r},I.prototype.modn=function(e){return this.modrn(e)},I.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var g=0,r=this.length-1;r>=0;r--){var I=(0|this.words[r])+67108864*g;this.words[r]=I/e|0,g=I%e}return this._strip(),t?this.ineg():this},I.prototype.divn=function(e){return this.clone().idivn(e)},I.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,g=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new I(1),a=new I(0),o=new I(0),i=new I(1),C=0;t.isEven()&&g.isEven();)t.iushrn(1),g.iushrn(1),++C;for(var l=g.clone(),u=t.clone();!t.isZero();){for(var c=0,s=1;0===(t.words[0]&s)&&c<26;++c,s<<=1);if(c>0)for(t.iushrn(c);c-- >0;)(r.isOdd()||a.isOdd())&&(r.iadd(l),a.isub(u)),r.iushrn(1),a.iushrn(1);for(var A=0,d=1;0===(g.words[0]&d)&&A<26;++A,d<<=1);if(A>0)for(g.iushrn(A);A-- >0;)(o.isOdd()||i.isOdd())&&(o.iadd(l),i.isub(u)),o.iushrn(1),i.iushrn(1);t.cmp(g)>=0?(t.isub(g),r.isub(o),a.isub(i)):(g.isub(t),o.isub(r),i.isub(a))}return{a:o,b:i,gcd:g.iushln(C)}},I.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,g=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,a=new I(1),o=new I(0),i=g.clone();t.cmpn(1)>0&&g.cmpn(1)>0;){for(var C=0,l=1;0===(t.words[0]&l)&&C<26;++C,l<<=1);if(C>0)for(t.iushrn(C);C-- >0;)a.isOdd()&&a.iadd(i),a.iushrn(1);for(var u=0,c=1;0===(g.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(g.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(i),o.iushrn(1);t.cmp(g)>=0?(t.isub(g),a.isub(o)):(g.isub(t),o.isub(a))}return(r=0===t.cmpn(1)?a:o).cmpn(0)<0&&r.iadd(e),r},I.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),g=e.clone();t.negative=0,g.negative=0;for(var n=0;t.isEven()&&g.isEven();n++)t.iushrn(1),g.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;g.isEven();)g.iushrn(1);var r=t.cmp(g);if(r<0){var I=t;t=g,g=I}else if(0===r||0===g.cmpn(1))break;t.isub(g)}return g.iushln(n)},I.prototype.invm=function(e){return this.egcd(e).a.umod(e)},I.prototype.isEven=function(){return 0===(1&this.words[0])},I.prototype.isOdd=function(){return 1===(1&this.words[0])},I.prototype.andln=function(e){return this.words[0]&e},I.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,g=(e-t)/26,r=1<<t;if(this.length<=g)return this._expand(g+1),this.words[g]|=r,this;for(var I=r,a=g;0!==I&&a<this.length;a++){var o=0|this.words[a];I=(o+=I)>>>26,o&=67108863,this.words[a]=o}return 0!==I&&(this.words[a]=I,this.length++),this},I.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},I.prototype.cmpn=function(e){var t,g=e<0;if(0!==this.negative&&!g)return-1;if(0===this.negative&&g)return 1;if(this._strip(),this.length>1)t=1;else{g&&(e=-e),n(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},I.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},I.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,g=this.length-1;g>=0;g--){var n=0|this.words[g],r=0|e.words[g];if(n!==r){n<r?t=-1:n>r&&(t=1);break}}return t},I.prototype.gtn=function(e){return 1===this.cmpn(e)},I.prototype.gt=function(e){return 1===this.cmp(e)},I.prototype.gten=function(e){return this.cmpn(e)>=0},I.prototype.gte=function(e){return this.cmp(e)>=0},I.prototype.ltn=function(e){return-1===this.cmpn(e)},I.prototype.lt=function(e){return-1===this.cmp(e)},I.prototype.lten=function(e){return this.cmpn(e)<=0},I.prototype.lte=function(e){return this.cmp(e)<=0},I.prototype.eqn=function(e){return 0===this.cmpn(e)},I.prototype.eq=function(e){return 0===this.cmp(e)},I.red=function(e){return new k(e)},I.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},I.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},I.prototype._forceRed=function(e){return this.red=e,this},I.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},I.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},I.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},I.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},I.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},I.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},I.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},I.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},I.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},I.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},I.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},I.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},I.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},I.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var f={k256:null,p224:null,p192:null,p25519:null};function Z(e,t){this.name=e,this.p=new I(t,16),this.n=this.p.bitLength(),this.k=new I(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function G(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function B(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"===typeof e){var t=I._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new I(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Z.prototype._tmp=function(){var e=new I(null);return e.words=new Array(Math.ceil(this.n/13)),e},Z.prototype.ireduce=function(e){var t,g=e;do{this.split(g,this.tmp),t=(g=(g=this.imulK(g)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:g.ucmp(this.p);return 0===n?(g.words[0]=0,g.length=1):n>0?g.isub(this.p):void 0!==g.strip?g.strip():g._strip(),g},Z.prototype.split=function(e,t){e.iushrn(this.n,0,t)},Z.prototype.imulK=function(e){return e.imul(this.k)},r(y,Z),y.prototype.split=function(e,t){for(var g=4194303,n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var I=e.words[9];for(t.words[t.length++]=I&g,r=10;r<e.length;r++){var a=0|e.words[r];e.words[r-10]=(a&g)<<4|I>>>22,I=a}I>>>=22,e.words[r-10]=I,0===I&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,g=0;g<e.length;g++){var n=0|e.words[g];t+=977*n,e.words[g]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(G,Z),r(B,Z),r(v,Z),v.prototype.imulK=function(e){for(var t=0,g=0;g<e.length;g++){var n=19*(0|e.words[g])+t,r=67108863&n;n>>>=26,e.words[g]=r,t=n}return 0!==t&&(e.words[e.length++]=t),e},I._prime=function(e){if(f[e])return f[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new G;else if("p192"===e)t=new B;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return f[e]=t,t},k.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var g=e.add(t);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var g=e.iadd(t);return g.cmp(this.m)>=0&&g.isub(this.m),g},k.prototype.sub=function(e,t){this._verify2(e,t);var g=e.sub(t);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var g=e.isub(t);return g.cmpn(0)<0&&g.iadd(this.m),g},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var g=this.m.add(new I(1)).iushrn(2);return this.pow(e,g)}for(var r=this.m.subn(1),a=0;!r.isZero()&&0===r.andln(1);)a++,r.iushrn(1);n(!r.isZero());var o=new I(1).toRed(this),i=o.redNeg(),C=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new I(2*l*l).toRed(this);0!==this.pow(l,C).cmp(i);)l.redIAdd(i);for(var u=this.pow(l,r),c=this.pow(e,r.addn(1).iushrn(1)),s=this.pow(e,r),A=a;0!==s.cmp(o);){for(var d=s,h=0;0!==d.cmp(o);h++)d=d.redSqr();n(h<A);var m=this.pow(u,new I(1).iushln(A-h-1));c=c.redMul(m),u=m.redSqr(),s=s.redMul(u),A=h}return c},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new I(1).toRed(this);if(0===t.cmpn(1))return e.clone();var g=new Array(16);g[0]=new I(1).toRed(this),g[1]=e;for(var n=2;n<g.length;n++)g[n]=this.mul(g[n-1],e);var r=g[0],a=0,o=0,i=t.bitLength()%26;for(0===i&&(i=26),n=t.length-1;n>=0;n--){for(var C=t.words[n],l=i-1;l>=0;l--){var u=C>>l&1;r!==g[0]&&(r=this.sqr(r)),0!==u||0!==a?(a<<=1,a|=u,(4===++o||0===n&&0===l)&&(r=this.mul(r,g[a]),o=0,a=0)):o=0}i=26}return r},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},I.mont=function(e){return new S(e)},r(S,k),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var g=e.imul(t),n=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=g.isub(n).iushrn(this.shift),I=r;return r.cmp(this.m)>=0?I=r.isub(this.m):r.cmpn(0)<0&&(I=r.iadd(this.m)),I._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new I(0)._forceRed(this);var g=e.mul(t),n=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=g.isub(n).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=g.nmd(e),this)},3139:function(e){e.exports=function e(t,g){var n,r=0,I=0,a=g=g||0,o=t.length;do{if(a>=o||I>49)throw e.bytes=0,new RangeError("Could not decode varint");n=t[a++],r+=I<28?(127&n)<<I:(127&n)*Math.pow(2,I),I+=7}while(n>=128);return e.bytes=a-g,r}},9605:function(e){e.exports=function e(g,n,r){if(Number.MAX_SAFE_INTEGER&&g>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");n=n||[];var I=r=r||0;for(;g>=t;)n[r++]=255&g|128,g/=128;for(;-128&g;)n[r++]=255&g|128,g>>>=7;return n[r]=0|g,e.bytes=r-I+1,n};var t=Math.pow(2,31)},1684:function(e,t,g){e.exports={encode:g(9605),decode:g(3139),encodingLength:g(3770)}},3770:function(e){var t=Math.pow(2,7),g=Math.pow(2,14),n=Math.pow(2,21),r=Math.pow(2,28),I=Math.pow(2,35),a=Math.pow(2,42),o=Math.pow(2,49),i=Math.pow(2,56),C=Math.pow(2,63);e.exports=function(e){return e<t?1:e<g?2:e<n?3:e<r?4:e<I?5:e<a?6:e<o?7:e<i?8:e<C?9:10}},7214:function(e){"use strict";e.exports=function(e,t){var g=new Array(arguments.length-1),n=0,r=2,I=!0;for(;r<arguments.length;)g[n++]=arguments[r++];return new Promise((function(r,a){g[n]=function(e){if(I)if(I=!1,e)a(e);else{for(var t=new Array(arguments.length-1),g=0;g<t.length;)t[g++]=arguments[g];r.apply(null,t)}};try{e.apply(t||null,g)}catch(o){I&&(I=!1,a(o))}}))}},734:function(e,t){"use strict";var g=t;g.length=function(e){var t=e.length;if(!t)return 0;for(var g=0;--t%4>1&&"="===e.charAt(t);)++g;return Math.ceil(3*e.length)/4-g};for(var n=new Array(64),r=new Array(123),I=0;I<64;)r[n[I]=I<26?I+65:I<52?I+71:I<62?I-4:I-59|43]=I++;g.encode=function(e,t,g){for(var r,I=null,a=[],o=0,i=0;t<g;){var C=e[t++];switch(i){case 0:a[o++]=n[C>>2],r=(3&C)<<4,i=1;break;case 1:a[o++]=n[r|C>>4],r=(15&C)<<2,i=2;break;case 2:a[o++]=n[r|C>>6],a[o++]=n[63&C],i=0}o>8191&&((I||(I=[])).push(String.fromCharCode.apply(String,a)),o=0)}return i&&(a[o++]=n[r],a[o++]=61,1===i&&(a[o++]=61)),I?(o&&I.push(String.fromCharCode.apply(String,a.slice(0,o))),I.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";g.decode=function(e,t,g){for(var n,I=g,o=0,i=0;i<e.length;){var C=e.charCodeAt(i++);if(61===C&&o>1)break;if(void 0===(C=r[C]))throw Error(a);switch(o){case 0:n=C,o=1;break;case 1:t[g++]=n<<2|(48&C)>>4,n=C,o=2;break;case 2:t[g++]=(15&n)<<4|(60&C)>>2,n=C,o=3;break;case 3:t[g++]=(3&n)<<6|C,o=0}}if(1===o)throw Error(a);return g-I},g.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},7875:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,g){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:g||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var g=this._listeners[e],n=0;n<g.length;)g[n].fn===t?g.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var g=[],n=1;n<arguments.length;)g.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,g)}return this}},249:function(e){"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),g=new Uint8Array(t.buffer),n=128===g[3];function r(e,n,r){t[0]=e,n[r]=g[0],n[r+1]=g[1],n[r+2]=g[2],n[r+3]=g[3]}function I(e,n,r){t[0]=e,n[r]=g[3],n[r+1]=g[2],n[r+2]=g[1],n[r+3]=g[0]}function a(e,n){return g[0]=e[n],g[1]=e[n+1],g[2]=e[n+2],g[3]=e[n+3],t[0]}function o(e,n){return g[3]=e[n],g[2]=e[n+1],g[1]=e[n+2],g[0]=e[n+3],t[0]}e.writeFloatLE=n?r:I,e.writeFloatBE=n?I:r,e.readFloatLE=n?a:o,e.readFloatBE=n?o:a}():function(){function t(e,t,g,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,g,n);else if(isNaN(t))e(2143289344,g,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,g,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,g,n);else{var I=Math.floor(Math.log(t)/Math.LN2);e((r<<31|I+127<<23|8388607&Math.round(t*Math.pow(2,-I)*8388608))>>>0,g,n)}}function a(e,t,g){var n=e(t,g),r=2*(n>>31)+1,I=n>>>23&255,a=8388607&n;return 255===I?a?NaN:r*(1/0):0===I?1401298464324817e-60*r*a:r*Math.pow(2,I-150)*(a+8388608)}e.writeFloatLE=t.bind(null,g),e.writeFloatBE=t.bind(null,n),e.readFloatLE=a.bind(null,r),e.readFloatBE=a.bind(null,I)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),g=new Uint8Array(t.buffer),n=128===g[7];function r(e,n,r){t[0]=e,n[r]=g[0],n[r+1]=g[1],n[r+2]=g[2],n[r+3]=g[3],n[r+4]=g[4],n[r+5]=g[5],n[r+6]=g[6],n[r+7]=g[7]}function I(e,n,r){t[0]=e,n[r]=g[7],n[r+1]=g[6],n[r+2]=g[5],n[r+3]=g[4],n[r+4]=g[3],n[r+5]=g[2],n[r+6]=g[1],n[r+7]=g[0]}function a(e,n){return g[0]=e[n],g[1]=e[n+1],g[2]=e[n+2],g[3]=e[n+3],g[4]=e[n+4],g[5]=e[n+5],g[6]=e[n+6],g[7]=e[n+7],t[0]}function o(e,n){return g[7]=e[n],g[6]=e[n+1],g[5]=e[n+2],g[4]=e[n+3],g[3]=e[n+4],g[2]=e[n+5],g[1]=e[n+6],g[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:I,e.writeDoubleBE=n?I:r,e.readDoubleLE=n?a:o,e.readDoubleBE=n?o:a}():function(){function t(e,t,g,n,r,I){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,r,I+t),e(1/n>0?0:2147483648,r,I+g);else if(isNaN(n))e(0,r,I+t),e(2146959360,r,I+g);else if(n>17976931348623157e292)e(0,r,I+t),e((a<<31|2146435072)>>>0,r,I+g);else{var o;if(n<22250738585072014e-324)e((o=n/5e-324)>>>0,r,I+t),e((a<<31|o/4294967296)>>>0,r,I+g);else{var i=Math.floor(Math.log(n)/Math.LN2);1024===i&&(i=1023),e(4503599627370496*(o=n*Math.pow(2,-i))>>>0,r,I+t),e((a<<31|i+1023<<20|1048576*o&1048575)>>>0,r,I+g)}}}function a(e,t,g,n,r){var I=e(n,r+t),a=e(n,r+g),o=2*(a>>31)+1,i=a>>>20&2047,C=4294967296*(1048575&a)+I;return 2047===i?C?NaN:o*(1/0):0===i?5e-324*o*C:o*Math.pow(2,i-1075)*(C+4503599627370496)}e.writeDoubleLE=t.bind(null,g,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=a.bind(null,r,0,4),e.readDoubleBE=a.bind(null,I,4,0)}(),e}function g(e,t,g){t[g]=255&e,t[g+1]=e>>>8&255,t[g+2]=e>>>16&255,t[g+3]=e>>>24}function n(e,t,g){t[g]=e>>>24,t[g+1]=e>>>16&255,t[g+2]=e>>>8&255,t[g+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function I(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},6858:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},7423:function(e){"use strict";e.exports=function(e,t,g){var n=g||8192,r=n>>>1,I=null,a=n;return function(g){if(g<1||g>r)return e(g);a+g>n&&(I=e(n),a=0);var o=t.call(I,a,a+=g);return 7&a&&(a=1+(7|a)),o}}},248:function(e,t){"use strict";var g=t;g.length=function(e){for(var t=0,g=0,n=0;n<e.length;++n)(g=e.charCodeAt(n))<128?t+=1:g<2048?t+=2:55296===(64512&g)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},g.read=function(e,t,g){if(g-t<1)return"";for(var n,r=null,I=[],a=0;t<g;)(n=e[t++])<128?I[a++]=n:n>191&&n<224?I[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,I[a++]=55296+(n>>10),I[a++]=56320+(1023&n)):I[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,I)),a=0);return r?(a&&r.push(String.fromCharCode.apply(String,I.slice(0,a))),r.join("")):String.fromCharCode.apply(String,I.slice(0,a))},g.write=function(e,t,g){for(var n,r,I=g,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[g++]=n:n<2048?(t[g++]=n>>6|192,t[g++]=63&n|128):55296===(64512&n)&&56320===(64512&(r=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&r),++a,t[g++]=n>>18|240,t[g++]=n>>12&63|128,t[g++]=n>>6&63|128,t[g++]=63&n|128):(t[g++]=n>>12|224,t[g++]=n>>6&63|128,t[g++]=63&n|128);return g-I}},3162:function(e,t,g){var n=g(4704).default;function r(e){var t=new globalThis.AbortController;function g(){t.abort();var r,I=n(e);try{for(I.s();!(r=I.n()).done;){var a=r.value;a&&a.removeEventListener&&a.removeEventListener("abort",g)}}catch(o){I.e(o)}finally{I.f()}}var r,I=n(e);try{for(I.s();!(r=I.n()).done;){var a=r.value;if(a&&a.addEventListener){if(a.aborted){g();break}a.addEventListener("abort",g)}}}catch(o){I.e(o)}finally{I.f()}return t.signal}e.exports=r,e.exports.anySignal=r},8334:function(e){"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",g={},n=0;n<t.length;n++){var r=t.charAt(n);if(void 0!==g[r])throw new TypeError(r+" is ambiguous");g[r]=n}function I(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function a(e){for(var t=1,g=0;g<e.length;++g){var n=e.charCodeAt(g);if(n<33||n>126)return"Invalid prefix ("+e+")";t=I(t)^n>>5}for(t=I(t),g=0;g<e.length;++g){var r=e.charCodeAt(g);t=I(t)^31&r}return t}function o(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase(),r=e.toUpperCase();if(e!==n&&e!==r)return"Mixed-case string "+e;var o=(e=n).lastIndexOf("1");if(-1===o)return"No separator character for "+e;if(0===o)return"Missing prefix for "+e;var i=e.slice(0,o),C=e.slice(o+1);if(C.length<6)return"Data too short";var l=a(i);if("string"===typeof l)return l;for(var u=[],c=0;c<C.length;++c){var s=C.charAt(c),A=g[s];if(void 0===A)return"Unknown character "+s;l=I(l)^A,c+6>=C.length||u.push(A)}return 1!==l?"Invalid checksum for "+e:{prefix:i,words:u}}function i(e,t,g,n){for(var r=0,I=0,a=(1<<g)-1,o=[],i=0;i<e.length;++i)for(r=r<<t|e[i],I+=t;I>=g;)I-=g,o.push(r>>I&a);if(n)I>0&&o.push(r<<g-I&a);else{if(I>=t)return"Excess padding";if(r<<g-I&a)return"Non-zero padding"}return o}e.exports={decodeUnsafe:function(){var e=o.apply(null,arguments);if("object"===typeof e)return e},decode:function(e){var t=o.apply(null,arguments);if("object"===typeof t)return t;throw new Error(t)},encode:function(e,g,n){if(n=n||90,e.length+7+g.length>n)throw new TypeError("Exceeds length limit");var r=a(e=e.toLowerCase());if("string"===typeof r)throw new Error(r);for(var o=e+"1",i=0;i<g.length;++i){var C=g[i];if(C>>5!==0)throw new Error("Non 5-bit word");r=I(r)^C,o+=t.charAt(C)}for(i=0;i<6;++i)r=I(r);for(r^=1,i=0;i<6;++i){o+=t.charAt(r>>5*(5-i)&31)}return o},toWordsUnsafe:function(e){var t=i(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=i(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=i(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=i(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},3926:function(e,t,g){"use strict";var n=g(6828);e.exports=function(e){return"function"===typeof e.stream?n(e.stream()):n(new Response(e).body)}},6828:function(e,t,g){"use strict";var n=g(7061).default,r=g(6737).default,I=g(8186).default;function a(){return a=I((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n().mark((function g(){var I,a;return n().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:I=e.getReader(),g.prev=1;case 2:return g.next=5,r(I.read());case 5:if(!(a=g.sent).done){g.next=8;break}return g.abrupt("return");case 8:return g.next=10,a.value;case 10:g.next=2;break;case 12:return g.prev=12,!0!==t.preventCancel&&I.cancel(),I.releaseLock(),g.finish(12);case 16:case"end":return g.stop()}}),g,null,[[1,,12,16]])}))()})),a.apply(this,arguments)}e.exports=function(e){return a.apply(this,arguments)}},8921:function(e,t,g){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var g="color: "+this.color;t.splice(1,0,g,"color: inherit");var n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))})),t.splice(r,0,g)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(g){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(g){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"/IPFS-Supply-Chain-Assurance1",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_scaAddress:"0x8787C1F9353c945fD1B79a6565F3e44aa236B137"}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=g(8065)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},8065:function(e,t,g){var n=g(861).default;e.exports=function(e){function t(e){var g,n,I,a=null;function o(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(o.enabled){var I=o,a=Number(new Date),i=a-(g||a);I.diff=i,I.prev=g,I.curr=a,g=a,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var C=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,g){if("%%"===e)return"%";C++;var r=t.formatters[g];if("function"===typeof r){var a=n[C];e=r.call(I,a),n.splice(C,1),C--}return e})),t.formatArgs.call(I,n);var l=I.log||t.log;l.apply(I,n)}}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(n!==t.namespaces&&(n=t.namespaces,I=t.enabled(e)),I)},set:function(e){a=e}}),"function"===typeof t.init&&t.init(o),o}function r(e,g){var n=t(this.namespace+("undefined"===typeof g?":":g)+e);return n.log=this.log,n}function I(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(n(t.names.map(I)),n(t.skips.map(I).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var g;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length;for(g=0;g<r;g++)n[g]&&("-"===(e=n[g].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var g,n;for(g=0,n=t.skips.length;g<n;g++)if(t.skips[g].test(e))return!1;for(g=0,n=t.names.length;g<n;g++)if(t.names[g].test(e))return!0;return!1},t.humanize=g(866),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(g){t[g]=e[g]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var g=0,n=0;n<e.length;n++)g=(g<<5)-g+e.charCodeAt(n),g|=0;return t.colors[Math.abs(g)%t.colors.length]},t.enable(t.load()),t}},8166:function(e){"use strict";function t(e,t){for(var g in t)Object.defineProperty(e,g,{value:t[g],enumerable:!0,configurable:!0});return e}e.exports=function(e,g,n){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"===typeof g&&(n=g,g=""),g&&(n.code=g);try{return t(e,n)}catch(I){n.message=e.message,n.stack=e.stack;var r=function(){};return r.prototype=Object.create(Object.getPrototypeOf(e)),t(new r,n)}}},6653:function(e,t,g){var n=t;n.utils=g(1624),n.common=g(5933),n.sha=g(6359),n.ripemd=g(670),n.hmac=g(7113),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},5933:function(e,t,g){"use strict";var n=g(1624),r=g(2262);function I(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=I,I.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var g=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-g,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-g,this.endian);for(var r=0;r<e.length;r+=this._delta32)this._update(e,r,r+this._delta32)}return this},I.prototype.digest=function(e){return this.update(this._pad()),r(null===this.pending),this._digest(e)},I.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,g=t-(e+this.padLength)%t,n=new Array(g+this.padLength);n[0]=128;for(var r=1;r<g;r++)n[r]=0;if(e<<=3,"big"===this.endian){for(var I=8;I<this.padLength;I++)n[r++]=0;n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=e>>>24&255,n[r++]=e>>>16&255,n[r++]=e>>>8&255,n[r++]=255&e}else for(n[r++]=255&e,n[r++]=e>>>8&255,n[r++]=e>>>16&255,n[r++]=e>>>24&255,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,I=8;I<this.padLength;I++)n[r++]=0;return n}},7113:function(e,t,g){"use strict";var n=g(1624),r=g(2262);function I(e,t,g){if(!(this instanceof I))return new I(e,t,g);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,g))}e.exports=I,I.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),r(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},I.prototype.update=function(e,t){return this.inner.update(e,t),this},I.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},670:function(e,t,g){"use strict";var n=g(1624),r=g(5933),I=n.rotl32,a=n.sum32,o=n.sum32_3,i=n.sum32_4,C=r.BlockHash;function l(){if(!(this instanceof l))return new l;C.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(e,t,g,n){return e<=15?t^g^n:e<=31?t&g|~t&n:e<=47?(t|~g)^n:e<=63?t&n|g&~n:t^(g|~n)}function c(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function s(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(l,C),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var g=this.h[0],n=this.h[1],r=this.h[2],C=this.h[3],l=this.h[4],b=g,p=n,f=r,Z=C,y=l,G=0;G<80;G++){var B=a(I(i(g,u(G,n,r,C),e[A[G]+t],c(G)),h[G]),l);g=l,l=C,C=I(r,10),r=n,n=B,B=a(I(i(b,u(79-G,p,f,Z),e[d[G]+t],s(G)),m[G]),y),b=y,y=Z,Z=I(f,10),f=p,p=B}B=o(this.h[1],r,Z),this.h[1]=o(this.h[2],C,y),this.h[2]=o(this.h[3],l,b),this.h[3]=o(this.h[4],g,p),this.h[4]=o(this.h[0],n,f),this.h[0]=B},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var A=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},6359:function(e,t,g){"use strict";t.sha1=g(6770),t.sha224=g(6045),t.sha256=g(4291),t.sha384=g(9083),t.sha512=g(7690)},6770:function(e,t,g){"use strict";var n=g(1624),r=g(5933),I=g(3030),a=n.rotl32,o=n.sum32,i=n.sum32_5,C=I.ft_1,l=r.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(c,l),e.exports=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(e,t){for(var g=this.W,n=0;n<16;n++)g[n]=e[t+n];for(;n<g.length;n++)g[n]=a(g[n-3]^g[n-8]^g[n-14]^g[n-16],1);var r=this.h[0],I=this.h[1],l=this.h[2],c=this.h[3],s=this.h[4];for(n=0;n<g.length;n++){var A=~~(n/20),d=i(a(r,5),C(A,I,l,c),s,g[n],u[A]);s=c,c=l,l=a(I,30),I=r,r=d}this.h[0]=o(this.h[0],r),this.h[1]=o(this.h[1],I),this.h[2]=o(this.h[2],l),this.h[3]=o(this.h[3],c),this.h[4]=o(this.h[4],s)},c.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},6045:function(e,t,g){"use strict";var n=g(1624),r=g(4291);function I(){if(!(this instanceof I))return new I;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(I,r),e.exports=I,I.blockSize=512,I.outSize=224,I.hmacStrength=192,I.padLength=64,I.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},4291:function(e,t,g){"use strict";var n=g(1624),r=g(5933),I=g(3030),a=g(2262),o=n.sum32,i=n.sum32_4,C=n.sum32_5,l=I.ch32,u=I.maj32,c=I.s0_256,s=I.s1_256,A=I.g0_256,d=I.g1_256,h=r.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}n.inherits(b,h),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var g=this.W,n=0;n<16;n++)g[n]=e[t+n];for(;n<g.length;n++)g[n]=i(d(g[n-2]),g[n-7],A(g[n-15]),g[n-16]);var r=this.h[0],I=this.h[1],h=this.h[2],m=this.h[3],b=this.h[4],p=this.h[5],f=this.h[6],Z=this.h[7];for(a(this.k.length===g.length),n=0;n<g.length;n++){var y=C(Z,s(b),l(b,p,f),this.k[n],g[n]),G=o(c(r),u(r,I,h));Z=f,f=p,p=b,b=o(m,y),m=h,h=I,I=r,r=o(y,G)}this.h[0]=o(this.h[0],r),this.h[1]=o(this.h[1],I),this.h[2]=o(this.h[2],h),this.h[3]=o(this.h[3],m),this.h[4]=o(this.h[4],b),this.h[5]=o(this.h[5],p),this.h[6]=o(this.h[6],f),this.h[7]=o(this.h[7],Z)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},9083:function(e,t,g){"use strict";var n=g(1624),r=g(7690);function I(){if(!(this instanceof I))return new I;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(I,r),e.exports=I,I.blockSize=1024,I.outSize=384,I.hmacStrength=192,I.padLength=128,I.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},7690:function(e,t,g){"use strict";var n=g(1624),r=g(5933),I=g(2262),a=n.rotr64_hi,o=n.rotr64_lo,i=n.shr64_hi,C=n.shr64_lo,l=n.sum64,u=n.sum64_hi,c=n.sum64_lo,s=n.sum64_4_hi,A=n.sum64_4_lo,d=n.sum64_5_hi,h=n.sum64_5_lo,m=r.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function p(){if(!(this instanceof p))return new p;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function f(e,t,g,n,r){var I=e&g^~e&r;return I<0&&(I+=4294967296),I}function Z(e,t,g,n,r,I){var a=t&n^~t&I;return a<0&&(a+=4294967296),a}function y(e,t,g,n,r){var I=e&g^e&r^g&r;return I<0&&(I+=4294967296),I}function G(e,t,g,n,r,I){var a=t&n^t&I^n&I;return a<0&&(a+=4294967296),a}function B(e,t){var g=a(e,t,28)^a(t,e,2)^a(t,e,7);return g<0&&(g+=4294967296),g}function v(e,t){var g=o(e,t,28)^o(t,e,2)^o(t,e,7);return g<0&&(g+=4294967296),g}function k(e,t){var g=a(e,t,14)^a(e,t,18)^a(t,e,9);return g<0&&(g+=4294967296),g}function S(e,t){var g=o(e,t,14)^o(e,t,18)^o(t,e,9);return g<0&&(g+=4294967296),g}function W(e,t){var g=a(e,t,1)^a(e,t,8)^i(e,t,7);return g<0&&(g+=4294967296),g}function V(e,t){var g=o(e,t,1)^o(e,t,8)^C(e,t,7);return g<0&&(g+=4294967296),g}function w(e,t){var g=a(e,t,19)^a(t,e,29)^i(e,t,6);return g<0&&(g+=4294967296),g}function R(e,t){var g=o(e,t,19)^o(t,e,29)^C(e,t,6);return g<0&&(g+=4294967296),g}n.inherits(p,m),e.exports=p,p.blockSize=1024,p.outSize=512,p.hmacStrength=192,p.padLength=128,p.prototype._prepareBlock=function(e,t){for(var g=this.W,n=0;n<32;n++)g[n]=e[t+n];for(;n<g.length;n+=2){var r=w(g[n-4],g[n-3]),I=R(g[n-4],g[n-3]),a=g[n-14],o=g[n-13],i=W(g[n-30],g[n-29]),C=V(g[n-30],g[n-29]),l=g[n-32],u=g[n-31];g[n]=s(r,I,a,o,i,C,l,u),g[n+1]=A(r,I,a,o,i,C,l,u)}},p.prototype._update=function(e,t){this._prepareBlock(e,t);var g=this.W,n=this.h[0],r=this.h[1],a=this.h[2],o=this.h[3],i=this.h[4],C=this.h[5],s=this.h[6],A=this.h[7],m=this.h[8],b=this.h[9],p=this.h[10],W=this.h[11],V=this.h[12],w=this.h[13],R=this.h[14],X=this.h[15];I(this.k.length===g.length);for(var J=0;J<g.length;J+=2){var Y=R,H=X,N=k(m,b),F=S(m,b),K=f(m,b,p,W,V),x=Z(m,b,p,W,V,w),E=this.k[J],M=this.k[J+1],D=g[J],U=g[J+1],z=d(Y,H,N,F,K,x,E,M,D,U),L=h(Y,H,N,F,K,x,E,M,D,U);Y=B(n,r),H=v(n,r),N=y(n,r,a,o,i),F=G(n,r,a,o,i,C);var Q=u(Y,H,N,F),T=c(Y,H,N,F);R=V,X=w,V=p,w=W,p=m,W=b,m=u(s,A,z,L),b=c(A,A,z,L),s=i,A=C,i=a,C=o,a=n,o=r,n=u(z,L,Q,T),r=c(z,L,Q,T)}l(this.h,0,n,r),l(this.h,2,a,o),l(this.h,4,i,C),l(this.h,6,s,A),l(this.h,8,m,b),l(this.h,10,p,W),l(this.h,12,V,w),l(this.h,14,R,X)},p.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},3030:function(e,t,g){"use strict";var n=g(1624).rotr32;function r(e,t,g){return e&t^~e&g}function I(e,t,g){return e&t^e&g^t&g}function a(e,t,g){return e^t^g}t.ft_1=function(e,t,g,n){return 0===e?r(t,g,n):1===e||3===e?a(t,g,n):2===e?I(t,g,n):void 0},t.ch32=r,t.maj32=I,t.p32=a,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},1624:function(e,t,g){"use strict";var n=g(2262),r=g(2826);function I(e,t){return 55296===(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320===(64512&e.charCodeAt(t+1)))}function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function i(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=r,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var g=[];if("string"===typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e),r=0;r<e.length;r+=2)g.push(parseInt(e[r]+e[r+1],16))}else for(var n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?g[n++]=a:a<2048?(g[n++]=a>>6|192,g[n++]=63&a|128):I(e,r)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),g[n++]=a>>18|240,g[n++]=a>>12&63|128,g[n++]=a>>6&63|128,g[n++]=63&a|128):(g[n++]=a>>12|224,g[n++]=a>>6&63|128,g[n++]=63&a|128)}else for(r=0;r<e.length;r++)g[r]=0|e[r];return g},t.toHex=function(e){for(var t="",g=0;g<e.length;g++)t+=o(e[g].toString(16));return t},t.htonl=a,t.toHex32=function(e,t){for(var g="",n=0;n<e.length;n++){var r=e[n];"little"===t&&(r=a(r)),g+=i(r.toString(16))}return g},t.zero2=o,t.zero8=i,t.join32=function(e,t,g,r){var I=g-t;n(I%4===0);for(var a=new Array(I/4),o=0,i=t;o<a.length;o++,i+=4){var C;C="big"===r?e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]:e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i],a[o]=C>>>0}return a},t.split32=function(e,t){for(var g=new Array(4*e.length),n=0,r=0;n<e.length;n++,r+=4){var I=e[n];"big"===t?(g[r]=I>>>24,g[r+1]=I>>>16&255,g[r+2]=I>>>8&255,g[r+3]=255&I):(g[r+3]=I>>>24,g[r+2]=I>>>16&255,g[r+1]=I>>>8&255,g[r]=255&I)}return g},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,g){return e+t+g>>>0},t.sum32_4=function(e,t,g,n){return e+t+g+n>>>0},t.sum32_5=function(e,t,g,n,r){return e+t+g+n+r>>>0},t.sum64=function(e,t,g,n){var r=e[t],I=n+e[t+1]>>>0,a=(I<n?1:0)+g+r;e[t]=a>>>0,e[t+1]=I},t.sum64_hi=function(e,t,g,n){return(t+n>>>0<t?1:0)+e+g>>>0},t.sum64_lo=function(e,t,g,n){return t+n>>>0},t.sum64_4_hi=function(e,t,g,n,r,I,a,o){var i=0,C=t;return i+=(C=C+n>>>0)<t?1:0,i+=(C=C+I>>>0)<I?1:0,e+g+r+a+(i+=(C=C+o>>>0)<o?1:0)>>>0},t.sum64_4_lo=function(e,t,g,n,r,I,a,o){return t+n+I+o>>>0},t.sum64_5_hi=function(e,t,g,n,r,I,a,o,i,C){var l=0,u=t;return l+=(u=u+n>>>0)<t?1:0,l+=(u=u+I>>>0)<I?1:0,l+=(u=u+o>>>0)<o?1:0,e+g+r+a+i+(l+=(u=u+C>>>0)<C?1:0)>>>0},t.sum64_5_lo=function(e,t,g,n,r,I,a,o,i,C){return t+n+I+o+C>>>0},t.rotr64_hi=function(e,t,g){return(t<<32-g|e>>>g)>>>0},t.rotr64_lo=function(e,t,g){return(e<<32-g|t>>>g)>>>0},t.shr64_hi=function(e,t,g){return e>>>g},t.shr64_lo=function(e,t,g){return(e<<32-g|t>>>g)>>>0}},2826:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var g=function(){};g.prototype=t.prototype,e.prototype=new g,e.prototype.constructor=e}}},1947:function(e,t,g){"use strict";var n=g(3353),r="object"===typeof window&&"object"===typeof document&&9===document.nodeType,I=n(),a=r&&!I,o=I&&!r,i=I&&r,C="undefined"!==typeof process&&"undefined"!==typeof process.release&&"node"===process.release.name&&!I,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,u="undefined"!==typeof process&&!1,c="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:u,isElectron:I,isElectronMain:o,isElectronRenderer:i,isNode:C,isBrowser:a,isWebWorker:l,isEnvWithDom:r,isReactNative:c}},7884:function(e,t,g){"use strict";e.exports=g(7058)},3307:function(e,t,g){"use strict";var n=g(7061).default,r=g(8186).default,I=g(6737).default,a=g(8131).default,o=g(8237).default,i=g(9652);function C(e,t){return l.apply(this,arguments)}function l(){return(l=r(n().mark((function e(t,g){var r,C;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new i,e.next=3,I(r.get(t,g));case 3:return C=e.sent,e.delegateYield(a(o(C.iterator()),I),"t0",5);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports=function(e,t){return{path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:C(e,t)}}},9652:function(e,t,g){"use strict";var n=g(8416).default,r=g(7061).default,I=g(2122).default,a=g(7156).default,o=g(6690).default,i=g(9728).default,C=g(8186).default,l=g(6737).default,u=g(8131).default,c=g(8237).default,s=g(3609),A=s.fetch,d=s.Request,h=s.Headers,m=g(4505),b=m.TimeoutError,p=m.HTTPError,f=g(6861).bind({ignoreUndefined:!0}),Z=g(1922),y=Z.URL,G=Z.URLSearchParams,B=g(3162),v=function(e,t,g){if(void 0===t)return e;var n=Date.now(),r=function(){return Date.now()-n>=t};return new Promise((function(n,I){var a=setTimeout((function(){r()&&(I(new b),g.abort())}),t),o=function(e){return function(t){clearTimeout(a),r()?I(new b):e(t)}};e.then(o(n),o(I))}))},k={throwHttpErrors:!0,credentials:"same-origin"},S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.opts=f(k,t)}return i(e,[{key:"fetch",value:function(){var e=a(r().mark((function e(t){var g,n,a,o,i,s,m,b,Z,k,S=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=S.length>1&&void 0!==S[1]?S[1]:{},n=f(this.opts,g),a=new h(n.headers),"string"===typeof t||(t instanceof y||t instanceof d)){e.next=5;break}throw new TypeError("`resource` must be a string, URL, or Request");case 5:return o=new y(t.toString(),n.base),i=n.searchParams,s=n.transformSearchParams,m=n.json,i&&(o.search="function"===typeof s?s(new G(n.searchParams)):new G(n.searchParams)),m&&(n.body=JSON.stringify(n.json),a.set("content-type","application/json")),b=new AbortController,Z=B([b.signal,n.signal]),e.next=13,v(A(o.toString(),I(I({},n),{},{signal:Z,timeout:void 0,headers:a})),n.timeout,b);case 13:if((k=e.sent).ok||!n.throwHttpErrors){e.next=19;break}if(!n.handleError){e.next=18;break}return e.next=18,n.handleError(k);case 18:throw new p(k);case 19:return k.iterator=C(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(u(c(V(k.body)),l),"t0",1);case 1:case"end":return e.stop()}}),e)}))),k.ndjson=C(r().mark((function e(){var t,n,I,a,o,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,n=!1,e.prev=2,a=c(W(k.iterator()));case 4:return e.next=6,l(a.next());case 6:if(!(t=!(o=e.sent).done)){e.next=18;break}if(i=o.value,!g.transform){e.next=13;break}return e.next=11,g.transform(i);case 11:e.next=15;break;case 13:return e.next=15,i;case 15:t=!1,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),n=!0,I=e.t0;case 24:if(e.prev=24,e.prev=25,!t||null==a.return){e.next=29;break}return e.next=29,l(a.return());case 29:if(e.prev=29,!n){e.next=32;break}throw I;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])}))),e.abrupt("return",k);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,I(I({},t),{},{method:"POST"}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,I(I({},t),{},{method:"GET"}))}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,I(I({},t),{},{method:"PUT"}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,I(I({},t),{},{method:"DELETE"}))}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,I(I({},t),{},{method:"OPTIONS"}))}}]),e}(),W=function(){var e=C(r().mark((function e(t){var g,n,I,a,o,i,C,u,s,A,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=new TextDecoder,n="",I=!1,a=!1,e.prev=4,i=c(t);case 6:return e.next=8,l(i.next());case 8:if(!(I=!(C=e.sent).done)){e.next=25;break}u=C.value,n+=g.decode(u,{stream:!0}),s=n.split(/\r?\n/),A=0;case 13:if(!(A<s.length-1)){e.next=21;break}if(!((d=s[A].trim()).length>0)){e.next=18;break}return e.next=18,JSON.parse(d);case 18:A++,e.next=13;break;case 21:n=s[s.length-1];case 22:I=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),a=!0,o=e.t0;case 31:if(e.prev=31,e.prev=32,!I||null==i.return){e.next=36;break}return e.next=36,l(i.return());case 36:if(e.prev=36,!a){e.next=39;break}throw o;case 39:return e.finish(36);case 40:return e.finish(31);case 41:if(0===(n=(n+=g.decode()).trim()).length){e.next=46;break}return e.next=46,JSON.parse(n);case 46:case"end":return e.stop()}}),e,null,[[4,27,31,41],[32,,36,40]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e){if(X(e)){var t=e[Symbol.asyncIterator]();return n({},Symbol.asyncIterator,(function(){return{next:t.next.bind(t),return:function(g){return e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:g})}}}))}if(R(e)){var g=e.getReader();return C(r().mark((function e(){var t,n,I;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.next=4,l(g.read());case 4:if(t=e.sent,n=t.done,I=t.value,!n){e.next=9;break}return e.abrupt("return");case 9:if(!I){e.next=12;break}return e.next=12,I;case 12:e.next=1;break;case 14:return e.prev=14,g.releaseLock(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,,14,17]])})))()}if(w(e))return e;throw new TypeError("Body can't be converted to AsyncIterable")},w=function(e){return"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator]},R=function(e){return e&&"function"===typeof e.getReader},X=function(e){return Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable")};S.HTTPError=p,S.TimeoutError=b,S.streamToAsyncIterator=V,S.post=function(e,t){return new S(t).post(e,t)},S.get=function(e,t){return new S(t).get(e,t)},S.put=function(e,t){return new S(t).put(e,t)},S.delete=function(e,t){return new S(t).delete(e,t)},S.options=function(e,t){return new S(t).options(e,t)},e.exports=S},4505:function(e,t,g){"use strict";var n=g(9728).default,r=g(6690).default,I=g(1655).default,a=g(6389).default,o=g(3496).default,i=function(e){I(g,e);var t=a(g);function g(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out";return r(this,g),(e=t.call(this,n)).name="TimeoutError",e}return n(g)}(o(Error));t.TimeoutError=i;var C=function(e){I(g,e);var t=a(g);function g(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted.";return r(this,g),(e=t.call(this,n)).name="AbortError",e}return n(g)}(o(Error));t.AbortError=C;var l=function(e){I(g,e);var t=a(g);function g(e){var n;return r(this,g),(n=t.call(this,e.statusText)).name="HTTPError",n.response=e,n}return n(g)}(o(Error));t.HTTPError=l},3609:function(e,t,g){"use strict";var n=g(9728).default,r=g(6690).default,I=g(6115).default,a=g(1655).default,o=g(6389).default,i=g(7424).default,C=g(4704).default,l=g(4505),u=l.TimeoutError,c=l.AbortError,s=g(7884),A=s.Response,d=s.Request,h=s.Headers,m=s.default,b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=new XMLHttpRequest;g.open(t.method||"GET",e.toString(),!0);var n=t.timeout,r=t.headers;if(n&&n>0&&n<1/0&&(g.timeout=n),null!=t.overrideMimeType&&g.overrideMimeType(t.overrideMimeType),r){var I,a=C(new h(r));try{for(a.s();!(I=a.n()).done;){var o=i(I.value,2),l=o[0],s=o[1];g.setRequestHeader(l,s)}}catch(d){a.e(d)}finally{a.f()}}return t.signal&&(t.signal.onabort=function(){return g.abort()}),t.onUploadProgress&&(g.upload.onprogress=t.onUploadProgress),g.responseType="arraybuffer",new Promise((function(e,n){var r=function(t){switch(t.type){case"error":e(A.error());break;case"load":e(new Z(g.responseURL,g.response,{status:g.status,statusText:g.statusText,headers:f(g.getAllResponseHeaders())}));break;case"timeout":n(new u);break;case"abort":n(new c)}};g.onerror=r,g.onload=r,g.ontimeout=r,g.onabort=r,g.send(t.body)}))},p=m,f=function(e){var t,g=new h,n=C(e.trim().split(/[\r\n]+/));try{for(n.s();!(t=n.n()).done;){var r=t.value,I=r.indexOf(": ");I>0&&g.set(r.slice(0,I),r.slice(I+1))}}catch(a){n.e(a)}finally{n.f()}return g},Z=function(e){a(g,e);var t=o(g);function g(e,n,a){var o;return r(this,g),o=t.call(this,n,a),Object.defineProperty(I(o),"url",{value:e}),o}return n(g)}(A);e.exports={fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t.onUploadProgress?b(e,t):p(e,t)},Request:d,Headers:h}},3353:function(e){e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},1922:function(e,t,g){"use strict";var n=g(6429),r=n.URLWithLegacySupport,I=n.format,a=n.URLSearchParams,o=n.defaultBase,i=g(3977);e.exports={URL:r,URLSearchParams:a,format:I,relative:i,defaultBase:o}},3977:function(e,t,g){"use strict";var n=g(6429),r=n.URLWithLegacySupport,I=n.format;e.exports=function(e){var t,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,o=g.protocol?g.protocol.replace(":",""):"http";o=(n[o]||a||o)+":";try{t=new r(e)}catch(C){t={}}var i=Object.assign({},g,{protocol:o||t.protocol,host:g.host||t.host});return new r(e,I(i)).toString()}},6429:function(e,t,g){"use strict";var n=g(6690).default,r=g(9728).default,I="undefined"!==typeof navigator&&"ReactNative"===navigator.product;var a=self.URL,o=I?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"",i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;n(this,e),this.super=new a(t,g),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}return r(e,[{key:"hash",get:function(){return this.super.hash},set:function(e){this.super.hash=e}},{key:"host",get:function(){return this.super.host},set:function(e){this.super.host=e}},{key:"hostname",get:function(){return this.super.hostname},set:function(e){this.super.hostname=e}},{key:"href",get:function(){return this.super.href},set:function(e){this.super.href=e}},{key:"origin",get:function(){return this.super.origin}},{key:"password",get:function(){return this.super.password},set:function(e){this.super.password=e}},{key:"pathname",get:function(){return this.super.pathname},set:function(e){this.super.pathname=e}},{key:"port",get:function(){return this.super.port},set:function(e){this.super.port=e}},{key:"protocol",get:function(){return this.super.protocol},set:function(e){this.super.protocol=e}},{key:"search",get:function(){return this.super.search},set:function(e){this.super.search=e}},{key:"searchParams",get:function(){return this.super.searchParams}},{key:"username",get:function(){return this.super.username},set:function(e){this.super.username=e}},{key:"toJSON",value:function(){return this.super.toJSON()}},{key:"toString",value:function(){return this.super.toString()}},{key:"format",value:function(){return this.toString()}}],[{key:"createObjectURL",value:function(e){return a.createObjectURL(e)}},{key:"revokeObjectURL",value:function(e){a.revokeObjectURL(e)}}]),e}();e.exports={URLWithLegacySupport:i,URLSearchParams:self.URLSearchParams,defaultBase:o,format:function(e){if("string"===typeof e)return new a(e).toString();if(!(e instanceof a)){var t=e.username&&e.password?"".concat(e.username,":").concat(e.password,"@"):"",g=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",r=e.protocol?e.protocol+"//":"",I=e.host||"",o=e.hostname||"",i=e.search||(e.query?"?"+e.query:""),C=e.hash||"",l=e.pathname||"",u=e.path||l+i;return"".concat(r).concat(t||g).concat(I||o+n).concat(u).concat(C)}}}},6936:function(e,t,g){"use strict";var n=g(7061).default,r=g(7156).default,I=g(8237).default,a=function(){var e=r(n().mark((function e(t){var g,r,a,o,i,C,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=[],r=!1,a=!1,e.prev=3,i=I(t);case 5:return e.next=7,i.next();case 7:if(!(r=!(C=e.sent).done)){e.next=13;break}l=C.value,g.push(l);case 10:r=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,o=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==i.return){e.next=24;break}return e.next=24,i.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",g);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}();e.exports=a},6735:function(e,t,g){"use strict";var n=g(7061).default,r=g(7156).default,I=g(8237).default,a=function(){var e=r(n().mark((function e(t){var g,r,a,o,i,C;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=!1,r=!1,e.prev=2,o=I(t);case 4:return e.next=6,o.next();case 6:if(!(g=!(i=e.sent).done)){e.next=12;break}return C=i.value,e.abrupt("return",C);case 9:g=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),r=!0,a=e.t0;case 18:if(e.prev=18,e.prev=19,!g||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!r){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}();e.exports=a},5068:function(e,t,g){"use strict";var n=g(7061).default,r=g(7156).default,I=g(8237).default,a=function(){var e=r(n().mark((function e(t){var g,r,a,o,i,C,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,a=!1,e.prev=2,i=I(t);case 4:return e.next=6,i.next();case 6:if(!(r=!(C=e.sent).done)){e.next=12;break}l=C.value,g=l;case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),a=!0,o=e.t0;case 18:if(e.prev=18,e.prev=19,!r||null==i.return){e.next=23;break}return e.next=23,i.return();case 23:if(e.prev=23,!a){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:return e.abrupt("return",g);case 29:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t){return e.apply(this,arguments)}}();e.exports=a},1116:function(e,t,g){"use strict";var n=g(7061).default,r=g(6737).default,I=g(8186).default,a=g(8237).default,o=function(){var e=I(n().mark((function e(t,g){var I,o,i,C,l,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I=!1,o=!1,e.prev=2,C=a(t);case 4:return e.next=6,r(C.next());case 6:if(!(I=!(l=e.sent).done)){e.next=13;break}return u=l.value,e.next=10,g(u);case 10:I=!1,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),o=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!I||null==C.return){e.next=24;break}return e.next=24,r(C.return());case 24:if(e.prev=24,!o){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:case"end":return e.stop()}}),e,null,[[2,15,19,29],[20,,24,28]])})));return function(t,g){return e.apply(this,arguments)}}();e.exports=o},5498:function(e,t,g){"use strict";var n=g(8416).default,r=g(7424).default;e.exports=function(e){var t=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],g=r(t,2),I=g[0],a=g[1],o=[];return n({peek:function(){return I.next()},push:function(e){o.push(e)},next:function(){return o.length?{done:!1,value:o.shift()}:I.next()}},a,(function(){return this}))}},5958:function(e,t,g){var n;!function(){"use strict";var r="input is invalid type",I="object"===typeof window,a=I?window:{};a.JS_SHA3_NO_WINDOW&&(I=!1);var o=!I&&"object"===typeof self;!a.JS_SHA3_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node?a=g.g:o&&(a=self);var i=!a.JS_SHA3_NO_COMMON_JS&&e.exports,C=g.amdO,l=!a.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,u="0123456789abcdef".split(""),c=[4,1024,262144,67108864],s=[0,8,16,24],A=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],d=[224,256,384,512],h=[128,256],m=["hex","buffer","arrayBuffer","array","digest"],b={128:168,256:136};!a.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!l||!a.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var p=function(e,t,g){return function(n){return new Y(e,t,e).update(n)[g]()}},f=function(e,t,g){return function(n,r){return new Y(e,t,r).update(n)[g]()}},Z=function(e,t,g){return function(t,n,r,I){return k["cshake"+e].update(t,n,r,I)[g]()}},y=function(e,t,g){return function(t,n,r,I){return k["kmac"+e].update(t,n,r,I)[g]()}},G=function(e,t,g,n){for(var r=0;r<m.length;++r){var I=m[r];e[I]=t(g,n,I)}return e},B=function(e,t){var g=p(e,t,"hex");return g.create=function(){return new Y(e,t,e)},g.update=function(e){return g.create().update(e)},G(g,p,e,t)},v=[{name:"keccak",padding:[1,256,65536,16777216],bits:d,createMethod:B},{name:"sha3",padding:[6,1536,393216,100663296],bits:d,createMethod:B},{name:"shake",padding:[31,7936,2031616,520093696],bits:h,createMethod:function(e,t){var g=f(e,t,"hex");return g.create=function(g){return new Y(e,t,g)},g.update=function(e,t){return g.create(t).update(e)},G(g,f,e,t)}},{name:"cshake",padding:c,bits:h,createMethod:function(e,t){var g=b[e],n=Z(e,0,"hex");return n.create=function(n,r,I){return r||I?new Y(e,t,n).bytepad([r,I],g):k["shake"+e].create(n)},n.update=function(e,t,g,r){return n.create(t,g,r).update(e)},G(n,Z,e,t)}},{name:"kmac",padding:c,bits:h,createMethod:function(e,t){var g=b[e],n=y(e,0,"hex");return n.create=function(n,r,I){return new H(e,t,r).bytepad(["KMAC",I],g).bytepad([n],g)},n.update=function(e,t,g,r){return n.create(e,g,r).update(t)},G(n,y,e,t)}}],k={},S=[],W=0;W<v.length;++W)for(var V=v[W],w=V.bits,R=0;R<w.length;++R){var X=V.name+"_"+w[R];if(S.push(X),k[X]=V.createMethod(w[R],V.padding),"sha3"!==V.name){var J=V.name+w[R];S.push(J),k[J]=k[X]}}function Y(e,t,g){this.blocks=[],this.s=[],this.padding=t,this.outputBits=g,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=g>>5,this.extraBytes=(31&g)>>3;for(var n=0;n<50;++n)this.s[n]=0}function H(e,t,g){Y.call(this,e,t,g)}Y.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t,g=typeof e;if("string"!==g){if("object"!==g)throw new Error(r);if(null===e)throw new Error(r);if(l&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!l||!ArrayBuffer.isView(e)))throw new Error(r);t=!0}for(var n,I,a=this.blocks,o=this.byteCount,i=e.length,C=this.blockCount,u=0,c=this.s;u<i;){if(this.reset)for(this.reset=!1,a[0]=this.block,n=1;n<C+1;++n)a[n]=0;if(t)for(n=this.start;u<i&&n<o;++u)a[n>>2]|=e[u]<<s[3&n++];else for(n=this.start;u<i&&n<o;++u)(I=e.charCodeAt(u))<128?a[n>>2]|=I<<s[3&n++]:I<2048?(a[n>>2]|=(192|I>>6)<<s[3&n++],a[n>>2]|=(128|63&I)<<s[3&n++]):I<55296||I>=57344?(a[n>>2]|=(224|I>>12)<<s[3&n++],a[n>>2]|=(128|I>>6&63)<<s[3&n++],a[n>>2]|=(128|63&I)<<s[3&n++]):(I=65536+((1023&I)<<10|1023&e.charCodeAt(++u)),a[n>>2]|=(240|I>>18)<<s[3&n++],a[n>>2]|=(128|I>>12&63)<<s[3&n++],a[n>>2]|=(128|I>>6&63)<<s[3&n++],a[n>>2]|=(128|63&I)<<s[3&n++]);if(this.lastByteIndex=n,n>=o){for(this.start=n-o,this.block=a[C],n=0;n<C;++n)c[n]^=a[n];N(c),this.reset=!0}else this.start=n}return this},Y.prototype.encode=function(e,t){var g=255&e,n=1,r=[g];for(g=255&(e>>=8);g>0;)r.unshift(g),g=255&(e>>=8),++n;return t?r.push(n):r.unshift(n),this.update(r),r.length},Y.prototype.encodeString=function(e){var t,g=typeof e;if("string"!==g){if("object"!==g)throw new Error(r);if(null===e)throw new Error(r);if(l&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!l||!ArrayBuffer.isView(e)))throw new Error(r);t=!0}var n=0,I=e.length;if(t)n=I;else for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);o<128?n+=1:o<2048?n+=2:o<55296||o>=57344?n+=3:(o=65536+((1023&o)<<10|1023&e.charCodeAt(++a)),n+=4)}return n+=this.encode(8*n),this.update(e),n},Y.prototype.bytepad=function(e,t){for(var g=this.encode(t),n=0;n<e.length;++n)g+=this.encodeString(e[n]);var r=t-g%t,I=[];return I.length=r,this.update(I),this},Y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,g=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[g],t=1;t<g+1;++t)e[t]=0;for(e[g-1]|=2147483648,t=0;t<g;++t)n[t]^=e[t];N(n)}},Y.prototype.toString=Y.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,g=this.s,n=this.outputBlocks,r=this.extraBytes,I=0,a=0,o="";a<n;){for(I=0;I<t&&a<n;++I,++a)e=g[I],o+=u[e>>4&15]+u[15&e]+u[e>>12&15]+u[e>>8&15]+u[e>>20&15]+u[e>>16&15]+u[e>>28&15]+u[e>>24&15];a%t===0&&(N(g),I=0)}return r&&(e=g[I],o+=u[e>>4&15]+u[15&e],r>1&&(o+=u[e>>12&15]+u[e>>8&15]),r>2&&(o+=u[e>>20&15]+u[e>>16&15])),o},Y.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,g=this.s,n=this.outputBlocks,r=this.extraBytes,I=0,a=0,o=this.outputBits>>3;e=r?new ArrayBuffer(n+1<<2):new ArrayBuffer(o);for(var i=new Uint32Array(e);a<n;){for(I=0;I<t&&a<n;++I,++a)i[a]=g[I];a%t===0&&N(g)}return r&&(i[I]=g[I],e=e.slice(0,o)),e},Y.prototype.buffer=Y.prototype.arrayBuffer,Y.prototype.digest=Y.prototype.array=function(){this.finalize();for(var e,t,g=this.blockCount,n=this.s,r=this.outputBlocks,I=this.extraBytes,a=0,o=0,i=[];o<r;){for(a=0;a<g&&o<r;++a,++o)e=o<<2,t=n[a],i[e]=255&t,i[e+1]=t>>8&255,i[e+2]=t>>16&255,i[e+3]=t>>24&255;o%g===0&&N(n)}return I&&(e=o<<2,t=n[a],i[e]=255&t,I>1&&(i[e+1]=t>>8&255),I>2&&(i[e+2]=t>>16&255)),i},H.prototype=new Y,H.prototype.finalize=function(){return this.encode(this.outputBits,!0),Y.prototype.finalize.call(this)};var N=function(e){var t,g,n,r,I,a,o,i,C,l,u,c,s,d,h,m,b,p,f,Z,y,G,B,v,k,S,W,V,w,R,X,J,Y,H,N,F,K,x,E,M,D,U,z,L,Q,T,j,P,O,_,q,$,ee,te,ge,ne,re,Ie,ae,oe,ie,Ce,le;for(n=0;n<48;n+=2)r=e[0]^e[10]^e[20]^e[30]^e[40],I=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],i=e[4]^e[14]^e[24]^e[34]^e[44],C=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],t=(c=e[8]^e[18]^e[28]^e[38]^e[48])^(a<<1|o>>>31),g=(s=e[9]^e[19]^e[29]^e[39]^e[49])^(o<<1|a>>>31),e[0]^=t,e[1]^=g,e[10]^=t,e[11]^=g,e[20]^=t,e[21]^=g,e[30]^=t,e[31]^=g,e[40]^=t,e[41]^=g,t=r^(i<<1|C>>>31),g=I^(C<<1|i>>>31),e[2]^=t,e[3]^=g,e[12]^=t,e[13]^=g,e[22]^=t,e[23]^=g,e[32]^=t,e[33]^=g,e[42]^=t,e[43]^=g,t=a^(l<<1|u>>>31),g=o^(u<<1|l>>>31),e[4]^=t,e[5]^=g,e[14]^=t,e[15]^=g,e[24]^=t,e[25]^=g,e[34]^=t,e[35]^=g,e[44]^=t,e[45]^=g,t=i^(c<<1|s>>>31),g=C^(s<<1|c>>>31),e[6]^=t,e[7]^=g,e[16]^=t,e[17]^=g,e[26]^=t,e[27]^=g,e[36]^=t,e[37]^=g,e[46]^=t,e[47]^=g,t=l^(r<<1|I>>>31),g=u^(I<<1|r>>>31),e[8]^=t,e[9]^=g,e[18]^=t,e[19]^=g,e[28]^=t,e[29]^=g,e[38]^=t,e[39]^=g,e[48]^=t,e[49]^=g,d=e[0],h=e[1],T=e[11]<<4|e[10]>>>28,j=e[10]<<4|e[11]>>>28,V=e[20]<<3|e[21]>>>29,w=e[21]<<3|e[20]>>>29,oe=e[31]<<9|e[30]>>>23,ie=e[30]<<9|e[31]>>>23,U=e[40]<<18|e[41]>>>14,z=e[41]<<18|e[40]>>>14,H=e[2]<<1|e[3]>>>31,N=e[3]<<1|e[2]>>>31,m=e[13]<<12|e[12]>>>20,b=e[12]<<12|e[13]>>>20,P=e[22]<<10|e[23]>>>22,O=e[23]<<10|e[22]>>>22,R=e[33]<<13|e[32]>>>19,X=e[32]<<13|e[33]>>>19,Ce=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,ge=e[4]<<30|e[5]>>>2,F=e[14]<<6|e[15]>>>26,K=e[15]<<6|e[14]>>>26,p=e[25]<<11|e[24]>>>21,f=e[24]<<11|e[25]>>>21,_=e[34]<<15|e[35]>>>17,q=e[35]<<15|e[34]>>>17,J=e[45]<<29|e[44]>>>3,Y=e[44]<<29|e[45]>>>3,v=e[6]<<28|e[7]>>>4,k=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,re=e[16]<<23|e[17]>>>9,x=e[26]<<25|e[27]>>>7,E=e[27]<<25|e[26]>>>7,Z=e[36]<<21|e[37]>>>11,y=e[37]<<21|e[36]>>>11,$=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,L=e[8]<<27|e[9]>>>5,Q=e[9]<<27|e[8]>>>5,S=e[18]<<20|e[19]>>>12,W=e[19]<<20|e[18]>>>12,Ie=e[29]<<7|e[28]>>>25,ae=e[28]<<7|e[29]>>>25,M=e[38]<<8|e[39]>>>24,D=e[39]<<8|e[38]>>>24,G=e[48]<<14|e[49]>>>18,B=e[49]<<14|e[48]>>>18,e[0]=d^~m&p,e[1]=h^~b&f,e[10]=v^~S&V,e[11]=k^~W&w,e[20]=H^~F&x,e[21]=N^~K&E,e[30]=L^~T&P,e[31]=Q^~j&O,e[40]=te^~ne&Ie,e[41]=ge^~re&ae,e[2]=m^~p&Z,e[3]=b^~f&y,e[12]=S^~V&R,e[13]=W^~w&X,e[22]=F^~x&M,e[23]=K^~E&D,e[32]=T^~P&_,e[33]=j^~O&q,e[42]=ne^~Ie&oe,e[43]=re^~ae&ie,e[4]=p^~Z&G,e[5]=f^~y&B,e[14]=V^~R&J,e[15]=w^~X&Y,e[24]=x^~M&U,e[25]=E^~D&z,e[34]=P^~_&$,e[35]=O^~q&ee,e[44]=Ie^~oe&Ce,e[45]=ae^~ie&le,e[6]=Z^~G&d,e[7]=y^~B&h,e[16]=R^~J&v,e[17]=X^~Y&k,e[26]=M^~U&H,e[27]=D^~z&N,e[36]=_^~$&L,e[37]=q^~ee&Q,e[46]=oe^~Ce&te,e[47]=ie^~le&ge,e[8]=G^~d&m,e[9]=B^~h&b,e[18]=J^~v&S,e[19]=Y^~k&W,e[28]=U^~H&F,e[29]=z^~N&K,e[38]=$^~L&T,e[39]=ee^~Q&j,e[48]=Ce^~te&ne,e[49]=le^~ge&re,e[0]^=A[n],e[1]^=A[n+1]};if(i)e.exports=k;else{for(W=0;W<S.length;++W)a[S[W]]=k[S[W]];C&&(void 0===(n=function(){return k}.call(t,g,t,e))||(e.exports=n))}}()},6861:function(e,t,g){"use strict";var n=g(4704).default,r=g(9685),I=Object.prototype.hasOwnProperty,a=Object.propertyIsEnumerable,o=function(e,t,g){return Object.defineProperty(e,t,{value:g,writable:!0,enumerable:!0,configurable:!0})},i=this,C={concatArrays:!1,ignoreUndefined:!1},l=function(e){var t=[];for(var g in e)I.call(e,g)&&t.push(g);if(Object.getOwnPropertySymbols){var r,o=Object.getOwnPropertySymbols(e),i=n(o);try{for(i.s();!(r=i.n()).done;){var C=r.value;a.call(e,C)&&t.push(C)}}catch(l){i.e(l)}finally{i.f()}}return t};function u(e){return Array.isArray(e)?function(e){var t=e.slice(0,0);return l(e).forEach((function(g){o(t,g,u(e[g]))})),t}(e):r(e)?function(e){var t=null===Object.getPrototypeOf(e)?Object.create(null):{};return l(e).forEach((function(g){o(t,g,u(e[g]))})),t}(e):e}var c=function(e,t,g,n){return g.forEach((function(g){"undefined"===typeof t[g]&&n.ignoreUndefined||(g in e&&e[g]!==Object.getPrototypeOf(e)?o(e,g,s(e[g],t[g],n)):o(e,g,u(t[g])))})),e};function s(e,t,g){return g.concatArrays&&Array.isArray(e)&&Array.isArray(t)?function(e,t,g){var n=e.slice(0,0),r=0;return[e,t].forEach((function(t){for(var a=[],i=0;i<t.length;i++)I.call(t,i)&&(a.push(String(i)),o(n,r++,t===e?t[i]:u(t[i])));n=c(n,t,l(t).filter((function(e){return!a.includes(e)})),g)})),n}(e,t,g):r(t)&&r(e)?c(e,t,l(t),g):u(t)}e.exports=function(){for(var e=s(u(C),this!==i&&this||{},C),t={_:{}},g=arguments.length,n=new Array(g),I=0;I<g;I++)n[I]=arguments[I];for(var a=0,o=n;a<o.length;a++){var l=o[a];if(void 0!==l){if(!r(l))throw new TypeError("`"+l+"` is not an Option Object");t=s(t,{_:l},e)}}return t._}},9685:function(e){"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},2262:function(e){function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,g){if(e!=t)throw new Error(g||"Assertion failed: "+e+" != "+t)}},866:function(e){var t=1e3,g=60*t,n=60*g,r=24*n,I=7*r,a=365.25*r;function o(e,t,g,n){var r=t>=1.5*g;return Math.round(e/g)+" "+n+(r?"s":"")}e.exports=function(e,i){i=i||{};var C=typeof e;if("string"===C&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!o)return;var i=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*a;case"weeks":case"week":case"w":return i*I;case"days":case"day":case"d":return i*r;case"hours":case"hour":case"hrs":case"hr":case"h":return i*n;case"minutes":case"minute":case"mins":case"min":case"m":return i*g;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}(e);if("number"===C&&isFinite(e))return i.long?function(e){var I=Math.abs(e);if(I>=r)return o(e,I,r,"day");if(I>=n)return o(e,I,n,"hour");if(I>=g)return o(e,I,g,"minute");if(I>=t)return o(e,I,t,"second");return e+" ms"}(e):function(e){var I=Math.abs(e);if(I>=r)return Math.round(e/r)+"d";if(I>=n)return Math.round(e/n)+"h";if(I>=g)return Math.round(e/g)+"m";if(I>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7058:function(e,t,g){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:g(2034).default,Headers:g(2034).Headers,Request:g(2034).Request,Response:g(2034).Response}},2034:function(e,t){"use strict";var g=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof g)return g;throw new Error("unable to locate global object")}();e.exports=t=g.fetch,g.fetch&&(t.default=g.fetch.bind(g)),t.Headers=g.Headers,t.Request=g.Request,t.Response=g.Response},3422:function(e,t,g){"use strict";var n=g(9452);function r(){}function I(){}I.resetWarningCache=r,e.exports=function(){function e(e,t,g,r,I,a){if(a!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var g={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:I,resetWarningCache:r};return g.PropTypes=g,g}},8731:function(e,t,g){e.exports=g(3422)()},9452:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1406:function(e,t,g){"use strict";e.exports=g(303)},303:function(e,t,g){"use strict";var n=t;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=g(9550),n.BufferWriter=g(1590),n.Reader=g(7339),n.BufferReader=g(5488),n.util=g(1915),n.rpc=g(6228),n.roots=g(8010),n.configure=r,r()},7339:function(e,t,g){"use strict";e.exports=i;var n,r=g(1915),I=r.LongBits,a=r.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function i(e){this.buf=e,this.pos=0,this.len=e.length}var C="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new i(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new i(e);throw Error("illegal buffer")},l=function(){return r.Buffer?function(e){return(i.create=function(e){return r.Buffer.isBuffer(e)?new n(e):C(e)})(e)}:C};function u(){var e=new I(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function c(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function s(){if(this.pos+8>this.len)throw o(this,8);return new I(c(this.buf,this.pos+=4),c(this.buf,this.pos+=4))}i.create=l(),i.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,i.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return c(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|c(this.buf,this.pos+=4)},i.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},i.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},i.prototype.bytes=function(){var e=this.uint32(),t=this.pos,g=this.pos+e;if(g>this.len)throw o(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,g):t===g?new this.buf.constructor(0):this._slice.call(this.buf,t,g)},i.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},i.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},i._configure=function(e){n=e,i.create=l(),n._configure();var t=r.Long?"toLong":"toNumber";r.merge(i.prototype,{int64:function(){return u.call(this)[t](!1)},uint64:function(){return u.call(this)[t](!0)},sint64:function(){return u.call(this).zzDecode()[t](!1)},fixed64:function(){return s.call(this)[t](!0)},sfixed64:function(){return s.call(this)[t](!1)}})}},5488:function(e,t,g){"use strict";e.exports=I;var n=g(7339);(I.prototype=Object.create(n.prototype)).constructor=I;var r=g(1915);function I(e){n.call(this,e)}I._configure=function(){r.Buffer&&(I.prototype._slice=r.Buffer.prototype.slice)},I.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},I._configure()},8010:function(e){"use strict";e.exports={}},6228:function(e,t,g){"use strict";t.Service=g(6774)},6774:function(e,t,g){"use strict";e.exports=r;var n=g(1915);function r(e,t,g){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(g)}(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,g,r,I,a){if(!I)throw TypeError("request must be specified");var o=this;if(!a)return n.asPromise(e,o,t,g,r,I);if(o.rpcImpl)try{return o.rpcImpl(t,g[o.requestDelimited?"encodeDelimited":"encode"](I).finish(),(function(e,g){if(e)return o.emit("error",e,t),a(e);if(null!==g){if(!(g instanceof r))try{g=r[o.responseDelimited?"decodeDelimited":"decode"](g)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",g,t),a(null,g)}o.end(!0)}))}catch(i){return o.emit("error",i,t),void setTimeout((function(){a(i)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},8400:function(e,t,g){"use strict";e.exports=r;var n=g(1915);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var I=r.zero=new r(0,0);I.toNumber=function(){return 0},I.zzEncode=I.zzDecode=function(){return this},I.length=function(){return 1};var a=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return I;var t=e<0;t&&(e=-e);var g=e>>>0,n=(e-g)/4294967296>>>0;return t&&(n=~n>>>0,g=~g>>>0,++g>4294967295&&(g=0,++n>4294967295&&(n=0))),new r(g,n)},r.from=function(e){if("number"===typeof e)return r.fromNumber(e);if(n.isString(e)){if(!n.Long)return r.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):I},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,g=~this.hi>>>0;return t||(g=g+1>>>0),-(t+4294967296*g)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;r.fromHash=function(e){return e===a?I:new r((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,g=this.hi>>>24;return 0===g?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:g<128?9:10}},1915:function(e,t,g){"use strict";var n=t;function r(e,t,g){for(var n=Object.keys(t),r=0;r<n.length;++r)void 0!==e[n[r]]&&g||(e[n[r]]=t[n[r]]);return e}function I(e){function t(e,g){if(!(this instanceof t))return new t(e,g);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),g&&r(this,g)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=g(7214),n.base64=g(734),n.EventEmitter=g(7875),n.float=g(249),n.inquire=g(6858),n.utf8=g(248),n.pool=g(7423),n.LongBits=g(8400),n.isNode=Boolean("undefined"!==typeof g.g&&g.g&&g.g.process&&g.g.process.versions&&g.g.process.versions.node),n.global=n.isNode&&g.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var g=e[t];return!(null==g||!e.hasOwnProperty(t))&&("object"!==typeof g||(Array.isArray(g)?g.length:Object.keys(g).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var g=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(g.lo,g.hi,t):g.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=I,n.ProtocolError=I("ProtocolError"),n.oneOfGetter=function(e){for(var t={},g=0;g<e.length;++g)t[e[g]]=1;return function(){for(var e=Object.keys(this),g=e.length-1;g>-1;--g)if(1===t[e[g]]&&void 0!==this[e[g]]&&null!==this[e[g]])return e[g]}},n.oneOfSetter=function(e){return function(t){for(var g=0;g<e.length;++g)e[g]!==t&&delete this[e[g]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,g){return new e(t,g)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},9550:function(e,t,g){"use strict";e.exports=u;var n,r=g(1915),I=r.LongBits,a=r.base64,o=r.utf8;function i(e,t,g){this.fn=e,this.len=t,this.next=void 0,this.val=g}function C(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new i(C,0,0),this.tail=this.head,this.states=null}var c=function(){return r.Buffer?function(){return(u.create=function(){return new n})()}:function(){return new u}};function s(e,t,g){t[g]=255&e}function A(e,t){this.len=e,this.next=void 0,this.val=t}function d(e,t,g){for(;e.hi;)t[g++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[g++]=127&e.lo|128,e.lo=e.lo>>>7;t[g++]=e.lo}function h(e,t,g){t[g]=255&e,t[g+1]=e>>>8&255,t[g+2]=e>>>16&255,t[g+3]=e>>>24}u.create=c(),u.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(u.alloc=r.pool(u.alloc,r.Array.prototype.subarray)),u.prototype._push=function(e,t,g){return this.tail=this.tail.next=new i(e,t,g),this.len+=t,this},A.prototype=Object.create(i.prototype),A.prototype.fn=function(e,t,g){for(;e>127;)t[g++]=127&e|128,e>>>=7;t[g]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new A((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(d,10,I.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=I.from(e);return this._push(d,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=I.from(e).zzEncode();return this._push(d,t.length(),t)},u.prototype.bool=function(e){return this._push(s,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(h,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=I.from(e);return this._push(h,4,t.lo)._push(h,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var m=r.Array.prototype.set?function(e,t,g){t.set(e,g)}:function(e,t,g){for(var n=0;n<e.length;++n)t[g+n]=e[n]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(s,1,0);if(r.isString(e)){var g=u.alloc(t=a.length(e));a.decode(e,g,0),e=g}return this.uint32(t)._push(m,t,e)},u.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(s,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new i(C,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(C,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,g=this.len;return this.reset().uint32(g),g&&(this.tail.next=e.next,this.tail=t,this.len+=g),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),g=0;e;)e.fn(e.val,t,g),g+=e.len,e=e.next;return t},u._configure=function(e){n=e,u.create=c(),n._configure()}},1590:function(e,t,g){"use strict";e.exports=I;var n=g(9550);(I.prototype=Object.create(n.prototype)).constructor=I;var r=g(1915);function I(){n.call(this)}function a(e,t,g){e.length<40?r.utf8.write(e,t,g):t.utf8Write?t.utf8Write(e,g):t.write(e,g)}I._configure=function(){I.alloc=r._Buffer_allocUnsafe,I.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,g){t.set(e,g)}:function(e,t,g){if(e.copy)e.copy(t,g,0,e.length);else for(var n=0;n<e.length;)t[g++]=e[n++]}},I.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(I.writeBytesBuffer,t,e),this},I.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},I._configure()},641:function(e,t,g){var n=g(4371);function r(e){this.mode=n.MODE_8BIT_BYTE,this.data=e}r.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=r},7713:function(e){function t(){this.buffer=new Array,this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var g=0;g<t;g++)this.putBit(1==(e>>>t-g-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},4620:function(e){e.exports={L:1,M:0,Q:3,H:2}},6467:function(e,t,g){var n=g(2669);function r(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var g=0;g<e.length&&0==e[g];)g++;this.num=new Array(e.length-g+t);for(var n=0;n<e.length-g;n++)this.num[n]=e[n+g]}r.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),g=0;g<this.getLength();g++)for(var I=0;I<e.getLength();I++)t[g+I]^=n.gexp(n.glog(this.get(g))+n.glog(e.get(I)));return new r(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=n.glog(this.get(0))-n.glog(e.get(0)),g=new Array(this.getLength()),I=0;I<this.getLength();I++)g[I]=this.get(I);for(I=0;I<e.getLength();I++)g[I]^=n.gexp(n.glog(e.get(I))+t);return new r(g,0).mod(e)}},e.exports=r},6217:function(e,t,g){var n=g(641),r=g(3917),I=g(7713),a=g(3324),o=g(6467);function i(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var C=i.prototype;C.addData=function(e){var t=new n(e);this.dataList.push(t),this.dataCache=null},C.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},C.getModuleCount=function(){return this.moduleCount},C.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=r.getRSBlocks(e,this.errorCorrectLevel),g=new I,n=0,o=0;o<t.length;o++)n+=t[o].dataCount;for(o=0;o<this.dataList.length;o++){var i=this.dataList[o];g.put(i.mode,4),g.put(i.getLength(),a.getLengthInBits(i.mode,e)),i.write(g)}if(g.getLengthInBits()<=8*n)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},C.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var g=0;g<this.moduleCount;g++){this.modules[g]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[g][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},C.setupPositionProbePattern=function(e,t){for(var g=-1;g<=7;g++)if(!(e+g<=-1||this.moduleCount<=e+g))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[e+g][t+n]=0<=g&&g<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==g||6==g)||2<=g&&g<=4&&2<=n&&n<=4)},C.getBestMaskPattern=function(){for(var e=0,t=0,g=0;g<8;g++){this.makeImpl(!0,g);var n=a.getLostPoint(this);(0==g||e>n)&&(e=n,t=g)}return t},C.createMovieClip=function(e,t,g){var n=e.createEmptyMovieClip(t,g);this.make();for(var r=0;r<this.modules.length;r++)for(var I=1*r,a=0;a<this.modules[r].length;a++){var o=1*a;this.modules[r][a]&&(n.beginFill(0,100),n.moveTo(o,I),n.lineTo(o+1,I),n.lineTo(o+1,I+1),n.lineTo(o,I+1),n.endFill())}return n},C.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},C.setupPositionAdjustPattern=function(){for(var e=a.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var g=0;g<e.length;g++){var n=e[t],r=e[g];if(null==this.modules[n][r])for(var I=-2;I<=2;I++)for(var o=-2;o<=2;o++)this.modules[n+I][r+o]=-2==I||2==I||-2==o||2==o||0==I&&0==o}},C.setupTypeNumber=function(e){for(var t=a.getBCHTypeNumber(this.typeNumber),g=0;g<18;g++){var n=!e&&1==(t>>g&1);this.modules[Math.floor(g/3)][g%3+this.moduleCount-8-3]=n}for(g=0;g<18;g++){n=!e&&1==(t>>g&1);this.modules[g%3+this.moduleCount-8-3][Math.floor(g/3)]=n}},C.setupTypeInfo=function(e,t){for(var g=this.errorCorrectLevel<<3|t,n=a.getBCHTypeInfo(g),r=0;r<15;r++){var I=!e&&1==(n>>r&1);r<6?this.modules[r][8]=I:r<8?this.modules[r+1][8]=I:this.modules[this.moduleCount-15+r][8]=I}for(r=0;r<15;r++){I=!e&&1==(n>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=I:r<9?this.modules[8][15-r-1+1]=I:this.modules[8][15-r-1]=I}this.modules[this.moduleCount-8][8]=!e},C.mapData=function(e,t){for(var g=-1,n=this.moduleCount-1,r=7,I=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var i=0;i<2;i++)if(null==this.modules[n][o-i]){var C=!1;I<e.length&&(C=1==(e[I]>>>r&1)),a.getMask(t,n,o-i)&&(C=!C),this.modules[n][o-i]=C,-1==--r&&(I++,r=7)}if((n+=g)<0||this.moduleCount<=n){n-=g,g=-g;break}}},i.PAD0=236,i.PAD1=17,i.createData=function(e,t,g){for(var n=r.getRSBlocks(e,t),o=new I,C=0;C<g.length;C++){var l=g[C];o.put(l.mode,4),o.put(l.getLength(),a.getLengthInBits(l.mode,e)),l.write(o)}var u=0;for(C=0;C<n.length;C++)u+=n[C].dataCount;if(o.getLengthInBits()>8*u)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*u+")");for(o.getLengthInBits()+4<=8*u&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*u)&&(o.put(i.PAD0,8),!(o.getLengthInBits()>=8*u));)o.put(i.PAD1,8);return i.createBytes(o,n)},i.createBytes=function(e,t){for(var g=0,n=0,r=0,I=new Array(t.length),i=new Array(t.length),C=0;C<t.length;C++){var l=t[C].dataCount,u=t[C].totalCount-l;n=Math.max(n,l),r=Math.max(r,u),I[C]=new Array(l);for(var c=0;c<I[C].length;c++)I[C][c]=255&e.buffer[c+g];g+=l;var s=a.getErrorCorrectPolynomial(u),A=new o(I[C],s.getLength()-1).mod(s);i[C]=new Array(s.getLength()-1);for(c=0;c<i[C].length;c++){var d=c+A.getLength()-i[C].length;i[C][c]=d>=0?A.get(d):0}}var h=0;for(c=0;c<t.length;c++)h+=t[c].totalCount;var m=new Array(h),b=0;for(c=0;c<n;c++)for(C=0;C<t.length;C++)c<I[C].length&&(m[b++]=I[C][c]);for(c=0;c<r;c++)for(C=0;C<t.length;C++)c<i[C].length&&(m[b++]=i[C][c]);return m},e.exports=i},3917:function(e,t,g){var n=g(4620);function r(e,t){this.totalCount=e,this.dataCount=t}r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(e,t){var g=r.getRsBlockTable(e,t);if(void 0==g)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=g.length/3,I=new Array,a=0;a<n;a++)for(var o=g[3*a+0],i=g[3*a+1],C=g[3*a+2],l=0;l<o;l++)I.push(new r(i,C));return I},r.getRsBlockTable=function(e,t){switch(t){case n.L:return r.RS_BLOCK_TABLE[4*(e-1)+0];case n.M:return r.RS_BLOCK_TABLE[4*(e-1)+1];case n.Q:return r.RS_BLOCK_TABLE[4*(e-1)+2];case n.H:return r.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=r},2669:function(e){for(var t={glog:function(e){if(e<1)throw new Error("glog("+e+")");return t.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},g=0;g<8;g++)t.EXP_TABLE[g]=1<<g;for(g=8;g<256;g++)t.EXP_TABLE[g]=t.EXP_TABLE[g-4]^t.EXP_TABLE[g-5]^t.EXP_TABLE[g-6]^t.EXP_TABLE[g-8];for(g=0;g<255;g++)t.LOG_TABLE[t.EXP_TABLE[g]]=g;e.exports=t},4371:function(e){e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},3324:function(e,t,g){var n=g(4371),r=g(6467),I=g(2669),a=0,o=1,i=2,C=3,l=4,u=5,c=6,s=7,A={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;A.getBCHDigit(t)-A.getBCHDigit(A.G15)>=0;)t^=A.G15<<A.getBCHDigit(t)-A.getBCHDigit(A.G15);return(e<<10|t)^A.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;A.getBCHDigit(t)-A.getBCHDigit(A.G18)>=0;)t^=A.G18<<A.getBCHDigit(t)-A.getBCHDigit(A.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return A.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,g){switch(e){case a:return(t+g)%2==0;case o:return t%2==0;case i:return g%3==0;case C:return(t+g)%3==0;case l:return(Math.floor(t/2)+Math.floor(g/3))%2==0;case u:return t*g%2+t*g%3==0;case c:return(t*g%2+t*g%3)%2==0;case s:return(t*g%3+(t+g)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new r([1],0),g=0;g<e;g++)t=t.multiply(new r([1,I.gexp(g)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),g=0,n=0;n<t;n++)for(var r=0;r<t;r++){for(var I=0,a=e.isDark(n,r),o=-1;o<=1;o++)if(!(n+o<0||t<=n+o))for(var i=-1;i<=1;i++)r+i<0||t<=r+i||0==o&&0==i||a==e.isDark(n+o,r+i)&&I++;I>5&&(g+=3+I-5)}for(n=0;n<t-1;n++)for(r=0;r<t-1;r++){var C=0;e.isDark(n,r)&&C++,e.isDark(n+1,r)&&C++,e.isDark(n,r+1)&&C++,e.isDark(n+1,r+1)&&C++,0!=C&&4!=C||(g+=3)}for(n=0;n<t;n++)for(r=0;r<t-6;r++)e.isDark(n,r)&&!e.isDark(n,r+1)&&e.isDark(n,r+2)&&e.isDark(n,r+3)&&e.isDark(n,r+4)&&!e.isDark(n,r+5)&&e.isDark(n,r+6)&&(g+=40);for(r=0;r<t;r++)for(n=0;n<t-6;n++)e.isDark(n,r)&&!e.isDark(n+1,r)&&e.isDark(n+2,r)&&e.isDark(n+3,r)&&e.isDark(n+4,r)&&!e.isDark(n+5,r)&&e.isDark(n+6,r)&&(g+=40);var l=0;for(r=0;r<t;r++)for(n=0;n<t;n++)e.isDark(n,r)&&l++;return g+=10*(Math.abs(100*l/t/t-50)/5)}};e.exports=A},9772:function(e,t,g){"use strict";var n=g(9867),r=g(2882);function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,g=1;g<arguments.length;g++)t+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function i(e,t){C(e,t),C(e+"Capture",t)}function C(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},A={};function d(e,t,g,n,r,I,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=g,this.propertyName=e,this.type=t,this.sanitizeURL=I,this.removeEmptyString=a}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){h[e]=new d(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];h[t]=new d(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){h[e]=new d(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){h[e]=new d(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){h[e]=new d(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){h[e]=new d(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){h[e]=new d(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){h[e]=new d(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){h[e]=new d(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function p(e,t,g,n){var r=h.hasOwnProperty(t)?h[t]:null;(null!==r?0!==r.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,g,n){if(null===t||"undefined"===typeof t||function(e,t,g,n){if(null!==g&&0===g.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==g?!g.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,g,n))return!0;if(n)return!1;if(null!==g)switch(g.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,g,r,n)&&(g=null),n||null===r?function(e){return!!u.call(A,e)||!u.call(s,e)&&(c.test(e)?A[e]=!0:(s[e]=!0,!1))}(t)&&(null===g?e.removeAttribute(t):e.setAttribute(t,""+g)):r.mustUseProperty?e[r.propertyName]=null===g?3!==r.type&&"":g:(t=r.attributeName,n=r.attributeNamespace,null===g?e.removeAttribute(t):(g=3===(r=r.type)||4===r&&!0===g?"":""+g,n?e.setAttributeNS(n,t,g):e.setAttribute(t,g))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,b);h[t]=new d(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,b);h[t]=new d(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,b);h[t]=new d(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){h[e]=new d(e,1,!1,e.toLowerCase(),null,!1,!1)})),h.xlinkHref=new d("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){h[e]=new d(e,1,!1,e.toLowerCase(),null,!0,!0)}));var f=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),y=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),S=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),X=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var J=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Y=Symbol.iterator;function H(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=Y&&e[Y]||e["@@iterator"])?e:null}var N,F=Object.assign;function K(e){if(void 0===N)try{throw Error()}catch(g){var t=g.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var x=!1;function E(e,t){if(!e||x)return"";x=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var n=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){n=C}e.call(t.prototype)}else{try{throw Error()}catch(C){n=C}e()}}catch(C){if(C&&n&&"string"===typeof C.stack){for(var r=C.stack.split("\n"),I=n.stack.split("\n"),a=r.length-1,o=I.length-1;1<=a&&0<=o&&r[a]!==I[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==I[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==I[o]){var i="\n"+r[a].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=a&&0<=o);break}}}finally{x=!1,Error.prepareStackTrace=g}return(e=e?e.displayName||e.name:"")?K(e):""}function M(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=E(e.type,!1);case 11:return e=E(e.type.render,!1);case 1:return e=E(e.type,!0);default:return""}}function D(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case G:return"Fragment";case y:return"Portal";case v:return"Profiler";case B:return"StrictMode";case V:return"Suspense";case w:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case W:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return D(e(t))}catch(g){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(t);case 8:return t===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function L(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=L(e)?"checked":"value",g=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof g&&"function"===typeof g.get&&"function"===typeof g.set){var r=g.get,I=g.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,I.call(this,e)}}),Object.defineProperty(e,t,{enumerable:g.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function T(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var g=t.getValue(),n="";return e&&(n=L(e)?e.checked?"true":"false":e.value),(e=n)!==g&&(t.setValue(e),!0)}function j(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function P(e,t){var g=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=g?g:e._wrapperState.initialChecked})}function O(e,t){var g=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;g=z(null!=t.value?t.value:g),e._wrapperState={initialChecked:n,initialValue:g,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function _(e,t){null!=(t=t.checked)&&p(e,"checked",t,!1)}function q(e,t){_(e,t);var g=z(t.value),n=t.type;if(null!=g)"number"===n?(0===g&&""===e.value||e.value!=g)&&(e.value=""+g):e.value!==""+g&&(e.value=""+g);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,g):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,g){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,g||t===e.value||(e.value=t),e.defaultValue=t}""!==(g=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==g&&(e.name=g)}function ee(e,t,g){"number"===t&&j(e.ownerDocument)===e||(null==g?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+g&&(e.defaultValue=""+g))}var te=Array.isArray;function ge(e,t,g,n){if(e=e.options,t){t={};for(var r=0;r<g.length;r++)t["$"+g[r]]=!0;for(g=0;g<e.length;g++)r=t.hasOwnProperty("$"+e[g].value),e[g].selected!==r&&(e[g].selected=r),r&&n&&(e[g].defaultSelected=!0)}else{for(g=""+z(g),t=null,r=0;r<e.length;r++){if(e[r].value===g)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(I(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var g=t.value;if(null==g){if(g=t.children,t=t.defaultValue,null!=g){if(null!=t)throw Error(I(92));if(te(g)){if(1<g.length)throw Error(I(93));g=g[0]}t=g}null==t&&(t=""),g=t}e._wrapperState={initialValue:z(g)}}function Ie(e,t){var g=z(t.value),n=z(t.defaultValue);null!=g&&((g=""+g)!==e.value&&(e.value=g),null==t.defaultValue&&e.defaultValue!==g&&(e.defaultValue=g)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ce,le,ue=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Ce=Ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,g,n){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function ce(e,t){if(t){var g=e.firstChild;if(g&&g===e.lastChild&&3===g.nodeType)return void(g.nodeValue=t)}e.textContent=t}var se={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ae=["Webkit","ms","Moz","O"];function de(e,t,g){return null==t||"boolean"===typeof t||""===t?"":g||"number"!==typeof t||0===t||se.hasOwnProperty(e)&&se[e]?(""+t).trim():t+"px"}function he(e,t){for(var g in e=e.style,t)if(t.hasOwnProperty(g)){var n=0===g.indexOf("--"),r=de(g,t[g],n);"float"===g&&(g="cssFloat"),n?e.setProperty(g,r):e[g]=r}}Object.keys(se).forEach((function(e){Ae.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),se[t]=se[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(I(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(I(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(I(62))}}function pe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function Ze(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,Ge=null,Be=null;function ve(e){if(e=pr(e)){if("function"!==typeof ye)throw Error(I(280));var t=e.stateNode;t&&(t=Zr(t),ye(e.stateNode,e.type,t))}}function ke(e){Ge?Be?Be.push(e):Be=[e]:Ge=e}function Se(){if(Ge){var e=Ge,t=Be;if(Be=Ge=null,ve(e),t)for(e=0;e<t.length;e++)ve(t[e])}}function We(e,t){return e(t)}function Ve(){}var we=!1;function Re(e,t,g){if(we)return e(t,g);we=!0;try{return We(e,t,g)}finally{we=!1,(null!==Ge||null!==Be)&&(Ve(),Se())}}function Xe(e,t){var g=e.stateNode;if(null===g)return null;var n=Zr(g);if(null===n)return null;g=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(g&&"function"!==typeof g)throw Error(I(231,t,typeof g));return g}var Je=!1;if(l)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){Je=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch(le){Je=!1}function He(e,t,g,n,r,I,a,o,i){var C=Array.prototype.slice.call(arguments,3);try{t.apply(g,C)}catch(l){this.onError(l)}}var Ne=!1,Fe=null,Ke=!1,xe=null,Ee={onError:function(e){Ne=!0,Fe=e}};function Me(e,t,g,n,r,I,a,o,i){Ne=!1,Fe=null,He.apply(Ee,arguments)}function De(e){var t=e,g=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(g=t.return),e=t.return}while(e)}return 3===t.tag?g:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(De(e)!==e)throw Error(I(188))}function Le(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=De(e)))throw Error(I(188));return t!==e?null:e}for(var g=e,n=t;;){var r=g.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(n=r.return)){g=n;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===g)return ze(r),e;if(a===n)return ze(r),t;a=a.sibling}throw Error(I(188))}if(g.return!==n.return)g=r,n=a;else{for(var o=!1,i=r.child;i;){if(i===g){o=!0,g=r,n=a;break}if(i===n){o=!0,n=r,g=a;break}i=i.sibling}if(!o){for(i=a.child;i;){if(i===g){o=!0,g=a,n=r;break}if(i===n){o=!0,n=a,g=r;break}i=i.sibling}if(!o)throw Error(I(189))}}if(g.alternate!==n)throw Error(I(190))}if(3!==g.tag)throw Error(I(188));return g.stateNode.current===g?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var Te=r.unstable_scheduleCallback,je=r.unstable_cancelCallback,Pe=r.unstable_shouldYield,Oe=r.unstable_requestPaint,_e=r.unstable_now,qe=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,gt=r.unstable_LowPriority,nt=r.unstable_IdlePriority,rt=null,It=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/it|0)|0},ot=Math.log,it=Math.LN2;var Ct=64,lt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ct(e,t){var g=e.pendingLanes;if(0===g)return 0;var n=0,r=e.suspendedLanes,I=e.pingedLanes,a=268435455&g;if(0!==a){var o=a&~r;0!==o?n=ut(o):0!==(I&=a)&&(n=ut(I))}else 0!==(a=g&~r)?n=ut(a):0!==I&&(n=ut(I));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(I=t&-t)||16===r&&0!==(4194240&I)))return t;if(0!==(4&n)&&(n|=16&g),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(g=31-at(t)),n|=e[g],t&=~r;return n}function st(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function At(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function dt(){var e=Ct;return 0===(4194240&(Ct<<=1))&&(Ct=64),e}function ht(e){for(var t=[],g=0;31>g;g++)t.push(e);return t}function mt(e,t,g){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=g}function bt(e,t){var g=e.entangledLanes|=t;for(e=e.entanglements;g;){var n=31-at(g),r=1<<n;r&t|e[n]&t&&(e[n]|=t),g&=~r}}var pt=0;function ft(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Zt,yt,Gt,Bt,vt,kt=!1,St=[],Wt=null,Vt=null,wt=null,Rt=new Map,Xt=new Map,Jt=[],Yt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ht(e,t){switch(e){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xt.delete(t.pointerId)}}function Nt(e,t,g,n,r,I){return null===e||e.nativeEvent!==I?(e={blockedOn:t,domEventName:g,eventSystemFlags:n,nativeEvent:I,targetContainers:[r]},null!==t&&(null!==(t=pr(t))&&yt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=br(e.target);if(null!==t){var g=De(t);if(null!==g)if(13===(t=g.tag)){if(null!==(t=Ue(g)))return e.blockedOn=t,void vt(e.priority,(function(){Gt(g)}))}else if(3===t&&g.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===g.tag?g.stateNode.containerInfo:null)}e.blockedOn=null}function Kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var g=Pt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==g)return null!==(t=pr(g))&&yt(t),e.blockedOn=g,!1;var n=new(g=e.nativeEvent).constructor(g.type,g);fe=n,g.target.dispatchEvent(n),fe=null,t.shift()}return!0}function xt(e,t,g){Kt(e)&&g.delete(t)}function Et(){kt=!1,null!==Wt&&Kt(Wt)&&(Wt=null),null!==Vt&&Kt(Vt)&&(Vt=null),null!==wt&&Kt(wt)&&(wt=null),Rt.forEach(xt),Xt.forEach(xt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Et)))}function Dt(e){function t(t){return Mt(t,e)}if(0<St.length){Mt(St[0],e);for(var g=1;g<St.length;g++){var n=St[g];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Wt&&Mt(Wt,e),null!==Vt&&Mt(Vt,e),null!==wt&&Mt(wt,e),Rt.forEach(t),Xt.forEach(t),g=0;g<Jt.length;g++)(n=Jt[g]).blockedOn===e&&(n.blockedOn=null);for(;0<Jt.length&&null===(g=Jt[0]).blockedOn;)Ft(g),null===g.blockedOn&&Jt.shift()}var Ut=f.ReactCurrentBatchConfig,zt=!0;function Lt(e,t,g,n){var r=pt,I=Ut.transition;Ut.transition=null;try{pt=1,Tt(e,t,g,n)}finally{pt=r,Ut.transition=I}}function Qt(e,t,g,n){var r=pt,I=Ut.transition;Ut.transition=null;try{pt=4,Tt(e,t,g,n)}finally{pt=r,Ut.transition=I}}function Tt(e,t,g,n){if(zt){var r=Pt(e,t,g,n);if(null===r)zn(e,t,n,jt,g),Ht(e,n);else if(function(e,t,g,n,r){switch(t){case"focusin":return Wt=Nt(Wt,e,t,g,n,r),!0;case"dragenter":return Vt=Nt(Vt,e,t,g,n,r),!0;case"mouseover":return wt=Nt(wt,e,t,g,n,r),!0;case"pointerover":var I=r.pointerId;return Rt.set(I,Nt(Rt.get(I)||null,e,t,g,n,r)),!0;case"gotpointercapture":return I=r.pointerId,Xt.set(I,Nt(Xt.get(I)||null,e,t,g,n,r)),!0}return!1}(r,e,t,g,n))n.stopPropagation();else if(Ht(e,n),4&t&&-1<Yt.indexOf(e)){for(;null!==r;){var I=pr(r);if(null!==I&&Zt(I),null===(I=Pt(e,t,g,n))&&zn(e,t,n,jt,g),I===r)break;r=I}null!==r&&n.stopPropagation()}else zn(e,t,n,null,g)}}var jt=null;function Pt(e,t,g,n){if(jt=null,null!==(e=br(e=Ze(n))))if(null===(t=De(e)))e=null;else if(13===(g=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===g){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jt=e,null}function Ot(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qe()){case $e:return 1;case et:return 4;case tt:case gt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var _t=null,qt=null,$t=null;function eg(){if($t)return $t;var e,t,g=qt,n=g.length,r="value"in _t?_t.value:_t.textContent,I=r.length;for(e=0;e<n&&g[e]===r[e];e++);var a=n-e;for(t=1;t<=a&&g[n-t]===r[I-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tg(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function gg(){return!0}function ng(){return!1}function rg(e){function t(t,g,n,r,I){for(var a in this._reactName=t,this._targetInst=n,this.type=g,this.nativeEvent=r,this.target=I,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?gg:ng,this.isPropagationStopped=ng,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=gg)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=gg)},persist:function(){},isPersistent:gg}),t}var Ig,ag,og,ig={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cg=rg(ig),lg=F({},ig,{view:0,detail:0}),ug=rg(lg),cg=F({},lg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bg,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==og&&(og&&"mousemove"===e.type?(Ig=e.screenX-og.screenX,ag=e.screenY-og.screenY):ag=Ig=0,og=e),Ig)},movementY:function(e){return"movementY"in e?e.movementY:ag}}),sg=rg(cg),Ag=rg(F({},cg,{dataTransfer:0})),dg=rg(F({},lg,{relatedTarget:0})),hg=rg(F({},ig,{animationName:0,elapsedTime:0,pseudoElement:0})),mg=F({},ig,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bg=rg(mg),pg=rg(F({},ig,{data:0})),fg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=yg[e])&&!!t[e]}function Bg(){return Gg}var vg=F({},lg,{key:function(e){if(e.key){var t=fg[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tg(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bg,charCode:function(e){return"keypress"===e.type?tg(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tg(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kg=rg(vg),Sg=rg(F({},cg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Wg=rg(F({},lg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bg})),Vg=rg(F({},ig,{propertyName:0,elapsedTime:0,pseudoElement:0})),wg=F({},cg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rg=rg(wg),Xg=[9,13,27,32],Jg=l&&"CompositionEvent"in window,Yg=null;l&&"documentMode"in document&&(Yg=document.documentMode);var Hg=l&&"TextEvent"in window&&!Yg,Ng=l&&(!Jg||Yg&&8<Yg&&11>=Yg),Fg=String.fromCharCode(32),Kg=!1;function xg(e,t){switch(e){case"keyup":return-1!==Xg.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eg(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Mg=!1;var Dg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dg[e.type]:"textarea"===t}function zg(e,t,g,n){ke(n),0<(t=Qn(t,"onChange")).length&&(g=new Cg("onChange","change",null,g,n),e.push({event:g,listeners:t}))}var Lg=null,Qg=null;function Tg(e){Kn(e,0)}function jg(e){if(T(fr(e)))return e}function Pg(e,t){if("change"===e)return t}var Og=!1;if(l){var _g;if(l){var qg="oninput"in document;if(!qg){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),qg="function"===typeof $g.oninput}_g=qg}else _g=!1;Og=_g&&(!document.documentMode||9<document.documentMode)}function en(){Lg&&(Lg.detachEvent("onpropertychange",tn),Qg=Lg=null)}function tn(e){if("value"===e.propertyName&&jg(Qg)){var t=[];zg(t,Qg,e,Ze(e)),Re(Tg,t)}}function gn(e,t,g){"focusin"===e?(en(),Qg=g,(Lg=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jg(Qg)}function rn(e,t){if("click"===e)return jg(t)}function In(e,t){if("input"===e||"change"===e)return jg(t)}var an="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function on(e,t){if(an(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var g=Object.keys(e),n=Object.keys(t);if(g.length!==n.length)return!1;for(n=0;n<g.length;n++){var r=g[n];if(!u.call(t,r)||!an(e[r],t[r]))return!1}return!0}function Cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ln(e,t){var g,n=Cn(e);for(e=0;n;){if(3===n.nodeType){if(g=e+n.textContent.length,e<=t&&g>=t)return{node:n,offset:t-e};e=g}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function cn(){for(var e=window,t=j();t instanceof e.HTMLIFrameElement;){try{var g="string"===typeof t.contentWindow.location.href}catch(n){g=!1}if(!g)break;t=j((e=t.contentWindow).document)}return t}function sn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function An(e){var t=cn(),g=e.focusedElem,n=e.selectionRange;if(t!==g&&g&&g.ownerDocument&&un(g.ownerDocument.documentElement,g)){if(null!==n&&sn(g))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in g)g.selectionStart=t,g.selectionEnd=Math.min(e,g.value.length);else if((e=(t=g.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=g.textContent.length,I=Math.min(n.start,r);n=void 0===n.end?I:Math.min(n.end,r),!e.extend&&I>n&&(r=n,n=I,I=r),r=ln(g,I);var a=ln(g,n);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),I>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=g;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof g.focus&&g.focus(),g=0;g<t.length;g++)(e=t[g]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dn=l&&"documentMode"in document&&11>=document.documentMode,hn=null,mn=null,bn=null,pn=!1;function fn(e,t,g){var n=g.window===g?g.document:9===g.nodeType?g:g.ownerDocument;pn||null==hn||hn!==j(n)||("selectionStart"in(n=hn)&&sn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&on(bn,n)||(bn=n,0<(n=Qn(mn,"onSelect")).length&&(t=new Cg("onSelect","select",null,t,g),e.push({event:t,listeners:n}),t.target=hn)))}function Zn(e,t){var g={};return g[e.toLowerCase()]=t.toLowerCase(),g["Webkit"+e]="webkit"+t,g["Moz"+e]="moz"+t,g}var yn={animationend:Zn("Animation","AnimationEnd"),animationiteration:Zn("Animation","AnimationIteration"),animationstart:Zn("Animation","AnimationStart"),transitionend:Zn("Transition","TransitionEnd")},Gn={},Bn={};function vn(e){if(Gn[e])return Gn[e];if(!yn[e])return e;var t,g=yn[e];for(t in g)if(g.hasOwnProperty(t)&&t in Bn)return Gn[e]=g[t];return e}l&&(Bn=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);var kn=vn("animationend"),Sn=vn("animationiteration"),Wn=vn("animationstart"),Vn=vn("transitionend"),wn=new Map,Rn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,t){wn.set(e,t),i(t,[e])}for(var Jn=0;Jn<Rn.length;Jn++){var Yn=Rn[Jn];Xn(Yn.toLowerCase(),"on"+(Yn[0].toUpperCase()+Yn.slice(1)))}Xn(kn,"onAnimationEnd"),Xn(Sn,"onAnimationIteration"),Xn(Wn,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(Vn,"onTransitionEnd"),C("onMouseEnter",["mouseout","mouseover"]),C("onMouseLeave",["mouseout","mouseover"]),C("onPointerEnter",["pointerout","pointerover"]),C("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hn));function Fn(e,t,g){var n=e.type||"unknown-event";e.currentTarget=g,function(e,t,g,n,r,a,o,i,C){if(Me.apply(this,arguments),Ne){if(!Ne)throw Error(I(198));var l=Fe;Ne=!1,Fe=null,Ke||(Ke=!0,xe=l)}}(n,t,void 0,e),e.currentTarget=null}function Kn(e,t){t=0!==(4&t);for(var g=0;g<e.length;g++){var n=e[g],r=n.event;n=n.listeners;e:{var I=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],i=o.instance,C=o.currentTarget;if(o=o.listener,i!==I&&r.isPropagationStopped())break e;Fn(r,o,C),I=i}else for(a=0;a<n.length;a++){if(i=(o=n[a]).instance,C=o.currentTarget,o=o.listener,i!==I&&r.isPropagationStopped())break e;Fn(r,o,C),I=i}}}if(Ke)throw e=xe,Ke=!1,xe=null,e}function xn(e,t){var g=t[dr];void 0===g&&(g=t[dr]=new Set);var n=e+"__bubble";g.has(n)||(Un(t,e,2,!1),g.add(n))}function En(e,t,g){var n=0;t&&(n|=4),Un(g,e,n,t)}var Mn="_reactListening"+Math.random().toString(36).slice(2);function Dn(e){if(!e[Mn]){e[Mn]=!0,a.forEach((function(t){"selectionchange"!==t&&(Nn.has(t)||En(t,!1,e),En(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Mn]||(t[Mn]=!0,En("selectionchange",!1,t))}}function Un(e,t,g,n){switch(Ot(t)){case 1:var r=Lt;break;case 4:r=Qt;break;default:r=Tt}g=r.bind(null,t,g,e),r=void 0,!Je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,g,{capture:!0,passive:r}):e.addEventListener(t,g,!0):void 0!==r?e.addEventListener(t,g,{passive:r}):e.addEventListener(t,g,!1)}function zn(e,t,g,n,r){var I=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var o=n.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=n.return;null!==a;){var i=a.tag;if((3===i||4===i)&&((i=a.stateNode.containerInfo)===r||8===i.nodeType&&i.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=br(o)))return;if(5===(i=a.tag)||6===i){n=I=a;continue e}o=o.parentNode}}n=n.return}Re((function(){var n=I,r=Ze(g),a=[];e:{var o=wn.get(e);if(void 0!==o){var i=Cg,C=e;switch(e){case"keypress":if(0===tg(g))break e;case"keydown":case"keyup":i=kg;break;case"focusin":C="focus",i=dg;break;case"focusout":C="blur",i=dg;break;case"beforeblur":case"afterblur":i=dg;break;case"click":if(2===g.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=Ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Wg;break;case kn:case Sn:case Wn:i=hg;break;case Vn:i=Vg;break;case"scroll":i=ug;break;case"wheel":i=Rg;break;case"copy":case"cut":case"paste":i=bg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=Sg}var l=0!==(4&t),u=!l&&"scroll"===e,c=l?null!==o?o+"Capture":null:o;l=[];for(var s,A=n;null!==A;){var d=(s=A).stateNode;if(5===s.tag&&null!==d&&(s=d,null!==c&&(null!=(d=Xe(A,c))&&l.push(Ln(A,d,s)))),u)break;A=A.return}0<l.length&&(o=new i(o,C,null,g,r),a.push({event:o,listeners:l}))}}if(0===(7&t)){if(i="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||g===fe||!(C=g.relatedTarget||g.fromElement)||!br(C)&&!C[Ar])&&(i||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=n,null!==(C=(C=g.relatedTarget||g.toElement)?br(C):null)&&(C!==(u=De(C))||5!==C.tag&&6!==C.tag)&&(C=null)):(i=null,C=n),i!==C)){if(l=sg,d="onMouseLeave",c="onMouseEnter",A="mouse","pointerout"!==e&&"pointerover"!==e||(l=Sg,d="onPointerLeave",c="onPointerEnter",A="pointer"),u=null==i?o:fr(i),s=null==C?o:fr(C),(o=new l(d,A+"leave",i,g,r)).target=u,o.relatedTarget=s,d=null,br(r)===n&&((l=new l(c,A+"enter",C,g,r)).target=s,l.relatedTarget=u,d=l),u=d,i&&C)e:{for(c=C,A=0,s=l=i;s;s=Tn(s))A++;for(s=0,d=c;d;d=Tn(d))s++;for(;0<A-s;)l=Tn(l),A--;for(;0<s-A;)c=Tn(c),s--;for(;A--;){if(l===c||null!==c&&l===c.alternate)break e;l=Tn(l),c=Tn(c)}l=null}else l=null;null!==i&&jn(a,o,i,l,!1),null!==C&&null!==u&&jn(a,u,C,l,!0)}if("select"===(i=(o=n?fr(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===i&&"file"===o.type)var h=Pg;else if(Ug(o))if(Og)h=In;else{h=nn;var m=gn}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(h=rn);switch(h&&(h=h(e,n))?zg(a,h,g,r):(m&&m(e,o,n),"focusout"===e&&(m=o._wrapperState)&&m.controlled&&"number"===o.type&&ee(o,"number",o.value)),m=n?fr(n):window,e){case"focusin":(Ug(m)||"true"===m.contentEditable)&&(hn=m,mn=n,bn=null);break;case"focusout":bn=mn=hn=null;break;case"mousedown":pn=!0;break;case"contextmenu":case"mouseup":case"dragend":pn=!1,fn(a,g,r);break;case"selectionchange":if(dn)break;case"keydown":case"keyup":fn(a,g,r)}var b;if(Jg)e:{switch(e){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Mg?xg(e,g)&&(p="onCompositionEnd"):"keydown"===e&&229===g.keyCode&&(p="onCompositionStart");p&&(Ng&&"ko"!==g.locale&&(Mg||"onCompositionStart"!==p?"onCompositionEnd"===p&&Mg&&(b=eg()):(qt="value"in(_t=r)?_t.value:_t.textContent,Mg=!0)),0<(m=Qn(n,p)).length&&(p=new pg(p,e,null,g,r),a.push({event:p,listeners:m}),b?p.data=b:null!==(b=Eg(g))&&(p.data=b))),(b=Hg?function(e,t){switch(e){case"compositionend":return Eg(t);case"keypress":return 32!==t.which?null:(Kg=!0,Fg);case"textInput":return(e=t.data)===Fg&&Kg?null:e;default:return null}}(e,g):function(e,t){if(Mg)return"compositionend"===e||!Jg&&xg(e,t)?(e=eg(),$t=qt=_t=null,Mg=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ng&&"ko"!==t.locale?null:t.data}}(e,g))&&(0<(n=Qn(n,"onBeforeInput")).length&&(r=new pg("onBeforeInput","beforeinput",null,g,r),a.push({event:r,listeners:n}),r.data=b))}Kn(a,t)}))}function Ln(e,t,g){return{instance:e,listener:t,currentTarget:g}}function Qn(e,t){for(var g=t+"Capture",n=[];null!==e;){var r=e,I=r.stateNode;5===r.tag&&null!==I&&(r=I,null!=(I=Xe(e,g))&&n.unshift(Ln(e,I,r)),null!=(I=Xe(e,t))&&n.push(Ln(e,I,r))),e=e.return}return n}function Tn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jn(e,t,g,n,r){for(var I=t._reactName,a=[];null!==g&&g!==n;){var o=g,i=o.alternate,C=o.stateNode;if(null!==i&&i===n)break;5===o.tag&&null!==C&&(o=C,r?null!=(i=Xe(g,I))&&a.unshift(Ln(g,i,o)):r||null!=(i=Xe(g,I))&&a.push(Ln(g,i,o))),g=g.return}0!==a.length&&e.push({event:t,listeners:a})}var Pn=/\r\n?/g,On=/\u0000|\uFFFD/g;function _n(e){return("string"===typeof e?e:""+e).replace(Pn,"\n").replace(On,"")}function qn(e,t,g){if(t=_n(t),_n(e)!==t&&g)throw Error(I(425))}function $n(){}var er=null,tr=null;function gr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,Ir="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ir?function(e){return Ir.resolve(null).then(e).catch(or)}:nr;function or(e){setTimeout((function(){throw e}))}function ir(e,t){var g=t,n=0;do{var r=g.nextSibling;if(e.removeChild(g),r&&8===r.nodeType)if("/$"===(g=r.data)){if(0===n)return e.removeChild(r),void Dt(t);n--}else"$"!==g&&"$?"!==g&&"$!"!==g||n++;g=r}while(g);Dt(t)}function Cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function lr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var g=e.data;if("$"===g||"$!"===g||"$?"===g){if(0===t)return e;t--}else"/$"===g&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),cr="__reactFiber$"+ur,sr="__reactProps$"+ur,Ar="__reactContainer$"+ur,dr="__reactEvents$"+ur,hr="__reactListeners$"+ur,mr="__reactHandles$"+ur;function br(e){var t=e[cr];if(t)return t;for(var g=e.parentNode;g;){if(t=g[Ar]||g[cr]){if(g=t.alternate,null!==t.child||null!==g&&null!==g.child)for(e=lr(e);null!==e;){if(g=e[cr])return g;e=lr(e)}return t}g=(e=g).parentNode}return null}function pr(e){return!(e=e[cr]||e[Ar])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function fr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(I(33))}function Zr(e){return e[sr]||null}var yr=[],Gr=-1;function Br(e){return{current:e}}function vr(e){0>Gr||(e.current=yr[Gr],yr[Gr]=null,Gr--)}function kr(e,t){Gr++,yr[Gr]=e.current,e.current=t}var Sr={},Wr=Br(Sr),Vr=Br(!1),wr=Sr;function Rr(e,t){var g=e.type.contextTypes;if(!g)return Sr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,I={};for(r in g)I[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=I),I}function Xr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Jr(){vr(Vr),vr(Wr)}function Yr(e,t,g){if(Wr.current!==Sr)throw Error(I(168));kr(Wr,t),kr(Vr,g)}function Hr(e,t,g){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return g;for(var r in n=n.getChildContext())if(!(r in t))throw Error(I(108,U(e)||"Unknown",r));return F({},g,n)}function Nr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,wr=Wr.current,kr(Wr,e),kr(Vr,Vr.current),!0}function Fr(e,t,g){var n=e.stateNode;if(!n)throw Error(I(169));g?(e=Hr(e,t,wr),n.__reactInternalMemoizedMergedChildContext=e,vr(Vr),vr(Wr),kr(Wr,e)):vr(Vr),kr(Vr,g)}var Kr=null,xr=!1,Er=!1;function Mr(e){null===Kr?Kr=[e]:Kr.push(e)}function Dr(){if(!Er&&null!==Kr){Er=!0;var e=0,t=pt;try{var g=Kr;for(pt=1;e<g.length;e++){var n=g[e];do{n=n(!0)}while(null!==n)}Kr=null,xr=!1}catch(r){throw null!==Kr&&(Kr=Kr.slice(e+1)),Te($e,Dr),r}finally{pt=t,Er=!1}}return null}var Ur=[],zr=0,Lr=null,Qr=0,Tr=[],jr=0,Pr=null,Or=1,_r="";function qr(e,t){Ur[zr++]=Qr,Ur[zr++]=Lr,Lr=e,Qr=t}function $r(e,t,g){Tr[jr++]=Or,Tr[jr++]=_r,Tr[jr++]=Pr,Pr=e;var n=Or;e=_r;var r=32-at(n)-1;n&=~(1<<r),g+=1;var I=32-at(t)+r;if(30<I){var a=r-r%5;I=(n&(1<<a)-1).toString(32),n>>=a,r-=a,Or=1<<32-at(t)+r|g<<r|n,_r=I+e}else Or=1<<I|g<<r|n,_r=e}function eI(e){null!==e.return&&(qr(e,1),$r(e,1,0))}function tI(e){for(;e===Lr;)Lr=Ur[--zr],Ur[zr]=null,Qr=Ur[--zr],Ur[zr]=null;for(;e===Pr;)Pr=Tr[--jr],Tr[jr]=null,_r=Tr[--jr],Tr[jr]=null,Or=Tr[--jr],Tr[jr]=null}var gI=null,nI=null,rI=!1,II=null;function aI(e,t){var g=RC(5,null,null,0);g.elementType="DELETED",g.stateNode=t,g.return=e,null===(t=e.deletions)?(e.deletions=[g],e.flags|=16):t.push(g)}function oI(e,t){switch(e.tag){case 5:var g=e.type;return null!==(t=1!==t.nodeType||g.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,gI=e,nI=Cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,gI=e,nI=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(g=null!==Pr?{id:Or,overflow:_r}:null,e.memoizedState={dehydrated:t,treeContext:g,retryLane:1073741824},(g=RC(18,null,null,0)).stateNode=t,g.return=e,e.child=g,gI=e,nI=null,!0);default:return!1}}function iI(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function CI(e){if(rI){var t=nI;if(t){var g=t;if(!oI(e,t)){if(iI(e))throw Error(I(418));t=Cr(g.nextSibling);var n=gI;t&&oI(e,t)?aI(n,g):(e.flags=-4097&e.flags|2,rI=!1,gI=e)}}else{if(iI(e))throw Error(I(418));e.flags=-4097&e.flags|2,rI=!1,gI=e}}}function lI(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;gI=e}function uI(e){if(e!==gI)return!1;if(!rI)return lI(e),rI=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!gr(e.type,e.memoizedProps)),t&&(t=nI)){if(iI(e))throw cI(),Error(I(418));for(;t;)aI(e,t),t=Cr(t.nextSibling)}if(lI(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var g=e.data;if("/$"===g){if(0===t){nI=Cr(e.nextSibling);break e}t--}else"$"!==g&&"$!"!==g&&"$?"!==g||t++}e=e.nextSibling}nI=null}}else nI=gI?Cr(e.stateNode.nextSibling):null;return!0}function cI(){for(var e=nI;e;)e=Cr(e.nextSibling)}function sI(){nI=gI=null,rI=!1}function AI(e){null===II?II=[e]:II.push(e)}var dI=f.ReactCurrentBatchConfig;function hI(e,t){if(e&&e.defaultProps){for(var g in t=F({},t),e=e.defaultProps)void 0===t[g]&&(t[g]=e[g]);return t}return t}var mI=Br(null),bI=null,pI=null,fI=null;function ZI(){fI=pI=bI=null}function yI(e){var t=mI.current;vr(mI),e._currentValue=t}function GI(e,t,g){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===g)break;e=e.return}}function BI(e,t){bI=e,fI=pI=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(fo=!0),e.firstContext=null)}function vI(e){var t=e._currentValue;if(fI!==e)if(e={context:e,memoizedValue:t,next:null},null===pI){if(null===bI)throw Error(I(308));pI=e,bI.dependencies={lanes:0,firstContext:e}}else pI=pI.next=e;return t}var kI=null;function SI(e){null===kI?kI=[e]:kI.push(e)}function WI(e,t,g,n){var r=t.interleaved;return null===r?(g.next=g,SI(t)):(g.next=r.next,r.next=g),t.interleaved=g,VI(e,n)}function VI(e,t){e.lanes|=t;var g=e.alternate;for(null!==g&&(g.lanes|=t),g=e,e=e.return;null!==e;)e.childLanes|=t,null!==(g=e.alternate)&&(g.childLanes|=t),g=e,e=e.return;return 3===g.tag?g.stateNode:null}var wI=!1;function RI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function JI(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function YI(e,t,g){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Wi)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,VI(e,g)}return null===(r=n.interleaved)?(t.next=t,SI(n)):(t.next=r.next,r.next=t),n.interleaved=t,VI(e,g)}function HI(e,t,g){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&g))){var n=t.lanes;g|=n&=e.pendingLanes,t.lanes=g,bt(e,g)}}function NI(e,t){var g=e.updateQueue,n=e.alternate;if(null!==n&&g===(n=n.updateQueue)){var r=null,I=null;if(null!==(g=g.firstBaseUpdate)){do{var a={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};null===I?r=I=a:I=I.next=a,g=g.next}while(null!==g);null===I?r=I=t:I=I.next=t}else r=I=t;return g={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:I,shared:n.shared,effects:n.effects},void(e.updateQueue=g)}null===(e=g.lastBaseUpdate)?g.firstBaseUpdate=t:e.next=t,g.lastBaseUpdate=t}function FI(e,t,g,n){var r=e.updateQueue;wI=!1;var I=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var i=o,C=i.next;i.next=null,null===a?I=C:a.next=C,a=i;var l=e.alternate;null!==l&&((o=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===o?l.firstBaseUpdate=C:o.next=C,l.lastBaseUpdate=i))}if(null!==I){var u=r.baseState;for(a=0,l=C=i=null,o=I;;){var c=o.lane,s=o.eventTime;if((n&c)===c){null!==l&&(l=l.next={eventTime:s,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var A=e,d=o;switch(c=t,s=g,d.tag){case 1:if("function"===typeof(A=d.payload)){u=A.call(s,u,c);break e}u=A;break e;case 3:A.flags=-65537&A.flags|128;case 0:if(null===(c="function"===typeof(A=d.payload)?A.call(s,u,c):A)||void 0===c)break e;u=F({},u,c);break e;case 2:wI=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(c=r.effects)?r.effects=[o]:c.push(o))}else s={eventTime:s,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===l?(C=l=s,i=u):l=l.next=s,a|=c;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(c=o).next,c.next=null,r.lastBaseUpdate=c,r.shared.pending=null}}if(null===l&&(i=u),r.baseState=i,r.firstBaseUpdate=C,r.lastBaseUpdate=l,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===I&&(r.shared.lanes=0);Ni|=a,e.lanes=a,e.memoizedState=u}}function KI(e,t,g){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=g,"function"!==typeof r)throw Error(I(191,r));r.call(n)}}}var xI=(new n.Component).refs;function EI(e,t,g,n){g=null===(g=g(n,t=e.memoizedState))||void 0===g?t:F({},t,g),e.memoizedState=g,0===e.lanes&&(e.updateQueue.baseState=g)}var MI={isMounted:function(e){return!!(e=e._reactInternals)&&De(e)===e},enqueueSetState:function(e,t,g){e=e._reactInternals;var n=eC(),r=tC(e),I=JI(n,r);I.payload=t,void 0!==g&&null!==g&&(I.callback=g),null!==(t=YI(e,I,r))&&(gC(t,e,r,n),HI(t,e,r))},enqueueReplaceState:function(e,t,g){e=e._reactInternals;var n=eC(),r=tC(e),I=JI(n,r);I.tag=1,I.payload=t,void 0!==g&&null!==g&&(I.callback=g),null!==(t=YI(e,I,r))&&(gC(t,e,r,n),HI(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var g=eC(),n=tC(e),r=JI(g,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=YI(e,r,n))&&(gC(t,e,n,g),HI(t,e,n))}};function DI(e,t,g,n,r,I,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,I,a):!t.prototype||!t.prototype.isPureReactComponent||(!on(g,n)||!on(r,I))}function UI(e,t,g){var n=!1,r=Sr,I=t.contextType;return"object"===typeof I&&null!==I?I=vI(I):(r=Xr(t)?wr:Wr.current,I=(n=null!==(n=t.contextTypes)&&void 0!==n)?Rr(e,r):Sr),t=new t(g,I),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=MI,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=I),t}function zI(e,t,g,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(g,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(g,n),t.state!==e&&MI.enqueueReplaceState(t,t.state,null)}function LI(e,t,g,n){var r=e.stateNode;r.props=g,r.state=e.memoizedState,r.refs=xI,RI(e);var I=t.contextType;"object"===typeof I&&null!==I?r.context=vI(I):(I=Xr(t)?wr:Wr.current,r.context=Rr(e,I)),r.state=e.memoizedState,"function"===typeof(I=t.getDerivedStateFromProps)&&(EI(e,t,I,g),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&MI.enqueueReplaceState(r,r.state,null),FI(e,g,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function QI(e,t,g){if(null!==(e=g.ref)&&"function"!==typeof e&&"object"!==typeof e){if(g._owner){if(g=g._owner){if(1!==g.tag)throw Error(I(309));var n=g.stateNode}if(!n)throw Error(I(147,e));var r=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===xI&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(I(284));if(!g._owner)throw Error(I(290,e))}return e}function TI(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jI(e){return(0,e._init)(e._payload)}function PI(e){function t(t,g){if(e){var n=t.deletions;null===n?(t.deletions=[g],t.flags|=16):n.push(g)}}function g(g,n){if(!e)return null;for(;null!==n;)t(g,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=JC(e,t)).index=0,e.sibling=null,e}function a(t,g,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<g?(t.flags|=2,g):n:(t.flags|=2,g):(t.flags|=1048576,g)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function i(e,t,g,n){return null===t||6!==t.tag?((t=FC(g,e.mode,n)).return=e,t):((t=r(t,g)).return=e,t)}function C(e,t,g,n){var I=g.type;return I===G?u(e,t,g.props.children,n,g.key):null!==t&&(t.elementType===I||"object"===typeof I&&null!==I&&I.$$typeof===X&&jI(I)===t.type)?((n=r(t,g.props)).ref=QI(e,t,g),n.return=e,n):((n=YC(g.type,g.key,g.props,null,e.mode,n)).ref=QI(e,t,g),n.return=e,n)}function l(e,t,g,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==g.containerInfo||t.stateNode.implementation!==g.implementation?((t=KC(g,e.mode,n)).return=e,t):((t=r(t,g.children||[])).return=e,t)}function u(e,t,g,n,I){return null===t||7!==t.tag?((t=HC(g,e.mode,n,I)).return=e,t):((t=r(t,g)).return=e,t)}function c(e,t,g){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=FC(""+t,e.mode,g)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Z:return(g=YC(t.type,t.key,t.props,null,e.mode,g)).ref=QI(e,null,t),g.return=e,g;case y:return(t=KC(t,e.mode,g)).return=e,t;case X:return c(e,(0,t._init)(t._payload),g)}if(te(t)||H(t))return(t=HC(t,e.mode,g,null)).return=e,t;TI(e,t)}return null}function s(e,t,g,n){var r=null!==t?t.key:null;if("string"===typeof g&&""!==g||"number"===typeof g)return null!==r?null:i(e,t,""+g,n);if("object"===typeof g&&null!==g){switch(g.$$typeof){case Z:return g.key===r?C(e,t,g,n):null;case y:return g.key===r?l(e,t,g,n):null;case X:return s(e,t,(r=g._init)(g._payload),n)}if(te(g)||H(g))return null!==r?null:u(e,t,g,n,null);TI(e,g)}return null}function A(e,t,g,n,r){if("string"===typeof n&&""!==n||"number"===typeof n)return i(t,e=e.get(g)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Z:return C(t,e=e.get(null===n.key?g:n.key)||null,n,r);case y:return l(t,e=e.get(null===n.key?g:n.key)||null,n,r);case X:return A(e,t,g,(0,n._init)(n._payload),r)}if(te(n)||H(n))return u(t,e=e.get(g)||null,n,r,null);TI(t,n)}return null}function d(r,I,o,i){for(var C=null,l=null,u=I,d=I=0,h=null;null!==u&&d<o.length;d++){u.index>d?(h=u,u=null):h=u.sibling;var m=s(r,u,o[d],i);if(null===m){null===u&&(u=h);break}e&&u&&null===m.alternate&&t(r,u),I=a(m,I,d),null===l?C=m:l.sibling=m,l=m,u=h}if(d===o.length)return g(r,u),rI&&qr(r,d),C;if(null===u){for(;d<o.length;d++)null!==(u=c(r,o[d],i))&&(I=a(u,I,d),null===l?C=u:l.sibling=u,l=u);return rI&&qr(r,d),C}for(u=n(r,u);d<o.length;d++)null!==(h=A(u,r,d,o[d],i))&&(e&&null!==h.alternate&&u.delete(null===h.key?d:h.key),I=a(h,I,d),null===l?C=h:l.sibling=h,l=h);return e&&u.forEach((function(e){return t(r,e)})),rI&&qr(r,d),C}function h(r,o,i,C){var l=H(i);if("function"!==typeof l)throw Error(I(150));if(null==(i=l.call(i)))throw Error(I(151));for(var u=l=null,d=o,h=o=0,m=null,b=i.next();null!==d&&!b.done;h++,b=i.next()){d.index>h?(m=d,d=null):m=d.sibling;var p=s(r,d,b.value,C);if(null===p){null===d&&(d=m);break}e&&d&&null===p.alternate&&t(r,d),o=a(p,o,h),null===u?l=p:u.sibling=p,u=p,d=m}if(b.done)return g(r,d),rI&&qr(r,h),l;if(null===d){for(;!b.done;h++,b=i.next())null!==(b=c(r,b.value,C))&&(o=a(b,o,h),null===u?l=b:u.sibling=b,u=b);return rI&&qr(r,h),l}for(d=n(r,d);!b.done;h++,b=i.next())null!==(b=A(d,r,h,b.value,C))&&(e&&null!==b.alternate&&d.delete(null===b.key?h:b.key),o=a(b,o,h),null===u?l=b:u.sibling=b,u=b);return e&&d.forEach((function(e){return t(r,e)})),rI&&qr(r,h),l}return function e(n,I,a,i){if("object"===typeof a&&null!==a&&a.type===G&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case Z:e:{for(var C=a.key,l=I;null!==l;){if(l.key===C){if((C=a.type)===G){if(7===l.tag){g(n,l.sibling),(I=r(l,a.props.children)).return=n,n=I;break e}}else if(l.elementType===C||"object"===typeof C&&null!==C&&C.$$typeof===X&&jI(C)===l.type){g(n,l.sibling),(I=r(l,a.props)).ref=QI(n,l,a),I.return=n,n=I;break e}g(n,l);break}t(n,l),l=l.sibling}a.type===G?((I=HC(a.props.children,n.mode,i,a.key)).return=n,n=I):((i=YC(a.type,a.key,a.props,null,n.mode,i)).ref=QI(n,I,a),i.return=n,n=i)}return o(n);case y:e:{for(l=a.key;null!==I;){if(I.key===l){if(4===I.tag&&I.stateNode.containerInfo===a.containerInfo&&I.stateNode.implementation===a.implementation){g(n,I.sibling),(I=r(I,a.children||[])).return=n,n=I;break e}g(n,I);break}t(n,I),I=I.sibling}(I=KC(a,n.mode,i)).return=n,n=I}return o(n);case X:return e(n,I,(l=a._init)(a._payload),i)}if(te(a))return d(n,I,a,i);if(H(a))return h(n,I,a,i);TI(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==I&&6===I.tag?(g(n,I.sibling),(I=r(I,a)).return=n,n=I):(g(n,I),(I=FC(a,n.mode,i)).return=n,n=I),o(n)):g(n,I)}}var OI=PI(!0),_I=PI(!1),qI={},$I=Br(qI),ea=Br(qI),ta=Br(qI);function ga(e){if(e===qI)throw Error(I(174));return e}function na(e,t){switch(kr(ta,t),kr(ea,e),kr($I,qI),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ie(null,"");break;default:t=ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}vr($I),kr($I,t)}function ra(){vr($I),vr(ea),vr(ta)}function Ia(e){ga(ta.current);var t=ga($I.current),g=ie(t,e.type);t!==g&&(kr(ea,e),kr($I,g))}function aa(e){ea.current===e&&(vr($I),vr(ea))}var oa=Br(0);function ia(e){for(var t=e;null!==t;){if(13===t.tag){var g=t.memoizedState;if(null!==g&&(null===(g=g.dehydrated)||"$?"===g.data||"$!"===g.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ca=[];function la(){for(var e=0;e<Ca.length;e++)Ca[e]._workInProgressVersionPrimary=null;Ca.length=0}var ua=f.ReactCurrentDispatcher,ca=f.ReactCurrentBatchConfig,sa=0,Aa=null,da=null,ha=null,ma=!1,ba=!1,pa=0,fa=0;function Za(){throw Error(I(321))}function ya(e,t){if(null===t)return!1;for(var g=0;g<t.length&&g<e.length;g++)if(!an(e[g],t[g]))return!1;return!0}function Ga(e,t,g,n,r,a){if(sa=a,Aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ua.current=null===e||null===e.memoizedState?ao:oo,e=g(n,r),ba){a=0;do{if(ba=!1,pa=0,25<=a)throw Error(I(301));a+=1,ha=da=null,t.updateQueue=null,ua.current=io,e=g(n,r)}while(ba)}if(ua.current=Io,t=null!==da&&null!==da.next,sa=0,ha=da=Aa=null,ma=!1,t)throw Error(I(300));return e}function Ba(){var e=0!==pa;return pa=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ha?Aa.memoizedState=ha=e:ha=ha.next=e,ha}function ka(){if(null===da){var e=Aa.alternate;e=null!==e?e.memoizedState:null}else e=da.next;var t=null===ha?Aa.memoizedState:ha.next;if(null!==t)ha=t,da=e;else{if(null===e)throw Error(I(310));e={memoizedState:(da=e).memoizedState,baseState:da.baseState,baseQueue:da.baseQueue,queue:da.queue,next:null},null===ha?Aa.memoizedState=ha=e:ha=ha.next=e}return ha}function Sa(e,t){return"function"===typeof t?t(e):t}function Wa(e){var t=ka(),g=t.queue;if(null===g)throw Error(I(311));g.lastRenderedReducer=e;var n=da,r=n.baseQueue,a=g.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}n.baseQueue=r=a,g.pending=null}if(null!==r){a=r.next,n=n.baseState;var i=o=null,C=null,l=a;do{var u=l.lane;if((sa&u)===u)null!==C&&(C=C.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var c={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===C?(i=C=c,o=n):C=C.next=c,Aa.lanes|=u,Ni|=u}l=l.next}while(null!==l&&l!==a);null===C?o=n:C.next=i,an(n,t.memoizedState)||(fo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=C,g.lastRenderedState=n}if(null!==(e=g.interleaved)){r=e;do{a=r.lane,Aa.lanes|=a,Ni|=a,r=r.next}while(r!==e)}else null===r&&(g.lanes=0);return[t.memoizedState,g.dispatch]}function Va(e){var t=ka(),g=t.queue;if(null===g)throw Error(I(311));g.lastRenderedReducer=e;var n=g.dispatch,r=g.pending,a=t.memoizedState;if(null!==r){g.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);an(a,t.memoizedState)||(fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),g.lastRenderedState=a}return[a,n]}function wa(){}function Ra(e,t){var g=Aa,n=ka(),r=t(),a=!an(n.memoizedState,r);if(a&&(n.memoizedState=r,fo=!0),n=n.queue,Ua(Ya.bind(null,g,n,e),[e]),n.getSnapshot!==t||a||null!==ha&&1&ha.memoizedState.tag){if(g.flags|=2048,Ka(9,Ja.bind(null,g,n,r,t),void 0,null),null===Vi)throw Error(I(349));0!==(30&sa)||Xa(g,t,r)}return r}function Xa(e,t,g){e.flags|=16384,e={getSnapshot:t,value:g},null===(t=Aa.updateQueue)?(t={lastEffect:null,stores:null},Aa.updateQueue=t,t.stores=[e]):null===(g=t.stores)?t.stores=[e]:g.push(e)}function Ja(e,t,g,n){t.value=g,t.getSnapshot=n,Ha(t)&&Na(e)}function Ya(e,t,g){return g((function(){Ha(t)&&Na(e)}))}function Ha(e){var t=e.getSnapshot;e=e.value;try{var g=t();return!an(e,g)}catch(n){return!0}}function Na(e){var t=VI(e,1);null!==t&&gC(t,e,1,-1)}function Fa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,Aa,e),[t.memoizedState,e]}function Ka(e,t,g,n){return e={tag:e,create:t,destroy:g,deps:n,next:null},null===(t=Aa.updateQueue)?(t={lastEffect:null,stores:null},Aa.updateQueue=t,t.lastEffect=e.next=e):null===(g=t.lastEffect)?t.lastEffect=e.next=e:(n=g.next,g.next=e,e.next=n,t.lastEffect=e),e}function xa(){return ka().memoizedState}function Ea(e,t,g,n){var r=va();Aa.flags|=e,r.memoizedState=Ka(1|t,g,void 0,void 0===n?null:n)}function Ma(e,t,g,n){var r=ka();n=void 0===n?null:n;var I=void 0;if(null!==da){var a=da.memoizedState;if(I=a.destroy,null!==n&&ya(n,a.deps))return void(r.memoizedState=Ka(t,g,I,n))}Aa.flags|=e,r.memoizedState=Ka(1|t,g,I,n)}function Da(e,t){return Ea(8390656,8,e,t)}function Ua(e,t){return Ma(2048,8,e,t)}function za(e,t){return Ma(4,2,e,t)}function La(e,t){return Ma(4,4,e,t)}function Qa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ta(e,t,g){return g=null!==g&&void 0!==g?g.concat([e]):null,Ma(4,4,Qa.bind(null,t,e),g)}function ja(){}function Pa(e,t){var g=ka();t=void 0===t?null:t;var n=g.memoizedState;return null!==n&&null!==t&&ya(t,n[1])?n[0]:(g.memoizedState=[e,t],e)}function Oa(e,t){var g=ka();t=void 0===t?null:t;var n=g.memoizedState;return null!==n&&null!==t&&ya(t,n[1])?n[0]:(e=e(),g.memoizedState=[e,t],e)}function _a(e,t,g){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,fo=!0),e.memoizedState=g):(an(g,t)||(g=dt(),Aa.lanes|=g,Ni|=g,e.baseState=!0),t)}function qa(e,t){var g=pt;pt=0!==g&&4>g?g:4,e(!0);var n=ca.transition;ca.transition={};try{e(!1),t()}finally{pt=g,ca.transition=n}}function $a(){return ka().memoizedState}function eo(e,t,g){var n=tC(e);if(g={lane:n,action:g,hasEagerState:!1,eagerState:null,next:null},go(e))no(t,g);else if(null!==(g=WI(e,t,g,n))){gC(g,e,n,eC()),ro(g,t,n)}}function to(e,t,g){var n=tC(e),r={lane:n,action:g,hasEagerState:!1,eagerState:null,next:null};if(go(e))no(t,r);else{var I=e.alternate;if(0===e.lanes&&(null===I||0===I.lanes)&&null!==(I=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=I(a,g);if(r.hasEagerState=!0,r.eagerState=o,an(o,a)){var i=t.interleaved;return null===i?(r.next=r,SI(t)):(r.next=i.next,i.next=r),void(t.interleaved=r)}}catch(C){}null!==(g=WI(e,t,r,n))&&(gC(g,e,n,r=eC()),ro(g,t,n))}}function go(e){var t=e.alternate;return e===Aa||null!==t&&t===Aa}function no(e,t){ba=ma=!0;var g=e.pending;null===g?t.next=t:(t.next=g.next,g.next=t),e.pending=t}function ro(e,t,g){if(0!==(4194240&g)){var n=t.lanes;g|=n&=e.pendingLanes,t.lanes=g,bt(e,g)}}var Io={readContext:vI,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useInsertionEffect:Za,useLayoutEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useMutableSource:Za,useSyncExternalStore:Za,useId:Za,unstable_isNewReconciler:!1},ao={readContext:vI,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:vI,useEffect:Da,useImperativeHandle:function(e,t,g){return g=null!==g&&void 0!==g?g.concat([e]):null,Ea(4194308,4,Qa.bind(null,t,e),g)},useLayoutEffect:function(e,t){return Ea(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ea(4,2,e,t)},useMemo:function(e,t){var g=va();return t=void 0===t?null:t,e=e(),g.memoizedState=[e,t],e},useReducer:function(e,t,g){var n=va();return t=void 0!==g?g(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eo.bind(null,Aa,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Fa,useDebugValue:ja,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Fa(!1),t=e[0];return e=qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,g){var n=Aa,r=va();if(rI){if(void 0===g)throw Error(I(407));g=g()}else{if(g=t(),null===Vi)throw Error(I(349));0!==(30&sa)||Xa(n,t,g)}r.memoizedState=g;var a={value:g,getSnapshot:t};return r.queue=a,Da(Ya.bind(null,n,a,e),[e]),n.flags|=2048,Ka(9,Ja.bind(null,n,a,g,t),void 0,null),g},useId:function(){var e=va(),t=Vi.identifierPrefix;if(rI){var g=_r;t=":"+t+"R"+(g=(Or&~(1<<32-at(Or)-1)).toString(32)+g),0<(g=pa++)&&(t+="H"+g.toString(32)),t+=":"}else t=":"+t+"r"+(g=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:vI,useCallback:Pa,useContext:vI,useEffect:Ua,useImperativeHandle:Ta,useInsertionEffect:za,useLayoutEffect:La,useMemo:Oa,useReducer:Wa,useRef:xa,useState:function(){return Wa(Sa)},useDebugValue:ja,useDeferredValue:function(e){return _a(ka(),da.memoizedState,e)},useTransition:function(){return[Wa(Sa)[0],ka().memoizedState]},useMutableSource:wa,useSyncExternalStore:Ra,useId:$a,unstable_isNewReconciler:!1},io={readContext:vI,useCallback:Pa,useContext:vI,useEffect:Ua,useImperativeHandle:Ta,useInsertionEffect:za,useLayoutEffect:La,useMemo:Oa,useReducer:Va,useRef:xa,useState:function(){return Va(Sa)},useDebugValue:ja,useDeferredValue:function(e){var t=ka();return null===da?t.memoizedState=e:_a(t,da.memoizedState,e)},useTransition:function(){return[Va(Sa)[0],ka().memoizedState]},useMutableSource:wa,useSyncExternalStore:Ra,useId:$a,unstable_isNewReconciler:!1};function Co(e,t){try{var g="",n=t;do{g+=M(n),n=n.return}while(n);var r=g}catch(I){r="\nError generating stack: "+I.message+"\n"+I.stack}return{value:e,source:t,stack:r,digest:null}}function lo(e,t,g){return{value:e,source:null,stack:null!=g?g:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(g){setTimeout((function(){throw g}))}}var co="function"===typeof WeakMap?WeakMap:Map;function so(e,t,g){(g=JI(-1,g)).tag=3,g.payload={element:null};var n=t.value;return g.callback=function(){zi||(zi=!0,Li=n),uo(0,t)},g}function Ao(e,t,g){(g=JI(-1,g)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;g.payload=function(){return n(r)},g.callback=function(){uo(0,t)}}var I=e.stateNode;return null!==I&&"function"===typeof I.componentDidCatch&&(g.callback=function(){uo(0,t),"function"!==typeof n&&(null===Qi?Qi=new Set([this]):Qi.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),g}function ho(e,t,g){var n=e.pingCache;if(null===n){n=e.pingCache=new co;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(g)||(r.add(g),e=vC.bind(null,e,t,g),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,g,n,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,g.flags|=131072,g.flags&=-52805,1===g.tag&&(null===g.alternate?g.tag=17:((t=JI(-1,1)).tag=2,YI(g,t,1))),g.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var po=f.ReactCurrentOwner,fo=!1;function Zo(e,t,g,n){t.child=null===e?_I(t,null,g,n):OI(t,e.child,g,n)}function yo(e,t,g,n,r){g=g.render;var I=t.ref;return BI(t,r),n=Ga(e,t,g,n,I,r),g=Ba(),null===e||fo?(rI&&g&&eI(t),t.flags|=1,Zo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,zo(e,t,r))}function Go(e,t,g,n,r){if(null===e){var I=g.type;return"function"!==typeof I||XC(I)||void 0!==I.defaultProps||null!==g.compare||void 0!==g.defaultProps?((e=YC(g.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=I,Bo(e,t,I,n,r))}if(I=e.child,0===(e.lanes&r)){var a=I.memoizedProps;if((g=null!==(g=g.compare)?g:on)(a,n)&&e.ref===t.ref)return zo(e,t,r)}return t.flags|=1,(e=JC(I,n)).ref=t.ref,e.return=t,t.child=e}function Bo(e,t,g,n,r){if(null!==e){var I=e.memoizedProps;if(on(I,n)&&e.ref===t.ref){if(fo=!1,t.pendingProps=n=I,0===(e.lanes&r))return t.lanes=e.lanes,zo(e,t,r);0!==(131072&e.flags)&&(fo=!0)}}return So(e,t,g,n,r)}function vo(e,t,g){var n=t.pendingProps,r=n.children,I=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(Ji,Xi),Xi|=g;else{if(0===(1073741824&g))return e=null!==I?I.baseLanes|g:g,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kr(Ji,Xi),Xi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==I?I.baseLanes:g,kr(Ji,Xi),Xi|=n}else null!==I?(n=I.baseLanes|g,t.memoizedState=null):n=g,kr(Ji,Xi),Xi|=n;return Zo(e,t,r,g),t.child}function ko(e,t){var g=t.ref;(null===e&&null!==g||null!==e&&e.ref!==g)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,g,n,r){var I=Xr(g)?wr:Wr.current;return I=Rr(t,I),BI(t,r),g=Ga(e,t,g,n,I,r),n=Ba(),null===e||fo?(rI&&n&&eI(t),t.flags|=1,Zo(e,t,g,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,zo(e,t,r))}function Wo(e,t,g,n,r){if(Xr(g)){var I=!0;Nr(t)}else I=!1;if(BI(t,r),null===t.stateNode)Uo(e,t),UI(t,g,n),LI(t,g,n,r),n=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var i=a.context,C=g.contextType;"object"===typeof C&&null!==C?C=vI(C):C=Rr(t,C=Xr(g)?wr:Wr.current);var l=g.getDerivedStateFromProps,u="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==n||i!==C)&&zI(t,a,n,C),wI=!1;var c=t.memoizedState;a.state=c,FI(t,n,a,r),i=t.memoizedState,o!==n||c!==i||Vr.current||wI?("function"===typeof l&&(EI(t,g,l,n),i=t.memoizedState),(o=wI||DI(t,g,o,n,c,i,C))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=i),a.props=n,a.state=i,a.context=C,n=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,XI(e,t),o=t.memoizedProps,C=t.type===t.elementType?o:hI(t.type,o),a.props=C,u=t.pendingProps,c=a.context,"object"===typeof(i=g.contextType)&&null!==i?i=vI(i):i=Rr(t,i=Xr(g)?wr:Wr.current);var s=g.getDerivedStateFromProps;(l="function"===typeof s||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||c!==i)&&zI(t,a,n,i),wI=!1,c=t.memoizedState,a.state=c,FI(t,n,a,r);var A=t.memoizedState;o!==u||c!==A||Vr.current||wI?("function"===typeof s&&(EI(t,g,s,n),A=t.memoizedState),(C=wI||DI(t,g,C,n,c,A,i)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,A,i),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,A,i)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=A),a.props=n,a.state=A,a.context=i,n=C):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),n=!1)}return Vo(e,t,g,n,I,r)}function Vo(e,t,g,n,r,I){ko(e,t);var a=0!==(128&t.flags);if(!n&&!a)return r&&Fr(t,g,!1),zo(e,t,I);n=t.stateNode,po.current=t;var o=a&&"function"!==typeof g.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=OI(t,e.child,null,I),t.child=OI(t,null,o,I)):Zo(e,t,o,I),t.memoizedState=n.state,r&&Fr(t,g,!0),t.child}function wo(e){var t=e.stateNode;t.pendingContext?Yr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Yr(0,t.context,!1),na(e,t.containerInfo)}function Ro(e,t,g,n,r){return sI(),AI(r),t.flags|=256,Zo(e,t,g,n),t.child}var Xo,Jo,Yo,Ho={dehydrated:null,treeContext:null,retryLane:0};function No(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,g){var n,r=t.pendingProps,a=oa.current,o=!1,i=0!==(128&t.flags);if((n=i)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),kr(oa,1&a),null===e)return CI(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=i):o=NC(i,r,0,null),e=HC(e,r,g,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=No(g),t.memoizedState=Ho,e):Ko(t,i));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,g,n,r,a,o){if(g)return 256&t.flags?(t.flags&=-257,xo(e,t,o,n=lo(Error(I(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,r=t.mode,n=NC({mode:"visible",children:n.children},r,0,null),(a=HC(a,r,o,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&OI(t,e.child,null,o),t.child.memoizedState=No(o),t.memoizedState=Ho,a);if(0===(1&t.mode))return xo(e,t,o,null);if("$!"===r.data){if(n=r.nextSibling&&r.nextSibling.dataset)var i=n.dgst;return n=i,xo(e,t,o,n=lo(a=Error(I(419)),n,void 0))}if(i=0!==(o&e.childLanes),fo||i){if(null!==(n=Vi)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(n.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,VI(e,r),gC(n,e,r,-1))}return dC(),xo(e,t,o,n=lo(Error(I(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=SC.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,nI=Cr(r.nextSibling),gI=t,rI=!0,II=null,null!==e&&(Tr[jr++]=Or,Tr[jr++]=_r,Tr[jr++]=Pr,Or=e.id,_r=e.overflow,Pr=t),t=Ko(t,n.children),t.flags|=4096,t)}(e,t,i,r,n,a,g);if(o){o=r.fallback,i=t.mode,n=(a=e.child).sibling;var C={mode:"hidden",children:r.children};return 0===(1&i)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=C,t.deletions=null):(r=JC(a,C)).subtreeFlags=14680064&a.subtreeFlags,null!==n?o=JC(n,o):(o=HC(o,i,g,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=null===(i=e.child.memoizedState)?No(g):{baseLanes:i.baseLanes|g,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~g,t.memoizedState=Ho,r}return e=(o=e.child).sibling,r=JC(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=g),r.return=t,r.sibling=null,null!==e&&(null===(g=t.deletions)?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=r,t.memoizedState=null,r}function Ko(e,t){return(t=NC({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function xo(e,t,g,n){return null!==n&&AI(n),OI(t,e.child,null,g),(e=Ko(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Eo(e,t,g){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),GI(e.return,t,g)}function Mo(e,t,g,n,r){var I=e.memoizedState;null===I?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:g,tailMode:r}:(I.isBackwards=t,I.rendering=null,I.renderingStartTime=0,I.last=n,I.tail=g,I.tailMode=r)}function Do(e,t,g){var n=t.pendingProps,r=n.revealOrder,I=n.tail;if(Zo(e,t,n.children,g),0!==(2&(n=oa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Eo(e,g,t);else if(19===e.tag)Eo(e,g,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(kr(oa,n),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(g=t.child,r=null;null!==g;)null!==(e=g.alternate)&&null===ia(e)&&(r=g),g=g.sibling;null===(g=r)?(r=t.child,t.child=null):(r=g.sibling,g.sibling=null),Mo(t,!1,r,g,I);break;case"backwards":for(g=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ia(e)){t.child=r;break}e=r.sibling,r.sibling=g,g=r,r=e}Mo(t,!0,g,null,I);break;case"together":Mo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zo(e,t,g){if(null!==e&&(t.dependencies=e.dependencies),Ni|=t.lanes,0===(g&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(I(153));if(null!==t.child){for(g=JC(e=t.child,e.pendingProps),t.child=g,g.return=t;null!==e.sibling;)e=e.sibling,(g=g.sibling=JC(e,e.pendingProps)).return=t;g.sibling=null}return t.child}function Lo(e,t){if(!rI)switch(e.tailMode){case"hidden":t=e.tail;for(var g=null;null!==t;)null!==t.alternate&&(g=t),t=t.sibling;null===g?e.tail=null:g.sibling=null;break;case"collapsed":g=e.tail;for(var n=null;null!==g;)null!==g.alternate&&(n=g),g=g.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,g=0,n=0;if(t)for(var r=e.child;null!==r;)g|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)g|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=g,t}function To(e,t,g){var n=t.pendingProps;switch(tI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Xr(t.type)&&Jr(),Qo(t),null;case 3:return n=t.stateNode,ra(),vr(Vr),vr(Wr),la(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(uI(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==II&&(aC(II),II=null))),Qo(t),null;case 5:aa(t);var r=ga(ta.current);if(g=t.type,null!==e&&null!=t.stateNode)Jo(e,t,g,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(I(166));return Qo(t),null}if(e=ga($I.current),uI(t)){n=t.stateNode,g=t.type;var a=t.memoizedProps;switch(n[cr]=t,n[sr]=a,e=0!==(1&t.mode),g){case"dialog":xn("cancel",n),xn("close",n);break;case"iframe":case"object":case"embed":xn("load",n);break;case"video":case"audio":for(r=0;r<Hn.length;r++)xn(Hn[r],n);break;case"source":xn("error",n);break;case"img":case"image":case"link":xn("error",n),xn("load",n);break;case"details":xn("toggle",n);break;case"input":O(n,a),xn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},xn("invalid",n);break;case"textarea":re(n,a),xn("invalid",n)}for(var i in be(g,a),r=null,a)if(a.hasOwnProperty(i)){var C=a[i];"children"===i?"string"===typeof C?n.textContent!==C&&(!0!==a.suppressHydrationWarning&&qn(n.textContent,C,e),r=["children",C]):"number"===typeof C&&n.textContent!==""+C&&(!0!==a.suppressHydrationWarning&&qn(n.textContent,C,e),r=["children",""+C]):o.hasOwnProperty(i)&&null!=C&&"onScroll"===i&&xn("scroll",n)}switch(g){case"input":Q(n),$(n,a,!0);break;case"textarea":Q(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=$n)}n=r,t.updateQueue=n,null!==n&&(t.flags|=4)}else{i=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(g)),"http://www.w3.org/1999/xhtml"===e?"script"===g?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=i.createElement(g,{is:n.is}):(e=i.createElement(g),"select"===g&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,g),e[cr]=t,e[sr]=n,Xo(e,t),t.stateNode=e;e:{switch(i=pe(g,n),g){case"dialog":xn("cancel",e),xn("close",e),r=n;break;case"iframe":case"object":case"embed":xn("load",e),r=n;break;case"video":case"audio":for(r=0;r<Hn.length;r++)xn(Hn[r],e);r=n;break;case"source":xn("error",e),r=n;break;case"img":case"image":case"link":xn("error",e),xn("load",e),r=n;break;case"details":xn("toggle",e),r=n;break;case"input":O(e,n),r=P(e,n),xn("invalid",e);break;case"option":default:r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=F({},n,{value:void 0}),xn("invalid",e);break;case"textarea":re(e,n),r=ne(e,n),xn("invalid",e)}for(a in be(g,r),C=r)if(C.hasOwnProperty(a)){var l=C[a];"style"===a?he(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&ue(e,l):"children"===a?"string"===typeof l?("textarea"!==g||""!==l)&&ce(e,l):"number"===typeof l&&ce(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=l&&"onScroll"===a&&xn("scroll",e):null!=l&&p(e,a,l,i))}switch(g){case"input":Q(e),$(e,n,!1);break;case"textarea":Q(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+z(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?ge(e,!!n.multiple,a,!1):null!=n.defaultValue&&ge(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$n)}switch(g){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(I(166));if(g=ga(ta.current),ga($I.current),uI(t)){if(n=t.stateNode,g=t.memoizedProps,n[cr]=t,(a=n.nodeValue!==g)&&null!==(e=gI))switch(e.tag){case 3:qn(n.nodeValue,g,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qn(n.nodeValue,g,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===g.nodeType?g:g.ownerDocument).createTextNode(n))[cr]=t,t.stateNode=n}return Qo(t),null;case 13:if(vr(oa),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rI&&null!==nI&&0!==(1&t.mode)&&0===(128&t.flags))cI(),sI(),t.flags|=98560,a=!1;else if(a=uI(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(I(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(I(317));a[cr]=t}else sI(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),a=!1}else null!==II&&(aC(II),II=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=g,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oa.current)?0===Yi&&(Yi=3):dC())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return ra(),null===e&&Dn(t.stateNode.containerInfo),Qo(t),null;case 10:return yI(t.type._context),Qo(t),null;case 19:if(vr(oa),null===(a=t.memoizedState))return Qo(t),null;if(n=0!==(128&t.flags),null===(i=a.rendering))if(n)Lo(a,!1);else{if(0!==Yi||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=ia(e))){for(t.flags|=128,Lo(a,!1),null!==(n=i.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=g,g=t.child;null!==g;)e=n,(a=g).flags&=14680066,null===(i=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),g=g.sibling;return kr(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&_e()>Di&&(t.flags|=128,n=!0,Lo(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ia(i))){if(t.flags|=128,n=!0,null!==(g=e.updateQueue)&&(t.updateQueue=g,t.flags|=4),Lo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!rI)return Qo(t),null}else 2*_e()-a.renderingStartTime>Di&&1073741824!==g&&(t.flags|=128,n=!0,Lo(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(g=a.last)?g.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=_e(),t.sibling=null,g=oa.current,kr(oa,n?1&g|2:1&g),t):(Qo(t),null);case 22:case 23:return uC(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Xi)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(I(156,t.tag))}function jo(e,t){switch(tI(t),t.tag){case 1:return Xr(t.type)&&Jr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ra(),vr(Vr),vr(Wr),la(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return aa(t),null;case 13:if(vr(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(I(340));sI()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return vr(oa),null;case 4:return ra(),null;case 10:return yI(t.type._context),null;case 22:case 23:return uC(),null;default:return null}}Xo=function(e,t){for(var g=t.child;null!==g;){if(5===g.tag||6===g.tag)e.appendChild(g.stateNode);else if(4!==g.tag&&null!==g.child){g.child.return=g,g=g.child;continue}if(g===t)break;for(;null===g.sibling;){if(null===g.return||g.return===t)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Jo=function(e,t,g,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,ga($I.current);var I,a=null;switch(g){case"input":r=P(e,r),n=P(e,n),a=[];break;case"select":r=F({},r,{value:void 0}),n=F({},n,{value:void 0}),a=[];break;case"textarea":r=ne(e,r),n=ne(e,n),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(l in be(g,n),g=null,r)if(!n.hasOwnProperty(l)&&r.hasOwnProperty(l)&&null!=r[l])if("style"===l){var i=r[l];for(I in i)i.hasOwnProperty(I)&&(g||(g={}),g[I]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(o.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in n){var C=n[l];if(i=null!=r?r[l]:void 0,n.hasOwnProperty(l)&&C!==i&&(null!=C||null!=i))if("style"===l)if(i){for(I in i)!i.hasOwnProperty(I)||C&&C.hasOwnProperty(I)||(g||(g={}),g[I]="");for(I in C)C.hasOwnProperty(I)&&i[I]!==C[I]&&(g||(g={}),g[I]=C[I])}else g||(a||(a=[]),a.push(l,g)),g=C;else"dangerouslySetInnerHTML"===l?(C=C?C.__html:void 0,i=i?i.__html:void 0,null!=C&&i!==C&&(a=a||[]).push(l,C)):"children"===l?"string"!==typeof C&&"number"!==typeof C||(a=a||[]).push(l,""+C):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(o.hasOwnProperty(l)?(null!=C&&"onScroll"===l&&xn("scroll",e),a||i===C||(a=[])):(a=a||[]).push(l,C))}g&&(a=a||[]).push("style",g);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Yo=function(e,t,g,n){g!==n&&(t.flags|=4)};var Po=!1,Oo=!1,_o="function"===typeof WeakSet?WeakSet:Set,qo=null;function $o(e,t){var g=e.ref;if(null!==g)if("function"===typeof g)try{g(null)}catch(n){BC(e,t,n)}else g.current=null}function ei(e,t,g){try{g()}catch(n){BC(e,t,n)}}var ti=!1;function gi(e,t,g){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var I=r.destroy;r.destroy=void 0,void 0!==I&&ei(t,g,I)}r=r.next}while(r!==n)}}function ni(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var g=t=t.next;do{if((g.tag&e)===e){var n=g.create;g.destroy=n()}g=g.next}while(g!==t)}}function ri(e){var t=e.ref;if(null!==t){var g=e.stateNode;e.tag,e=g,"function"===typeof t?t(e):t.current=e}}function Ii(e){var t=e.alternate;null!==t&&(e.alternate=null,Ii(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[cr],delete t[sr],delete t[dr],delete t[hr],delete t[mr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ai(e){return 5===e.tag||3===e.tag||4===e.tag}function oi(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ai(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ii(e,t,g){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===g.nodeType?g.parentNode.insertBefore(e,t):g.insertBefore(e,t):(8===g.nodeType?(t=g.parentNode).insertBefore(e,g):(t=g).appendChild(e),null!==(g=g._reactRootContainer)&&void 0!==g||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(ii(e,t,g),e=e.sibling;null!==e;)ii(e,t,g),e=e.sibling}function Ci(e,t,g){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?g.insertBefore(e,t):g.appendChild(e);else if(4!==n&&null!==(e=e.child))for(Ci(e,t,g),e=e.sibling;null!==e;)Ci(e,t,g),e=e.sibling}var li=null,ui=!1;function ci(e,t,g){for(g=g.child;null!==g;)si(e,t,g),g=g.sibling}function si(e,t,g){if(It&&"function"===typeof It.onCommitFiberUnmount)try{It.onCommitFiberUnmount(rt,g)}catch(o){}switch(g.tag){case 5:Oo||$o(g,t);case 6:var n=li,r=ui;li=null,ci(e,t,g),ui=r,null!==(li=n)&&(ui?(e=li,g=g.stateNode,8===e.nodeType?e.parentNode.removeChild(g):e.removeChild(g)):li.removeChild(g.stateNode));break;case 18:null!==li&&(ui?(e=li,g=g.stateNode,8===e.nodeType?ir(e.parentNode,g):1===e.nodeType&&ir(e,g),Dt(e)):ir(li,g.stateNode));break;case 4:n=li,r=ui,li=g.stateNode.containerInfo,ui=!0,ci(e,t,g),li=n,ui=r;break;case 0:case 11:case 14:case 15:if(!Oo&&(null!==(n=g.updateQueue)&&null!==(n=n.lastEffect))){r=n=n.next;do{var I=r,a=I.destroy;I=I.tag,void 0!==a&&(0!==(2&I)||0!==(4&I))&&ei(g,t,a),r=r.next}while(r!==n)}ci(e,t,g);break;case 1:if(!Oo&&($o(g,t),"function"===typeof(n=g.stateNode).componentWillUnmount))try{n.props=g.memoizedProps,n.state=g.memoizedState,n.componentWillUnmount()}catch(o){BC(g,t,o)}ci(e,t,g);break;case 21:ci(e,t,g);break;case 22:1&g.mode?(Oo=(n=Oo)||null!==g.memoizedState,ci(e,t,g),Oo=n):ci(e,t,g);break;default:ci(e,t,g)}}function Ai(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var g=e.stateNode;null===g&&(g=e.stateNode=new _o),t.forEach((function(t){var n=WC.bind(null,e,t);g.has(t)||(g.add(t),t.then(n,n))}))}}function di(e,t){var g=t.deletions;if(null!==g)for(var n=0;n<g.length;n++){var r=g[n];try{var a=e,o=t,i=o;e:for(;null!==i;){switch(i.tag){case 5:li=i.stateNode,ui=!1;break e;case 3:case 4:li=i.stateNode.containerInfo,ui=!0;break e}i=i.return}if(null===li)throw Error(I(160));si(a,o,r),li=null,ui=!1;var C=r.alternate;null!==C&&(C.return=null),r.return=null}catch(l){BC(r,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hi(t,e),t=t.sibling}function hi(e,t){var g=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(di(t,e),mi(e),4&n){try{gi(3,e,e.return),ni(3,e)}catch(h){BC(e,e.return,h)}try{gi(5,e,e.return)}catch(h){BC(e,e.return,h)}}break;case 1:di(t,e),mi(e),512&n&&null!==g&&$o(g,g.return);break;case 5:if(di(t,e),mi(e),512&n&&null!==g&&$o(g,g.return),32&e.flags){var r=e.stateNode;try{ce(r,"")}catch(h){BC(e,e.return,h)}}if(4&n&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==g?g.memoizedProps:a,i=e.type,C=e.updateQueue;if(e.updateQueue=null,null!==C)try{"input"===i&&"radio"===a.type&&null!=a.name&&_(r,a),pe(i,o);var l=pe(i,a);for(o=0;o<C.length;o+=2){var u=C[o],c=C[o+1];"style"===u?he(r,c):"dangerouslySetInnerHTML"===u?ue(r,c):"children"===u?ce(r,c):p(r,u,c,l)}switch(i){case"input":q(r,a);break;case"textarea":Ie(r,a);break;case"select":var s=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var A=a.value;null!=A?ge(r,!!a.multiple,A,!1):s!==!!a.multiple&&(null!=a.defaultValue?ge(r,!!a.multiple,a.defaultValue,!0):ge(r,!!a.multiple,a.multiple?[]:"",!1))}r[sr]=a}catch(h){BC(e,e.return,h)}}break;case 6:if(di(t,e),mi(e),4&n){if(null===e.stateNode)throw Error(I(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(h){BC(e,e.return,h)}}break;case 3:if(di(t,e),mi(e),4&n&&null!==g&&g.memoizedState.isDehydrated)try{Dt(t.containerInfo)}catch(h){BC(e,e.return,h)}break;case 4:default:di(t,e),mi(e);break;case 13:di(t,e),mi(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Mi=_e())),4&n&&Ai(e);break;case 22:if(u=null!==g&&null!==g.memoizedState,1&e.mode?(Oo=(l=Oo)||u,di(t,e),Oo=l):di(t,e),mi(e),8192&n){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!u&&0!==(1&e.mode))for(qo=e,u=e.child;null!==u;){for(c=qo=u;null!==qo;){switch(A=(s=qo).child,s.tag){case 0:case 11:case 14:case 15:gi(4,s,s.return);break;case 1:$o(s,s.return);var d=s.stateNode;if("function"===typeof d.componentWillUnmount){n=s,g=s.return;try{t=n,d.props=t.memoizedProps,d.state=t.memoizedState,d.componentWillUnmount()}catch(h){BC(n,g,h)}}break;case 5:$o(s,s.return);break;case 22:if(null!==s.memoizedState){Zi(c);continue}}null!==A?(A.return=s,qo=A):Zi(c)}u=u.sibling}e:for(u=null,c=e;;){if(5===c.tag){if(null===u){u=c;try{r=c.stateNode,l?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(i=c.stateNode,o=void 0!==(C=c.memoizedProps.style)&&null!==C&&C.hasOwnProperty("display")?C.display:null,i.style.display=de("display",o))}catch(h){BC(e,e.return,h)}}}else if(6===c.tag){if(null===u)try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(h){BC(e,e.return,h)}}else if((22!==c.tag&&23!==c.tag||null===c.memoizedState||c===e)&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;null===c.sibling;){if(null===c.return||c.return===e)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:di(t,e),mi(e),4&n&&Ai(e);case 21:}}function mi(e){var t=e.flags;if(2&t){try{e:{for(var g=e.return;null!==g;){if(ai(g)){var n=g;break e}g=g.return}throw Error(I(160))}switch(n.tag){case 5:var r=n.stateNode;32&n.flags&&(ce(r,""),n.flags&=-33),Ci(e,oi(e),r);break;case 3:case 4:var a=n.stateNode.containerInfo;ii(e,oi(e),a);break;default:throw Error(I(161))}}catch(o){BC(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bi(e,t,g){qo=e,pi(e,t,g)}function pi(e,t,g){for(var n=0!==(1&e.mode);null!==qo;){var r=qo,I=r.child;if(22===r.tag&&n){var a=null!==r.memoizedState||Po;if(!a){var o=r.alternate,i=null!==o&&null!==o.memoizedState||Oo;o=Po;var C=Oo;if(Po=a,(Oo=i)&&!C)for(qo=r;null!==qo;)i=(a=qo).child,22===a.tag&&null!==a.memoizedState?yi(r):null!==i?(i.return=a,qo=i):yi(r);for(;null!==I;)qo=I,pi(I,t,g),I=I.sibling;qo=r,Po=o,Oo=C}fi(e)}else 0!==(8772&r.subtreeFlags)&&null!==I?(I.return=r,qo=I):fi(e)}}function fi(e){for(;null!==qo;){var t=qo;if(0!==(8772&t.flags)){var g=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Oo||ni(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Oo)if(null===g)n.componentDidMount();else{var r=t.elementType===t.type?g.memoizedProps:hI(t.type,g.memoizedProps);n.componentDidUpdate(r,g.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&KI(t,a,n);break;case 3:var o=t.updateQueue;if(null!==o){if(g=null,null!==t.child)switch(t.child.tag){case 5:case 1:g=t.child.stateNode}KI(t,o,g)}break;case 5:var i=t.stateNode;if(null===g&&4&t.flags){g=i;var C=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&g.focus();break;case"img":C.src&&(g.src=C.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var u=l.memoizedState;if(null!==u){var c=u.dehydrated;null!==c&&Dt(c)}}}break;default:throw Error(I(163))}Oo||512&t.flags&&ri(t)}catch(s){BC(t,t.return,s)}}if(t===e){qo=null;break}if(null!==(g=t.sibling)){g.return=t.return,qo=g;break}qo=t.return}}function Zi(e){for(;null!==qo;){var t=qo;if(t===e){qo=null;break}var g=t.sibling;if(null!==g){g.return=t.return,qo=g;break}qo=t.return}}function yi(e){for(;null!==qo;){var t=qo;try{switch(t.tag){case 0:case 11:case 15:var g=t.return;try{ni(4,t)}catch(i){BC(t,g,i)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(i){BC(t,r,i)}}var I=t.return;try{ri(t)}catch(i){BC(t,I,i)}break;case 5:var a=t.return;try{ri(t)}catch(i){BC(t,a,i)}}}catch(i){BC(t,t.return,i)}if(t===e){qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,qo=o;break}qo=t.return}}var Gi,Bi=Math.ceil,vi=f.ReactCurrentDispatcher,ki=f.ReactCurrentOwner,Si=f.ReactCurrentBatchConfig,Wi=0,Vi=null,wi=null,Ri=0,Xi=0,Ji=Br(0),Yi=0,Hi=null,Ni=0,Fi=0,Ki=0,xi=null,Ei=null,Mi=0,Di=1/0,Ui=null,zi=!1,Li=null,Qi=null,Ti=!1,ji=null,Pi=0,Oi=0,_i=null,qi=-1,$i=0;function eC(){return 0!==(6&Wi)?_e():-1!==qi?qi:qi=_e()}function tC(e){return 0===(1&e.mode)?1:0!==(2&Wi)&&0!==Ri?Ri&-Ri:null!==dI.transition?(0===$i&&($i=dt()),$i):0!==(e=pt)?e:e=void 0===(e=window.event)?16:Ot(e.type)}function gC(e,t,g,n){if(50<Oi)throw Oi=0,_i=null,Error(I(185));mt(e,g,n),0!==(2&Wi)&&e===Vi||(e===Vi&&(0===(2&Wi)&&(Fi|=g),4===Yi&&oC(e,Ri)),nC(e,n),1===g&&0===Wi&&0===(1&t.mode)&&(Di=_e()+500,xr&&Dr()))}function nC(e,t){var g=e.callbackNode;!function(e,t){for(var g=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,I=e.pendingLanes;0<I;){var a=31-at(I),o=1<<a,i=r[a];-1===i?0!==(o&g)&&0===(o&n)||(r[a]=st(o,t)):i<=t&&(e.expiredLanes|=o),I&=~o}}(e,t);var n=ct(e,e===Vi?Ri:0);if(0===n)null!==g&&je(g),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=g&&je(g),1===t)0===e.tag?function(e){xr=!0,Mr(e)}(iC.bind(null,e)):Mr(iC.bind(null,e)),ar((function(){0===(6&Wi)&&Dr()})),g=null;else{switch(ft(n)){case 1:g=$e;break;case 4:g=et;break;case 16:default:g=tt;break;case 536870912:g=nt}g=VC(g,rC.bind(null,e))}e.callbackPriority=t,e.callbackNode=g}}function rC(e,t){if(qi=-1,$i=0,0!==(6&Wi))throw Error(I(327));var g=e.callbackNode;if(yC()&&e.callbackNode!==g)return null;var n=ct(e,e===Vi?Ri:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=hC(e,n);else{t=n;var r=Wi;Wi|=2;var a=AC();for(Vi===e&&Ri===t||(Ui=null,Di=_e()+500,cC(e,t));;)try{bC();break}catch(i){sC(e,i)}ZI(),vi.current=a,Wi=r,null!==wi?t=0:(Vi=null,Ri=0,t=Yi)}if(0!==t){if(2===t&&(0!==(r=At(e))&&(n=r,t=IC(e,r))),1===t)throw g=Hi,cC(e,0),oC(e,n),nC(e,_e()),g;if(6===t)oC(e,n);else{if(r=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var g=t.updateQueue;if(null!==g&&null!==(g=g.stores))for(var n=0;n<g.length;n++){var r=g[n],I=r.getSnapshot;r=r.value;try{if(!an(I(),r))return!1}catch(o){return!1}}}if(g=t.child,16384&t.subtreeFlags&&null!==g)g.return=t,t=g;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=hC(e,n))&&(0!==(a=At(e))&&(n=a,t=IC(e,a))),1===t))throw g=Hi,cC(e,0),oC(e,n),nC(e,_e()),g;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(I(345));case 2:case 5:ZC(e,Ei,Ui);break;case 3:if(oC(e,n),(130023424&n)===n&&10<(t=Mi+500-_e())){if(0!==ct(e,0))break;if(((r=e.suspendedLanes)&n)!==n){eC(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=nr(ZC.bind(null,e,Ei,Ui),t);break}ZC(e,Ei,Ui);break;case 4:if(oC(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var o=31-at(n);a=1<<o,(o=t[o])>r&&(r=o),n&=~a}if(n=r,10<(n=(120>(n=_e()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Bi(n/1960))-n)){e.timeoutHandle=nr(ZC.bind(null,e,Ei,Ui),n);break}ZC(e,Ei,Ui);break;default:throw Error(I(329))}}}return nC(e,_e()),e.callbackNode===g?rC.bind(null,e):null}function IC(e,t){var g=xi;return e.current.memoizedState.isDehydrated&&(cC(e,t).flags|=256),2!==(e=hC(e,t))&&(t=Ei,Ei=g,null!==t&&aC(t)),e}function aC(e){null===Ei?Ei=e:Ei.push.apply(Ei,e)}function oC(e,t){for(t&=~Ki,t&=~Fi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var g=31-at(t),n=1<<g;e[g]=-1,t&=~n}}function iC(e){if(0!==(6&Wi))throw Error(I(327));yC();var t=ct(e,0);if(0===(1&t))return nC(e,_e()),null;var g=hC(e,t);if(0!==e.tag&&2===g){var n=At(e);0!==n&&(t=n,g=IC(e,n))}if(1===g)throw g=Hi,cC(e,0),oC(e,t),nC(e,_e()),g;if(6===g)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ZC(e,Ei,Ui),nC(e,_e()),null}function CC(e,t){var g=Wi;Wi|=1;try{return e(t)}finally{0===(Wi=g)&&(Di=_e()+500,xr&&Dr())}}function lC(e){null!==ji&&0===ji.tag&&0===(6&Wi)&&yC();var t=Wi;Wi|=1;var g=Si.transition,n=pt;try{if(Si.transition=null,pt=1,e)return e()}finally{pt=n,Si.transition=g,0===(6&(Wi=t))&&Dr()}}function uC(){Xi=Ji.current,vr(Ji)}function cC(e,t){e.finishedWork=null,e.finishedLanes=0;var g=e.timeoutHandle;if(-1!==g&&(e.timeoutHandle=-1,rr(g)),null!==wi)for(g=wi.return;null!==g;){var n=g;switch(tI(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Jr();break;case 3:ra(),vr(Vr),vr(Wr),la();break;case 5:aa(n);break;case 4:ra();break;case 13:case 19:vr(oa);break;case 10:yI(n.type._context);break;case 22:case 23:uC()}g=g.return}if(Vi=e,wi=e=JC(e.current,null),Ri=Xi=t,Yi=0,Hi=null,Ki=Fi=Ni=0,Ei=xi=null,null!==kI){for(t=0;t<kI.length;t++)if(null!==(n=(g=kI[t]).interleaved)){g.interleaved=null;var r=n.next,I=g.pending;if(null!==I){var a=I.next;I.next=r,n.next=a}g.pending=n}kI=null}return e}function sC(e,t){for(;;){var g=wi;try{if(ZI(),ua.current=Io,ma){for(var n=Aa.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}ma=!1}if(sa=0,ha=da=Aa=null,ba=!1,pa=0,ki.current=null,null===g||null===g.return){Yi=1,Hi=t,wi=null;break}e:{var a=e,o=g.return,i=g,C=t;if(t=Ri,i.flags|=32768,null!==C&&"object"===typeof C&&"function"===typeof C.then){var l=C,u=i,c=u.tag;if(0===(1&u.mode)&&(0===c||11===c||15===c)){var s=u.alternate;s?(u.updateQueue=s.updateQueue,u.memoizedState=s.memoizedState,u.lanes=s.lanes):(u.updateQueue=null,u.memoizedState=null)}var A=mo(o);if(null!==A){A.flags&=-257,bo(A,o,i,0,t),1&A.mode&&ho(a,l,t),C=l;var d=(t=A).updateQueue;if(null===d){var h=new Set;h.add(C),t.updateQueue=h}else d.add(C);break e}if(0===(1&t)){ho(a,l,t),dC();break e}C=Error(I(426))}else if(rI&&1&i.mode){var m=mo(o);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),bo(m,o,i,0,t),AI(Co(C,i));break e}}a=C=Co(C,i),4!==Yi&&(Yi=2),null===xi?xi=[a]:xi.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,NI(a,so(0,C,t));break e;case 1:i=C;var b=a.type,p=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==p&&"function"===typeof p.componentDidCatch&&(null===Qi||!Qi.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t,NI(a,Ao(a,i,t));break e}}a=a.return}while(null!==a)}fC(g)}catch(f){t=f,wi===g&&null!==g&&(wi=g=g.return);continue}break}}function AC(){var e=vi.current;return vi.current=Io,null===e?Io:e}function dC(){0!==Yi&&3!==Yi&&2!==Yi||(Yi=4),null===Vi||0===(268435455&Ni)&&0===(268435455&Fi)||oC(Vi,Ri)}function hC(e,t){var g=Wi;Wi|=2;var n=AC();for(Vi===e&&Ri===t||(Ui=null,cC(e,t));;)try{mC();break}catch(r){sC(e,r)}if(ZI(),Wi=g,vi.current=n,null!==wi)throw Error(I(261));return Vi=null,Ri=0,Yi}function mC(){for(;null!==wi;)pC(wi)}function bC(){for(;null!==wi&&!Pe();)pC(wi)}function pC(e){var t=Gi(e.alternate,e,Xi);e.memoizedProps=e.pendingProps,null===t?fC(e):wi=t,ki.current=null}function fC(e){var t=e;do{var g=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(g=To(g,t,Xi)))return void(wi=g)}else{if(null!==(g=jo(g,t)))return g.flags&=32767,void(wi=g);if(null===e)return Yi=6,void(wi=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(wi=t);wi=t=e}while(null!==t);0===Yi&&(Yi=5)}function ZC(e,t,g){var n=pt,r=Si.transition;try{Si.transition=null,pt=1,function(e,t,g,n){do{yC()}while(null!==ji);if(0!==(6&Wi))throw Error(I(327));g=e.finishedWork;var r=e.finishedLanes;if(null===g)return null;if(e.finishedWork=null,e.finishedLanes=0,g===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var a=g.lanes|g.childLanes;if(function(e,t){var g=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<g;){var r=31-at(g),I=1<<r;t[r]=0,n[r]=-1,e[r]=-1,g&=~I}}(e,a),e===Vi&&(wi=Vi=null,Ri=0),0===(2064&g.subtreeFlags)&&0===(2064&g.flags)||Ti||(Ti=!0,VC(tt,(function(){return yC(),null}))),a=0!==(15990&g.flags),0!==(15990&g.subtreeFlags)||a){a=Si.transition,Si.transition=null;var o=pt;pt=1;var i=Wi;Wi|=4,ki.current=null,function(e,t){if(er=zt,sn(e=cn())){if("selectionStart"in e)var g={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(g=(g=e.ownerDocument)&&g.defaultView||window).getSelection&&g.getSelection();if(n&&0!==n.rangeCount){g=n.anchorNode;var r=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{g.nodeType,a.nodeType}catch(Z){g=null;break e}var o=0,i=-1,C=-1,l=0,u=0,c=e,s=null;t:for(;;){for(var A;c!==g||0!==r&&3!==c.nodeType||(i=o+r),c!==a||0!==n&&3!==c.nodeType||(C=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(A=c.firstChild);)s=c,c=A;for(;;){if(c===e)break t;if(s===g&&++l===r&&(i=o),s===a&&++u===n&&(C=o),null!==(A=c.nextSibling))break;s=(c=s).parentNode}c=A}g=-1===i||-1===C?null:{start:i,end:C}}else g=null}g=g||{start:0,end:0}}else g=null;for(tr={focusedElem:e,selectionRange:g},zt=!1,qo=t;null!==qo;)if(e=(t=qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,qo=e;else for(;null!==qo;){t=qo;try{var d=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==d){var h=d.memoizedProps,m=d.memoizedState,b=t.stateNode,p=b.getSnapshotBeforeUpdate(t.elementType===t.type?h:hI(t.type,h),m);b.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=t.stateNode.containerInfo;1===f.nodeType?f.textContent="":9===f.nodeType&&f.documentElement&&f.removeChild(f.documentElement);break;default:throw Error(I(163))}}catch(Z){BC(t,t.return,Z)}if(null!==(e=t.sibling)){e.return=t.return,qo=e;break}qo=t.return}d=ti,ti=!1}(e,g),hi(g,e),An(tr),zt=!!er,tr=er=null,e.current=g,bi(g,e,r),Oe(),Wi=i,pt=o,Si.transition=a}else e.current=g;if(Ti&&(Ti=!1,ji=e,Pi=r),a=e.pendingLanes,0===a&&(Qi=null),function(e){if(It&&"function"===typeof It.onCommitFiberRoot)try{It.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(g.stateNode),nC(e,_e()),null!==t)for(n=e.onRecoverableError,g=0;g<t.length;g++)n((r=t[g]).value,{componentStack:r.stack,digest:r.digest});if(zi)throw zi=!1,e=Li,Li=null,e;0!==(1&Pi)&&0!==e.tag&&yC(),a=e.pendingLanes,0!==(1&a)?e===_i?Oi++:(Oi=0,_i=e):Oi=0,Dr()}(e,t,g,n)}finally{Si.transition=r,pt=n}return null}function yC(){if(null!==ji){var e=ft(Pi),t=Si.transition,g=pt;try{if(Si.transition=null,pt=16>e?16:e,null===ji)var n=!1;else{if(e=ji,ji=null,Pi=0,0!==(6&Wi))throw Error(I(331));var r=Wi;for(Wi|=4,qo=e.current;null!==qo;){var a=qo,o=a.child;if(0!==(16&qo.flags)){var i=a.deletions;if(null!==i){for(var C=0;C<i.length;C++){var l=i[C];for(qo=l;null!==qo;){var u=qo;switch(u.tag){case 0:case 11:case 15:gi(8,u,a)}var c=u.child;if(null!==c)c.return=u,qo=c;else for(;null!==qo;){var s=(u=qo).sibling,A=u.return;if(Ii(u),u===l){qo=null;break}if(null!==s){s.return=A,qo=s;break}qo=A}}}var d=a.alternate;if(null!==d){var h=d.child;if(null!==h){d.child=null;do{var m=h.sibling;h.sibling=null,h=m}while(null!==h)}}qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,qo=o;else e:for(;null!==qo;){if(0!==(2048&(a=qo).flags))switch(a.tag){case 0:case 11:case 15:gi(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,qo=b;break e}qo=a.return}}var p=e.current;for(qo=p;null!==qo;){var f=(o=qo).child;if(0!==(2064&o.subtreeFlags)&&null!==f)f.return=o,qo=f;else e:for(o=p;null!==qo;){if(0!==(2048&(i=qo).flags))try{switch(i.tag){case 0:case 11:case 15:ni(9,i)}}catch(y){BC(i,i.return,y)}if(i===o){qo=null;break e}var Z=i.sibling;if(null!==Z){Z.return=i.return,qo=Z;break e}qo=i.return}}if(Wi=r,Dr(),It&&"function"===typeof It.onPostCommitFiberRoot)try{It.onPostCommitFiberRoot(rt,e)}catch(y){}n=!0}return n}finally{pt=g,Si.transition=t}}return!1}function GC(e,t,g){e=YI(e,t=so(0,t=Co(g,t),1),1),t=eC(),null!==e&&(mt(e,1,t),nC(e,t))}function BC(e,t,g){if(3===e.tag)GC(e,e,g);else for(;null!==t;){if(3===t.tag){GC(t,e,g);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Qi||!Qi.has(n))){t=YI(t,e=Ao(t,e=Co(g,e),1),1),e=eC(),null!==t&&(mt(t,1,e),nC(t,e));break}}t=t.return}}function vC(e,t,g){var n=e.pingCache;null!==n&&n.delete(t),t=eC(),e.pingedLanes|=e.suspendedLanes&g,Vi===e&&(Ri&g)===g&&(4===Yi||3===Yi&&(130023424&Ri)===Ri&&500>_e()-Mi?cC(e,0):Ki|=g),nC(e,t)}function kC(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var g=eC();null!==(e=VI(e,t))&&(mt(e,t,g),nC(e,g))}function SC(e){var t=e.memoizedState,g=0;null!==t&&(g=t.retryLane),kC(e,g)}function WC(e,t){var g=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(g=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(I(314))}null!==n&&n.delete(t),kC(e,g)}function VC(e,t){return Te(e,t)}function wC(e,t,g,n){this.tag=e,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function RC(e,t,g,n){return new wC(e,t,g,n)}function XC(e){return!(!(e=e.prototype)||!e.isReactComponent)}function JC(e,t){var g=e.alternate;return null===g?((g=RC(e.tag,t,e.key,e.mode)).elementType=e.elementType,g.type=e.type,g.stateNode=e.stateNode,g.alternate=e,e.alternate=g):(g.pendingProps=t,g.type=e.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=14680064&e.flags,g.childLanes=e.childLanes,g.lanes=e.lanes,g.child=e.child,g.memoizedProps=e.memoizedProps,g.memoizedState=e.memoizedState,g.updateQueue=e.updateQueue,t=e.dependencies,g.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},g.sibling=e.sibling,g.index=e.index,g.ref=e.ref,g}function YC(e,t,g,n,r,a){var o=2;if(n=e,"function"===typeof e)XC(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case G:return HC(g.children,r,a,t);case B:o=8,r|=8;break;case v:return(e=RC(12,g,t,2|r)).elementType=v,e.lanes=a,e;case V:return(e=RC(13,g,t,r)).elementType=V,e.lanes=a,e;case w:return(e=RC(19,g,t,r)).elementType=w,e.lanes=a,e;case J:return NC(g,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case S:o=9;break e;case W:o=11;break e;case R:o=14;break e;case X:o=16,n=null;break e}throw Error(I(130,null==e?e:typeof e,""))}return(t=RC(o,g,t,r)).elementType=e,t.type=n,t.lanes=a,t}function HC(e,t,g,n){return(e=RC(7,e,n,t)).lanes=g,e}function NC(e,t,g,n){return(e=RC(22,e,n,t)).elementType=J,e.lanes=g,e.stateNode={isHidden:!1},e}function FC(e,t,g){return(e=RC(6,e,null,t)).lanes=g,e}function KC(e,t,g){return(t=RC(4,null!==e.children?e.children:[],e.key,t)).lanes=g,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xC(e,t,g,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ht(0),this.expirationTimes=ht(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function EC(e,t,g,n,r,I,a,o,i){return e=new xC(e,t,g,o,i),1===t?(t=1,!0===I&&(t|=8)):t=0,I=RC(3,null,null,t),e.current=I,I.stateNode=e,I.memoizedState={element:n,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},RI(I),e}function MC(e,t,g){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==n?null:""+n,children:e,containerInfo:t,implementation:g}}function DC(e){if(!e)return Sr;e:{if(De(e=e._reactInternals)!==e||1!==e.tag)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(I(171))}if(1===e.tag){var g=e.type;if(Xr(g))return Hr(e,g,t)}return t}function UC(e,t,g,n,r,I,a,o,i){return(e=EC(g,n,!0,e,0,I,0,o,i)).context=DC(null),g=e.current,(I=JI(n=eC(),r=tC(g))).callback=void 0!==t&&null!==t?t:null,YI(g,I,r),e.current.lanes=r,mt(e,r,n),nC(e,n),e}function zC(e,t,g,n){var r=t.current,I=eC(),a=tC(r);return g=DC(g),null===t.context?t.context=g:t.pendingContext=g,(t=JI(I,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=YI(r,t,a))&&(gC(e,r,a,I),HI(e,r,a)),a}function LC(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function QC(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var g=e.retryLane;e.retryLane=0!==g&&g<t?g:t}}function TC(e,t){QC(e,t),(e=e.alternate)&&QC(e,t)}Gi=function(e,t,g){if(null!==e)if(e.memoizedProps!==t.pendingProps||Vr.current)fo=!0;else{if(0===(e.lanes&g)&&0===(128&t.flags))return fo=!1,function(e,t,g){switch(t.tag){case 3:wo(t),sI();break;case 5:Ia(t);break;case 1:Xr(t.type)&&Nr(t);break;case 4:na(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;kr(mI,n._currentValue),n._currentValue=r;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(kr(oa,1&oa.current),t.flags|=128,null):0!==(g&t.child.childLanes)?Fo(e,t,g):(kr(oa,1&oa.current),null!==(e=zo(e,t,g))?e.sibling:null);kr(oa,1&oa.current);break;case 19:if(n=0!==(g&t.childLanes),0!==(128&e.flags)){if(n)return Do(e,t,g);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),kr(oa,oa.current),n)break;return null;case 22:case 23:return t.lanes=0,vo(e,t,g)}return zo(e,t,g)}(e,t,g);fo=0!==(131072&e.flags)}else fo=!1,rI&&0!==(1048576&t.flags)&&$r(t,Qr,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Uo(e,t),e=t.pendingProps;var r=Rr(t,Wr.current);BI(t,g),r=Ga(null,t,n,e,r,g);var a=Ba();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xr(n)?(a=!0,Nr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,RI(t),r.updater=MI,t.stateNode=r,r._reactInternals=t,LI(t,n,e,g),t=Vo(null,t,n,!0,a,g)):(t.tag=0,rI&&a&&eI(t),Zo(null,t,r,g),t=t.child),t;case 16:n=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"===typeof e)return XC(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===W)return 11;if(e===R)return 14}return 2}(n),e=hI(n,e),r){case 0:t=So(null,t,n,e,g);break e;case 1:t=Wo(null,t,n,e,g);break e;case 11:t=yo(null,t,n,e,g);break e;case 14:t=Go(null,t,n,hI(n.type,e),g);break e}throw Error(I(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,So(e,t,n,r=t.elementType===n?r:hI(n,r),g);case 1:return n=t.type,r=t.pendingProps,Wo(e,t,n,r=t.elementType===n?r:hI(n,r),g);case 3:e:{if(wo(t),null===e)throw Error(I(387));n=t.pendingProps,r=(a=t.memoizedState).element,XI(e,t),FI(t,n,null,g);var o=t.memoizedState;if(n=o.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ro(e,t,n,g,r=Co(Error(I(423)),t));break e}if(n!==r){t=Ro(e,t,n,g,r=Co(Error(I(424)),t));break e}for(nI=Cr(t.stateNode.containerInfo.firstChild),gI=t,rI=!0,II=null,g=_I(t,null,n,g),t.child=g;g;)g.flags=-3&g.flags|4096,g=g.sibling}else{if(sI(),n===r){t=zo(e,t,g);break e}Zo(e,t,n,g)}t=t.child}return t;case 5:return Ia(t),null===e&&CI(t),n=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,gr(n,r)?o=null:null!==a&&gr(n,a)&&(t.flags|=32),ko(e,t),Zo(e,t,o,g),t.child;case 6:return null===e&&CI(t),null;case 13:return Fo(e,t,g);case 4:return na(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=OI(t,null,n,g):Zo(e,t,n,g),t.child;case 11:return n=t.type,r=t.pendingProps,yo(e,t,n,r=t.elementType===n?r:hI(n,r),g);case 7:return Zo(e,t,t.pendingProps,g),t.child;case 8:case 12:return Zo(e,t,t.pendingProps.children,g),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,kr(mI,n._currentValue),n._currentValue=o,null!==a)if(an(a.value,o)){if(a.children===r.children&&!Vr.current){t=zo(e,t,g);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var i=a.dependencies;if(null!==i){o=a.child;for(var C=i.firstContext;null!==C;){if(C.context===n){if(1===a.tag){(C=JI(-1,g&-g)).tag=2;var l=a.updateQueue;if(null!==l){var u=(l=l.shared).pending;null===u?C.next=C:(C.next=u.next,u.next=C),l.pending=C}}a.lanes|=g,null!==(C=a.alternate)&&(C.lanes|=g),GI(a.return,g,t),i.lanes|=g;break}C=C.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(I(341));o.lanes|=g,null!==(i=o.alternate)&&(i.lanes|=g),GI(o,g,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Zo(e,t,r.children,g),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,BI(t,g),n=n(r=vI(r)),t.flags|=1,Zo(e,t,n,g),t.child;case 14:return r=hI(n=t.type,t.pendingProps),Go(e,t,n,r=hI(n.type,r),g);case 15:return Bo(e,t,t.type,t.pendingProps,g);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:hI(n,r),Uo(e,t),t.tag=1,Xr(n)?(e=!0,Nr(t)):e=!1,BI(t,g),UI(t,n,r),LI(t,n,r,g),Vo(null,t,n,!0,e,g);case 19:return Do(e,t,g);case 22:return vo(e,t,g)}throw Error(I(156,t.tag))};var jC="function"===typeof reportError?reportError:function(e){console.error(e)};function PC(e){this._internalRoot=e}function OC(e){this._internalRoot=e}function _C(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qC(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $C(){}function el(e,t,g,n,r){var I=g._reactRootContainer;if(I){var a=I;if("function"===typeof r){var o=r;r=function(){var e=LC(a);o.call(e)}}zC(t,a,e,r)}else a=function(e,t,g,n,r){if(r){if("function"===typeof n){var I=n;n=function(){var e=LC(a);I.call(e)}}var a=UC(t,n,e,0,null,!1,0,"",$C);return e._reactRootContainer=a,e[Ar]=a.current,Dn(8===e.nodeType?e.parentNode:e),lC(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof n){var o=n;n=function(){var e=LC(i);o.call(e)}}var i=EC(e,0,!1,null,0,!1,0,"",$C);return e._reactRootContainer=i,e[Ar]=i.current,Dn(8===e.nodeType?e.parentNode:e),lC((function(){zC(t,i,g,n)})),i}(g,t,e,r,n);return LC(a)}OC.prototype.render=PC.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(I(409));zC(e,t,null,null)},OC.prototype.unmount=PC.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lC((function(){zC(null,e,null,null)})),t[Ar]=null}},OC.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bt();e={blockedOn:null,target:e,priority:t};for(var g=0;g<Jt.length&&0!==t&&t<Jt[g].priority;g++);Jt.splice(g,0,e),0===g&&Ft(e)}},Zt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var g=ut(t.pendingLanes);0!==g&&(bt(t,1|g),nC(t,_e()),0===(6&Wi)&&(Di=_e()+500,Dr()))}break;case 13:lC((function(){var t=VI(e,1);if(null!==t){var g=eC();gC(t,e,1,g)}})),TC(e,1)}},yt=function(e){if(13===e.tag){var t=VI(e,134217728);if(null!==t)gC(t,e,134217728,eC());TC(e,134217728)}},Gt=function(e){if(13===e.tag){var t=tC(e),g=VI(e,t);if(null!==g)gC(g,e,t,eC());TC(e,t)}},Bt=function(){return pt},vt=function(e,t){var g=pt;try{return pt=e,t()}finally{pt=g}},ye=function(e,t,g){switch(t){case"input":if(q(e,g),t=g.name,"radio"===g.type&&null!=t){for(g=e;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<g.length;t++){var n=g[t];if(n!==e&&n.form===e.form){var r=Zr(n);if(!r)throw Error(I(90));T(n),q(n,r)}}}break;case"textarea":Ie(e,g);break;case"select":null!=(t=g.value)&&ge(e,!!g.multiple,t,!1)}},We=CC,Ve=lC;var tl={usingClientEntryPoint:!1,Events:[pr,fr,Zr,ke,Se,CC]},gl={findFiberByHostInstance:br,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nl={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Le(e))?null:e.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{rt=rl.inject(nl),It=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!_C(t))throw Error(I(200));return MC(e,t,null,g)},t.createRoot=function(e,t){if(!_C(e))throw Error(I(299));var g=!1,n="",r=jC;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(g=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=EC(e,1,!1,null,0,g,0,n,r),e[Ar]=t.current,Dn(8===e.nodeType?e.parentNode:e),new PC(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(I(188));throw e=Object.keys(e).join(","),Error(I(268,e))}return e=null===(e=Le(t))?null:e.stateNode},t.flushSync=function(e){return lC(e)},t.hydrate=function(e,t,g){if(!qC(t))throw Error(I(200));return el(null,e,t,!0,g)},t.hydrateRoot=function(e,t,g){if(!_C(e))throw Error(I(405));var n=null!=g&&g.hydratedSources||null,r=!1,a="",o=jC;if(null!==g&&void 0!==g&&(!0===g.unstable_strictMode&&(r=!0),void 0!==g.identifierPrefix&&(a=g.identifierPrefix),void 0!==g.onRecoverableError&&(o=g.onRecoverableError)),t=UC(t,null,e,1,null!=g?g:null,r,0,a,o),e[Ar]=t.current,Dn(e),n)for(e=0;e<n.length;e++)r=(r=(g=n[e])._getVersion)(g._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[g,r]:t.mutableSourceEagerHydrationData.push(g,r);return new OC(t)},t.render=function(e,t,g){if(!qC(t))throw Error(I(200));return el(null,e,t,!1,g)},t.unmountComponentAtNode=function(e){if(!qC(e))throw Error(I(40));return!!e._reactRootContainer&&(lC((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[Ar]=null}))})),!0)},t.unstable_batchedUpdates=CC,t.unstable_renderSubtreeIntoContainer=function(e,t,g,n){if(!qC(g))throw Error(I(200));if(null==e||void 0===e._reactInternals)throw Error(I(38));return el(e,t,g,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},8192:function(e,t,g){"use strict";var n=g(8544);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},8544:function(e,t,g){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=g(9772)},1237:function(e,t,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},r=o(g(8731)),I=g(9867),a=o(I);function o(e){return e&&e.__esModule?e:{default:e}}var i={bgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,bgD:r.default.string.isRequired,fgColor:r.default.oneOfType([r.default.object,r.default.string]).isRequired,fgD:r.default.string.isRequired,size:r.default.number.isRequired,title:r.default.string,viewBoxSize:r.default.number.isRequired,xmlns:r.default.string},C={title:void 0,xmlns:"http://www.w3.org/2000/svg"},l=(0,I.forwardRef)((function(e,t){var g=e.bgColor,r=e.bgD,I=e.fgD,o=e.fgColor,i=e.size,C=e.title,l=e.viewBoxSize,u=function(e,t){var g={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(g[n]=e[n]);return g}(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize"]);return a.default.createElement("svg",n({},u,{height:i,ref:t,viewBox:"0 0 "+l+" "+l,width:i}),C?a.default.createElement("title",null,C):null,a.default.createElement("path",{d:r,fill:g}),a.default.createElement("path",{d:I,fill:o}))}));l.displayName="QRCodeSvg",l.propTypes=i,l.defaultProps=C,t.default=l},5602:function(e,t,g){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},r=l(g(6217)),I=l(g(4620)),a=l(g(8731)),o=g(9867),i=l(o),C=l(g(1237));function l(e){return e&&e.__esModule?e:{default:e}}var u={bgColor:a.default.oneOfType([a.default.object,a.default.string]),fgColor:a.default.oneOfType([a.default.object,a.default.string]),level:a.default.string,size:a.default.number,value:a.default.string.isRequired},c=(0,o.forwardRef)((function(e,t){var g=e.bgColor,a=e.fgColor,o=e.level,l=e.size,u=e.value,c=function(e,t){var g={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(g[n]=e[n]);return g}(e,["bgColor","fgColor","level","size","value"]),s=new r.default(-1,I.default[o]);s.addData(u),s.make();var A=s.modules;return i.default.createElement(C.default,n({},c,{bgColor:g,bgD:A.map((function(e,t){return e.map((function(e,g){return e?"":"M "+g+" "+t+" l 1 0 0 1 -1 0 Z"})).join(" ")})).join(" "),fgColor:a,fgD:A.map((function(e,t){return e.map((function(e,g){return e?"M "+g+" "+t+" l 1 0 0 1 -1 0 Z":""})).join(" ")})).join(" "),ref:t,size:l,viewBoxSize:A.length}))}));c.displayName="QRCode",c.propTypes=u,c.defaultProps={bgColor:"#FFFFFF",fgColor:"#000000",level:"L",size:256},t.Z=c},6993:function(e,t,g){e.exports=function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(g){if("default"!==g){var n=Object.getOwnPropertyDescriptor(e,g);Object.defineProperty(t,g,n.get?n:{enumerable:!0,get:function(){return e[g]}})}})),t.default=e,Object.freeze(t)}var g=t(e);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},n.apply(this,arguments)}function r(e,t,g){return t in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e}function I(e){if(Array.isArray(e))return e}function a(e,t){var g=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=g){var n,r,I=[],a=!0,o=!1;try{for(g=g.call(e);!(a=(n=g.next()).done)&&(I.push(n.value),!t||I.length!==t);a=!0);}catch(i){o=!0,r=i}finally{try{a||null==g.return||g.return()}finally{if(o)throw r}}return I}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var g=0,n=new Array(t);g<t;g++)n[g]=e[g];return n}function i(e,t){if(e){if("string"===typeof e)return o(e,t);var g=Object.prototype.toString.call(e).slice(8,-1);return"Object"===g&&e.constructor&&(g=e.constructor.name),"Map"===g||"Set"===g?Array.from(e):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?o(e,t):void 0}}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return I(e)||a(e,t)||i(e,t)||C()}function u(e,t){if(null==e)return{};var g,n,r={},I=Object.keys(e);for(n=0;n<I.length;n++)g=I[n],t.indexOf(g)>=0||(r[g]=e[g]);return r}function c(e,t){if(null==e)return{};var g,n,r=u(e,t);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);for(n=0;n<I.length;n++)g=I[n],t.indexOf(g)>=0||Object.prototype.propertyIsEnumerable.call(e,g)&&(r[g]=e[g])}return r}var s={exports:{}},A={exports:{}},d={},h="function"===typeof Symbol&&Symbol.for,m=h?Symbol.for("react.element"):60103,b=h?Symbol.for("react.portal"):60106,p=h?Symbol.for("react.fragment"):60107,f=h?Symbol.for("react.strict_mode"):60108,Z=h?Symbol.for("react.profiler"):60114,y=h?Symbol.for("react.provider"):60109,G=h?Symbol.for("react.context"):60110,B=h?Symbol.for("react.async_mode"):60111,v=h?Symbol.for("react.concurrent_mode"):60111,k=h?Symbol.for("react.forward_ref"):60112,S=h?Symbol.for("react.suspense"):60113,W=h?Symbol.for("react.suspense_list"):60120,V=h?Symbol.for("react.memo"):60115,w=h?Symbol.for("react.lazy"):60116,R=h?Symbol.for("react.block"):60121,X=h?Symbol.for("react.fundamental"):60117,J=h?Symbol.for("react.responder"):60118,Y=h?Symbol.for("react.scope"):60119;function H(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case m:switch(e=e.type){case B:case v:case p:case Z:case f:case S:return e;default:switch(e=e&&e.$$typeof){case G:case k:case w:case V:case y:return e;default:return t}}case b:return t}}}function N(e){return H(e)===v}d.AsyncMode=B,d.ConcurrentMode=v,d.ContextConsumer=G,d.ContextProvider=y,d.Element=m,d.ForwardRef=k,d.Fragment=p,d.Lazy=w,d.Memo=V,d.Portal=b,d.Profiler=Z,d.StrictMode=f,d.Suspense=S,d.isAsyncMode=function(e){return N(e)||H(e)===B},d.isConcurrentMode=N,d.isContextConsumer=function(e){return H(e)===G},d.isContextProvider=function(e){return H(e)===y},d.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===m},d.isForwardRef=function(e){return H(e)===k},d.isFragment=function(e){return H(e)===p},d.isLazy=function(e){return H(e)===w},d.isMemo=function(e){return H(e)===V},d.isPortal=function(e){return H(e)===b},d.isProfiler=function(e){return H(e)===Z},d.isStrictMode=function(e){return H(e)===f},d.isSuspense=function(e){return H(e)===S},d.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===p||e===v||e===Z||e===f||e===S||e===W||"object"===typeof e&&null!==e&&(e.$$typeof===w||e.$$typeof===V||e.$$typeof===y||e.$$typeof===G||e.$$typeof===k||e.$$typeof===X||e.$$typeof===J||e.$$typeof===Y||e.$$typeof===R)},d.typeOf=H,A.exports=d;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function F(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},g=0;g<10;g++)t["_"+String.fromCharCode(g)]=g;var n=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==n.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(I){return!1}}F()&&Object.assign;var K="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function x(e,t,g,n,r){}Function.call.bind(Object.prototype.hasOwnProperty),x.resetWarningCache=function(){},A.exports;var E=K;function M(){}function D(){}D.resetWarningCache=M;var U=function(){function e(e,t,g,n,r,I){if(I!==E){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var g={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:D,resetWarningCache:M};return g.PropTypes=g,g};s.exports=U();var z=s.exports;function L(e,t){var g=atob(e);if(t){for(var n=new Uint8Array(g.length),r=0,I=g.length;r<I;++r)n[r]=g.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return g}function Q(e,t,g){var n=void 0===t?null:t,r=L(e,void 0!==g&&g),I=r.indexOf("\n",10)+1,a=r.substring(I)+(n?"//# sourceMappingURL="+n:""),o=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(o)}function T(e,t,g){var n;return function(r){return n=n||Q(e,t,g),new Worker(n,r)}}var j=T("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),P=["constraints","onError","onLoad","onScan","resolution","qrArea"];function O(e,t){var g=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),g.push.apply(g,n)}return g}function _(e){for(var t=1;t<arguments.length;t++){var g=null!=arguments[t]?arguments[t]:{};t%2?O(Object(g),!0).forEach((function(t){r(e,t,g[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(g)):O(Object(g)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(g,t))}))}return e}var q=function(){return new j},$=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().forEach((function(t){e.removeTrack(t),t.stop()}))):e.stop())},ee=function(e){var t=e.constraints,r=e.onError,I=e.onLoad,a=e.onScan,o=e.resolution,i=e.qrArea,C=c(e,P),u=g.useRef(null),s=g.useRef(null),A=g.useRef(document.createElement("canvas")),d=g.useRef(null),h=g.useRef(),m=l(g.useState(null),2),b=m[0],p=m[1],f=g.useRef(!1),Z=g.useRef();g.useEffect((function(){Z.current=q();var e=Z.current;return e.onmessage=function(e){a&&a(e.data?_(_({},e.data),{},{canvas:A.current}):null),f.current=!1},function(){e.terminate()}}),[a]);var y=JSON.stringify(i),G=g.useCallback((function(){var e=JSON.parse(y),t=Z.current,g=s.current&&s.current.readyState===s.current.HAVE_ENOUGH_DATA;if(!f.current&&g){f.current=!0;var n,r=s.current.videoWidth,I=s.current.videoHeight,a=r>I?r:I,i=Math.floor(o/a*100)/100;I=Math.floor(i*I),r=Math.floor(i*r),A.current.width=r,A.current.height=I,d.current=A.current.getContext("2d"),d.current.drawImage(s.current,0,0,r,I),n=e&&2===e.length&&e[0]>0&&e[1]>0?d.current.getImageData(Math.floor((r-e[0])/2),Math.floor((I-e[1])/2),e[0],e[1]):d.current.getImageData(0,0,r,I),t.postMessage(n)}h.current=requestAnimationFrame(G)}),[o,y]),B=JSON.stringify(t);return g.useEffect((function(){var e=JSON.parse(B),t=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(t){u.current=e;try{s.current&&(s.current.srcObject=e,s.current.setAttribute("playsinline",!0))}catch(g){p(window.URL.createObjectURL(e))}I&&I(),h.current=requestAnimationFrame(G)}else $(e)})).catch((function(e){return t?r(e):null})),function(){cancelAnimationFrame(h.current),t=!1,$(u.current),b&&window.URL.revokeObjectURL(b)}}),[G,B,r,I,b]),g.createElement("video",n({autoPlay:!0,playsInline:!0,src:b,ref:s},C))};return ee.propTypes={constraints:z.object,onError:z.func.isRequired,onLoad:z.func,onScan:z.func.isRequired,resolution:z.number,qrArea:z.array},ee.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},ee}(g(9867))},6482:function(e,t,g){"use strict";var n=g(9867),r=Symbol.for("react.element"),I=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,g){var n,I={},C=null,l=null;for(n in void 0!==g&&(C=""+g),void 0!==t.key&&(C=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,n)&&!i.hasOwnProperty(n)&&(I[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===I[n]&&(I[n]=t[n]);return{$$typeof:r,type:e,key:C,ref:l,props:I,_owner:o.current}}t.Fragment=I,t.jsx=C,t.jsxs=C},3285:function(e,t){"use strict";var g=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),i=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),s=Symbol.iterator;var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d=Object.assign,h={};function m(e,t,g){this.props=e,this.context=t,this.refs=h,this.updater=g||A}function b(){}function p(e,t,g){this.props=e,this.context=t,this.refs=h,this.updater=g||A}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=m.prototype;var f=p.prototype=new b;f.constructor=p,d(f,m.prototype),f.isPureReactComponent=!0;var Z=Array.isArray,y=Object.prototype.hasOwnProperty,G={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function v(e,t,n){var r,I={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)y.call(t,r)&&!B.hasOwnProperty(r)&&(I[r]=t[r]);var i=arguments.length-2;if(1===i)I.children=n;else if(1<i){for(var C=Array(i),l=0;l<i;l++)C[l]=arguments[l+2];I.children=C}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===I[r]&&(I[r]=i[r]);return{$$typeof:g,type:e,key:a,ref:o,props:I,_owner:G.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===g}var S=/\/+/g;function W(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function V(e,t,r,I,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case g:case n:i=!0}}if(i)return a=a(i=e),e=""===I?"."+W(i,0):I,Z(a)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),V(a,t,r,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:g,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(i=0,I=""===I?".":I+":",Z(e))for(var C=0;C<e.length;C++){var l=I+W(o=e[C],C);i+=V(o,t,r,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=s&&e[s]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),C=0;!(o=e.next()).done;)i+=V(o=o.value,t,r,l=I+W(o,C++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function w(e,t,g){if(null==e)return e;var n=[],r=0;return V(e,n,"","",(function(e){return t.call(g,e,r++)})),n}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var X={current:null},J={transition:null},Y={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:J,ReactCurrentOwner:G};t.Children={map:w,forEach:function(e,t,g){w(e,(function(){t.apply(this,arguments)}),g)},count:function(e){var t=0;return w(e,(function(){t++})),t},toArray:function(e){return w(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=r,t.Profiler=a,t.PureComponent=p,t.StrictMode=I,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=d({},e.props),I=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=G.current),void 0!==t.key&&(I=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(C in t)y.call(t,C)&&!B.hasOwnProperty(C)&&(r[C]=void 0===t[C]&&void 0!==i?i[C]:t[C])}var C=arguments.length-2;if(1===C)r.children=n;else if(1<C){i=Array(C);for(var l=0;l<C;l++)i[l]=arguments[l+2];r.children=i}return{$$typeof:g,type:e.type,key:I,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=v,t.createFactory=function(e){var t=v.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:C,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=J.transition;J.transition={};try{e()}finally{J.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return X.current.useCallback(e,t)},t.useContext=function(e){return X.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return X.current.useDeferredValue(e)},t.useEffect=function(e,t){return X.current.useEffect(e,t)},t.useId=function(){return X.current.useId()},t.useImperativeHandle=function(e,t,g){return X.current.useImperativeHandle(e,t,g)},t.useInsertionEffect=function(e,t){return X.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return X.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return X.current.useMemo(e,t)},t.useReducer=function(e,t,g){return X.current.useReducer(e,t,g)},t.useRef=function(e){return X.current.useRef(e)},t.useState=function(e){return X.current.useState(e)},t.useSyncExternalStore=function(e,t,g){return X.current.useSyncExternalStore(e,t,g)},t.useTransition=function(){return X.current.useTransition()},t.version="18.2.0"},9867:function(e,t,g){"use strict";e.exports=g(3285)},2834:function(e,t,g){"use strict";e.exports=g(6482)},6073:function(e,t){"use strict";function g(e,t){var g=e.length;e.push(t);e:for(;0<g;){var n=g-1>>>1,r=e[n];if(!(0<I(r,t)))break e;e[n]=t,e[g]=r,g=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],g=e.pop();if(g!==t){e[0]=g;e:for(var n=0,r=e.length,a=r>>>1;n<a;){var o=2*(n+1)-1,i=e[o],C=o+1,l=e[C];if(0>I(i,g))C<r&&0>I(l,i)?(e[n]=l,e[C]=g,n=C):(e[n]=i,e[o]=g,n=o);else{if(!(C<r&&0>I(l,g)))break e;e[n]=l,e[C]=g,n=C}}}return t}function I(e,t){var g=e.sortIndex-t.sortIndex;return 0!==g?g:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var C=[],l=[],u=1,c=null,s=3,A=!1,d=!1,h=!1,m="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,p="undefined"!==typeof setImmediate?setImmediate:null;function f(e){for(var t=n(l);null!==t;){if(null===t.callback)r(l);else{if(!(t.startTime<=e))break;r(l),t.sortIndex=t.expirationTime,g(C,t)}t=n(l)}}function Z(e){if(h=!1,f(e),!d)if(null!==n(C))d=!0,J(y);else{var t=n(l);null!==t&&Y(Z,t.startTime-e)}}function y(e,g){d=!1,h&&(h=!1,b(k),k=-1),A=!0;var I=s;try{for(f(g),c=n(C);null!==c&&(!(c.expirationTime>g)||e&&!V());){var a=c.callback;if("function"===typeof a){c.callback=null,s=c.priorityLevel;var o=a(c.expirationTime<=g);g=t.unstable_now(),"function"===typeof o?c.callback=o:c===n(C)&&r(C),f(g)}else r(C);c=n(C)}if(null!==c)var i=!0;else{var u=n(l);null!==u&&Y(Z,u.startTime-g),i=!1}return i}finally{c=null,s=I,A=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,v=null,k=-1,S=5,W=-1;function V(){return!(t.unstable_now()-W<S)}function w(){if(null!==v){var e=t.unstable_now();W=e;var g=!0;try{g=v(!0,e)}finally{g?G():(B=!1,v=null)}}else B=!1}if("function"===typeof p)G=function(){p(w)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,X=R.port2;R.port1.onmessage=w,G=function(){X.postMessage(null)}}else G=function(){m(w,0)};function J(e){v=e,B||(B=!0,G())}function Y(e,g){k=m((function(){e(t.unstable_now())}),g)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){d||A||(d=!0,J(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return s},t.unstable_getFirstCallbackNode=function(){return n(C)},t.unstable_next=function(e){switch(s){case 1:case 2:case 3:var t=3;break;default:t=s}var g=s;s=t;try{return e()}finally{s=g}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var g=s;s=e;try{return t()}finally{s=g}},t.unstable_scheduleCallback=function(e,r,I){var a=t.unstable_now();switch("object"===typeof I&&null!==I?I="number"===typeof(I=I.delay)&&0<I?a+I:a:I=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:I,expirationTime:o=I+o,sortIndex:-1},I>a?(e.sortIndex=I,g(l,e),null===n(C)&&e===n(l)&&(h?(b(k),k=-1):h=!0,Y(Z,I-a))):(e.sortIndex=o,g(C,e),d||A||(d=!0,J(y))),e},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(e){var t=s;return function(){var g=s;s=t;try{return e.apply(this,arguments)}finally{s=g}}}},2882:function(e,t,g){"use strict";e.exports=g(6073)},5601:function(e,t,g){var n=g(7061).default,r=g(6737).default,I=g(8186).default;e.exports=function(e){if(e[Symbol.asyncIterator])return e;if(e.getReader)return I(n().mark((function t(){var g,I,a,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g=e.getReader(),t.prev=1;case 2:return t.next=5,r(g.read());case 5:if(I=t.sent,a=I.done,o=I.value,!a){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,o;case 12:t.next=2;break;case 14:return t.prev=14,g.releaseLock(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,,14,17]])})))();throw new Error("unknown stream")}},8677:function(){},2808:function(){},9880:function(){},4642:function(e,t,g){var n=g(3801);function r(e){var t,g;function r(t,g){try{var a=e[t](g),o=a.value,i=o instanceof n;Promise.resolve(i?o.v:o).then((function(g){if(i){var n="return"===t?"return":"next";if(!o.k||g.done)return r(n,g);g=e[n](g).value}I(a.done?"return":"normal",g)}),(function(e){r("throw",e)}))}catch(C){I("throw",C)}}function I(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?r(t.key,t.arg):g=null}this._invoke=function(e,n){return new Promise((function(I,a){var o={key:e,arg:n,resolve:I,reject:a,next:null};g?g=g.next=o:(t=g=o,r(e,n))}))},"function"!=typeof e.return&&(this.return=void 0)}r.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)},e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},3801:function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var g=0,n=new Array(t);g<t;g++)n[g]=e[g];return n},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,g){var n=g(3897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8131:function(e,t,g){var n=g(3801);e.exports=function(e){var t={},g=!1;function r(t,r){return g=!0,r=new Promise((function(g){g(e[t](r))})),{done:!1,value:new n(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return g?(g=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(g)throw g=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return g?(g=!1,e):r("return",e)}),t},e.exports.__esModule=!0,e.exports.default=e.exports},8237:function(e){function t(e){function g(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return t=function(e){this.s=e,this.n=e.next},t.prototype={s:null,n:null,next:function(){return g(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):g(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):g(t.apply(this.s,arguments))}},new t(e)}e.exports=function(e){var g,n,r,I=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);I--;){if(n&&null!=(g=e[n]))return g.call(e);if(r&&null!=(g=e[r]))return new t(g.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,g,n,r,I,a){try{var o=e[I](a),i=o.value}catch(C){return void g(C)}o.done?t(i):Promise.resolve(i).then(n,r)}e.exports=function(e){return function(){var g=this,n=arguments;return new Promise((function(r,I){var a=e.apply(g,n);function o(e){t(a,r,I,o,i,"next",e)}function i(e){t(a,r,I,o,i,"throw",e)}o(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6737:function(e,t,g){var n=g(3801);e.exports=function(e){return new n(e,0)},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,g){var n=g(6015),r=g(9617);function I(t,g,a){return r()?(e.exports=I=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=I=function(e,t,g){var r=[null];r.push.apply(r,t);var I=new(Function.bind.apply(e,r));return g&&n(I,g.prototype),I},e.exports.__esModule=!0,e.exports.default=e.exports),I.apply(null,arguments)}e.exports=I,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,g){var n=g(4062);function r(e,t){for(var g=0;g<t.length;g++){var r=t[g];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}e.exports=function(e,t,g){return t&&r(e.prototype,t),g&&r(e,g),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,g){var n=g(6116);e.exports=function(e,t){var g="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!g){if(Array.isArray(e)||(g=n(e))||t&&e&&"number"===typeof e.length){g&&(e=g);var r=0,I=function(){};return{s:I,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:I}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){g=g.call(e)},n:function(){var e=g.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==g.return||g.return()}finally{if(i)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,g){var n=g(3808),r=g(9617),I=g(4993);e.exports=function(e){var t=r();return function(){var g,r=n(e);if(t){var a=n(this).constructor;g=Reflect.construct(r,arguments,a)}else g=r.apply(this,arguments);return I(this,g)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,g){var n=g(4062);e.exports=function(e,t,g){return(t=n(t))in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(g){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(g)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,g){var n=g(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var g=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=g){var n,r,I,a,o=[],i=!0,C=!1;try{if(I=(g=g.call(e)).next,0===t){if(Object(g)!==g)return;i=!1}else for(;!(i=(n=I.call(g)).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(l){C=!0,r=l}finally{try{if(!i&&null!=g.return&&(a=g.return(),Object(a)!==a))return}finally{if(C)throw r}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,g){var n=g(8416);function r(e,t){var g=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),g.push.apply(g,n)}return g}e.exports=function(e){for(var t=1;t<arguments.length;t++){var g=null!=arguments[t]?arguments[t]:{};t%2?r(Object(g),!0).forEach((function(t){n(e,t,g[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(g)):r(Object(g)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(g,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,g){var n=g(8698).default,r=g(6115);e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,g){var n=g(8698).default;function r(){"use strict";e.exports=r=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},g=Object.prototype,I=g.hasOwnProperty,a=Object.defineProperty||function(e,t,g){e[t]=g.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",C=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,g){return Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,g){return e[t]=g}}function c(e,t,g,n){var r=t&&t.prototype instanceof d?t:d,I=Object.create(r.prototype),o=new W(n||[]);return a(I,"_invoke",{value:B(e,g,o)}),I}function s(e,t,g){try{return{type:"normal",arg:e.call(t,g)}}catch(R){return{type:"throw",arg:R}}}t.wrap=c;var A={};function d(){}function h(){}function m(){}var b={};u(b,i,(function(){return this}));var p=Object.getPrototypeOf,f=p&&p(p(V([])));f&&f!==g&&I.call(f,i)&&(b=f);var Z=m.prototype=d.prototype=Object.create(b);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function G(e,t){function g(r,a,o,i){var C=s(e[r],e,a);if("throw"!==C.type){var l=C.arg,u=l.value;return u&&"object"==n(u)&&I.call(u,"__await")?t.resolve(u.__await).then((function(e){g("next",e,o,i)}),(function(e){g("throw",e,o,i)})):t.resolve(u).then((function(e){l.value=e,o(l)}),(function(e){return g("throw",e,o,i)}))}i(C.arg)}var r;a(this,"_invoke",{value:function(e,n){function I(){return new t((function(t,r){g(e,n,t,r)}))}return r=r?r.then(I,I):I()}})}function B(e,t,g){var n="suspendedStart";return function(r,I){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw I;return w()}for(g.method=r,g.arg=I;;){var a=g.delegate;if(a){var o=v(a,g);if(o){if(o===A)continue;return o}}if("next"===g.method)g.sent=g._sent=g.arg;else if("throw"===g.method){if("suspendedStart"===n)throw n="completed",g.arg;g.dispatchException(g.arg)}else"return"===g.method&&g.abrupt("return",g.arg);n="executing";var i=s(e,t,g);if("normal"===i.type){if(n=g.done?"completed":"suspendedYield",i.arg===A)continue;return{value:i.arg,done:g.done}}"throw"===i.type&&(n="completed",g.method="throw",g.arg=i.arg)}}}function v(e,t){var g=t.method,n=e.iterator[g];if(void 0===n)return t.delegate=null,"throw"===g&&e.iterator.return&&(t.method="return",t.arg=void 0,v(e,t),"throw"===t.method)||"return"!==g&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+g+"' method")),A;var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,A;var I=r.arg;return I?I.done?(t[e.resultName]=I.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,A):I:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function W(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function V(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var g=-1,n=function t(){for(;++g<e.length;)if(I.call(e,g))return t.value=e[g],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:w}}function w(){return{value:void 0,done:!0}}return h.prototype=m,a(Z,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:h,configurable:!0}),h.displayName=u(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,l,"GeneratorFunction")),e.prototype=Object.create(Z),e},t.awrap=function(e){return{__await:e}},y(G.prototype),u(G.prototype,C,(function(){return this})),t.AsyncIterator=G,t.async=function(e,g,n,r,I){void 0===I&&(I=Promise);var a=new G(c(e,g,n,r),I);return t.isGeneratorFunction(g)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(Z),u(Z,l,"Generator"),u(Z,i,(function(){return this})),u(Z,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),g=[];for(var n in t)g.push(n);return g.reverse(),function e(){for(;g.length;){var n=g.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=V,W.prototype={constructor:W,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&I.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function g(g,n){return a.type="throw",a.arg=e,t.next=g,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],a=r.completion;if("root"===r.tryLoc)return g("end");if(r.tryLoc<=this.prev){var o=I.call(r,"catchLoc"),i=I.call(r,"finallyLoc");if(o&&i){if(this.prev<r.catchLoc)return g(r.catchLoc,!0);if(this.prev<r.finallyLoc)return g(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return g(r.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return g(r.finallyLoc)}}}},abrupt:function(e,t){for(var g=this.tryEntries.length-1;g>=0;--g){var n=this.tryEntries[g];if(n.tryLoc<=this.prev&&I.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,A):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var g=this.tryEntries[t];if(g.finallyLoc===e)return this.complete(g.completion,g.afterLoc),S(g),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var g=this.tryEntries[t];if(g.tryLoc===e){var n=g.completion;if("throw"===n.type){var r=n.arg;S(g)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,g){return this.delegate={iterator:V(e),resultName:t,nextLoc:g},"next"===this.method&&(this.arg=void 0),A}},t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(g,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(g,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,g){var n=g(5372),r=g(8872),I=g(6116),a=g(2218);e.exports=function(e,t){return n(e)||r(e,t)||I(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,g){var n=g(3405),r=g(9498),I=g(6116),a=g(2281);e.exports=function(e){return n(e)||r(e)||I(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,g){var n=g(8698).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var g=e[Symbol.toPrimitive];if(void 0!==g){var r=g.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,g){var n=g(8698).default,r=g(5036);e.exports=function(e){var t=r(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(g){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(g)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,g){var n=g(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var g=Object.prototype.toString.call(e).slice(8,-1);return"Object"===g&&e.constructor&&(g=e.constructor.name),"Map"===g||"Set"===g?Array.from(e):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},8186:function(e,t,g){var n=g(4642);e.exports=function(e){return function(){return new n(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,g){var n=g(3808),r=g(6015),I=g(6035),a=g(3515);function o(t){var g="function"===typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!I(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof g){if(g.has(e))return g.get(e);g.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var g=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(g.exports,g,g.exports,__webpack_require__),g.loaded=!0,g.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var g in t)__webpack_require__.o(t,g)&&!__webpack_require__.o(e,g)&&Object.defineProperty(e,g,{enumerable:!0,get:t[g]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,g){return __webpack_require__.f[g](e,t),t}),[]))},__webpack_require__.u=function(e){return"static/js/"+e+".6abf37a8.chunk.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="ask-react:";__webpack_require__.l=function(g,n,r,I){if(e[g])e[g].push(n);else{var a,o;if(void 0!==r)for(var i=document.getElementsByTagName("script"),C=0;C<i.length;C++){var l=i[C];if(l.getAttribute("src")==g||l.getAttribute("data-webpack")==t+r){a=l;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",t+r),a.src=g),e[g]=[n];var u=function(t,n){a.onerror=a.onload=null,clearTimeout(c);var r=e[g];if(delete e[g],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(n)})),t)return t(n)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),o&&document.head.appendChild(a)}}}(),__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.p="/IPFS-Supply-Chain-Assurance1/",function(){var e={179:0};__webpack_require__.f.j=function(t,g){var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)g.push(n[2]);else{var r=new Promise((function(g,r){n=e[t]=[g,r]}));g.push(n[2]=r);var I=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(I,(function(g){if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=g&&("load"===g.type?"missing":g.type),I=g&&g.target&&g.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+I+")",a.name="ChunkLoadError",a.type=r,a.request=I,n[1](a)}}),"chunk-"+t,t)}};var t=function(t,g){var n,r,I=g[0],a=g[1],o=g[2],i=0;if(I.some((function(t){return 0!==e[t]}))){for(n in a)__webpack_require__.o(a,n)&&(__webpack_require__.m[n]=a[n]);if(o)o(__webpack_require__)}for(t&&t(g);i<I.length;i++)r=I[i],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0},g=self.webpackChunkask_react=self.webpackChunkask_react||[];g.forEach(t.bind(null,0)),g.push=t.bind(null,g.push.bind(g))}();var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{base58btc:function(){return yo},base58flickr:function(){return Go}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{base32:function(){return Bo},base32hex:function(){return Wo},base32hexpad:function(){return wo},base32hexpadupper:function(){return Ro},base32hexupper:function(){return Vo},base32pad:function(){return ko},base32padupper:function(){return So},base32upper:function(){return vo},base32z:function(){return Xo}});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{code:function(){return hi},createLink:function(){return Ai},createNode:function(){return si},decode:function(){return bi},encode:function(){return mi},name:function(){return di},prepare:function(){return ui},validate:function(){return ci}});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{code:function(){return Il},decode:function(){return ol},encode:function(){return al},name:function(){return rl}});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{base64:function(){return ll},base64pad:function(){return ul},base64url:function(){return cl},base64urlpad:function(){return sl}});var I={};__webpack_require__.r(I),__webpack_require__.d(I,{code:function(){return Bl},decode:function(){return kl},encode:function(){return vl},name:function(){return Gl}});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{code:function(){return Yl},decode:function(){return xl},encode:function(){return Kl},name:function(){return Jl},toGeneral:function(){return Fl}});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{identity:function(){return Ml}});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{identity:function(){return Dl}});var C={};__webpack_require__.r(C),__webpack_require__.d(C,{base2:function(){return Ul}});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{base8:function(){return zl}});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{base10:function(){return Ll}});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{base16:function(){return Ql},base16upper:function(){return Tl}});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{base36:function(){return jl},base36upper:function(){return Pl}});var A={};__webpack_require__.r(A),__webpack_require__.d(A,{base256emoji:function(){return $l}});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{sha256:function(){return tu},sha512:function(){return gu}});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{code:function(){return ru},decode:function(){return au},encode:function(){return Iu},name:function(){return nu}});var m={};__webpack_require__.r(m),__webpack_require__.d(m,{code:function(){return lu},decode:function(){return cu},encode:function(){return uu},name:function(){return Cu}});var b={};__webpack_require__.r(b),__webpack_require__.d(b,{identity:function(){return Xu}});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{base2:function(){return Ju}});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{base8:function(){return Yu}});var Z={};__webpack_require__.r(Z),__webpack_require__.d(Z,{base10:function(){return Hu}});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{base16:function(){return Nu},base16upper:function(){return Fu}});var G={};__webpack_require__.r(G),__webpack_require__.d(G,{base32:function(){return Ku},base32hex:function(){return Du},base32hexpad:function(){return zu},base32hexpadupper:function(){return Lu},base32hexupper:function(){return Uu},base32pad:function(){return Eu},base32padupper:function(){return Mu},base32upper:function(){return xu},base32z:function(){return Qu}});var B={};__webpack_require__.r(B),__webpack_require__.d(B,{base36:function(){return Tu},base36upper:function(){return ju}});var v={};__webpack_require__.r(v),__webpack_require__.d(v,{base58btc:function(){return Pu},base58flickr:function(){return Ou}});var k={};__webpack_require__.r(k),__webpack_require__.d(k,{base64:function(){return _u},base64pad:function(){return qu},base64url:function(){return $u},base64urlpad:function(){return ec}});var S={};__webpack_require__.r(S),__webpack_require__.d(S,{base256emoji:function(){return rc}});var W={};__webpack_require__.r(W),__webpack_require__.d(W,{sha256:function(){return vc},sha512:function(){return kc}});var V={};__webpack_require__.r(V),__webpack_require__.d(V,{identity:function(){return Wc}});var w={};__webpack_require__.r(w),__webpack_require__.d(w,{code:function(){return wc},decode:function(){return Xc},encode:function(){return Rc},name:function(){return Vc}});var R={};__webpack_require__.r(R),__webpack_require__.d(R,{code:function(){return Nc},decode:function(){return Kc},encode:function(){return Fc},name:function(){return Hc}});var X={};__webpack_require__.r(X),__webpack_require__.d(X,{base58btc:function(){return Rs},base58flickr:function(){return Xs}});var J={};__webpack_require__.r(J),__webpack_require__.d(J,{base32:function(){return Js},base32hex:function(){return Fs},base32hexpad:function(){return xs},base32hexpadupper:function(){return Es},base32hexupper:function(){return Ks},base32pad:function(){return Hs},base32padupper:function(){return Ns},base32upper:function(){return Ys},base32z:function(){return Ms}});var Y={};__webpack_require__.r(Y),__webpack_require__.d(Y,{identity:function(){return qs}});var H={};__webpack_require__.r(H),__webpack_require__.d(H,{base2:function(){return $s}});var N={};__webpack_require__.r(N),__webpack_require__.d(N,{base8:function(){return eA}});var F={};__webpack_require__.r(F),__webpack_require__.d(F,{base10:function(){return tA}});var K={};__webpack_require__.r(K),__webpack_require__.d(K,{base16:function(){return gA},base16upper:function(){return nA}});var x={};__webpack_require__.r(x),__webpack_require__.d(x,{base36:function(){return rA},base36upper:function(){return IA}});var E={};__webpack_require__.r(E),__webpack_require__.d(E,{base64:function(){return aA},base64pad:function(){return oA},base64url:function(){return iA},base64urlpad:function(){return CA}});var M={};__webpack_require__.r(M),__webpack_require__.d(M,{base256emoji:function(){return sA}});var D={};__webpack_require__.r(D),__webpack_require__.d(D,{sha256:function(){return mA},sha512:function(){return bA}});var U={};__webpack_require__.r(U),__webpack_require__.d(U,{identity:function(){return fA}});var z={};__webpack_require__.r(z),__webpack_require__.d(z,{code:function(){return yA},decode:function(){return BA},encode:function(){return GA},name:function(){return ZA}});var L={};__webpack_require__.r(L),__webpack_require__.d(L,{code:function(){return WA},decode:function(){return wA},encode:function(){return VA},name:function(){return SA}});var Q={};__webpack_require__.r(Q),__webpack_require__.d(Q,{base58btc:function(){return Nh},base58flickr:function(){return Fh}});var T={};__webpack_require__.r(T),__webpack_require__.d(T,{base32:function(){return Kh},base32hex:function(){return Dh},base32hexpad:function(){return zh},base32hexpadupper:function(){return Lh},base32hexupper:function(){return Uh},base32pad:function(){return Eh},base32padupper:function(){return Mh},base32upper:function(){return xh},base32z:function(){return Qh}});var j={};__webpack_require__.r(j),__webpack_require__.d(j,{identity:function(){return nm}});var P={};__webpack_require__.r(P),__webpack_require__.d(P,{base2:function(){return rm}});var O={};__webpack_require__.r(O),__webpack_require__.d(O,{base8:function(){return Im}});var _={};__webpack_require__.r(_),__webpack_require__.d(_,{base10:function(){return am}});var q={};__webpack_require__.r(q),__webpack_require__.d(q,{base16:function(){return om},base16upper:function(){return im}});var $={};__webpack_require__.r($),__webpack_require__.d($,{base36:function(){return Cm},base36upper:function(){return lm}});var ee={};__webpack_require__.r(ee),__webpack_require__.d(ee,{base64:function(){return um},base64pad:function(){return cm},base64url:function(){return sm},base64urlpad:function(){return Am}});var te={};__webpack_require__.r(te),__webpack_require__.d(te,{base256emoji:function(){return bm}});var ge={};__webpack_require__.r(ge),__webpack_require__.d(ge,{sha256:function(){return ym},sha512:function(){return Gm}});var ne={};__webpack_require__.r(ne),__webpack_require__.d(ne,{identity:function(){return vm}});var re={};__webpack_require__.r(re),__webpack_require__.d(re,{code:function(){return Sm},decode:function(){return Vm},encode:function(){return Wm},name:function(){return km}});var Ie={};__webpack_require__.r(Ie),__webpack_require__.d(Ie,{code:function(){return Jm},decode:function(){return Hm},encode:function(){return Ym},name:function(){return Xm}});var ae=__webpack_require__(9867),oe=__webpack_require__(8192);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function Ce(){Ce=function(){return e};var e={},t=Object.prototype,g=t.hasOwnProperty,n=Object.defineProperty||function(e,t,g){e[t]=g.value},r="function"==typeof Symbol?Symbol:{},I=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function i(e,t,g){return Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(W){i=function(e,t,g){return e[t]=g}}function C(e,t,g,r){var I=t&&t.prototype instanceof c?t:c,a=Object.create(I.prototype),o=new v(r||[]);return n(a,"_invoke",{value:Z(e,g,o)}),a}function l(e,t,g){try{return{type:"normal",arg:e.call(t,g)}}catch(W){return{type:"throw",arg:W}}}e.wrap=C;var u={};function c(){}function s(){}function A(){}var d={};i(d,I,(function(){return this}));var h=Object.getPrototypeOf,m=h&&h(h(k([])));m&&m!==t&&g.call(m,I)&&(d=m);var b=A.prototype=c.prototype=Object.create(d);function p(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function f(e,t){function r(n,I,a,o){var i=l(e[n],e,I);if("throw"!==i.type){var C=i.arg,u=C.value;return u&&"object"==ie(u)&&g.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,o)}),(function(e){r("throw",e,a,o)})):t.resolve(u).then((function(e){C.value=e,a(C)}),(function(e){return r("throw",e,a,o)}))}o(i.arg)}var I;n(this,"_invoke",{value:function(e,g){function n(){return new t((function(t,n){r(e,g,t,n)}))}return I=I?I.then(n,n):n()}})}function Z(e,t,g){var n="suspendedStart";return function(r,I){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw I;return S()}for(g.method=r,g.arg=I;;){var a=g.delegate;if(a){var o=y(a,g);if(o){if(o===u)continue;return o}}if("next"===g.method)g.sent=g._sent=g.arg;else if("throw"===g.method){if("suspendedStart"===n)throw n="completed",g.arg;g.dispatchException(g.arg)}else"return"===g.method&&g.abrupt("return",g.arg);n="executing";var i=l(e,t,g);if("normal"===i.type){if(n=g.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:g.done}}"throw"===i.type&&(n="completed",g.method="throw",g.arg=i.arg)}}}function y(e,t){var g=t.method,n=e.iterator[g];if(void 0===n)return t.delegate=null,"throw"===g&&e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method)||"return"!==g&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+g+"' method")),u;var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var I=r.arg;return I?I.done?(t[e.resultName]=I.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):I:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function G(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(G,this),this.reset(!0)}function k(e){if(e){var t=e[I];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:S}}function S(){return{value:void 0,done:!0}}return s.prototype=A,n(b,"constructor",{value:A,configurable:!0}),n(A,"constructor",{value:s,configurable:!0}),s.displayName=i(A,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,i(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},p(f.prototype),i(f.prototype,a,(function(){return this})),e.AsyncIterator=f,e.async=function(t,g,n,r,I){void 0===I&&(I=Promise);var a=new f(C(t,g,n,r),I);return e.isGeneratorFunction(g)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},p(b),i(b,o,"Generator"),i(b,I,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),g=[];for(var n in t)g.push(n);return g.reverse(),function e(){for(;g.length;){var n=g.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,v.prototype={constructor:v,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(g,n){return a.type="throw",a.arg=e,t.next=g,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var I=this.tryEntries[r],a=I.completion;if("root"===I.tryLoc)return n("end");if(I.tryLoc<=this.prev){var o=g.call(I,"catchLoc"),i=g.call(I,"finallyLoc");if(o&&i){if(this.prev<I.catchLoc)return n(I.catchLoc,!0);if(this.prev<I.finallyLoc)return n(I.finallyLoc)}else if(o){if(this.prev<I.catchLoc)return n(I.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<I.finallyLoc)return n(I.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var I=r;break}}I&&("break"===e||"continue"===e)&&I.tryLoc<=t&&t<=I.finallyLoc&&(I=null);var a=I?I.completion:{};return a.type=e,a.arg=t,I?(this.method="next",this.next=I.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var g=this.tryEntries[t];if(g.finallyLoc===e)return this.complete(g.completion,g.afterLoc),B(g),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var g=this.tryEntries[t];if(g.tryLoc===e){var n=g.completion;if("throw"===n.type){var r=n.arg;B(g)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,g){return this.delegate={iterator:k(e),resultName:t,nextLoc:g},"next"===this.method&&(this.arg=void 0),u}},e}function le(e,t,g,n,r,I,a){try{var o=e[I](a),i=o.value}catch(C){return void g(C)}o.done?t(i):Promise.resolve(i).then(n,r)}function ue(e){return function(){var t=this,g=arguments;return new Promise((function(n,r){var I=e.apply(t,g);function a(e){le(I,n,r,a,o,"next",e)}function o(e){le(I,n,r,a,o,"throw",e)}a(void 0)}))}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var g=0,n=new Array(t);g<t;g++)n[g]=e[g];return n}function se(e,t){if(e){if("string"===typeof e)return ce(e,t);var g=Object.prototype.toString.call(e).slice(8,-1);return"Object"===g&&e.constructor&&(g=e.constructor.name),"Map"===g||"Set"===g?Array.from(e):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?ce(e,t):void 0}}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var g=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=g){var n,r,I,a,o=[],i=!0,C=!1;try{if(I=(g=g.call(e)).next,0===t){if(Object(g)!==g)return;i=!1}else for(;!(i=(n=I.call(g)).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(l){C=!0,r=l}finally{try{if(!i&&null!=g.return&&(a=g.return(),Object(a)!==a))return}finally{if(C)throw r}}return o}}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e){var t=function(e,t){if("object"!==ie(e)||null===e)return e;var g=e[Symbol.toPrimitive];if(void 0!==g){var n=g.call(e,t||"default");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ie(t)?t:String(t)}function me(e,t){for(var g=0;g<t.length;g++){var n=t[g];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,he(n.key),n)}}function be(e,t,g){return t&&me(e.prototype,t),g&&me(e,g),Object.defineProperty(e,"prototype",{writable:!1}),e}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function Ze(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}function Ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Be(e,t){if(t&&("object"===ie(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pe(e)}function ve(e){var t=Ge();return function(){var g,n=ye(e);if(t){var r=ye(this).constructor;g=Reflect.construct(n,arguments,r)}else g=n.apply(this,arguments);return Be(this,g)}}var ke=!1,Se=!1,We={debug:1,default:2,info:2,warning:3,error:4,off:5},Ve=We.default,we=null;var Re,Xe,Je=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(g){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Re||(Re={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Xe||(Xe={}));var Ye="0123456789abcdef",He=function(){function e(t){de(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return be(e,[{key:"_log",value:function(e,t){var g=e.toLowerCase();null==We[g]&&this.throwArgumentError("invalid log level name","logLevel",e),Ve>We[g]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,g=new Array(t),n=0;n<t;n++)g[n]=arguments[n];this._log(e.levels.DEBUG,g)}},{key:"info",value:function(){for(var t=arguments.length,g=new Array(t),n=0;n<t;n++)g[n]=arguments[n];this._log(e.levels.INFO,g)}},{key:"warn",value:function(){for(var t=arguments.length,g=new Array(t),n=0;n<t;n++)g[n]=arguments[n];this._log(e.levels.WARNING,g)}},{key:"makeError",value:function(t,g,n){if(Se)return this.makeError("censored error",g,{});g||(g=e.errors.UNKNOWN_ERROR),n||(n={});var r=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var g="",I=0;I<t.length;I++)g+=Ye[t[I]>>4],g+=Ye[15&t[I]];r.push(e+"=Uint8Array(0x"+g+")")}else r.push(e+"="+JSON.stringify(t))}catch(i){r.push(e+"="+JSON.stringify(n[e].toString()))}})),r.push("code=".concat(g)),r.push("version=".concat(this.version));var I=t,a="";switch(g){case Xe.NUMERIC_FAULT:a="NUMERIC_FAULT";var o=t;switch(o){case"overflow":case"underflow":case"division-by-zero":a+="-"+o;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case Xe.CALL_EXCEPTION:case Xe.INSUFFICIENT_FUNDS:case Xe.MISSING_NEW:case Xe.NONCE_EXPIRED:case Xe.REPLACEMENT_UNDERPRICED:case Xe.TRANSACTION_REPLACED:case Xe.UNPREDICTABLE_GAS_LIMIT:a=g}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),r.length&&(t+=" ("+r.join(", ")+")");var i=new Error(t);return i.reason=I,i.code=g,Object.keys(n).forEach((function(e){i[e]=n[e]})),i}},{key:"throwError",value:function(e,t,g){throw this.makeError(e,t,g)}},{key:"throwArgumentError",value:function(t,g,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:g,value:n})}},{key:"assert",value:function(e,t,g,n){e||this.throwError(t,g,n)}},{key:"assertArgument",value:function(e,t,g,n){e||this.throwArgumentError(t,g,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Je&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Je})}},{key:"checkSafeUint53",value:function(t,g){"number"===typeof t&&(null==g&&(g="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(g,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(g,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,g,n){n=n?": "+n:"",t<g&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:g}),t>g&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:g})}},{key:"checkNew",value:function(t,g){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:g.name})}},{key:"checkAbstract",value:function(t,g){t===g?this.throwError("cannot instantiate abstract class "+JSON.stringify(g.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:g.name})}}],[{key:"globalLogger",value:function(){return we||(we=new e("logger/5.7.0")),we}},{key:"setCensorship",value:function(t,g){if(!t&&g&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),ke){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Se=!!t,ke=!!g}},{key:"setLogLevel",value:function(t){var g=We[t.toLowerCase()];null!=g?Ve=g:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();He.errors=Xe,He.levels=Re;var Ne=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))},Fe=new He("properties/5.7.0");function Ke(e,t,g){Object.defineProperty(e,t,{enumerable:!0,value:g,writable:!1})}function xe(e,t){for(var g=0;g<32;g++){if(e[t])return e[t];if(!e.prototype||"object"!==typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function Ee(e){return Ne(this,void 0,void 0,Ce().mark((function t(){var g,n;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=Object.keys(e).map((function(t){var g=e[t];return Promise.resolve(g).then((function(e){return{key:t,value:e}}))})),t.next=3,Promise.all(g);case 3:return n=t.sent,t.abrupt("return",n.reduce((function(e,t){return e[t.key]=t.value,e}),{}));case 5:case"end":return t.stop()}}),t)})))}function Me(e){var t={};for(var g in e)t[g]=e[g];return t}var De={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Ue(e){if(void 0===e||null===e||De[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),g=0;g<t.length;g++){var n=null;try{n=e[t[g]]}catch(r){continue}if(!Ue(n))return!1}return!0}return Fe.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function ze(e){if(Ue(e))return e;if(Array.isArray(e))return Object.freeze(e.map((function(e){return Le(e)})));if("object"===typeof e){var t={};for(var g in e){var n=e[g];void 0!==n&&Ke(t,g,Le(n))}return t}return Fe.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function Le(e){return ze(e)}var Qe=be((function e(t){for(var g in de(this,e),t)this[g]=Le(t[g])})),Te="providers/5.7.2";function je(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}function Pe(){return Pe="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,g){var n=je(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:g):r.value}},Pe.apply(this,arguments)}var Oe=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))},_e=new He("abstract-signer/5.7.0"),qe=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],$e=[He.errors.INSUFFICIENT_FUNDS,He.errors.NONCE_EXPIRED,He.errors.REPLACEMENT_UNDERPRICED],et=function(){function e(){de(this,e),_e.checkAbstract(this instanceof e?this.constructor:void 0,e),Ke(this,"_isSigner",!0)}return be(e,[{key:"getBalance",value:function(e){return Oe(this,void 0,void 0,Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getBalance"),t.next=3,this.provider.getBalance(this.getAddress(),e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getTransactionCount",value:function(e){return Oe(this,void 0,void 0,Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getTransactionCount"),t.next=3,this.provider.getTransactionCount(this.getAddress(),e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"estimateGas",value:function(e){return Oe(this,void 0,void 0,Ce().mark((function t(){var g;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("estimateGas"),t.next=3,Ee(this.checkTransaction(e));case 3:return g=t.sent,t.next=6,this.provider.estimateGas(g);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"call",value:function(e,t){return Oe(this,void 0,void 0,Ce().mark((function g(){var n;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return this._checkProvider("call"),g.next=3,Ee(this.checkTransaction(e));case 3:return n=g.sent,g.next=6,this.provider.call(n,t);case 6:return g.abrupt("return",g.sent);case 7:case"end":return g.stop()}}),g,this)})))}},{key:"sendTransaction",value:function(e){return Oe(this,void 0,void 0,Ce().mark((function t(){var g,n;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("sendTransaction"),t.next=3,this.populateTransaction(e);case 3:return g=t.sent,t.next=6,this.signTransaction(g);case 6:return n=t.sent,t.next=9,this.provider.sendTransaction(n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getChainId",value:function(){return Oe(this,void 0,void 0,Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getChainId"),e.next=3,this.provider.getNetwork();case 3:return t=e.sent,e.abrupt("return",t.chainId);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getGasPrice",value:function(){return Oe(this,void 0,void 0,Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getGasPrice"),e.next=3,this.provider.getGasPrice();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getFeeData",value:function(){return Oe(this,void 0,void 0,Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getFeeData"),e.next=3,this.provider.getFeeData();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"resolveName",value:function(e){return Oe(this,void 0,void 0,Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("resolveName"),t.next=3,this.provider.resolveName(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"checkTransaction",value:function(e){for(var t in e)-1===qe.indexOf(t)&&_e.throwArgumentError("invalid transaction key: "+t,"transaction",e);var g=Me(e);return null==g.from?g.from=this.getAddress():g.from=Promise.all([Promise.resolve(g.from),this.getAddress()]).then((function(t){return t[0].toLowerCase()!==t[1].toLowerCase()&&_e.throwArgumentError("from address mismatch","transaction",e),t[0]})),g}},{key:"populateTransaction",value:function(e){return Oe(this,void 0,void 0,Ce().mark((function t(){var g,n,r,I,a=this;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee(this.checkTransaction(e));case 2:if(null!=(g=t.sent).to&&(g.to=Promise.resolve(g.to).then((function(e){return Oe(a,void 0,void 0,Ce().mark((function t(){var g;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.resolveName(e);case 4:return null==(g=t.sent)&&_e.throwArgumentError("provided ENS name resolves to null","tx.to",e),t.abrupt("return",g);case 7:case"end":return t.stop()}}),t,this)})))})),g.to.catch((function(e){}))),n=null!=g.maxFeePerGas||null!=g.maxPriorityFeePerGas,null==g.gasPrice||2!==g.type&&!n?0!==g.type&&1!==g.type||!n||_e.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):_e.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==g.type&&null!=g.type||null==g.maxFeePerGas||null==g.maxPriorityFeePerGas){t.next=10;break}g.type=2,t.next=18;break;case 10:if(0!==g.type&&1!==g.type){t.next=14;break}null==g.gasPrice&&(g.gasPrice=this.getGasPrice()),t.next=18;break;case 14:return t.next=16,this.getFeeData();case 16:r=t.sent,null==g.type?null!=r.maxFeePerGas&&null!=r.maxPriorityFeePerGas?(g.type=2,null!=g.gasPrice?(I=g.gasPrice,delete g.gasPrice,g.maxFeePerGas=I,g.maxPriorityFeePerGas=I):(null==g.maxFeePerGas&&(g.maxFeePerGas=r.maxFeePerGas),null==g.maxPriorityFeePerGas&&(g.maxPriorityFeePerGas=r.maxPriorityFeePerGas))):null!=r.gasPrice?(n&&_e.throwError("network does not support EIP-1559",He.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==g.gasPrice&&(g.gasPrice=r.gasPrice),g.type=0):_e.throwError("failed to get consistent fee data",He.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"}):2===g.type&&(null==g.maxFeePerGas&&(g.maxFeePerGas=r.maxFeePerGas),null==g.maxPriorityFeePerGas&&(g.maxPriorityFeePerGas=r.maxPriorityFeePerGas));case 18:return null==g.nonce&&(g.nonce=this.getTransactionCount("pending")),null==g.gasLimit&&(g.gasLimit=this.estimateGas(g).catch((function(e){if($e.indexOf(e.code)>=0)throw e;return _e.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",He.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:g})}))),null==g.chainId?g.chainId=this.getChainId():g.chainId=Promise.all([Promise.resolve(g.chainId),this.getChainId()]).then((function(t){return 0!==t[1]&&t[0]!==t[1]&&_e.throwArgumentError("chainId address mismatch","transaction",e),t[0]})),t.next=23,Ee(g);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"_checkProvider",value:function(e){this.provider||_e.throwError("missing provider",He.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}}],[{key:"isSigner",value:function(e){return!(!e||!e._isSigner)}}]),e}(),tt=function(e){Ze(g,e);var t=ve(g);function g(e,n){var r;return de(this,g),Ke(pe(r=t.call(this)),"address",e),Ke(pe(r),"provider",n||null),r}return be(g,[{key:"getAddress",value:function(){return Promise.resolve(this.address)}},{key:"_fail",value:function(e,t){return Promise.resolve().then((function(){_e.throwError(e,He.errors.UNSUPPORTED_OPERATION,{operation:t})}))}},{key:"signMessage",value:function(e){return this._fail("VoidSigner cannot sign messages","signMessage")}},{key:"signTransaction",value:function(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}},{key:"_signTypedData",value:function(e,t,g){return this._fail("VoidSigner cannot sign typed data","signTypedData")}},{key:"connect",value:function(e){return new g(this.address,e)}}]),g}(et),gt=__webpack_require__(5676),nt=__webpack_require__.n(gt),rt=new He("bytes/5.7.0");function It(e){return!!e.toHexString}function at(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return at(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function ot(e){return st(e)&&!(e.length%2)||Ct(e)}function it(e){return"number"===typeof e&&e==e&&e%1===0}function Ct(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!it(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var g=e[t];if(!it(g)||g<0||g>=256)return!1}return!0}function lt(e,t){if(t||(t={}),"number"===typeof e){rt.checkSafeUint53(e,"invalid arrayify value");for(var g=[];e;)g.unshift(255&e),e=parseInt(String(e/256));return 0===g.length&&g.push(0),at(new Uint8Array(g))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),It(e)&&(e=e.toHexString()),st(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":rt.throwArgumentError("hex data is odd-length","value",e));for(var r=[],I=0;I<n.length;I+=2)r.push(parseInt(n.substring(I,I+2),16));return at(new Uint8Array(r))}return Ct(e)?at(new Uint8Array(e)):rt.throwArgumentError("invalid arrayify value","value",e)}function ut(e){var t=e.map((function(e){return lt(e)})),g=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(g);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),at(n)}function ct(e){var t=lt(e);if(0===t.length)return t;for(var g=0;g<t.length&&0===t[g];)g++;return g&&(t=t.slice(g)),t}function st(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var At="0123456789abcdef";function dt(e,t){if(t||(t={}),"number"===typeof e){rt.checkSafeUint53(e,"invalid hexlify value");for(var g="";e;)g=At[15&e]+g,e=Math.floor(e/16);return g.length?(g.length%2&&(g="0"+g),"0x"+g):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),It(e))return e.toHexString();if(st(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":rt.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Ct(e)){for(var n="0x",r=0;r<e.length;r++){var I=e[r];n+=At[(240&I)>>4]+At[15&I]}return n}return rt.throwArgumentError("invalid hexlify value","value",e)}function ht(e){if("string"!==typeof e)e=dt(e);else if(!st(e)||e.length%2)return null;return(e.length-2)/2}function mt(e,t,g){return"string"!==typeof e?e=dt(e):(!st(e)||e.length%2)&&rt.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=g?"0x"+e.substring(t,2+2*g):"0x"+e.substring(t)}function bt(e){var t="0x";return e.forEach((function(e){t+=dt(e).substring(2)})),t}function pt(e){var t=function(e){"string"!==typeof e&&(e=dt(e));st(e)||rt.throwArgumentError("invalid hex string","value",e);e=e.substring(2);var t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}(dt(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function ft(e,t){for("string"!==typeof e?e=dt(e):st(e)||rt.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&rt.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Zt(e){var t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(ot(e)){var g=lt(e);64===g.length?(t.v=27+(g[32]>>7),g[32]&=127,t.r=dt(g.slice(0,32)),t.s=dt(g.slice(32,64))):65===g.length?(t.r=dt(g.slice(0,32)),t.s=dt(g.slice(32,64)),t.v=g[64]):rt.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:rt.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(g[32]|=128),t._vs=dt(g.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){var n=function(e,t){(e=lt(e)).length>t&&rt.throwArgumentError("value out of range","value",arguments[0]);var g=new Uint8Array(t);return g.set(e,t-e.length),at(g)}(lt(t._vs),32);t._vs=dt(n);var r=n[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=r:t.recoveryParam!==r&&rt.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;var I=dt(n);null==t.s?t.s=I:t.s!==I&&rt.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?rt.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{var a=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==a&&rt.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&st(t.r)?t.r=ft(t.r,32):rt.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&st(t.s)?t.s=ft(t.s,32):rt.throwArgumentError("signature missing or invalid s","signature",e);var o=lt(t.s);o[0]>=128&&rt.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(o[0]|=128);var i=dt(o);t._vs&&(st(t._vs)||rt.throwArgumentError("signature invalid _vs","signature",e),t._vs=ft(t._vs,32)),null==t._vs?t._vs=i:t._vs!==i&&rt.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var yt=nt().BN,Gt=new He("bignumber/5.7.0"),Bt={},vt=9007199254740991;var kt=!1,St=function(){function e(t,g){de(this,e),t!==Bt&&Gt.throwError("cannot call constructor directly; use BigNumber.from",He.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=g,this._isBigNumber=!0,Object.freeze(this)}return be(e,[{key:"fromTwos",value:function(e){return Vt(wt(this).fromTwos(e))}},{key:"toTwos",value:function(e){return Vt(wt(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return Vt(wt(this).add(wt(e)))}},{key:"sub",value:function(e){return Vt(wt(this).sub(wt(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&Rt("division-by-zero","div"),Vt(wt(this).div(wt(t)))}},{key:"mul",value:function(e){return Vt(wt(this).mul(wt(e)))}},{key:"mod",value:function(e){var t=wt(e);return t.isNeg()&&Rt("division-by-zero","mod"),Vt(wt(this).umod(t))}},{key:"pow",value:function(e){var t=wt(e);return t.isNeg()&&Rt("negative-power","pow"),Vt(wt(this).pow(t))}},{key:"and",value:function(e){var t=wt(e);return(this.isNegative()||t.isNeg())&&Rt("unbound-bitwise-result","and"),Vt(wt(this).and(t))}},{key:"or",value:function(e){var t=wt(e);return(this.isNegative()||t.isNeg())&&Rt("unbound-bitwise-result","or"),Vt(wt(this).or(t))}},{key:"xor",value:function(e){var t=wt(e);return(this.isNegative()||t.isNeg())&&Rt("unbound-bitwise-result","xor"),Vt(wt(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&Rt("negative-width","mask"),Vt(wt(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&Rt("negative-width","shl"),Vt(wt(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&Rt("negative-width","shr"),Vt(wt(this).shrn(e))}},{key:"eq",value:function(e){return wt(this).eq(wt(e))}},{key:"lt",value:function(e){return wt(this).lt(wt(e))}},{key:"lte",value:function(e){return wt(this).lte(wt(e))}},{key:"gt",value:function(e){return wt(this).gt(wt(e))}},{key:"gte",value:function(e){return wt(this).gte(wt(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return wt(this).isZero()}},{key:"toNumber",value:function(){try{return wt(this).toNumber()}catch(e){Rt("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return Gt.throwError("this platform does not support BigInt",He.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?kt||(kt=!0,Gt.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Gt.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",He.errors.UNEXPECTED_ARGUMENT,{}):Gt.throwError("BigNumber.toString does not accept parameters",He.errors.UNEXPECTED_ARGUMENT,{})),wt(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(Bt,Wt(t)):t.match(/^-?[0-9]+$/)?new e(Bt,Wt(new yt(t))):Gt.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&Rt("underflow","BigNumber.from",t),(t>=vt||t<=-vt)&&Rt("overflow","BigNumber.from",t),e.from(String(t));var g=t;if("bigint"===typeof g)return e.from(g.toString());if(Ct(g))return e.from(dt(g));if(g)if(g.toHexString){var n=g.toHexString();if("string"===typeof n)return e.from(n)}else{var r=g._hex;if(null==r&&"BigNumber"===g.type&&(r=g.hex),"string"===typeof r&&(st(r)||"-"===r[0]&&st(r.substring(1))))return e.from(r)}return Gt.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function Wt(e){if("string"!==typeof e)return Wt(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Gt.throwArgumentError("invalid hex","value",e),"0x00"===(e=Wt(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Vt(e){return St.from(Wt(e))}function wt(e){var t=St.from(e).toHexString();return"-"===t[0]?new yt("-"+t.substring(3),16):new yt(t.substring(2),16)}function Rt(e,t,g){var n={fault:e,operation:t};return null!=g&&(n.value=g),Gt.throwError(e,He.errors.NUMERIC_FAULT,n)}var Xt=__webpack_require__(5958),Jt=__webpack_require__.n(Xt);function Yt(e){return"0x"+Jt().keccak_256(lt(e))}var Ht=new He("rlp/5.7.0");function Nt(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function Ft(e,t,g){for(var n=0,r=0;r<g;r++)n=256*n+e[t+r];return n}function Kt(e){if(Array.isArray(e)){var t=[];if(e.forEach((function(e){t=t.concat(Kt(e))})),t.length<=55)return t.unshift(192+t.length),t;var g=Nt(t.length);return g.unshift(247+g.length),g.concat(t)}ot(e)||Ht.throwArgumentError("RLP object must be BytesLike","object",e);var n=Array.prototype.slice.call(lt(e));if(1===n.length&&n[0]<=127)return n;if(n.length<=55)return n.unshift(128+n.length),n;var r=Nt(n.length);return r.unshift(183+r.length),r.concat(n)}function xt(e){return dt(Kt(e))}function Et(e,t,g,n){for(var r=[];g<t+1+n;){var I=Mt(e,g);r.push(I.result),(g+=I.consumed)>t+1+n&&Ht.throwError("child data too short",He.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:r}}function Mt(e,t){if(0===e.length&&Ht.throwError("data too short",He.errors.BUFFER_OVERRUN,{}),e[t]>=248){var g=e[t]-247;t+1+g>e.length&&Ht.throwError("data short segment too short",He.errors.BUFFER_OVERRUN,{});var n=Ft(e,t+1,g);return t+1+g+n>e.length&&Ht.throwError("data long segment too short",He.errors.BUFFER_OVERRUN,{}),Et(e,t,t+1+g,g+n)}if(e[t]>=192){var r=e[t]-192;return t+1+r>e.length&&Ht.throwError("data array too short",He.errors.BUFFER_OVERRUN,{}),Et(e,t,t+1,r)}if(e[t]>=184){var I=e[t]-183;t+1+I>e.length&&Ht.throwError("data array too short",He.errors.BUFFER_OVERRUN,{});var a=Ft(e,t+1,I);return t+1+I+a>e.length&&Ht.throwError("data array too short",He.errors.BUFFER_OVERRUN,{}),{consumed:1+I+a,result:dt(e.slice(t+1+I,t+1+I+a))}}if(e[t]>=128){var o=e[t]-128;return t+1+o>e.length&&Ht.throwError("data too short",He.errors.BUFFER_OVERRUN,{}),{consumed:1+o,result:dt(e.slice(t+1,t+1+o))}}return{consumed:1,result:dt(e[t])}}function Dt(e){var t=lt(e),g=Mt(t,0);return g.consumed!==t.length&&Ht.throwArgumentError("invalid rlp data","data",e),g.result}var Ut=new He("address/5.7.0");function zt(e){st(e,20)||Ut.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),g=new Uint8Array(40),n=0;n<40;n++)g[n]=t[n].charCodeAt(0);for(var r=lt(Yt(g)),I=0;I<40;I+=2)r[I>>1]>>4>=8&&(t[I]=t[I].toUpperCase()),(15&r[I>>1])>=8&&(t[I+1]=t[I+1].toUpperCase());return"0x"+t.join("")}for(var Lt={},Qt=0;Qt<10;Qt++)Lt[String(Qt)]=String(Qt);for(var Tt=0;Tt<26;Tt++)Lt[String.fromCharCode(65+Tt)]=String(10+Tt);var jt,Pt=Math.floor((jt=9007199254740991,Math.log10?Math.log10(jt):Math.log(jt)/Math.LN10));function Ot(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return Lt[e]})).join("");t.length>=Pt;){var g=t.substring(0,Pt);t=parseInt(g,10)%97+t.substring(g.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function _t(e){var t,g=null;if("string"!==typeof e&&Ut.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),g=zt(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&g!==e&&Ut.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Ot(e)&&Ut.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),g=new yt(t,36).toString(16);g.length<40;)g="0"+g;g=zt("0x"+g)}else Ut.throwArgumentError("invalid address","address",e);return g}function qt(e){var t=null;try{t=_t(e.from)}catch(g){Ut.throwArgumentError("missing from address","transaction",e)}return _t(mt(Yt(xt([t,ct(lt(St.from(e.nonce).toHexString()))])),12))}var $t,eg,tg="hash/5.7.0",gg=new He("strings/5.7.0");function ng(e,t,g,n,r){if(e===eg.BAD_PREFIX||e===eg.UNEXPECTED_CONTINUE){for(var I=0,a=t+1;a<g.length&&g[a]>>6===2;a++)I++;return I}return e===eg.OVERRUN?g.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}($t||($t={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(eg||(eg={}));var rg=Object.freeze({error:function(e,t,g,n,r){return gg.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",g)},ignore:ng,replace:function(e,t,g,n,r){return e===eg.OVERLONG?(n.push(r),0):(n.push(65533),ng(e,t,g))}});function Ig(e,t){null==t&&(t=rg.error),e=lt(e);for(var g=[],n=0;n<e.length;){var r=e[n++];if(r>>7!==0){var I=null,a=null;if(192===(224&r))I=1,a=127;else if(224===(240&r))I=2,a=2047;else{if(240!==(248&r)){n+=t(128===(192&r)?eg.UNEXPECTED_CONTINUE:eg.BAD_PREFIX,n-1,e,g);continue}I=3,a=65535}if(n-1+I>=e.length)n+=t(eg.OVERRUN,n-1,e,g);else{for(var o=r&(1<<8-I-1)-1,i=0;i<I;i++){var C=e[n];if(128!=(192&C)){n+=t(eg.MISSING_CONTINUE,n,e,g),o=null;break}o=o<<6|63&C,n++}null!==o&&(o>1114111?n+=t(eg.OUT_OF_RANGE,n-1-I,e,g,o):o>=55296&&o<=57343?n+=t(eg.UTF16_SURROGATE,n-1-I,e,g,o):o<=a?n+=t(eg.OVERLONG,n-1-I,e,g,o):g.push(o))}}else g.push(r)}return g}function ag(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t.current;t!=$t.current&&(gg.checkNormalize(),e=e.normalize(t));for(var g=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128)g.push(r);else if(r<2048)g.push(r>>6|192),g.push(63&r|128);else if(55296==(64512&r)){n++;var I=e.charCodeAt(n);if(n>=e.length||56320!==(64512&I))throw new Error("invalid utf-8 string");var a=65536+((1023&r)<<10)+(1023&I);g.push(a>>18|240),g.push(a>>12&63|128),g.push(a>>6&63|128),g.push(63&a|128)}else g.push(r>>12|224),g.push(r>>6&63|128),g.push(63&r|128)}return lt(g)}function og(e,t){return Ig(e,t).map((function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))})).join("")}function ig(e){return Yt(ag(e))}var Cg=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))},lg=new He(tg),ug=new Uint8Array(32);ug.fill(0);var cg=St.from(-1),sg=St.from(0),Ag=St.from(1),dg=St.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var hg=ft(Ag.toHexString(),32),mg=ft(sg.toHexString(),32),bg={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},pg=["name","version","chainId","verifyingContract","salt"];function fg(e){return function(t){return"string"!==typeof t&&lg.throwArgumentError("invalid domain value for ".concat(JSON.stringify(e)),"domain.".concat(e),t),t}}var Zg={name:fg("name"),version:fg("version"),chainId:function(e){try{return St.from(e).toString()}catch(t){}return lg.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return _t(e).toLowerCase()}catch(t){}return lg.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{var t=lt(e);if(32!==t.length)throw new Error("bad length");return dt(t)}catch(g){}return lg.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function yg(e){var t=e.match(/^(u?)int(\d*)$/);if(t){var g=""===t[1],n=parseInt(t[2]||"256");(n%8!==0||n>256||t[2]&&t[2]!==String(n))&&lg.throwArgumentError("invalid numeric width","type",e);var r=dg.mask(g?n-1:n),I=g?r.add(Ag).mul(cg):sg;return function(t){var g=St.from(t);return(g.lt(I)||g.gt(r))&&lg.throwArgumentError("value out-of-bounds for ".concat(e),"value",t),ft(g.toTwos(256).toHexString(),32)}}var a=e.match(/^bytes(\d+)$/);if(a){var o=parseInt(a[1]);return(0===o||o>32||a[1]!==String(o))&&lg.throwArgumentError("invalid bytes width","type",e),function(t){return lt(t).length!==o&&lg.throwArgumentError("invalid length for ".concat(e),"value",t),function(e){var t=lt(e),g=t.length%32;return g?bt([t,ug.slice(g)]):dt(t)}(t)}}switch(e){case"address":return function(e){return ft(_t(e),32)};case"bool":return function(e){return e?hg:mg};case"bytes":return function(e){return Yt(e)};case"string":return function(e){return ig(e)}}return null}function Gg(e,t){return"".concat(e,"(").concat(t.map((function(e){var t=e.name;return e.type+" "+t})).join(","),")")}var Bg=function(){function e(t){de(this,e),Ke(this,"types",Object.freeze(Le(t))),Ke(this,"_encoderCache",{}),Ke(this,"_types",{});var g={},n={},r={};Object.keys(t).forEach((function(e){g[e]={},n[e]=[],r[e]={}}));var I=function(e){var r={};t[e].forEach((function(I){r[I.name]&&lg.throwArgumentError("duplicate variable name ".concat(JSON.stringify(I.name)," in ").concat(JSON.stringify(e)),"types",t),r[I.name]=!0;var a=I.type.match(/^([^\x5b]*)(\x5b|$)/)[1];a===e&&lg.throwArgumentError("circular type reference to ".concat(JSON.stringify(a)),"types",t),yg(a)||(n[a]||lg.throwArgumentError("unknown type ".concat(JSON.stringify(a)),"types",t),n[a].push(e),g[e][a]=!0)}))};for(var a in t)I(a);var o=Object.keys(n).filter((function(e){return 0===n[e].length}));for(var i in 0===o.length?lg.throwArgumentError("missing primary type","types",t):o.length>1&&lg.throwArgumentError("ambiguous primary types or unused types: ".concat(o.map((function(e){return JSON.stringify(e)})).join(", ")),"types",t),Ke(this,"primaryType",o[0]),function e(I,a){a[I]&&lg.throwArgumentError("circular type reference to ".concat(JSON.stringify(I)),"types",t),a[I]=!0,Object.keys(g[I]).forEach((function(t){n[t]&&(e(t,a),Object.keys(a).forEach((function(e){r[e][t]=!0})))})),delete a[I]}(this.primaryType,{}),r){var C=Object.keys(r[i]);C.sort(),this._types[i]=Gg(i,t[i])+C.map((function(e){return Gg(e,t[e])})).join("")}}return be(e,[{key:"getEncoder",value:function(e){var t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}},{key:"_getEncoder",value:function(e){var t=this,g=yg(e);if(g)return g;var n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){var r=n[1],I=this.getEncoder(r),a=parseInt(n[3]);return function(e){a>=0&&e.length!==a&&lg.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);var g=e.map(I);return t._types[r]&&(g=g.map(Yt)),Yt(bt(g))}}var o=this.types[e];if(o){var i=ig(this._types[e]);return function(e){var g=o.map((function(g){var n=g.name,r=g.type,I=t.getEncoder(r)(e[n]);return t._types[r]?Yt(I):I}));return g.unshift(i),bt(g)}}return lg.throwArgumentError("unknown type: ".concat(e),"type",e)}},{key:"encodeType",value:function(e){var t=this._types[e];return t||lg.throwArgumentError("unknown type: ".concat(JSON.stringify(e)),"name",e),t}},{key:"encodeData",value:function(e,t){return this.getEncoder(e)(t)}},{key:"hashStruct",value:function(e,t){return Yt(this.encodeData(e,t))}},{key:"encode",value:function(e){return this.encodeData(this.primaryType,e)}},{key:"hash",value:function(e){return this.hashStruct(this.primaryType,e)}},{key:"_visit",value:function(e,t,g){var n=this;if(yg(e))return g(e,t);var r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){var I=r[1],a=parseInt(r[3]);return a>=0&&t.length!==a&&lg.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map((function(e){return n._visit(I,e,g)}))}var o=this.types[e];return o?o.reduce((function(e,r){var I=r.name,a=r.type;return e[I]=n._visit(a,t[I],g),e}),{}):lg.throwArgumentError("unknown type: ".concat(e),"type",e)}},{key:"visit",value:function(e,t){return this._visit(this.primaryType,e,t)}}],[{key:"from",value:function(t){return new e(t)}},{key:"getPrimaryType",value:function(t){return e.from(t).primaryType}},{key:"hashStruct",value:function(t,g,n){return e.from(g).hashStruct(t,n)}},{key:"hashDomain",value:function(t){var g=[];for(var n in t){var r=bg[n];r||lg.throwArgumentError("invalid typed-data domain key: ".concat(JSON.stringify(n)),"domain",t),g.push({name:n,type:r})}return g.sort((function(e,t){return pg.indexOf(e.name)-pg.indexOf(t.name)})),e.hashStruct("EIP712Domain",{EIP712Domain:g},t)}},{key:"encode",value:function(t,g,n){return bt(["0x1901",e.hashDomain(t),e.from(g).hash(n)])}},{key:"hash",value:function(t,g,n){return Yt(e.encode(t,g,n))}},{key:"resolveNames",value:function(t,g,n,r){return Cg(this,void 0,void 0,Ce().mark((function I(){var a,o,i;return Ce().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:t=Me(t),a={},t.verifyingContract&&!st(t.verifyingContract,20)&&(a[t.verifyingContract]="0x"),(o=e.from(g)).visit(n,(function(e,t){return"address"!==e||st(t,20)||(a[t]="0x"),t})),I.t0=Ce().keys(a);case 6:if((I.t1=I.t0()).done){I.next=13;break}return i=I.t1.value,I.next=10,r(i);case 10:a[i]=I.sent,I.next=6;break;case 13:return t.verifyingContract&&a[t.verifyingContract]&&(t.verifyingContract=a[t.verifyingContract]),n=o.visit(n,(function(e,t){return"address"===e&&a[t]?a[t]:t})),I.abrupt("return",{domain:t,value:n});case 16:case"end":return I.stop()}}),I)})))}},{key:"getPayload",value:function(t,g,n){e.hashDomain(t);var r={},I=[];pg.forEach((function(e){var g=t[e];null!=g&&(r[e]=Zg[e](g),I.push({name:e,type:bg[e]}))}));var a=e.from(g),o=Me(g);return o.EIP712Domain?lg.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",g):o.EIP712Domain=I,a.encode(n),{types:o,domain:r,primaryType:a.primaryType,message:a.visit(n,(function(e,t){if(e.match(/^bytes(\d*)/))return dt(lt(t));if(e.match(/^u?int/))return St.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!==typeof t&&lg.throwArgumentError("invalid string","value",t),t}return lg.throwArgumentError("unsupported type","type",e)}))}}}]),e}(),vg=St.from(-1),kg=St.from(0),Sg=St.from(1),Wg=St.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Vg=__webpack_require__(7304),wg=__webpack_require__.n(Vg),Rg=__webpack_require__(6653),Xg=__webpack_require__.n(Rg);"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof __webpack_require__.g?__webpack_require__.g:"undefined"!==typeof self&&self;function Jg(e,t,g){return g={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&g.path)}},e(g,g.exports),g.exports}var Yg=Hg;function Hg(e,t){if(!e)throw new Error(t||"Assertion failed")}Hg.equal=function(e,t,g){if(e!=t)throw new Error(g||"Assertion failed: "+e+" != "+t)};var Ng=Jg((function(e,t){var g=t;function n(e){return 1===e.length?"0"+e:e}function r(e){for(var t="",g=0;g<e.length;g++)t+=n(e[g].toString(16));return t}g.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var g=[];if("string"!==typeof e){for(var n=0;n<e.length;n++)g[n]=0|e[n];return g}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(n=0;n<e.length;n+=2)g.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var r=e.charCodeAt(n),I=r>>8,a=255&r;I?g.push(I,a):g.push(a)}return g},g.zero2=n,g.toHex=r,g.encode=function(e,t){return"hex"===t?r(e):e}})),Fg=Jg((function(e,t){var g=t;g.assert=Yg,g.toArray=Ng.toArray,g.zero2=Ng.zero2,g.toHex=Ng.toHex,g.encode=Ng.encode,g.getNAF=function(e,t,g){var n=new Array(Math.max(e.bitLength(),g)+1);n.fill(0);for(var r=1<<t+1,I=e.clone(),a=0;a<n.length;a++){var o,i=I.andln(r-1);I.isOdd()?(o=i>(r>>1)-1?(r>>1)-i:i,I.isubn(o)):o=0,n[a]=o,I.iushrn(1)}return n},g.getJSF=function(e,t){var g=[[],[]];e=e.clone(),t=t.clone();for(var n,r=0,I=0;e.cmpn(-r)>0||t.cmpn(-I)>0;){var a,o,i=e.andln(3)+r&3,C=t.andln(3)+I&3;3===i&&(i=-1),3===C&&(C=-1),a=0===(1&i)?0:3!==(n=e.andln(7)+r&7)&&5!==n||2!==C?i:-i,g[0].push(a),o=0===(1&C)?0:3!==(n=t.andln(7)+I&7)&&5!==n||2!==i?C:-C,g[1].push(o),2*r===a+1&&(r=1-r),2*I===o+1&&(I=1-I),e.iushrn(1),t.iushrn(1)}return g},g.cachedProperty=function(e,t,g){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=g.call(this)}},g.parseBytes=function(e){return"string"===typeof e?g.toArray(e,"hex"):e},g.intFromLE=function(e){return new(wg())(e,"hex","le")}})),Kg=Fg.getNAF,xg=Fg.getJSF,Eg=Fg.assert;function Mg(e,t){this.type=e,this.p=new(wg())(t.p,16),this.red=t.prime?wg().red(t.prime):wg().mont(this.p),this.zero=new(wg())(0).toRed(this.red),this.one=new(wg())(1).toRed(this.red),this.two=new(wg())(2).toRed(this.red),this.n=t.n&&new(wg())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var g=this.n&&this.p.div(this.n);!g||g.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Dg=Mg;function Ug(e,t){this.curve=e,this.type=t,this.precomputed=null}Mg.prototype.point=function(){throw new Error("Not implemented")},Mg.prototype.validate=function(){throw new Error("Not implemented")},Mg.prototype._fixedNafMul=function(e,t){Eg(e.precomputed);var g=e._getDoubles(),n=Kg(t,1,this._bitLength),r=(1<<g.step+1)-(g.step%2===0?2:1);r/=3;var I,a,o=[];for(I=0;I<n.length;I+=g.step){a=0;for(var i=I+g.step-1;i>=I;i--)a=(a<<1)+n[i];o.push(a)}for(var C=this.jpoint(null,null,null),l=this.jpoint(null,null,null),u=r;u>0;u--){for(I=0;I<o.length;I++)(a=o[I])===u?l=l.mixedAdd(g.points[I]):a===-u&&(l=l.mixedAdd(g.points[I].neg()));C=C.add(l)}return C.toP()},Mg.prototype._wnafMul=function(e,t){var g=4,n=e._getNAFPoints(g);g=n.wnd;for(var r=n.points,I=Kg(t,g,this._bitLength),a=this.jpoint(null,null,null),o=I.length-1;o>=0;o--){for(var i=0;o>=0&&0===I[o];o--)i++;if(o>=0&&i++,a=a.dblp(i),o<0)break;var C=I[o];Eg(0!==C),a="affine"===e.type?C>0?a.mixedAdd(r[C-1>>1]):a.mixedAdd(r[-C-1>>1].neg()):C>0?a.add(r[C-1>>1]):a.add(r[-C-1>>1].neg())}return"affine"===e.type?a.toP():a},Mg.prototype._wnafMulAdd=function(e,t,g,n,r){var I,a,o,i=this._wnafT1,C=this._wnafT2,l=this._wnafT3,u=0;for(I=0;I<n;I++){var c=(o=t[I])._getNAFPoints(e);i[I]=c.wnd,C[I]=c.points}for(I=n-1;I>=1;I-=2){var s=I-1,A=I;if(1===i[s]&&1===i[A]){var d=[t[s],null,null,t[A]];0===t[s].y.cmp(t[A].y)?(d[1]=t[s].add(t[A]),d[2]=t[s].toJ().mixedAdd(t[A].neg())):0===t[s].y.cmp(t[A].y.redNeg())?(d[1]=t[s].toJ().mixedAdd(t[A]),d[2]=t[s].add(t[A].neg())):(d[1]=t[s].toJ().mixedAdd(t[A]),d[2]=t[s].toJ().mixedAdd(t[A].neg()));var h=[-3,-1,-5,-7,0,7,5,1,3],m=xg(g[s],g[A]);for(u=Math.max(m[0].length,u),l[s]=new Array(u),l[A]=new Array(u),a=0;a<u;a++){var b=0|m[0][a],p=0|m[1][a];l[s][a]=h[3*(b+1)+(p+1)],l[A][a]=0,C[s]=d}}else l[s]=Kg(g[s],i[s],this._bitLength),l[A]=Kg(g[A],i[A],this._bitLength),u=Math.max(l[s].length,u),u=Math.max(l[A].length,u)}var f=this.jpoint(null,null,null),Z=this._wnafT4;for(I=u;I>=0;I--){for(var y=0;I>=0;){var G=!0;for(a=0;a<n;a++)Z[a]=0|l[a][I],0!==Z[a]&&(G=!1);if(!G)break;y++,I--}if(I>=0&&y++,f=f.dblp(y),I<0)break;for(a=0;a<n;a++){var B=Z[a];0!==B&&(B>0?o=C[a][B-1>>1]:B<0&&(o=C[a][-B-1>>1].neg()),f="affine"===o.type?f.mixedAdd(o):f.add(o))}}for(I=0;I<n;I++)C[I]=null;return r?f:f.toP()},Mg.BasePoint=Ug,Ug.prototype.eq=function(){throw new Error("Not implemented")},Ug.prototype.validate=function(){return this.curve.validate(this)},Mg.prototype.decodePoint=function(e,t){e=Fg.toArray(e,t);var g=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*g)return 6===e[0]?Eg(e[e.length-1]%2===0):7===e[0]&&Eg(e[e.length-1]%2===1),this.point(e.slice(1,1+g),e.slice(1+g,1+2*g));if((2===e[0]||3===e[0])&&e.length-1===g)return this.pointFromX(e.slice(1,1+g),3===e[0]);throw new Error("Unknown point format")},Ug.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Ug.prototype._encode=function(e){var t=this.curve.p.byteLength(),g=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(g):[4].concat(g,this.getY().toArray("be",t))},Ug.prototype.encode=function(e,t){return Fg.encode(this._encode(t),e)},Ug.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Ug.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Ug.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var g=[this],n=this,r=0;r<t;r+=e){for(var I=0;I<e;I++)n=n.dbl();g.push(n)}return{step:e,points:g}},Ug.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],g=(1<<e)-1,n=1===g?null:this.dbl(),r=1;r<g;r++)t[r]=t[r-1].add(n);return{wnd:e,points:t}},Ug.prototype._getBeta=function(){return null},Ug.prototype.dblp=function(e){for(var t=this,g=0;g<e;g++)t=t.dbl();return t};var zg=Jg((function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var g=function(){};g.prototype=t.prototype,e.prototype=new g,e.prototype.constructor=e}}})),Lg=Fg.assert;function Qg(e){Dg.call(this,"short",e),this.a=new(wg())(e.a,16).toRed(this.red),this.b=new(wg())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}zg(Qg,Dg);var Tg=Qg;function jg(e,t,g,n){Dg.BasePoint.call(this,e,"affine"),null===t&&null===g?(this.x=null,this.y=null,this.inf=!0):(this.x=new(wg())(t,16),this.y=new(wg())(g,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Pg(e,t,g,n){Dg.BasePoint.call(this,e,"jacobian"),null===t&&null===g&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(wg())(0)):(this.x=new(wg())(t,16),this.y=new(wg())(g,16),this.z=new(wg())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Qg.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,g;if(e.beta)t=new(wg())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)g=new(wg())(e.lambda,16);else{var r=this._getEndoRoots(this.n);0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(t))?g=r[0]:(g=r[1],Lg(0===this.g.mul(g).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:g,basis:e.basis?e.basis.map((function(e){return{a:new(wg())(e.a,16),b:new(wg())(e.b,16)}})):this._getEndoBasis(g)}}},Qg.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:wg().mont(e),g=new(wg())(2).toRed(t).redInvm(),n=g.redNeg(),r=new(wg())(3).toRed(t).redNeg().redSqrt().redMul(g);return[n.redAdd(r).fromRed(),n.redSub(r).fromRed()]},Qg.prototype._getEndoBasis=function(e){for(var t,g,n,r,I,a,o,i,C,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=e,c=this.n.clone(),s=new(wg())(1),A=new(wg())(0),d=new(wg())(0),h=new(wg())(1),m=0;0!==u.cmpn(0);){var b=c.div(u);i=c.sub(b.mul(u)),C=d.sub(b.mul(s));var p=h.sub(b.mul(A));if(!n&&i.cmp(l)<0)t=o.neg(),g=s,n=i.neg(),r=C;else if(n&&2===++m)break;o=i,c=u,u=i,d=s,s=C,h=A,A=p}I=i.neg(),a=C;var f=n.sqr().add(r.sqr());return I.sqr().add(a.sqr()).cmp(f)>=0&&(I=t,a=g),n.negative&&(n=n.neg(),r=r.neg()),I.negative&&(I=I.neg(),a=a.neg()),[{a:n,b:r},{a:I,b:a}]},Qg.prototype._endoSplit=function(e){var t=this.endo.basis,g=t[0],n=t[1],r=n.b.mul(e).divRound(this.n),I=g.b.neg().mul(e).divRound(this.n),a=r.mul(g.a),o=I.mul(n.a),i=r.mul(g.b),C=I.mul(n.b);return{k1:e.sub(a).sub(o),k2:i.add(C).neg()}},Qg.prototype.pointFromX=function(e,t){(e=new(wg())(e,16)).red||(e=e.toRed(this.red));var g=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=g.redSqrt();if(0!==n.redSqr().redSub(g).cmp(this.zero))throw new Error("invalid point");var r=n.fromRed().isOdd();return(t&&!r||!t&&r)&&(n=n.redNeg()),this.point(e,n)},Qg.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,g=e.y,n=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===g.redSqr().redISub(r).cmpn(0)},Qg.prototype._endoWnafMulAdd=function(e,t,g){for(var n=this._endoWnafT1,r=this._endoWnafT2,I=0;I<e.length;I++){var a=this._endoSplit(t[I]),o=e[I],i=o._getBeta();a.k1.negative&&(a.k1.ineg(),o=o.neg(!0)),a.k2.negative&&(a.k2.ineg(),i=i.neg(!0)),n[2*I]=o,n[2*I+1]=i,r[2*I]=a.k1,r[2*I+1]=a.k2}for(var C=this._wnafMulAdd(1,n,r,2*I,g),l=0;l<2*I;l++)n[l]=null,r[l]=null;return C},zg(jg,Dg.BasePoint),Qg.prototype.point=function(e,t,g){return new jg(this,e,t,g)},Qg.prototype.pointFromJSON=function(e,t){return jg.fromJSON(this,e,t)},jg.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var g=this.curve,n=function(e){return g.point(e.x.redMul(g.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},jg.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},jg.fromJSON=function(e,t,g){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],g);if(!t[2])return n;function r(t){return e.point(t[0],t[1],g)}var I=t[2];return n.precomputed={beta:null,doubles:I.doubles&&{step:I.doubles.step,points:[n].concat(I.doubles.points.map(r))},naf:I.naf&&{wnd:I.naf.wnd,points:[n].concat(I.naf.points.map(r))}},n},jg.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},jg.prototype.isInfinity=function(){return this.inf},jg.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var g=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,n)},jg.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,g=this.x.redSqr(),n=e.redInvm(),r=g.redAdd(g).redIAdd(g).redIAdd(t).redMul(n),I=r.redSqr().redISub(this.x.redAdd(this.x)),a=r.redMul(this.x.redSub(I)).redISub(this.y);return this.curve.point(I,a)},jg.prototype.getX=function(){return this.x.fromRed()},jg.prototype.getY=function(){return this.y.fromRed()},jg.prototype.mul=function(e){return e=new(wg())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},jg.prototype.mulAdd=function(e,t,g){var n=[this,t],r=[e,g];return this.curve.endo?this.curve._endoWnafMulAdd(n,r):this.curve._wnafMulAdd(1,n,r,2)},jg.prototype.jmulAdd=function(e,t,g){var n=[this,t],r=[e,g];return this.curve.endo?this.curve._endoWnafMulAdd(n,r,!0):this.curve._wnafMulAdd(1,n,r,2,!0)},jg.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},jg.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var g=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(n)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(n)}}}return t},jg.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},zg(Pg,Dg.BasePoint),Qg.prototype.jpoint=function(e,t,g){return new Pg(this,e,t,g)},Pg.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),g=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(g,n)},Pg.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Pg.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),g=this.z.redSqr(),n=this.x.redMul(t),r=e.x.redMul(g),I=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(g.redMul(this.z)),o=n.redSub(r),i=I.redSub(a);if(0===o.cmpn(0))return 0!==i.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var C=o.redSqr(),l=C.redMul(o),u=n.redMul(C),c=i.redSqr().redIAdd(l).redISub(u).redISub(u),s=i.redMul(u.redISub(c)).redISub(I.redMul(l)),A=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(c,s,A)},Pg.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),g=this.x,n=e.x.redMul(t),r=this.y,I=e.y.redMul(t).redMul(this.z),a=g.redSub(n),o=r.redSub(I);if(0===a.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var i=a.redSqr(),C=i.redMul(a),l=g.redMul(i),u=o.redSqr().redIAdd(C).redISub(l).redISub(l),c=o.redMul(l.redISub(u)).redISub(r.redMul(C)),s=this.z.redMul(a);return this.curve.jpoint(u,c,s)},Pg.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var g=this;for(t=0;t<e;t++)g=g.dbl();return g}var n=this.curve.a,r=this.curve.tinv,I=this.x,a=this.y,o=this.z,i=o.redSqr().redSqr(),C=a.redAdd(a);for(t=0;t<e;t++){var l=I.redSqr(),u=C.redSqr(),c=u.redSqr(),s=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(i)),A=I.redMul(u),d=s.redSqr().redISub(A.redAdd(A)),h=A.redISub(d),m=s.redMul(h);m=m.redIAdd(m).redISub(c);var b=C.redMul(o);t+1<e&&(i=i.redMul(c)),I=d,o=b,C=m}return this.curve.jpoint(I,C.redMul(r),o)},Pg.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Pg.prototype._zeroDbl=function(){var e,t,g;if(this.zOne){var n=this.x.redSqr(),r=this.y.redSqr(),I=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(n).redISub(I);a=a.redIAdd(a);var o=n.redAdd(n).redIAdd(n),i=o.redSqr().redISub(a).redISub(a),C=I.redIAdd(I);C=(C=C.redIAdd(C)).redIAdd(C),e=i,t=o.redMul(a.redISub(i)).redISub(C),g=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),u=this.y.redSqr(),c=u.redSqr(),s=this.x.redAdd(u).redSqr().redISub(l).redISub(c);s=s.redIAdd(s);var A=l.redAdd(l).redIAdd(l),d=A.redSqr(),h=c.redIAdd(c);h=(h=h.redIAdd(h)).redIAdd(h),e=d.redISub(s).redISub(s),t=A.redMul(s.redISub(e)).redISub(h),g=(g=this.y.redMul(this.z)).redIAdd(g)}return this.curve.jpoint(e,t,g)},Pg.prototype._threeDbl=function(){var e,t,g;if(this.zOne){var n=this.x.redSqr(),r=this.y.redSqr(),I=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(n).redISub(I);a=a.redIAdd(a);var o=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),i=o.redSqr().redISub(a).redISub(a);e=i;var C=I.redIAdd(I);C=(C=C.redIAdd(C)).redIAdd(C),t=o.redMul(a.redISub(i)).redISub(C),g=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),u=this.y.redSqr(),c=this.x.redMul(u),s=this.x.redSub(l).redMul(this.x.redAdd(l));s=s.redAdd(s).redIAdd(s);var A=c.redIAdd(c),d=(A=A.redIAdd(A)).redAdd(A);e=s.redSqr().redISub(d),g=this.y.redAdd(this.z).redSqr().redISub(u).redISub(l);var h=u.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h),t=s.redMul(A.redISub(e)).redISub(h)}return this.curve.jpoint(e,t,g)},Pg.prototype._dbl=function(){var e=this.curve.a,t=this.x,g=this.y,n=this.z,r=n.redSqr().redSqr(),I=t.redSqr(),a=g.redSqr(),o=I.redAdd(I).redIAdd(I).redIAdd(e.redMul(r)),i=t.redAdd(t),C=(i=i.redIAdd(i)).redMul(a),l=o.redSqr().redISub(C.redAdd(C)),u=C.redISub(l),c=a.redSqr();c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var s=o.redMul(u).redISub(c),A=g.redAdd(g).redMul(n);return this.curve.jpoint(l,s,A)},Pg.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),g=this.z.redSqr(),n=t.redSqr(),r=e.redAdd(e).redIAdd(e),I=r.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n),o=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(I)).redSqr(),i=n.redIAdd(n);i=(i=(i=i.redIAdd(i)).redIAdd(i)).redIAdd(i);var C=r.redIAdd(a).redSqr().redISub(I).redISub(o).redISub(i),l=t.redMul(C);l=(l=l.redIAdd(l)).redIAdd(l);var u=this.x.redMul(o).redISub(l);u=(u=u.redIAdd(u)).redIAdd(u);var c=this.y.redMul(C.redMul(i.redISub(C)).redISub(a.redMul(o)));c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var s=this.z.redAdd(a).redSqr().redISub(g).redISub(o);return this.curve.jpoint(u,c,s)},Pg.prototype.mul=function(e,t){return e=new(wg())(e,t),this.curve._wnafMul(this,e)},Pg.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),g=e.z.redSqr();if(0!==this.x.redMul(g).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),r=g.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(n)).cmpn(0)},Pg.prototype.eqXToP=function(e){var t=this.z.redSqr(),g=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(g))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(r),0===this.x.cmp(g))return!0}},Pg.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Pg.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Og=Jg((function(e,t){var g=t;g.base=Dg,g.short=Tg,g.mont=null,g.edwards=null})),_g=Jg((function(e,t){var g,n=t,r=Fg.assert;function I(e){"short"===e.type?this.curve=new Og.short(e):"edwards"===e.type?this.curve=new Og.edwards(e):this.curve=new Og.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var g=new I(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:g}),g}})}n.PresetCurve=I,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Xg().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Xg().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Xg().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Xg().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Xg().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Xg().sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Xg().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{g=null.crash()}catch(o){g=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Xg().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",g]})}));function qg(e){if(!(this instanceof qg))return new qg(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Ng.toArray(e.entropy,e.entropyEnc||"hex"),g=Ng.toArray(e.nonce,e.nonceEnc||"hex"),n=Ng.toArray(e.pers,e.persEnc||"hex");Yg(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,g,n)}var $g=qg;qg.prototype._init=function(e,t,g){var n=e.concat(t).concat(g);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},qg.prototype._hmac=function(){return new(Xg().hmac)(this.hash,this.K)},qg.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},qg.prototype.reseed=function(e,t,g,n){"string"!==typeof t&&(n=g,g=t,t=null),e=Ng.toArray(e,t),g=Ng.toArray(g,n),Yg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(g||[])),this._reseed=1},qg.prototype.generate=function(e,t,g,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=g,g=t,t=null),g&&(g=Ng.toArray(g,n||"hex"),this._update(g));for(var r=[];r.length<e;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var I=r.slice(0,e);return this._update(g),this._reseed++,Ng.encode(I,t)};var en=Fg.assert;function tn(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var gn=tn;tn.fromPublic=function(e,t,g){return t instanceof tn?t:new tn(e,{pub:t,pubEnc:g})},tn.fromPrivate=function(e,t,g){return t instanceof tn?t:new tn(e,{priv:t,privEnc:g})},tn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},tn.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},tn.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},tn.prototype._importPrivate=function(e,t){this.priv=new(wg())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},tn.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?en(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||en(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},tn.prototype.derive=function(e){return e.validate()||en(e.validate(),"public point not validated"),e.mul(this.priv).getX()},tn.prototype.sign=function(e,t,g){return this.ec.sign(e,this,t,g)},tn.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},tn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var nn=Fg.assert;function rn(e,t){if(e instanceof rn)return e;this._importDER(e,t)||(nn(e.r&&e.s,"Signature without r or s"),this.r=new(wg())(e.r,16),this.s=new(wg())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var In=rn;function an(){this.place=0}function on(e,t){var g=e[t.place++];if(!(128&g))return g;var n=15&g;if(0===n||n>4)return!1;for(var r=0,I=0,a=t.place;I<n;I++,a++)r<<=8,r|=e[a],r>>>=0;return!(r<=127)&&(t.place=a,r)}function Cn(e){for(var t=0,g=e.length-1;!e[t]&&!(128&e[t+1])&&t<g;)t++;return 0===t?e:e.slice(t)}function ln(e,t){if(t<128)e.push(t);else{var g=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|g);--g;)e.push(t>>>(g<<3)&255);e.push(t)}}rn.prototype._importDER=function(e,t){e=Fg.toArray(e,t);var g=new an;if(48!==e[g.place++])return!1;var n=on(e,g);if(!1===n)return!1;if(n+g.place!==e.length)return!1;if(2!==e[g.place++])return!1;var r=on(e,g);if(!1===r)return!1;var I=e.slice(g.place,r+g.place);if(g.place+=r,2!==e[g.place++])return!1;var a=on(e,g);if(!1===a)return!1;if(e.length!==a+g.place)return!1;var o=e.slice(g.place,a+g.place);if(0===I[0]){if(!(128&I[1]))return!1;I=I.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new(wg())(I),this.s=new(wg())(o),this.recoveryParam=null,!0},rn.prototype.toDER=function(e){var t=this.r.toArray(),g=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&g[0]&&(g=[0].concat(g)),t=Cn(t),g=Cn(g);!g[0]&&!(128&g[1]);)g=g.slice(1);var n=[2];ln(n,t.length),(n=n.concat(t)).push(2),ln(n,g.length);var r=n.concat(g),I=[48];return ln(I,r.length),I=I.concat(r),Fg.encode(I,e)};var un=function(){throw new Error("unsupported")},cn=Fg.assert;function sn(e){if(!(this instanceof sn))return new sn(e);"string"===typeof e&&(cn(Object.prototype.hasOwnProperty.call(_g,e),"Unknown curve "+e),e=_g[e]),e instanceof _g.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var An=sn;sn.prototype.keyPair=function(e){return new gn(this,e)},sn.prototype.keyFromPrivate=function(e,t){return gn.fromPrivate(this,e,t)},sn.prototype.keyFromPublic=function(e,t){return gn.fromPublic(this,e,t)},sn.prototype.genKeyPair=function(e){e||(e={});for(var t=new $g({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||un(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),g=this.n.byteLength(),n=this.n.sub(new(wg())(2));;){var r=new(wg())(t.generate(g));if(!(r.cmp(n)>0))return r.iaddn(1),this.keyFromPrivate(r)}},sn.prototype._truncateToN=function(e,t){var g=8*e.byteLength()-this.n.bitLength();return g>0&&(e=e.ushrn(g)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},sn.prototype.sign=function(e,t,g,n){"object"===typeof g&&(n=g,g=null),n||(n={}),t=this.keyFromPrivate(t,g),e=this._truncateToN(new(wg())(e,16));for(var r=this.n.byteLength(),I=t.getPrivate().toArray("be",r),a=e.toArray("be",r),o=new $g({hash:this.hash,entropy:I,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),i=this.n.sub(new(wg())(1)),C=0;;C++){var l=n.k?n.k(C):new(wg())(o.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(i)>=0)){var u=this.g.mul(l);if(!u.isInfinity()){var c=u.getX(),s=c.umod(this.n);if(0!==s.cmpn(0)){var A=l.invm(this.n).mul(s.mul(t.getPrivate()).iadd(e));if(0!==(A=A.umod(this.n)).cmpn(0)){var d=(u.getY().isOdd()?1:0)|(0!==c.cmp(s)?2:0);return n.canonical&&A.cmp(this.nh)>0&&(A=this.n.sub(A),d^=1),new In({r:s,s:A,recoveryParam:d})}}}}}},sn.prototype.verify=function(e,t,g,n){e=this._truncateToN(new(wg())(e,16)),g=this.keyFromPublic(g,n);var r=(t=new In(t,"hex")).r,I=t.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(I.cmpn(1)<0||I.cmp(this.n)>=0)return!1;var a,o=I.invm(this.n),i=o.mul(e).umod(this.n),C=o.mul(r).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(i,g.getPublic(),C)).isInfinity()&&a.eqXToP(r):!(a=this.g.mulAdd(i,g.getPublic(),C)).isInfinity()&&0===a.getX().umod(this.n).cmp(r)},sn.prototype.recoverPubKey=function(e,t,g,n){cn((3&g)===g,"The recovery param is more than two bits"),t=new In(t,n);var r=this.n,I=new(wg())(e),a=t.r,o=t.s,i=1&g,C=g>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&C)throw new Error("Unable to find sencond key candinate");a=C?this.curve.pointFromX(a.add(this.curve.n),i):this.curve.pointFromX(a,i);var l=t.r.invm(r),u=r.sub(I).mul(l).umod(r),c=o.mul(l).umod(r);return this.g.mulAdd(u,a,c)},sn.prototype.getKeyRecoveryParam=function(e,t,g,n){if(null!==(t=new In(t,n)).recoveryParam)return t.recoveryParam;for(var r=0;r<4;r++){var I;try{I=this.recoverPubKey(e,t,r)}catch(e){continue}if(I.eq(g))return r}throw new Error("Unable to find valid recovery factor")};var dn=Jg((function(e,t){var g=t;g.version="6.5.4",g.utils=Fg,g.rand=function(){throw new Error("unsupported")},g.curve=Og,g.curves=_g,g.ec=An,g.eddsa=null})).ec,hn=new He("signing-key/5.7.0"),mn=null;function bn(){return mn||(mn=new dn("secp256k1")),mn}var pn=function(){function e(t){de(this,e),Ke(this,"curve","secp256k1"),Ke(this,"privateKey",dt(t)),32!==ht(this.privateKey)&&hn.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");var g=bn().keyFromPrivate(lt(this.privateKey));Ke(this,"publicKey","0x"+g.getPublic(!1,"hex")),Ke(this,"compressedPublicKey","0x"+g.getPublic(!0,"hex")),Ke(this,"_isSigningKey",!0)}return be(e,[{key:"_addPoint",value:function(e){var t=bn().keyFromPublic(lt(this.publicKey)),g=bn().keyFromPublic(lt(e));return"0x"+t.pub.add(g.pub).encodeCompressed("hex")}},{key:"signDigest",value:function(e){var t=bn().keyFromPrivate(lt(this.privateKey)),g=lt(e);32!==g.length&&hn.throwArgumentError("bad digest length","digest",e);var n=t.sign(g,{canonical:!0});return Zt({recoveryParam:n.recoveryParam,r:ft("0x"+n.r.toString(16),32),s:ft("0x"+n.s.toString(16),32)})}},{key:"computeSharedSecret",value:function(e){var t=bn().keyFromPrivate(lt(this.privateKey)),g=bn().keyFromPublic(lt(fn(e)));return ft("0x"+t.derive(g.getPublic()).toString(16),32)}}],[{key:"isSigningKey",value:function(e){return!(!e||!e._isSigningKey)}}]),e}();function fn(e,t){var g=lt(e);if(32===g.length){var n=new pn(g);return t?"0x"+bn().keyFromPrivate(g).getPublic(!0,"hex"):n.publicKey}return 33===g.length?t?dt(g):"0x"+bn().keyFromPublic(g).getPublic(!1,"hex"):65===g.length?t?"0x"+bn().keyFromPublic(g).getPublic(!0,"hex"):dt(g):hn.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Zn,yn=new He("transactions/5.7.0");function Gn(e){return"0x"===e?null:_t(e)}function Bn(e){return"0x"===e?kg:St.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Zn||(Zn={}));function vn(e,t){return function(e){return _t(mt(Yt(mt(fn(e),1)),12))}(function(e,t){var g=Zt(t),n={r:lt(g.r),s:lt(g.s)};return"0x"+bn().recoverPubKey(lt(e),n,g.recoveryParam).encode("hex",!1)}(lt(e),t))}function kn(e,t){var g=ct(St.from(e).toHexString());return g.length>32&&yn.throwArgumentError("invalid length for "+t,"transaction:"+t,e),g}function Sn(e,t){return{address:_t(e),storageKeys:(t||[]).map((function(t,g){return 32!==ht(t)&&yn.throwArgumentError("invalid access list storageKey","accessList[".concat(e,":").concat(g,"]"),t),t.toLowerCase()}))}}function Wn(e){if(Array.isArray(e))return e.map((function(e,t){return Array.isArray(e)?(e.length>2&&yn.throwArgumentError("access list expected to be [ address, storageKeys[] ]","value[".concat(t,"]"),e),Sn(e[0],e[1])):Sn(e.address,e.storageKeys)}));var t=Object.keys(e).map((function(t){var g=e[t].reduce((function(e,t){return e[t]=!0,e}),{});return Sn(t,Object.keys(g).sort())}));return t.sort((function(e,t){return e.address.localeCompare(t.address)})),t}function Vn(e){return Wn(e).map((function(e){return[e.address,e.storageKeys]}))}function wn(e,t){if(null!=e.gasPrice){var g=St.from(e.gasPrice),n=St.from(e.maxFeePerGas||0);g.eq(n)||yn.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:g,maxFeePerGas:n})}var r=[kn(e.chainId||0,"chainId"),kn(e.nonce||0,"nonce"),kn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),kn(e.maxFeePerGas||0,"maxFeePerGas"),kn(e.gasLimit||0,"gasLimit"),null!=e.to?_t(e.to):"0x",kn(e.value||0,"value"),e.data||"0x",Vn(e.accessList||[])];if(t){var I=Zt(t);r.push(kn(I.recoveryParam,"recoveryParam")),r.push(ct(I.r)),r.push(ct(I.s))}return bt(["0x02",xt(r)])}function Rn(e,t){var g=[kn(e.chainId||0,"chainId"),kn(e.nonce||0,"nonce"),kn(e.gasPrice||0,"gasPrice"),kn(e.gasLimit||0,"gasLimit"),null!=e.to?_t(e.to):"0x",kn(e.value||0,"value"),e.data||"0x",Vn(e.accessList||[])];if(t){var n=Zt(t);g.push(kn(n.recoveryParam,"recoveryParam")),g.push(ct(n.r)),g.push(ct(n.s))}return bt(["0x01",xt(g)])}function Xn(e,t,g){try{var n=Bn(t[0]).toNumber();if(0!==n&&1!==n)throw new Error("bad recid");e.v=n}catch(I){yn.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=ft(t[1],32),e.s=ft(t[2],32);try{var r=Yt(g(e));e.from=vn(r,{r:e.r,s:e.s,recoveryParam:e.v})}catch(I){}}function Jn(e){var t=lt(e);if(t[0]>127)return function(e){var t=Dt(e);9!==t.length&&6!==t.length&&yn.throwArgumentError("invalid raw transaction","rawTransaction",e);var g={nonce:Bn(t[0]).toNumber(),gasPrice:Bn(t[1]),gasLimit:Bn(t[2]),to:Gn(t[3]),value:Bn(t[4]),data:t[5],chainId:0};if(6===t.length)return g;try{g.v=St.from(t[6]).toNumber()}catch(a){return g}if(g.r=ft(t[7],32),g.s=ft(t[8],32),St.from(g.r).isZero()&&St.from(g.s).isZero())g.chainId=g.v,g.v=0;else{g.chainId=Math.floor((g.v-35)/2),g.chainId<0&&(g.chainId=0);var n=g.v-27,r=t.slice(0,6);0!==g.chainId&&(r.push(dt(g.chainId)),r.push("0x"),r.push("0x"),n-=2*g.chainId+8);var I=Yt(xt(r));try{g.from=vn(I,{r:dt(g.r),s:dt(g.s),recoveryParam:n})}catch(a){}g.hash=Yt(e)}return g.type=null,g}(t);switch(t[0]){case 1:return function(e){var t=Dt(e.slice(1));8!==t.length&&11!==t.length&&yn.throwArgumentError("invalid component count for transaction type: 1","payload",dt(e));var g={type:1,chainId:Bn(t[0]).toNumber(),nonce:Bn(t[1]).toNumber(),gasPrice:Bn(t[2]),gasLimit:Bn(t[3]),to:Gn(t[4]),value:Bn(t[5]),data:t[6],accessList:Wn(t[7])};return 8===t.length||(g.hash=Yt(e),Xn(g,t.slice(8),Rn)),g}(t);case 2:return function(e){var t=Dt(e.slice(1));9!==t.length&&12!==t.length&&yn.throwArgumentError("invalid component count for transaction type: 2","payload",dt(e));var g=Bn(t[2]),n=Bn(t[3]),r={type:2,chainId:Bn(t[0]).toNumber(),nonce:Bn(t[1]).toNumber(),maxPriorityFeePerGas:g,maxFeePerGas:n,gasPrice:null,gasLimit:Bn(t[4]),to:Gn(t[5]),value:Bn(t[6]),data:t[7],accessList:Wn(t[8])};return 9===t.length||(r.hash=Yt(e),Xn(r,t.slice(9),wn)),r}(t)}return yn.throwError("unsupported transaction type: ".concat(t[0]),He.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}function Yn(e){e=atob(e);for(var t=[],g=0;g<e.length;g++)t.push(e.charCodeAt(g));return lt(t)}function Hn(e){e=lt(e);for(var t="",g=0;g<e.length;g++)t+=String.fromCharCode(e[g]);return btoa(t)}var Nn=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))};function Fn(e,t){return Nn(this,void 0,void 0,Ce().mark((function g(){var n,r,I,a,o;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return null==t&&(t={}),n={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0},!0!==t.skipFetchSetup&&(n.mode="cors",n.cache="no-cache",n.credentials="same-origin",n.redirect="follow",n.referrer="client"),null!=t.fetchOptions&&((r=t.fetchOptions).mode&&(n.mode=r.mode),r.cache&&(n.cache=r.cache),r.credentials&&(n.credentials=r.credentials),r.redirect&&(n.redirect=r.redirect),r.referrer&&(n.referrer=r.referrer)),g.next=7,fetch(e,n);case 7:return I=g.sent,g.next=10,I.arrayBuffer();case 10:return a=g.sent,o={},I.headers.forEach?I.headers.forEach((function(e,t){o[t.toLowerCase()]=e})):I.headers.keys().forEach((function(e){o[e.toLowerCase()]=I.headers.get(e)})),g.abrupt("return",{headers:o,statusCode:I.status,statusMessage:I.statusText,body:lt(new Uint8Array(a))});case 14:case"end":return g.stop()}}),g)})))}var Kn=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))},xn=new He("web/5.7.1");function En(e){return new Promise((function(t){setTimeout(t,e)}))}function Mn(e,t){if(null==e)return null;if("string"===typeof e)return e;if(ot(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return og(e)}catch(g){}return dt(e)}return e}function Dn(e,t,g){var n=null;if(null!=t){n=ag(t);var r="string"===typeof e?{url:e}:Me(e);if(r.headers)0!==Object.keys(r.headers).filter((function(e){return"content-type"===e.toLowerCase()})).length||(r.headers=Me(r.headers),r.headers["content-type"]="application/json");else r.headers={"content-type":"application/json"};e=r}return function(e,t,g){var n="object"===typeof e&&null!=e.throttleLimit?e.throttleLimit:12;xn.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);var r="object"===typeof e?e.throttleCallback:null,I="object"===typeof e&&"number"===typeof e.throttleSlotInterval?e.throttleSlotInterval:100;xn.assertArgument(I>0&&I%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",I);var a="object"===typeof e&&!!e.errorPassThrough,o={},i=null,C={method:"GET"},l=!1,u=12e4;if("string"===typeof e)i=e;else if("object"===typeof e){if(null!=e&&null!=e.url||xn.throwArgumentError("missing URL","connection.url",e),i=e.url,"number"===typeof e.timeout&&e.timeout>0&&(u=e.timeout),e.headers)for(var c in e.headers)o[c.toLowerCase()]={key:c,value:String(e.headers[c])},["if-none-match","if-modified-since"].indexOf(c.toLowerCase())>=0&&(l=!0);if(C.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==i.substring(0,6)&&!0!==e.allowInsecureAuthentication&&xn.throwError("basic authentication requires a secure https url",He.errors.INVALID_ARGUMENT,{argument:"url",url:i,user:e.user,password:"[REDACTED]"});var s=e.user+":"+e.password;o.authorization={key:"Authorization",value:"Basic "+Hn(ag(s))}}null!=e.skipFetchSetup&&(C.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(C.fetchOptions=Me(e.fetchOptions))}var A,d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),h=i?i.match(d):null;if(h)try{var m={statusCode:200,statusMessage:"OK",headers:{"content-type":h[1]||"text/plain"},body:h[2]?Yn(h[3]):(A=h[3],ag(A.replace(/%([0-9a-f][0-9a-f])/gi,(function(e,t){return String.fromCharCode(parseInt(t,16))}))))},b=m.body;return g&&(b=g(m.body,m)),Promise.resolve(b)}catch(y){xn.throwError("processing response error",He.errors.SERVER_ERROR,{body:Mn(h[1],h[2]),error:y,requestBody:null,requestMethod:"GET",url:i})}t&&(C.method="POST",C.body=t,null==o["content-type"]&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==o["content-length"]&&(o["content-length"]={key:"Content-Length",value:String(t.length)}));var p={};Object.keys(o).forEach((function(e){var t=o[e];p[t.key]=t.value})),C.headers=p;var f=function(){var e=null;return{promise:new Promise((function(t,g){u&&(e=setTimeout((function(){null!=e&&(e=null,g(xn.makeError("timeout",He.errors.TIMEOUT,{requestBody:Mn(C.body,p["content-type"]),requestMethod:C.method,timeout:u,url:i})))}),u))})),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),Z=function(){return Kn(this,void 0,void 0,Ce().mark((function e(){var t,o,u,c,s,A,d,h,m,b;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n)){e.next=65;break}return o=null,e.prev=3,e.next=6,Fn(i,C);case 6:if(o=e.sent,!(t<n)){e.next=28;break}if(301!==o.statusCode&&302!==o.statusCode){e.next=15;break}if(u=o.headers.location||"","GET"!==C.method||!u.match(/^https:/)){e.next=13;break}return i=o.headers.location,e.abrupt("continue",62);case 13:e.next=28;break;case 15:if(429!==o.statusCode){e.next=28;break}if(c=!0,!r){e.next=21;break}return e.next=20,r(t,i);case 20:c=e.sent;case 21:if(!c){e.next=28;break}return s=0,A=o.headers["retry-after"],s="string"===typeof A&&A.match(/^[1-9][0-9]*$/)?1e3*parseInt(A):I*parseInt(String(Math.random()*Math.pow(2,t))),e.next=27,En(s);case 27:return e.abrupt("continue",62);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(3),null==(o=e.t0.response)&&(f.cancel(),xn.throwError("missing response",He.errors.SERVER_ERROR,{requestBody:Mn(C.body,p["content-type"]),requestMethod:C.method,serverError:e.t0,url:i}));case 34:if(d=o.body,l&&304===o.statusCode?d=null:!a&&(o.statusCode<200||o.statusCode>=300)&&(f.cancel(),xn.throwError("bad response",He.errors.SERVER_ERROR,{status:o.statusCode,headers:o.headers,body:Mn(d,o.headers?o.headers["content-type"]:null),requestBody:Mn(C.body,p["content-type"]),requestMethod:C.method,url:i})),!g){e.next=60;break}return e.prev=37,e.next=40,g(d,o);case 40:return h=e.sent,f.cancel(),e.abrupt("return",h);case 45:if(e.prev=45,e.t1=e.catch(37),!(e.t1.throttleRetry&&t<n)){e.next=58;break}if(m=!0,!r){e.next=53;break}return e.next=52,r(t,i);case 52:m=e.sent;case 53:if(!m){e.next=58;break}return b=I*parseInt(String(Math.random()*Math.pow(2,t))),e.next=57,En(b);case 57:return e.abrupt("continue",62);case 58:f.cancel(),xn.throwError("processing response error",He.errors.SERVER_ERROR,{body:Mn(d,o.headers?o.headers["content-type"]:null),error:e.t1,requestBody:Mn(C.body,p["content-type"]),requestMethod:C.method,url:i});case 60:return f.cancel(),e.abrupt("return",d);case 62:t++,e.next=1;break;case 65:return e.abrupt("return",xn.throwError("failed response",He.errors.SERVER_ERROR,{requestBody:Mn(C.body,p["content-type"]),requestMethod:C.method,url:i}));case 66:case"end":return e.stop()}}),e,null,[[3,30],[37,45]])})))}();return Promise.race([f.promise,Z])}(e,n,(function(e,t){var n=null;if(null!=e)try{n=JSON.parse(og(e))}catch(r){xn.throwError("invalid JSON",He.errors.SERVER_ERROR,{body:e,error:r})}return g&&(n=g(n,t)),n}))}function Un(e,t){return t||(t={}),null==(t=Me(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise((function(g,n){var r=null,I=!1,a=function(){return!I&&(I=!0,r&&clearTimeout(r),!0)};t.timeout&&(r=setTimeout((function(){a()&&n(new Error("timeout"))}),t.timeout));var o=t.retryLimit,i=0;!function r(){return e().then((function(e){if(void 0!==e)a()&&g(e);else if(t.oncePoll)t.oncePoll.once("poll",r);else if(t.onceBlock)t.onceBlock.once("block",r);else if(!I){if(++i>o)return void(a()&&n(new Error("retry limit reached")));var C=t.interval*parseInt(String(Math.random()*Math.pow(2,i)));C<t.floor&&(C=t.floor),C>t.ceiling&&(C=t.ceiling),setTimeout(r,C)}return null}),(function(e){a()&&n(e)}))}()}))}var zn=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))},Ln=new He("abstract-provider/5.7.0"),Qn=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g,null,[{key:"isForkEvent",value:function(e){return!(!e||!e._isForkEvent)}}]),g}(Qe),Tn=function(){function e(){de(this,e),Ln.checkAbstract(this instanceof e?this.constructor:void 0,e),Ke(this,"_isProvider",!0)}return be(e,[{key:"getFeeData",value:function(){return zn(this,void 0,void 0,Ce().mark((function e(){var t,g,n,r,I,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((function(e){return null}))});case 2:return t=e.sent,g=t.block,n=t.gasPrice,r=null,I=null,a=null,g&&g.baseFeePerGas&&(r=g.baseFeePerGas,a=St.from("1500000000"),I=g.baseFeePerGas.mul(2).add(a)),e.abrupt("return",{lastBaseFeePerGas:r,maxFeePerGas:I,maxPriorityFeePerGas:a,gasPrice:n});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"addListener",value:function(e,t){return this.on(e,t)}},{key:"removeListener",value:function(e,t){return this.off(e,t)}}],[{key:"isProvider",value:function(e){return!(!e||!e._isProvider)}}]),e}(),jn=function(){function e(t){de(this,e),Ke(this,"alphabet",t),Ke(this,"base",t.length),Ke(this,"_alphabetMap",{}),Ke(this,"_leader",t.charAt(0));for(var g=0;g<t.length;g++)this._alphabetMap[t.charAt(g)]=g}return be(e,[{key:"encode",value:function(e){var t=lt(e);if(0===t.length)return"";for(var g=[0],n=0;n<t.length;++n){for(var r=t[n],I=0;I<g.length;++I)r+=g[I]<<8,g[I]=r%this.base,r=r/this.base|0;for(;r>0;)g.push(r%this.base),r=r/this.base|0}for(var a="",o=0;0===t[o]&&o<t.length-1;++o)a+=this._leader;for(var i=g.length-1;i>=0;--i)a+=this.alphabet[g[i]];return a}},{key:"decode",value:function(e){if("string"!==typeof e)throw new TypeError("Expected String");var t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(var g=0;g<e.length;g++){var n=this._alphabetMap[e[g]];if(void 0===n)throw new Error("Non-base"+this.base+" character");for(var r=n,I=0;I<t.length;++I)r+=t[I]*this.base,t[I]=255&r,r>>=8;for(;r>0;)t.push(255&r),r>>=8}for(var a=0;e[a]===this._leader&&a<e.length-1;++a)t.push(0);return lt(new Uint8Array(t.reverse()))}}]),e}(),Pn=(new jn("abcdefghijklmnopqrstuvwxyz234567"),new jn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"));function On(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){var g="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!g){if(Array.isArray(e)||(g=se(e))||t&&e&&"number"===typeof e.length){g&&(e=g);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var I,a=!0,o=!1;return{s:function(){g=g.call(e)},n:function(){var e=g.next();return a=e.done,e},e:function(e){o=!0,I=e},f:function(){try{a||null==g.return||g.return()}finally{if(o)throw I}}}}function qn(e,t){null==t&&(t=1);var g=[],n=g.forEach;return function e(t,r){n.call(t,(function(t){r>0&&Array.isArray(t)?e(t,r-1):g.push(t)}))}(e,t),g}function $n(e){return function(e){var t=0;return function(){return e[t++]}}(function(e){var t=0;function g(){return e[t++]<<8|e[t++]}for(var n=g(),r=1,I=[0,1],a=1;a<n;a++)I.push(r+=g());var o=g(),i=t;t+=o;var C=0,l=0;function u(){return 0==C&&(l=l<<8|e[t++],C=8),l>>--C&1}for(var c=Math.pow(2,31),s=c>>>1,A=s>>1,d=c-1,h=0,m=0;m<31;m++)h=h<<1|u();for(var b=[],p=0,f=c;;){for(var Z=Math.floor(((h-p+1)*r-1)/f),y=0,G=n;G-y>1;){var B=y+G>>>1;Z<I[B]?G=B:y=B}if(0==y)break;b.push(y);for(var v=p+Math.floor(f*I[y]/r),k=p+Math.floor(f*I[y+1]/r)-1;0==((v^k)&s);)h=h<<1&d|u(),v=v<<1&d,k=k<<1&d|1;for(;v&~k&A;)h=h&s|h<<1&d>>>1|u(),v=v<<1^s,k=(k^s)<<1|s|1;p=v,f=1+k-v}var S=n-4;return b.map((function(t){switch(t-S){case 3:return S+65792+(e[i++]<<16|e[i++]<<8|e[i++]);case 2:return S+256+(e[i++]<<8|e[i++]);case 1:return S+e[i++];default:return t-1}}))}(e))}function er(e){return 1&e?~e>>1:e>>1}function tr(e,t){for(var g=Array(e),n=0,r=-1;n<e;n++)g[n]=r+=1+t();return g}function gr(e,t){for(var g=Array(e),n=0,r=0;n<e;n++)g[n]=r+=er(t());return g}function nr(e,t){for(var g=tr(e(),e),n=e(),r=tr(n,e),I=function(e,t){for(var g=Array(e),n=0;n<e;n++)g[n]=1+t();return g}(n,e),a=0;a<n;a++)for(var o=0;o<I[a];o++)g.push(r[a]+o);return t?g.map((function(e){return t[e]})):g}function rr(e,t,g){for(var n=Array(e).fill(void 0).map((function(){return[]})),r=0;r<t;r++)gr(e,g).forEach((function(e,t){return n[t].push(e)}));return n}function Ir(e,t){var g=1+t(),n=t(),r=function(e){for(var t=[];;){var g=e();if(0==g)break;t.push(g)}return t}(t);return qn(rr(r.length,1+e,t).map((function(e,t){var I=e[0],a=e.slice(1);return Array(r[t]).fill(void 0).map((function(e,t){var r=t*n;return[I+t*g,a.map((function(e){return e+r}))]}))})))}function ar(e,t){return rr(1+t(),1+e,t).map((function(e){return[e[0],e.slice(1)]}))}var or=$n(Yn("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),ir=new Set(nr(or)),Cr=new Set(nr(or)),lr=function(e){for(var t=[];;){var g=e();if(0==g)break;t.push(Ir(g,e))}for(;;){var n=e()-1;if(n<0)break;t.push(ar(n,e))}return function(e){for(var t={},g=0;g<e.length;g++){var n=e[g];t[n[0]]=n[1]}return t}(qn(t))}(or),ur=function(e){var t=nr(e).sort((function(e,t){return e-t}));return function g(){var n=[];for(;;){var r=nr(e,t);if(0==r.length)break;n.push({set:new Set(r),node:g()})}n.sort((function(e,t){return t.set.size-e.set.size}));var I=e();return{branches:n,valid:I%3,fe0f:!!(1&(I=I/3|0)),save:1==(I>>=1),check:2==I}}()}(or);function cr(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t.current;return Ig(ag(e,t))}(e)}function sr(e){return e.filter((function(e){return 65039!=e}))}function Ar(e){var t,g=_n(e.split("."));try{for(g.s();!(t=g.n()).done;){var n=t.value,r=cr(n);try{for(var I=r.lastIndexOf(95)-1;I>=0;I--)if(95!==r[I])throw new Error("underscore only allowed at start");if(r.length>=4&&r.every((function(e){return e<128}))&&45===r[2]&&45===r[3])throw new Error("invalid label extension")}catch(a){throw new Error('Invalid label "'.concat(n,'": ').concat(a.message))}}}catch(a){g.e(a)}finally{g.f()}return e}function dr(e){return Ar(function(e,t){var g=cr(e).reverse(),n=[];for(;g.length;){var r=hr(g);if(r)n.push.apply(n,On(t(r)));else{var I=g.pop();if(ir.has(I))n.push(I);else if(!Cr.has(I)){var a=lr[I];if(!a)throw new Error("Disallowed codepoint: 0x".concat(I.toString(16).toUpperCase()));n.push.apply(n,On(a))}}}return Ar((o=String.fromCodePoint.apply(String,n),o.normalize("NFC")));var o}(e,sr))}function hr(e,t){var g,n,r,I=ur,a=[],o=e.length;t&&(t.length=0);for(var i=function(){var i=e[--o];if(I=null===(g=I.branches.find((function(e){return e.set.has(i)})))||void 0===g?void 0:g.node,!I)return"break";if(I.save)r=i;else if(I.check&&i===r)return"break";a.push(i),I.fe0f&&(a.push(65039),o>0&&65039==e[o-1]&&o--),I.valid&&(n=a.slice(),2==I.valid&&n.splice(1,1),t&&t.push.apply(t,On(e.slice(o).reverse())),e.length=o)};o;){if("break"===i())break}return n}var mr=new He(tg),br=new Uint8Array(32);function pr(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function fr(e){var t=ag(dr(e)),g=[];if(0===e.length)return g;for(var n=0,r=0;r<t.length;r++){46===t[r]&&(g.push(pr(t.slice(n,r))),n=r+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return g.push(pr(t.slice(n))),g}function Zr(e){"string"!==typeof e&&mr.throwArgumentError("invalid ENS name; not a string","name",e);for(var t=br,g=fr(e);g.length;)t=Yt(ut([t,Yt(g.pop())]));return dt(t)}br.fill(0);var yr=new He("networks/5.7.1");function Gr(e){var t=function(t,g){null==g&&(g={});var n=[];if(t.InfuraProvider&&"-"!==g.infura)try{n.push(new t.InfuraProvider(e,g.infura))}catch(o){}if(t.EtherscanProvider&&"-"!==g.etherscan)try{n.push(new t.EtherscanProvider(e,g.etherscan))}catch(o){}if(t.AlchemyProvider&&"-"!==g.alchemy)try{n.push(new t.AlchemyProvider(e,g.alchemy))}catch(o){}if(t.PocketProvider&&"-"!==g.pocket){try{var r=new t.PocketProvider(e,g.pocket);r.network&&-1===["goerli","ropsten","rinkeby","sepolia"].indexOf(r.network.name)&&n.push(r)}catch(o){}}if(t.CloudflareProvider&&"-"!==g.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(o){}if(t.AnkrProvider&&"-"!==g.ankr)try{var I=new t.AnkrProvider(e,g.ankr);I.network&&-1===["ropsten"].indexOf(I.network.name)&&n.push(I)}catch(o){}if(0===n.length)return null;if(t.FallbackProvider){var a=1;return null!=g.quorum?a=g.quorum:"homestead"===e&&(a=2),new t.FallbackProvider(n,a)}return n[0]};return t.renetwork=function(e){return Gr(e)},t}function Br(e,t){var g=function(g,n){return g.JsonRpcProvider?new g.JsonRpcProvider(e,t):null};return g.renetwork=function(t){return Br(e,t)},g}var vr={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Gr("homestead")},kr={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Gr("ropsten")},Sr={chainId:63,name:"classicMordor",_defaultProvider:Br("https://www.ethercluster.com/mordor","classicMordor")},Wr={unspecified:{chainId:0,name:"unspecified"},homestead:vr,mainnet:vr,morden:{chainId:2,name:"morden"},ropsten:kr,testnet:kr,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Gr("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Gr("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Gr("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Gr("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Br("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Sr,classicTestnet:Sr,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Br("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Gr("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Gr("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};new He("sha2/5.7.0");function Vr(e){return"0x"+Xg().sha256().update(lt(e)).digest("hex")}var wr=__webpack_require__(8334),Rr=__webpack_require__.n(wr),Xr=new He(Te),Jr=function(){function e(){de(this,e),this.formats=this.getDefaultFormats()}return be(e,[{key:"getDefaultFormats",value:function(){var t=this,g={},n=this.address.bind(this),r=this.bigNumber.bind(this),I=this.blockTag.bind(this),a=this.data.bind(this),o=this.hash.bind(this),i=this.hex.bind(this),C=this.number.bind(this),l=this.type.bind(this);return g.transaction={hash:o,type:l,accessList:e.allowNull(this.accessList.bind(this),null),blockHash:e.allowNull(o,null),blockNumber:e.allowNull(C,null),transactionIndex:e.allowNull(C,null),confirmations:e.allowNull(C,null),from:n,gasPrice:e.allowNull(r),maxPriorityFeePerGas:e.allowNull(r),maxFeePerGas:e.allowNull(r),gasLimit:r,to:e.allowNull(n,null),value:r,nonce:C,data:a,r:e.allowNull(this.uint256),s:e.allowNull(this.uint256),v:e.allowNull(C),creates:e.allowNull(n,null),raw:e.allowNull(a)},g.transactionRequest={from:e.allowNull(n),nonce:e.allowNull(C),gasLimit:e.allowNull(r),gasPrice:e.allowNull(r),maxPriorityFeePerGas:e.allowNull(r),maxFeePerGas:e.allowNull(r),to:e.allowNull(n),value:e.allowNull(r),data:e.allowNull((function(e){return t.data(e,!0)})),type:e.allowNull(C),accessList:e.allowNull(this.accessList.bind(this),null)},g.receiptLog={transactionIndex:C,blockNumber:C,transactionHash:o,address:n,topics:e.arrayOf(o),data:a,logIndex:C,blockHash:o},g.receipt={to:e.allowNull(this.address,null),from:e.allowNull(this.address,null),contractAddress:e.allowNull(n,null),transactionIndex:C,root:e.allowNull(i),gasUsed:r,logsBloom:e.allowNull(a),blockHash:o,transactionHash:o,logs:e.arrayOf(this.receiptLog.bind(this)),blockNumber:C,confirmations:e.allowNull(C,null),cumulativeGasUsed:r,effectiveGasPrice:e.allowNull(r),status:e.allowNull(C),type:l},g.block={hash:e.allowNull(o),parentHash:o,number:C,timestamp:C,nonce:e.allowNull(i),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:e.allowNull(n),extraData:a,transactions:e.allowNull(e.arrayOf(o)),baseFeePerGas:e.allowNull(r)},g.blockWithTransactions=Me(g.block),g.blockWithTransactions.transactions=e.allowNull(e.arrayOf(this.transactionResponse.bind(this))),g.filter={fromBlock:e.allowNull(I,void 0),toBlock:e.allowNull(I,void 0),blockHash:e.allowNull(o,void 0),address:e.allowNull(n,void 0),topics:e.allowNull(this.topics.bind(this),void 0)},g.filterLog={blockNumber:e.allowNull(C),blockHash:e.allowNull(o),transactionIndex:C,removed:e.allowNull(this.boolean.bind(this)),address:n,data:e.allowFalsish(a,"0x"),topics:e.arrayOf(o),transactionHash:o,logIndex:C},g}},{key:"accessList",value:function(e){return Wn(e||[])}},{key:"number",value:function(e){return"0x"===e?0:St.from(e).toNumber()}},{key:"type",value:function(e){return"0x"===e||null==e?0:St.from(e).toNumber()}},{key:"bigNumber",value:function(e){return St.from(e)}},{key:"boolean",value:function(e){if("boolean"===typeof e)return e;if("string"===typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}},{key:"hex",value:function(e,t){return"string"===typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),st(e))?e.toLowerCase():Xr.throwArgumentError("invalid hash","value",e)}},{key:"data",value:function(e,t){var g=this.hex(e,t);if(g.length%2!==0)throw new Error("invalid data; odd-length - "+e);return g}},{key:"address",value:function(e){return _t(e)}},{key:"callAddress",value:function(e){if(!st(e,32))return null;var t=_t(mt(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t}},{key:"contractAddress",value:function(e){return qt(e)}},{key:"blockTag",value:function(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"===typeof e||st(e))return pt(e);throw new Error("invalid blockTag")}},{key:"hash",value:function(e,t){var g=this.hex(e,t);return 32!==ht(g)?Xr.throwArgumentError("invalid hash","value",e):g}},{key:"difficulty",value:function(e){if(null==e)return null;var t=St.from(e);try{return t.toNumber()}catch(g){}return null}},{key:"uint256",value:function(e){if(!st(e))throw new Error("invalid uint256");return ft(e,32)}},{key:"_block",value:function(t,g){null!=t.author&&null==t.miner&&(t.miner=t.author);var n=null!=t._difficulty?t._difficulty:t.difficulty,r=e.check(g,t);return r._difficulty=null==n?null:St.from(n),r}},{key:"block",value:function(e){return this._block(e,this.formats.block)}},{key:"blockWithTransactions",value:function(e){return this._block(e,this.formats.blockWithTransactions)}},{key:"transactionRequest",value:function(t){return e.check(this.formats.transactionRequest,t)}},{key:"transactionResponse",value:function(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&St.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);var g=e.check(this.formats.transaction,t);if(null!=t.chainId){var n=t.chainId;st(n)&&(n=St.from(n).toNumber()),g.chainId=n}else{var r=t.networkId;null==r&&null==g.v&&(r=t.chainId),st(r)&&(r=St.from(r).toNumber()),"number"!==typeof r&&null!=g.v&&((r=(g.v-35)/2)<0&&(r=0),r=parseInt(r)),"number"!==typeof r&&(r=0),g.chainId=r}return g.blockHash&&"x"===g.blockHash.replace(/0/g,"")&&(g.blockHash=null),g}},{key:"transaction",value:function(e){return Jn(e)}},{key:"receiptLog",value:function(t){return e.check(this.formats.receiptLog,t)}},{key:"receipt",value:function(t){var g=e.check(this.formats.receipt,t);if(null!=g.root)if(g.root.length<=4){var n=St.from(g.root).toNumber();0===n||1===n?(null!=g.status&&g.status!==n&&Xr.throwArgumentError("alt-root-status/status mismatch","value",{root:g.root,status:g.status}),g.status=n,delete g.root):Xr.throwArgumentError("invalid alt-root-status","value.root",g.root)}else 66!==g.root.length&&Xr.throwArgumentError("invalid root hash","value.root",g.root);return null!=g.status&&(g.byzantium=!0),g}},{key:"topics",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.topics(e)})):null!=e?this.hash(e,!0):null}},{key:"filter",value:function(t){return e.check(this.formats.filter,t)}},{key:"filterLog",value:function(t){return e.check(this.formats.filterLog,t)}}],[{key:"check",value:function(e,t){var g={};for(var n in e)try{var r=e[n](t[n]);void 0!==r&&(g[n]=r)}catch(I){throw I.checkKey=n,I.checkValue=t[n],I}return g}},{key:"allowNull",value:function(e,t){return function(g){return null==g?t:e(g)}}},{key:"allowFalsish",value:function(e,t){return function(g){return g?e(g):t}}},{key:"arrayOf",value:function(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");var g=[];return t.forEach((function(t){g.push(e(t))})),g}}}]),e}();var Yr=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))},Hr=new He(Te);function Nr(e){return null==e?"null":(32!==ht(e)&&Hr.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function Fr(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map((function(e){if(Array.isArray(e)){var t={};e.forEach((function(e){t[Nr(e)]=!0}));var g=Object.keys(t);return g.sort(),g.join("|")}return Nr(e)})).join("&")}function Kr(e){if("string"===typeof e){if(32===ht(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+Fr(e);if(Qn.isForkEvent(e))throw Hr.warn("not implemented"),new Error("not implemented");if(e&&"object"===typeof e)return"filter:"+(e.address||"*")+":"+Fr(e.topics||[])}throw new Error("invalid event - "+e)}function xr(){return(new Date).getTime()}function Er(e){return new Promise((function(t){setTimeout(t,e)}))}var Mr=["block","network","pending","poll"],Dr=function(){function e(t,g,n){de(this,e),Ke(this,"tag",t),Ke(this,"listener",g),Ke(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}return be(e,[{key:"event",get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}},{key:"type",get:function(){return this.tag.split(":")[0]}},{key:"hash",get:function(){var e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}},{key:"filter",get:function(){var e=this.tag.split(":");if("filter"!==e[0])return null;var t,g=e[1],n=""===(t=e[2])?[]:t.split(/&/g).map((function(e){if(""===e)return[];var t=e.split("|").map((function(e){return"null"===e?null:e}));return 1===t.length?t[0]:t})),r={};return n.length>0&&(r.topics=n),g&&"*"!==g&&(r.address=g),r}},{key:"pollable",value:function(){return this.tag.indexOf(":")>=0||Mr.indexOf(this.tag)>=0}}]),e}(),Ur={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function zr(e){return ft(St.from(e).toHexString(),32)}function Lr(e){return Pn.encode(ut([e,mt(Vr(Vr(e)),0,4)]))}var Qr=new RegExp("^(ipfs)://(.*)$","i"),Tr=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Qr,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function jr(e,t){try{return og(Pr(e,t))}catch(g){}return null}function Pr(e,t){if("0x"===e)return null;var g=St.from(mt(e,t,t+32)).toNumber(),n=St.from(mt(e,g,g+32)).toNumber();return mt(e,g+32,g+32+n)}function Or(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Hr.throwArgumentError("unsupported IPFS format","link",e),"https://gateway.ipfs.io/ipfs/".concat(e)}function _r(e){var t=lt(e);if(t.length>32)throw new Error("internal; should not happen");var g=new Uint8Array(32);return g.set(t,32-t.length),g}function qr(e){if(e.length%32===0)return e;var t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function $r(e){for(var t=[],g=0,n=0;n<e.length;n++)t.push(null),g+=32;for(var r=0;r<e.length;r++){var I=lt(e[r]);t[r]=_r(g),t.push(_r(I.length)),t.push(qr(I)),g+=32+32*Math.ceil(I.length/32)}return bt(t)}var eI=function(){function e(t,g,n,r){de(this,e),Ke(this,"provider",t),Ke(this,"name",n),Ke(this,"address",t.formatter.address(g)),Ke(this,"_resolvedAddress",r)}return be(e,[{key:"supportsWildcard",value:function(){var e=this;return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((function(e){return St.from(e).eq(1)})).catch((function(t){if(t.code===He.errors.CALL_EXCEPTION)return!1;throw e._supportsEip2544=null,t}))),this._supportsEip2544}},{key:"_fetch",value:function(e,t){return Yr(this,void 0,void 0,Ce().mark((function g(){var n,r,I;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return n={to:this.address,ccipReadEnabled:!0,data:bt([e,Zr(this.name),t||"0x"])},r=!1,g.next=4,this.supportsWildcard();case 4:if(!g.sent){g.next=7;break}r=!0,n.data=bt(["0x9061b923",$r([(a=this.name,dt(ut(fr(a).map((function(e){if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");var t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"),n.data])]);case 7:return g.prev=7,g.next=10,this.provider.call(n);case 10:return lt(I=g.sent).length%32===4&&Hr.throwError("resolver threw error",He.errors.CALL_EXCEPTION,{transaction:n,data:I}),r&&(I=Pr(I,0)),g.abrupt("return",I);case 16:if(g.prev=16,g.t0=g.catch(7),g.t0.code!==He.errors.CALL_EXCEPTION){g.next=20;break}return g.abrupt("return",null);case 20:throw g.t0;case 21:case"end":return g.stop()}var a}),g,this,[[7,16]])})))}},{key:"_fetchBytes",value:function(e,t){return Yr(this,void 0,void 0,Ce().mark((function g(){var n;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this._fetch(e,t);case 2:if(null==(n=g.sent)){g.next=5;break}return g.abrupt("return",Pr(n,0));case 5:return g.abrupt("return",null);case 6:case"end":return g.stop()}}),g,this)})))}},{key:"_getAddress",value:function(e,t){var g=Ur[String(e)];if(null==g&&Hr.throwError("unsupported coin type: ".concat(e),He.errors.UNSUPPORTED_OPERATION,{operation:"getAddress(".concat(e,")")}),"eth"===g.ilk)return this.provider.formatter.address(t);var n=lt(t);if(null!=g.p2pkh){var r=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(r){var I=parseInt(r[1],16);if(r[2].length===2*I&&I>=1&&I<=75)return Lr(ut([[g.p2pkh],"0x"+r[2]]))}}if(null!=g.p2sh){var a=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(a){var o=parseInt(a[1],16);if(a[2].length===2*o&&o>=1&&o<=75)return Lr(ut([[g.p2sh],"0x"+a[2]]))}}if(null!=g.prefix){var i=n[1],C=n[0];if(0===C?20!==i&&32!==i&&(C=-1):C=-1,C>=0&&n.length===2+i&&i>=1&&i<=75){var l=Rr().toWords(n.slice(2));return l.unshift(C),Rr().encode(g.prefix,l)}}return null}},{key:"getAddress",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n,r;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e&&(e=60),60!==e){t.next=16;break}return t.prev=2,t.next=5,this._fetch("0x3b3b57de");case 5:if("0x"!==(g=t.sent)&&"0x0000000000000000000000000000000000000000000000000000000000000000"!==g){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",this.provider.formatter.callAddress(g));case 11:if(t.prev=11,t.t0=t.catch(2),t.t0.code!==He.errors.CALL_EXCEPTION){t.next=15;break}return t.abrupt("return",null);case 15:throw t.t0;case 16:return t.next=18,this._fetchBytes("0xf1cb7e06",zr(e));case 18:if(null!=(n=t.sent)&&"0x"!==n){t.next=21;break}return t.abrupt("return",null);case 21:return null==(r=this._getAddress(e,n))&&Hr.throwError("invalid or unsupported coin data",He.errors.UNSUPPORTED_OPERATION,{operation:"getAddress(".concat(e,")"),coinType:e,data:n}),t.abrupt("return",r);case 24:case"end":return t.stop()}}),t,this,[[2,11]])})))}},{key:"getAvatar",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){var t,g,n,r,I,a,o,i,C,l,u,c,s,A,d,h;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{type:"name",content:this.name}],e.prev=1,e.next=4,this.getText("avatar");case 4:if(null!=(g=e.sent)){e.next=7;break}return e.abrupt("return",null);case 7:n=0;case 8:if(!(n<Tr.length)){e.next=91;break}if(null!=(r=g.match(Tr[n]))){e.next=12;break}return e.abrupt("continue",88);case 12:I=r[1].toLowerCase(),e.t0=I,e.next="https"===e.t0?16:"data"===e.t0?18:"ipfs"===e.t0?20:"erc721"===e.t0||"erc1155"===e.t0?22:88;break;case 16:return t.push({type:"url",content:g}),e.abrupt("return",{linkage:t,url:g});case 18:return t.push({type:"data",content:g}),e.abrupt("return",{linkage:t,url:g});case 20:return t.push({type:"ipfs",content:g}),e.abrupt("return",{linkage:t,url:Or(g)});case 22:if(a="erc721"===I?"0xc87b56dd":"0x0e89341c",t.push({type:I,content:g}),e.t1=this._resolvedAddress,e.t1){e.next=29;break}return e.next=28,this.getAddress();case 28:e.t1=e.sent;case 29:if(o=e.t1,2===(i=(r[2]||"").split("/")).length){e.next=33;break}return e.abrupt("return",null);case 33:return e.next=35,this.provider.formatter.address(i[0]);case 35:if(C=e.sent,l=ft(St.from(i[1]).toHexString(),32),"erc721"!==I){e.next=48;break}return e.t2=this.provider.formatter,e.next=41,this.provider.call({to:C,data:bt(["0x6352211e",l])});case 41:if(e.t3=e.sent,u=e.t2.callAddress.call(e.t2,e.t3),o===u){e.next=45;break}return e.abrupt("return",null);case 45:t.push({type:"owner",content:u}),e.next=57;break;case 48:if("erc1155"!==I){e.next=57;break}return e.t4=St,e.next=52,this.provider.call({to:C,data:bt(["0x00fdd58e",ft(o,32),l])});case 52:if(e.t5=e.sent,!(c=e.t4.from.call(e.t4,e.t5)).isZero()){e.next=56;break}return e.abrupt("return",null);case 56:t.push({type:"balance",content:c.toString()});case 57:return s={to:this.provider.formatter.address(i[0]),data:bt([a,l])},e.t6=jr,e.next=61,this.provider.call(s);case 61:if(e.t7=e.sent,null!=(A=(0,e.t6)(e.t7,0))){e.next=65;break}return e.abrupt("return",null);case 65:return t.push({type:"metadata-url-base",content:A}),"erc1155"===I&&(A=A.replace("{id}",l.substring(2)),t.push({type:"metadata-url-expanded",content:A})),A.match(/^ipfs:/i)&&(A=Or(A)),t.push({type:"metadata-url",content:A}),e.next=71,Dn(A);case 71:if(d=e.sent){e.next=74;break}return e.abrupt("return",null);case 74:if(t.push({type:"metadata",content:JSON.stringify(d)}),"string"===typeof(h=d.image)){e.next=78;break}return e.abrupt("return",null);case 78:if(!h.match(/^(https:\/\/|data:)/i)){e.next=81;break}e.next=86;break;case 81:if(null!=h.match(Qr)){e.next=84;break}return e.abrupt("return",null);case 84:t.push({type:"url-ipfs",content:h}),h=Or(h);case 86:return t.push({type:"url",content:h}),e.abrupt("return",{linkage:t,url:h});case 88:n++,e.next=8;break;case 91:e.next=95;break;case 93:e.prev=93,e.t8=e.catch(1);case 95:return e.abrupt("return",null);case 96:case"end":return e.stop()}}),e,this,[[1,93]])})))}},{key:"getContentHash",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){var t,g,n,r,I,a,o,i,C;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchBytes("0xbc1c58d1");case 2:if(null!=(t=e.sent)&&"0x"!==t){e.next=5;break}return e.abrupt("return",null);case 5:if(!(g=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))){e.next=10;break}if(n=parseInt(g[3],16),g[4].length!==2*n){e.next=10;break}return e.abrupt("return","ipfs://"+Pn.encode("0x"+g[1]));case 10:if(!(r=t.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))){e.next=15;break}if(I=parseInt(r[3],16),r[4].length!==2*I){e.next=15;break}return e.abrupt("return","ipns://"+Pn.encode("0x"+r[1]));case 15:if(!(a=t.match(/^0xe40101fa011b20([0-9a-f]*)$/))){e.next=19;break}if(64!==a[1].length){e.next=19;break}return e.abrupt("return","bzz://"+a[1]);case 19:if(!(o=t.match(/^0x90b2c605([0-9a-f]*)$/))){e.next=25;break}if(68!==o[1].length){e.next=25;break}return i={"=":"","+":"-","/":"_"},C=Hn("0x"+o[1]).replace(/[=+\/]/g,(function(e){return i[e]})),e.abrupt("return","sia://"+C);case 25:return e.abrupt("return",Hr.throwError("invalid or unsupported content hash data",He.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t}));case 26:case"end":return e.stop()}}),e,this)})))}},{key:"getText",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=ag(e),(g=ut([zr(64),zr(g.length),g])).length%32!==0&&(g=ut([g,ft("0x",32-e.length%32)])),t.next=5,this._fetchBytes("0x59d1d43c",dt(g));case 5:if(null!=(n=t.sent)&&"0x"!==n){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",og(n));case 9:case"end":return t.stop()}}),t,this)})))}}]),e}(),tI=null,gI=1,nI=function(e){Ze(g,e);var t=ve(g);function g(e){var n;if(de(this,g),(n=t.call(this))._events=[],n._emitted={block:-2},n.disableCcipRead=!1,n.formatter=(this instanceof g?this.constructor:void 0).getFormatter(),Ke(pe(n),"anyNetwork","any"===e),n.anyNetwork&&(e=n.detectNetwork()),e instanceof Promise)n._networkPromise=e,e.catch((function(e){})),n._ready().catch((function(e){}));else{var r=xe(this instanceof g?this.constructor:void 0,"getNetwork")(e);r?(Ke(pe(n),"_network",r),n.emit("network",r,null)):Hr.throwArgumentError("invalid network","network",e)}return n._maxInternalBlockNumber=-1024,n._lastBlockNumber=-2,n._maxFilterBlockRange=10,n._pollingInterval=4e3,n._fastQueryDate=0,n}return be(g,[{key:"_ready",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._network){e.next=17;break}if(t=null,!this._networkPromise){e.next=11;break}return e.prev=3,e.next=6,this._networkPromise;case 6:t=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:if(null!=t){e.next=15;break}return e.next=14,this.detectNetwork();case 14:t=e.sent;case 15:t||Hr.throwError("no network detected",He.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:Ke(this,"_network",t),this.emit("network",t,null));case 17:return e.abrupt("return",this._network);case 18:case"end":return e.stop()}}),e,this,[[3,9]])})))}},{key:"ready",get:function(){var e=this;return Un((function(){return e._ready().then((function(e){return e}),(function(e){if(e.code!==He.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}))}},{key:"ccipReadFetch",value:function(e,t,g){return Yr(this,void 0,void 0,Ce().mark((function n(){var r,I,a,o,i,C,l,u,c;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.disableCcipRead&&0!==g.length){n.next=2;break}return n.abrupt("return",null);case 2:r=e.to.toLowerCase(),I=t.toLowerCase(),a=[],o=0;case 6:if(!(o<g.length)){n.next=22;break}return i=g[o],C=i.replace("{sender}",r).replace("{data}",I),l=i.indexOf("{data}")>=0?null:JSON.stringify({data:I,sender:r}),n.next=12,Dn({url:C,errorPassThrough:!0},l,(function(e,t){return e.status=t.statusCode,e}));case 12:if(!(u=n.sent).data){n.next=15;break}return n.abrupt("return",u.data);case 15:if(c=u.message||"unknown error",!(u.status>=400&&u.status<500)){n.next=18;break}return n.abrupt("return",Hr.throwError("response not found during CCIP fetch: ".concat(c),He.errors.SERVER_ERROR,{url:i,errorMessage:c}));case 18:a.push(c);case 19:o++,n.next=6;break;case 22:return n.abrupt("return",Hr.throwError("error encountered during CCIP fetch: ".concat(a.map((function(e){return JSON.stringify(e)})).join(", ")),He.errors.SERVER_ERROR,{urls:g,errorMessages:a}));case 23:case"end":return n.stop()}}),n,this)})))}},{key:"_getInternalBlockNumber",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n,r,I,a=this;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready();case 2:if(!(e>0)){t.next=20;break}case 3:if(!this._internalBlockNumber){t.next=20;break}return g=this._internalBlockNumber,t.prev=5,t.next=8,g;case 8:if(n=t.sent,!(xr()-n.respTime<=e)){t.next=11;break}return t.abrupt("return",n.blockNumber);case 11:return t.abrupt("break",20);case 14:if(t.prev=14,t.t0=t.catch(5),this._internalBlockNumber!==g){t.next=18;break}return t.abrupt("break",20);case 18:t.next=3;break;case 20:return r=xr(),I=Ee({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((function(e){return null}),(function(e){return e}))}).then((function(e){var t=e.blockNumber,g=e.networkError;if(g)throw a._internalBlockNumber===I&&(a._internalBlockNumber=null),g;var n=xr();return(t=St.from(t).toNumber())<a._maxInternalBlockNumber&&(t=a._maxInternalBlockNumber),a._maxInternalBlockNumber=t,a._setFastBlockNumber(t),{blockNumber:t,reqTime:r,respTime:n}})),this._internalBlockNumber=I,I.catch((function(e){a._internalBlockNumber===I&&(a._internalBlockNumber=null)})),t.next=26,I;case 26:return t.abrupt("return",t.sent.blockNumber);case 27:case"end":return t.stop()}}),t,this,[[5,14]])})))}},{key:"poll",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){var t,g,n,r,I=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=gI++,g=[],n=null,e.prev=3,e.next=6,this._getInternalBlockNumber(100+this.pollingInterval/2);case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),this.emit("error",e.t0),e.abrupt("return");case 13:if(this._setFastBlockNumber(n),this.emit("poll",t,n),n!==this._lastBlockNumber){e.next=18;break}return this.emit("didPoll",t),e.abrupt("return");case 18:if(-2===this._emitted.block&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Hr.warn("network block skew detected; skipping block events (emitted=".concat(this._emitted.block," blockNumber").concat(n,")")),this.emit("error",Hr.makeError("network block skew detected",He.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(r=this._emitted.block+1;r<=n;r++)this.emit("block",r);return this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach((function(e){if("block"!==e){var t=I._emitted[e];"pending"!==t&&n-t>12&&delete I._emitted[e]}}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=n-1),this._events.forEach((function(e){switch(e.type){case"tx":var t=e.hash,r=I.getTransactionReceipt(t).then((function(e){return e&&null!=e.blockNumber?(I._emitted["t:"+t]=e.blockNumber,I.emit(t,e),null):null})).catch((function(e){I.emit("error",e)}));g.push(r);break;case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=n-1);var a=e.filter;a.fromBlock=e._lastBlockNumber+1,a.toBlock=n;var o=a.toBlock-I._maxFilterBlockRange;o>a.fromBlock&&(a.fromBlock=o),a.fromBlock<0&&(a.fromBlock=0);var i=I.getLogs(a).then((function(t){e._inflight=!1,0!==t.length&&t.forEach((function(t){t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),I._emitted["b:"+t.blockHash]=t.blockNumber,I._emitted["t:"+t.transactionHash]=t.blockNumber,I.emit(a,t)}))})).catch((function(t){I.emit("error",t),e._inflight=!1}));g.push(i)}}})),this._lastBlockNumber=n,Promise.all(g).then((function(){I.emit("didPoll",t)})).catch((function(e){I.emit("error",e)})),e.abrupt("return");case 26:case"end":return e.stop()}}),e,this,[[3,9]])})))}},{key:"resetEventsBlock",value:function(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}},{key:"network",get:function(){return this._network}},{key:"detectNetwork",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr.throwError("provider does not support network detection",He.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"}));case 1:case"end":return e.stop()}}),e)})))}},{key:"getNetwork",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){var t,g,n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready();case 2:return t=e.sent,e.next=5,this.detectNetwork();case 5:if(g=e.sent,t.chainId===g.chainId){e.next=23;break}if(!this.anyNetwork){e.next=20;break}return this._network=g,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",g,t),e.next=19,Er(0);case 19:return e.abrupt("return",this._network);case 20:throw n=Hr.makeError("underlying network changed",He.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:g}),this.emit("error",n),n;case 23:return e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,this)})))}},{key:"blockNumber",get:function(){var e=this;return this._getInternalBlockNumber(100+this.pollingInterval/2).then((function(t){e._setFastBlockNumber(t)}),(function(e){})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}},{key:"polling",get:function(){return null!=this._poller},set:function(e){var t=this;e&&!this._poller?(this._poller=setInterval((function(){t.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((function(){t.poll(),t._bootstrapPoll=setTimeout((function(){t._poller||t.poll(),t._bootstrapPoll=null}),t.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}},{key:"pollingInterval",get:function(){return this._pollingInterval},set:function(e){var t=this;if("number"!==typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){t.poll()}),this._pollingInterval))}},{key:"_getFastBlockNumber",value:function(){var e=this,t=xr();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((function(t){return(null==e._fastBlockNumber||t>e._fastBlockNumber)&&(e._fastBlockNumber=t),e._fastBlockNumber}))),this._fastBlockNumberPromise}},{key:"_setFastBlockNumber",value:function(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=xr(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}},{key:"waitForTransaction",value:function(e,t,g){return Yr(this,void 0,void 0,Ce().mark((function n(){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this._waitForTransaction(e,null==t?1:t,g||0,null));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"_waitForTransaction",value:function(e,t,g,n){return Yr(this,void 0,void 0,Ce().mark((function r(){var I,a=this;return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getTransactionReceipt(e);case 2:if(!(((I=r.sent)?I.confirmations:0)>=t)){r.next=5;break}return r.abrupt("return",I);case 5:return r.abrupt("return",new Promise((function(r,I){var o=[],i=!1,C=function(){return!!i||(i=!0,o.forEach((function(e){e()})),!1)},l=function(e){e.confirmations<t||C()||r(e)};if(a.on(e,l),o.push((function(){a.removeListener(e,l)})),n){var u=n.startBlock,c=null,s=function g(r){return Yr(a,void 0,void 0,Ce().mark((function a(){var o=this;return Ce().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,Er(1e3);case 4:this.getTransactionCount(n.from).then((function(a){return Yr(o,void 0,void 0,Ce().mark((function o(){var l,s,A,d,h,m;return Ce().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!i){o.next=2;break}return o.abrupt("return");case 2:if(!(a<=n.nonce)){o.next=6;break}u=r,o.next=41;break;case 6:return o.next=8,this.getTransaction(e);case 8:if(!(l=o.sent)||null==l.blockNumber){o.next=11;break}return o.abrupt("return");case 11:null==c&&(c=u-3)<n.startBlock&&(c=n.startBlock);case 12:if(!(c<=r)){o.next=41;break}if(!i){o.next=15;break}return o.abrupt("return");case 15:return o.next=17,this.getBlockWithTransactions(c);case 17:s=o.sent,A=0;case 19:if(!(A<s.transactions.length)){o.next=38;break}if((d=s.transactions[A]).hash!==e){o.next=23;break}return o.abrupt("return");case 23:if(d.from!==n.from||d.nonce!==n.nonce){o.next=35;break}if(!i){o.next=26;break}return o.abrupt("return");case 26:return o.next=28,this.waitForTransaction(d.hash,t);case 28:if(h=o.sent,!C()){o.next=31;break}return o.abrupt("return");case 31:return m="replaced",d.data===n.data&&d.to===n.to&&d.value.eq(n.value)?m="repriced":"0x"===d.data&&d.from===d.to&&d.value.isZero()&&(m="cancelled"),I(Hr.makeError("transaction was replaced",He.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===m||"cancelled"===m,reason:m,replacement:this._wrapTransaction(d),hash:e,receipt:h})),o.abrupt("return");case 35:A++,o.next=19;break;case 38:c++,o.next=12;break;case 41:if(!i){o.next=43;break}return o.abrupt("return");case 43:this.once("block",g);case 44:case"end":return o.stop()}}),o,this)})))}),(function(e){i||o.once("block",g)}));case 5:case"end":return a.stop()}}),a,this)})))};if(i)return;a.once("block",s),o.push((function(){a.removeListener("block",s)}))}if("number"===typeof g&&g>0){var A=setTimeout((function(){C()||I(Hr.makeError("timeout exceeded",He.errors.TIMEOUT,{timeout:g}))}),g);A.unref&&A.unref(),o.push((function(){clearTimeout(A)}))}})));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"getBlockNumber",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getInternalBlockNumber(0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getGasPrice",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,this.perform("getGasPrice",{});case 4:return t=e.sent,e.prev=5,e.abrupt("return",St.from(t));case 9:return e.prev=9,e.t0=e.catch(5),e.abrupt("return",Hr.throwError("bad result from backend",He.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e.t0}));case 12:case"end":return e.stop()}}),e,this,[[5,9]])})))}},{key:"getBalance",value:function(e,t){return Yr(this,void 0,void 0,Ce().mark((function g(){var n,r;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.getNetwork();case 2:return g.next=4,Ee({address:this._getAddress(e),blockTag:this._getBlockTag(t)});case 4:return n=g.sent,g.next=7,this.perform("getBalance",n);case 7:return r=g.sent,g.prev=8,g.abrupt("return",St.from(r));case 12:return g.prev=12,g.t0=g.catch(8),g.abrupt("return",Hr.throwError("bad result from backend",He.errors.SERVER_ERROR,{method:"getBalance",params:n,result:r,error:g.t0}));case 15:case"end":return g.stop()}}),g,this,[[8,12]])})))}},{key:"getTransactionCount",value:function(e,t){return Yr(this,void 0,void 0,Ce().mark((function g(){var n,r;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.getNetwork();case 2:return g.next=4,Ee({address:this._getAddress(e),blockTag:this._getBlockTag(t)});case 4:return n=g.sent,g.next=7,this.perform("getTransactionCount",n);case 7:return r=g.sent,g.prev=8,g.abrupt("return",St.from(r).toNumber());case 12:return g.prev=12,g.t0=g.catch(8),g.abrupt("return",Hr.throwError("bad result from backend",He.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:r,error:g.t0}));case 15:case"end":return g.stop()}}),g,this,[[8,12]])})))}},{key:"getCode",value:function(e,t){return Yr(this,void 0,void 0,Ce().mark((function g(){var n,r;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.getNetwork();case 2:return g.next=4,Ee({address:this._getAddress(e),blockTag:this._getBlockTag(t)});case 4:return n=g.sent,g.next=7,this.perform("getCode",n);case 7:return r=g.sent,g.prev=8,g.abrupt("return",dt(r));case 12:return g.prev=12,g.t0=g.catch(8),g.abrupt("return",Hr.throwError("bad result from backend",He.errors.SERVER_ERROR,{method:"getCode",params:n,result:r,error:g.t0}));case 15:case"end":return g.stop()}}),g,this,[[8,12]])})))}},{key:"getStorageAt",value:function(e,t,g){return Yr(this,void 0,void 0,Ce().mark((function n(){var r,I;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getNetwork();case 2:return n.next=4,Ee({address:this._getAddress(e),blockTag:this._getBlockTag(g),position:Promise.resolve(t).then((function(e){return pt(e)}))});case 4:return r=n.sent,n.next=7,this.perform("getStorageAt",r);case 7:return I=n.sent,n.prev=8,n.abrupt("return",dt(I));case 12:return n.prev=12,n.t0=n.catch(8),n.abrupt("return",Hr.throwError("bad result from backend",He.errors.SERVER_ERROR,{method:"getStorageAt",params:r,result:I,error:n.t0}));case 15:case"end":return n.stop()}}),n,this,[[8,12]])})))}},{key:"_wrapTransaction",value:function(e,t,g){var n=this;if(null!=t&&32!==ht(t))throw new Error("invalid response - sendTransaction");var r=e;return null!=t&&e.hash!==t&&Hr.throwError("Transaction hash mismatch from Provider.sendTransaction.",He.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),r.wait=function(t,r){return Yr(n,void 0,void 0,Ce().mark((function n(){var I,a;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null==t&&(t=1),null==r&&(r=0),I=void 0,0!==t&&null!=g&&(I={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:g}),n.next=6,this._waitForTransaction(e.hash,t,r,I);case 6:if(null!=(a=n.sent)||0!==t){n.next=9;break}return n.abrupt("return",null);case 9:return this._emitted["t:"+e.hash]=a.blockNumber,0===a.status&&Hr.throwError("transaction failed",He.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:a}),n.abrupt("return",a);case 12:case"end":return n.stop()}}),n,this)})))},r}},{key:"sendTransaction",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n,r,I;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,Promise.resolve(e).then((function(e){return dt(e)}));case 4:return g=t.sent,null==(n=this.formatter.transaction(e)).confirmations&&(n.confirmations=0),t.next=9,this._getInternalBlockNumber(100+2*this.pollingInterval);case 9:return r=t.sent,t.prev=10,t.next=13,this.perform("sendTransaction",{signedTransaction:g});case 13:return I=t.sent,t.abrupt("return",this._wrapTransaction(n,I,r));case 17:throw t.prev=17,t.t0=t.catch(10),t.t0.transaction=n,t.t0.transactionHash=n.hash,t.t0;case 22:case"end":return t.stop()}}),t,this,[[10,17]])})))}},{key:"_getTransactionRequest",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n,r=this;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return g=t.sent,n={},["from","to"].forEach((function(e){null!=g[e]&&(n[e]=Promise.resolve(g[e]).then((function(e){return e?r._getAddress(e):null})))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((function(e){null!=g[e]&&(n[e]=Promise.resolve(g[e]).then((function(e){return e?St.from(e):null})))})),["type"].forEach((function(e){null!=g[e]&&(n[e]=Promise.resolve(g[e]).then((function(e){return null!=e?e:null})))})),g.accessList&&(n.accessList=this.formatter.accessList(g.accessList)),["data"].forEach((function(e){null!=g[e]&&(n[e]=Promise.resolve(g[e]).then((function(e){return e?dt(e):null})))})),t.t0=this.formatter,t.next=12,Ee(n);case 12:return t.t1=t.sent,t.abrupt("return",t.t0.transactionRequest.call(t.t0,t.t1));case 14:case"end":return t.stop()}}),t,this)})))}},{key:"_getFilter",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n=this;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return e=t.sent,g={},null!=e.address&&(g.address=this._getAddress(e.address)),["blockHash","topics"].forEach((function(t){null!=e[t]&&(g[t]=e[t])})),["fromBlock","toBlock"].forEach((function(t){null!=e[t]&&(g[t]=n._getBlockTag(e[t]))})),t.t0=this.formatter,t.next=10,Ee(g);case 10:return t.t1=t.sent,t.abrupt("return",t.t0.filter.call(t.t0,t.t1));case 12:case"end":return t.stop()}}),t,this)})))}},{key:"_call",value:function(e,t,g){return Yr(this,void 0,void 0,Ce().mark((function n(){var r,I,a,o,i,C,l,u,c,s,A,d,h,m,b;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g>=10&&Hr.throwError("CCIP read exceeded maximum redirections",He.errors.SERVER_ERROR,{redirects:g,transaction:e}),r=e.to,n.next=4,this.perform("call",{transaction:e,blockTag:t});case 4:if(I=n.sent,!(g>=0&&"latest"===t&&null!=r&&"0x556f1830"===I.substring(0,10)&&ht(I)%32===4)){n.next=31;break}for(n.prev=6,a=mt(I,4),o=mt(a,0,32),St.from(o).eq(r)||Hr.throwError("CCIP Read sender did not match",He.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:I}),i=[],C=St.from(mt(a,32,64)).toNumber(),l=St.from(mt(a,C,C+32)).toNumber(),u=mt(a,C+32),c=0;c<l;c++)null==(s=jr(u,32*c))&&Hr.throwError("CCIP Read contained corrupt URL string",He.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:I}),i.push(s);return A=Pr(a,64),St.from(mt(a,100,128)).isZero()||Hr.throwError("CCIP Read callback selector included junk",He.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:I}),d=mt(a,96,100),h=Pr(a,128),n.next=21,this.ccipReadFetch(e,A,i);case 21:return null==(m=n.sent)&&Hr.throwError("CCIP Read disabled or provided no URLs",He.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:I}),b={to:r,data:bt([d,$r([m,h])])},n.abrupt("return",this._call(b,t,g+1));case 27:if(n.prev=27,n.t0=n.catch(6),n.t0.code!==He.errors.SERVER_ERROR){n.next=31;break}throw n.t0;case 31:return n.prev=31,n.abrupt("return",dt(I));case 35:return n.prev=35,n.t1=n.catch(31),n.abrupt("return",Hr.throwError("bad result from backend",He.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:I,error:n.t1}));case 38:case"end":return n.stop()}}),n,this,[[6,27],[31,35]])})))}},{key:"call",value:function(e,t){return Yr(this,void 0,void 0,Ce().mark((function g(){var n;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.getNetwork();case 2:return g.next=4,Ee({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});case 4:return n=g.sent,g.abrupt("return",this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1));case 6:case"end":return g.stop()}}),g,this)})))}},{key:"estimateGas",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,Ee({transaction:this._getTransactionRequest(e)});case 4:return g=t.sent,t.next=7,this.perform("estimateGas",g);case 7:return n=t.sent,t.prev=8,t.abrupt("return",St.from(n));case 12:return t.prev=12,t.t0=t.catch(8),t.abrupt("return",Hr.throwError("bad result from backend",He.errors.SERVER_ERROR,{method:"estimateGas",params:g,result:n,error:t.t0}));case 15:case"end":return t.stop()}}),t,this,[[8,12]])})))}},{key:"_getAddress",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return"string"!==typeof(e=t.sent)&&Hr.throwArgumentError("invalid address or ENS name","name",e),t.next=6,this.resolveName(e);case 6:return null==(g=t.sent)&&Hr.throwError("ENS name not configured",He.errors.UNSUPPORTED_OPERATION,{operation:"resolveName(".concat(JSON.stringify(e),")")}),t.abrupt("return",g);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"_getBlock",value:function(e,t){return Yr(this,void 0,void 0,Ce().mark((function g(){var n,r,I=this;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.getNetwork();case 2:return g.next=4,e;case 4:if(e=g.sent,n=-128,r={includeTransactions:!!t},!st(e,32)){g.next=11;break}r.blockHash=e,g.next=21;break;case 11:return g.prev=11,g.next=14,this._getBlockTag(e);case 14:r.blockTag=g.sent,st(r.blockTag)&&(n=parseInt(r.blockTag.substring(2),16)),g.next=21;break;case 18:g.prev=18,g.t0=g.catch(11),Hr.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e);case 21:return g.abrupt("return",Un((function(){return Yr(I,void 0,void 0,Ce().mark((function e(){var g,I,a,o,i,C,l=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform("getBlock",r);case 2:if(null!=(g=e.sent)){e.next=11;break}if(null==r.blockHash){e.next=7;break}if(null!=this._emitted["b:"+r.blockHash]){e.next=7;break}return e.abrupt("return",null);case 7:if(null==r.blockTag){e.next=10;break}if(!(n>this._emitted.block)){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",void 0);case 11:if(!t){e.next=34;break}I=null,a=0;case 14:if(!(a<g.transactions.length)){e.next=31;break}if(null!=(o=g.transactions[a]).blockNumber){e.next=20;break}o.confirmations=0,e.next=28;break;case 20:if(null!=o.confirmations){e.next=28;break}if(null!=I){e.next=25;break}return e.next=24,this._getInternalBlockNumber(100+2*this.pollingInterval);case 24:I=e.sent;case 25:(i=I-o.blockNumber+1)<=0&&(i=1),o.confirmations=i;case 28:a++,e.next=14;break;case 31:return(C=this.formatter.blockWithTransactions(g)).transactions=C.transactions.map((function(e){return l._wrapTransaction(e)})),e.abrupt("return",C);case 34:return e.abrupt("return",this.formatter.block(g));case 35:case"end":return e.stop()}}),e,this)})))}),{oncePoll:this}));case 22:case"end":return g.stop()}}),g,this,[[11,18]])})))}},{key:"getBlock",value:function(e){return this._getBlock(e,!1)}},{key:"getBlockWithTransactions",value:function(e){return this._getBlock(e,!0)}},{key:"getTransaction",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n=this;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,e;case 4:return e=t.sent,g={transactionHash:this.formatter.hash(e,!0)},t.abrupt("return",Un((function(){return Yr(n,void 0,void 0,Ce().mark((function t(){var n,r,I,a;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perform("getTransaction",g);case 2:if(null!=(n=t.sent)){t.next=7;break}if(null!=this._emitted["t:"+e]){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",void 0);case 7:if(null!=(r=this.formatter.transactionResponse(n)).blockNumber){t.next=12;break}r.confirmations=0,t.next=19;break;case 12:if(null!=r.confirmations){t.next=19;break}return t.next=15,this._getInternalBlockNumber(100+2*this.pollingInterval);case 15:I=t.sent,(a=I-r.blockNumber+1)<=0&&(a=1),r.confirmations=a;case 19:return t.abrupt("return",this._wrapTransaction(r));case 20:case"end":return t.stop()}}),t,this)})))}),{oncePoll:this}));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getTransactionReceipt",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n=this;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,e;case 4:return e=t.sent,g={transactionHash:this.formatter.hash(e,!0)},t.abrupt("return",Un((function(){return Yr(n,void 0,void 0,Ce().mark((function t(){var n,r,I,a;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perform("getTransactionReceipt",g);case 2:if(null!=(n=t.sent)){t.next=7;break}if(null!=this._emitted["t:"+e]){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",void 0);case 7:if(null!=n.blockHash){t.next=9;break}return t.abrupt("return",void 0);case 9:if(null!=(r=this.formatter.receipt(n)).blockNumber){t.next=14;break}r.confirmations=0,t.next=21;break;case 14:if(null!=r.confirmations){t.next=21;break}return t.next=17,this._getInternalBlockNumber(100+2*this.pollingInterval);case 17:I=t.sent,(a=I-r.blockNumber+1)<=0&&(a=1),r.confirmations=a;case 21:return t.abrupt("return",r);case 22:case"end":return t.stop()}}),t,this)})))}),{oncePoll:this}));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getLogs",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,Ee({filter:this._getFilter(e)});case 4:return g=t.sent,t.next=7,this.perform("getLogs",g);case 7:return(n=t.sent).forEach((function(e){null==e.removed&&(e.removed=!1)})),t.abrupt("return",Jr.arrayOf(this.formatter.filterLog.bind(this.formatter))(n));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getEtherPrice",value:function(){return Yr(this,void 0,void 0,Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.abrupt("return",this.perform("getEtherPrice",{}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"_getBlockTag",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(!("number"===typeof(e=t.sent)&&e<0)){t.next=11;break}return e%1&&Hr.throwArgumentError("invalid BlockTag","blockTag",e),t.next=7,this._getInternalBlockNumber(100+2*this.pollingInterval);case 7:return g=t.sent,(g+=e)<0&&(g=0),t.abrupt("return",this.formatter.blockTag(g));case 11:return t.abrupt("return",this.formatter.blockTag(e));case 12:case"end":return t.stop()}}),t,this)})))}},{key:"getResolver",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n,r;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g=e;case 1:if(""!==g&&"."!==g){t.next=4;break}return t.abrupt("return",null);case 4:if("eth"===e||"eth"!==g){t.next=6;break}return t.abrupt("return",null);case 6:return t.next=8,this._getResolver(g,"getResolver");case 8:if(null==(n=t.sent)){t.next=19;break}if(r=new eI(this,n,e),t.t0=g!==e,!t.t0){t.next=16;break}return t.next=15,r.supportsWildcard();case 15:t.t0=!t.sent;case 16:if(!t.t0){t.next=18;break}return t.abrupt("return",null);case 18:return t.abrupt("return",r);case 19:g=g.split(".").slice(1).join("."),t.next=1;break;case 22:case"end":return t.stop()}}),t,this)})))}},{key:"_getResolver",value:function(e,t){return Yr(this,void 0,void 0,Ce().mark((function g(){var n,r;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return null==t&&(t="ENS"),g.next=3,this.getNetwork();case 3:return(n=g.sent).ensAddress||Hr.throwError("network does not support ENS",He.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name}),g.prev=5,g.next=8,this.call({to:n.ensAddress,data:"0x0178b8bf"+Zr(e).substring(2)});case 8:return r=g.sent,g.abrupt("return",this.formatter.callAddress(r));case 12:g.prev=12,g.t0=g.catch(5);case 14:return g.abrupt("return",null);case 15:case"end":return g.stop()}}),g,this,[[5,12]])})))}},{key:"resolveName",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return e=t.sent,t.prev=3,t.abrupt("return",Promise.resolve(this.formatter.address(e)));case 7:if(t.prev=7,t.t0=t.catch(3),!st(e)){t.next=11;break}throw t.t0;case 11:return"string"!==typeof e&&Hr.throwArgumentError("invalid ENS name","name",e),t.next=14,this.getResolver(e);case 14:if(g=t.sent){t.next=17;break}return t.abrupt("return",null);case 17:return t.next=19,g.getAddress();case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,this,[[3,7]])})))}},{key:"lookupAddress",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n,r;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return e=t.sent,e=this.formatter.address(e),g=e.substring(2).toLowerCase()+".addr.reverse",t.next=7,this._getResolver(g,"lookupAddress");case 7:if(null!=(n=t.sent)){t.next=10;break}return t.abrupt("return",null);case 10:return t.t0=jr,t.next=13,this.call({to:n,data:"0x691f3431"+Zr(g).substring(2)});case 13:return t.t1=t.sent,r=(0,t.t0)(t.t1,0),t.next=17,this.resolveName(r);case 17:if(t.sent==e){t.next=20;break}return t.abrupt("return",null);case 20:return t.abrupt("return",r);case 21:case"end":return t.stop()}}),t,this)})))}},{key:"getAvatar",value:function(e){return Yr(this,void 0,void 0,Ce().mark((function t(){var g,n,r,I,a,o,i;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g=null,!st(e)){t.next=40;break}return n=this.formatter.address(e),r=n.substring(2).toLowerCase()+".addr.reverse",t.next=6,this._getResolver(r,"getAvatar");case 6:if(I=t.sent){t.next=9;break}return t.abrupt("return",null);case 9:return g=new eI(this,I,r),t.prev=10,t.next=13,g.getAvatar();case 13:if(!(a=t.sent)){t.next=16;break}return t.abrupt("return",a.url);case 16:t.next=22;break;case 18:if(t.prev=18,t.t0=t.catch(10),t.t0.code===He.errors.CALL_EXCEPTION){t.next=22;break}throw t.t0;case 22:return t.prev=22,t.t1=jr,t.next=26,this.call({to:I,data:"0x691f3431"+Zr(r).substring(2)});case 26:return t.t2=t.sent,o=(0,t.t1)(t.t2,0),t.next=30,this.getResolver(o);case 30:g=t.sent,t.next=38;break;case 33:if(t.prev=33,t.t3=t.catch(22),t.t3.code===He.errors.CALL_EXCEPTION){t.next=37;break}throw t.t3;case 37:return t.abrupt("return",null);case 38:t.next=45;break;case 40:return t.next=42,this.getResolver(e);case 42:if(g=t.sent){t.next=45;break}return t.abrupt("return",null);case 45:return t.next=47,g.getAvatar();case 47:if(null!=(i=t.sent)){t.next=50;break}return t.abrupt("return",null);case 50:return t.abrupt("return",i.url);case 51:case"end":return t.stop()}}),t,this,[[10,18],[22,33]])})))}},{key:"perform",value:function(e,t){return Hr.throwError(e+" not implemented",He.errors.NOT_IMPLEMENTED,{operation:e})}},{key:"_startEvent",value:function(e){this.polling=this._events.filter((function(e){return e.pollable()})).length>0}},{key:"_stopEvent",value:function(e){this.polling=this._events.filter((function(e){return e.pollable()})).length>0}},{key:"_addEventListener",value:function(e,t,g){var n=new Dr(Kr(e),t,g);return this._events.push(n),this._startEvent(n),this}},{key:"on",value:function(e,t){return this._addEventListener(e,t,!1)}},{key:"once",value:function(e,t){return this._addEventListener(e,t,!0)}},{key:"emit",value:function(e){for(var t=this,g=arguments.length,n=new Array(g>1?g-1:0),r=1;r<g;r++)n[r-1]=arguments[r];var I=!1,a=[],o=Kr(e);return this._events=this._events.filter((function(e){return e.tag!==o||(setTimeout((function(){e.listener.apply(t,n)}),0),I=!0,!e.once||(a.push(e),!1))})),a.forEach((function(e){t._stopEvent(e)})),I}},{key:"listenerCount",value:function(e){if(!e)return this._events.length;var t=Kr(e);return this._events.filter((function(e){return e.tag===t})).length}},{key:"listeners",value:function(e){if(null==e)return this._events.map((function(e){return e.listener}));var t=Kr(e);return this._events.filter((function(e){return e.tag===t})).map((function(e){return e.listener}))}},{key:"off",value:function(e,t){var g=this;if(null==t)return this.removeAllListeners(e);var n=[],r=!1,I=Kr(e);return this._events=this._events.filter((function(e){return e.tag!==I||e.listener!=t||(!!r||(r=!0,n.push(e),!1))})),n.forEach((function(e){g._stopEvent(e)})),this}},{key:"removeAllListeners",value:function(e){var t=this,g=[];if(null==e)g=this._events,this._events=[];else{var n=Kr(e);this._events=this._events.filter((function(e){return e.tag!==n||(g.push(e),!1)}))}return g.forEach((function(e){t._stopEvent(e)})),this}}],[{key:"getFormatter",value:function(){return null==tI&&(tI=new Jr),tI}},{key:"getNetwork",value:function(e){return function(e){if(null==e)return null;if("number"===typeof e){for(var t in Wr){var g=Wr[t];if(g.chainId===e)return{name:g.name,chainId:g.chainId,ensAddress:g.ensAddress||null,_defaultProvider:g._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"===typeof e){var n=Wr[e];return null==n?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}var r=Wr[e.name];if(!r)return"number"!==typeof e.chainId&&yr.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==r.chainId&&yr.throwArgumentError("network chainId mismatch","network",e);var I,a=e._defaultProvider||null;return null==a&&r._defaultProvider&&(a=(I=r._defaultProvider)&&"function"===typeof I.renetwork?r._defaultProvider.renetwork(e):r._defaultProvider),{name:e.name,chainId:r.chainId,ensAddress:e.ensAddress||r.ensAddress||null,_defaultProvider:a}}(null==e?"homestead":e)}}]),g}(Tn),rI=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))},II=new He(Te),aI=["call","estimateGas"];function oI(e,t){if(null==e)return null;if("string"===typeof e.message&&e.message.match("reverted")){var g=st(e.data)?e.data:null;if(!t||g)return{message:e.message,data:g}}if("object"===typeof e){for(var n in e){var r=oI(e[n],t);if(r)return r}return null}if("string"===typeof e)try{return oI(JSON.parse(e),t)}catch(I){}return null}function iI(e,t,g){var n=g.transaction||g.signedTransaction;if("call"===e){var r=oI(t,!0);if(r)return r.data;II.throwError("missing revert data in call exception; Transaction reverted without a reason string",He.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){var I=oI(t.body,!1);null==I&&(I=oI(t,!1)),I&&II.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",He.errors.UNPREDICTABLE_GAS_LIMIT,{reason:I.message,method:e,transaction:n,error:t})}var a=t.message;throw t.code===He.errors.SERVER_ERROR&&t.error&&"string"===typeof t.error.message?a=t.error.message:"string"===typeof t.body?a=t.body:"string"===typeof t.responseText&&(a=t.responseText),(a=(a||"").toLowerCase()).match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&II.throwError("insufficient funds for intrinsic transaction cost",He.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),a.match(/nonce (is )?too low/i)&&II.throwError("nonce has already been used",He.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),a.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&II.throwError("replacement fee too low",He.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),a.match(/only replay-protected/i)&&II.throwError("legacy pre-eip-155 transactions not supported",He.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),aI.indexOf(e)>=0&&a.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&II.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",He.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function CI(e){return new Promise((function(t){setTimeout(t,e)}))}function lI(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function uI(e){return e?e.toLowerCase():e}var cI={},sI=function(e){Ze(g,e);var t=ve(g);function g(e,n,r){var I;if(de(this,g),I=t.call(this),e!==cI)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return Ke(pe(I),"provider",n),null==r&&(r=0),"string"===typeof r?(Ke(pe(I),"_address",I.provider.formatter.address(r)),Ke(pe(I),"_index",null)):"number"===typeof r?(Ke(pe(I),"_index",r),Ke(pe(I),"_address",null)):II.throwArgumentError("invalid address or index","addressOrIndex",r),I}return be(g,[{key:"connect",value:function(e){return II.throwError("cannot alter JSON-RPC Signer connection",He.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}},{key:"connectUnchecked",value:function(){return new AI(cI,this.provider,this._address||this._index)}},{key:"getAddress",value:function(){var e=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((function(t){return t.length<=e._index&&II.throwError("unknown account #"+e._index,He.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),e.provider.formatter.address(t[e._index])}))}},{key:"sendUncheckedTransaction",value:function(e){var t=this;e=Me(e);var g=this.getAddress().then((function(e){return e&&(e=e.toLowerCase()),e}));if(null==e.gasLimit){var n=Me(e);n.from=g,e.gasLimit=this.provider.estimateGas(n)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((function(e){return rI(t,void 0,void 0,Ce().mark((function t(){var g;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.provider.resolveName(e);case 4:return null==(g=t.sent)&&II.throwArgumentError("provided ENS name resolves to null","tx.to",e),t.abrupt("return",g);case 7:case"end":return t.stop()}}),t,this)})))}))),Ee({tx:Ee(e),sender:g}).then((function(g){var n=g.tx,r=g.sender;null!=n.from?n.from.toLowerCase()!==r&&II.throwArgumentError("from address mismatch","transaction",e):n.from=r;var I=t.provider.constructor.hexlifyTransaction(n,{from:!0});return t.provider.send("eth_sendTransaction",[I]).then((function(e){return e}),(function(e){return"string"===typeof e.message&&e.message.match(/user denied/i)&&II.throwError("user rejected transaction",He.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),iI("sendTransaction",e,I)}))}))}},{key:"signTransaction",value:function(e){return II.throwError("signing transactions is unsupported",He.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}},{key:"sendTransaction",value:function(e){return rI(this,void 0,void 0,Ce().mark((function t(){var g,n,r=this;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);case 2:return g=t.sent,t.next=5,this.sendUncheckedTransaction(e);case 5:return n=t.sent,t.prev=6,t.next=9,Un((function(){return rI(r,void 0,void 0,Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getTransaction(n);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",this.provider._wrapTransaction(t,n,g));case 6:case"end":return e.stop()}}),e,this)})))}),{oncePoll:this.provider});case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t.catch(6),t.t0.transactionHash=n,t.t0;case 16:case"end":return t.stop()}}),t,this,[[6,12]])})))}},{key:"signMessage",value:function(e){return rI(this,void 0,void 0,Ce().mark((function t(){var g,n;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g="string"===typeof e?ag(e):e,t.next=3,this.getAddress();case 3:return n=t.sent,t.prev=4,t.next=7,this.provider.send("personal_sign",[dt(g),n.toLowerCase()]);case 7:return t.abrupt("return",t.sent);case 10:throw t.prev=10,t.t0=t.catch(4),"string"===typeof t.t0.message&&t.t0.message.match(/user denied/i)&&II.throwError("user rejected signing",He.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),t.t0;case 14:case"end":return t.stop()}}),t,this,[[4,10]])})))}},{key:"_legacySignMessage",value:function(e){return rI(this,void 0,void 0,Ce().mark((function t(){var g,n;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g="string"===typeof e?ag(e):e,t.next=3,this.getAddress();case 3:return n=t.sent,t.prev=4,t.next=7,this.provider.send("eth_sign",[n.toLowerCase(),dt(g)]);case 7:return t.abrupt("return",t.sent);case 10:throw t.prev=10,t.t0=t.catch(4),"string"===typeof t.t0.message&&t.t0.message.match(/user denied/i)&&II.throwError("user rejected signing",He.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),t.t0;case 14:case"end":return t.stop()}}),t,this,[[4,10]])})))}},{key:"_signTypedData",value:function(e,t,g){return rI(this,void 0,void 0,Ce().mark((function n(){var r,I,a=this;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Bg.resolveNames(e,t,g,(function(e){return a.provider.resolveName(e)}));case 2:return r=n.sent,n.next=5,this.getAddress();case 5:return I=n.sent,n.prev=6,n.next=9,this.provider.send("eth_signTypedData_v4",[I.toLowerCase(),JSON.stringify(Bg.getPayload(r.domain,t,r.value))]);case 9:return n.abrupt("return",n.sent);case 12:throw n.prev=12,n.t0=n.catch(6),"string"===typeof n.t0.message&&n.t0.message.match(/user denied/i)&&II.throwError("user rejected signing",He.errors.ACTION_REJECTED,{action:"_signTypedData",from:I,messageData:{domain:r.domain,types:t,value:r.value}}),n.t0;case 16:case"end":return n.stop()}}),n,this,[[6,12]])})))}},{key:"unlock",value:function(e){return rI(this,void 0,void 0,Ce().mark((function t(){var g,n;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=this.provider,t.next=3,this.getAddress();case 3:return n=t.sent,t.abrupt("return",g.send("personal_unlockAccount",[n.toLowerCase(),e,null]));case 5:case"end":return t.stop()}}),t,this)})))}}]),g}(et),AI=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g,[{key:"sendTransaction",value:function(e){var t=this;return this.sendUncheckedTransaction(e).then((function(e){return{hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:function(g){return t.provider.waitForTransaction(e,g)}}}))}}]),g}(sI),dI={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0},hI=function(e){Ze(g,e);var t=ve(g);function g(e,n){var r;de(this,g);var I=n;return null==I&&(I=new Promise((function(e,t){setTimeout((function(){r.detectNetwork().then((function(t){e(t)}),(function(e){t(e)}))}),0)}))),r=t.call(this,I),e||(e=xe(r.constructor,"defaultUrl")()),Ke(pe(r),"connection","string"===typeof e?Object.freeze({url:e}):Object.freeze(Me(e))),r._nextId=42,r}return be(g,[{key:"_cache",get:function(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}},{key:"detectNetwork",value:function(){var e=this;return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((function(){e._cache.detectNetwork=null}),0)),this._cache.detectNetwork}},{key:"_uncachedDetectNetwork",value:function(){return rI(this,void 0,void 0,Ce().mark((function e(){var t,g;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CI(0);case 2:return t=null,e.prev=3,e.next=6,this.send("eth_chainId",[]);case 6:t=e.sent,e.next=19;break;case 9:return e.prev=9,e.t0=e.catch(3),e.prev=11,e.next=14,this.send("net_version",[]);case 14:t=e.sent,e.next=19;break;case 17:e.prev=17,e.t1=e.catch(11);case 19:if(null==t){e.next=28;break}return g=xe(this.constructor,"getNetwork"),e.prev=21,e.abrupt("return",g(St.from(t).toNumber()));case 25:return e.prev=25,e.t2=e.catch(21),e.abrupt("return",II.throwError("could not detect network",He.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e.t2}));case 28:return e.abrupt("return",II.throwError("could not detect network",He.errors.NETWORK_ERROR,{event:"noNetwork"}));case 29:case"end":return e.stop()}}),e,this,[[3,9],[11,17],[21,25]])})))}},{key:"getSigner",value:function(e){return new sI(cI,this,e)}},{key:"getUncheckedSigner",value:function(e){return this.getSigner(e).connectUnchecked()}},{key:"listAccounts",value:function(){var e=this;return this.send("eth_accounts",[]).then((function(t){return t.map((function(t){return e.formatter.address(t)}))}))}},{key:"send",value:function(e,t){var g=this,n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Le(n),provider:this});var r=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(r&&this._cache[e])return this._cache[e];var I=Dn(this.connection,JSON.stringify(n),lI).then((function(e){return g.emit("debug",{action:"response",request:n,response:e,provider:g}),e}),(function(e){throw g.emit("debug",{action:"response",error:e,request:n,provider:g}),e}));return r&&(this._cache[e]=I,setTimeout((function(){g._cache[e]=null}),0)),I}},{key:"prepareRequest",value:function(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[uI(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[uI(t.address),t.blockTag]];case"getCode":return["eth_getCode",[uI(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[uI(t.address),ft(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[xe(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[xe(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=uI(t.filter.address)),["eth_getLogs",[t.filter]]}return null}},{key:"perform",value:function(e,t){return rI(this,void 0,void 0,Ce().mark((function g(){var n,r,I;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if("call"!==e&&"estimateGas"!==e){g.next=8;break}if(!(n=t.transaction)||null==n.type||!St.from(n.type).isZero()){g.next=8;break}if(null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas){g.next=8;break}return g.next=6,this.getFeeData();case 6:null==(r=g.sent).maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=Me(t)).transaction=Me(n),delete t.transaction.type);case 8:return null==(I=this.prepareRequest(e,t))&&II.throwError(e+" not implemented",He.errors.NOT_IMPLEMENTED,{operation:e}),g.prev=10,g.next=13,this.send(I[0],I[1]);case 13:return g.abrupt("return",g.sent);case 16:return g.prev=16,g.t0=g.catch(10),g.abrupt("return",iI(e,g.t0,t));case 19:case"end":return g.stop()}}),g,this,[[10,16]])})))}},{key:"_startEvent",value:function(e){"pending"===e.tag&&this._startPending(),Pe(ye(g.prototype),"_startEvent",this).call(this,e)}},{key:"_startPending",value:function(){if(null==this._pendingFilter){var e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(g){return function n(){e.send("eth_getFilterChanges",[g]).then((function(g){if(e._pendingFilter!=t)return null;var n=Promise.resolve();return g.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return CI(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){n()}),0),null;e.send("eth_uninstallFilter",[g])})).catch((function(e){}))}(),g})).catch((function(e){}))}}},{key:"_stopEvent",value:function(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),Pe(ye(g.prototype),"_stopEvent",this).call(this,e)}}],[{key:"defaultUrl",value:function(){return"http://localhost:8545"}},{key:"hexlifyTransaction",value:function(e,t){var g,n,r=Me(dI);if(t)for(var I in t)t[I]&&(r[I]=!0);n=r,(g=e)&&"object"===typeof g||Fe.throwArgumentError("invalid object","object",g),Object.keys(g).forEach((function(e){n[e]||Fe.throwArgumentError("invalid object key - "+e,"transaction:"+e,g)}));var a={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null!=e[t]){var g=pt(St.from(e[t]));"gasLimit"===t&&(t="gas"),a[t]=g}})),["from","to","data"].forEach((function(t){null!=e[t]&&(a[t]=dt(e[t]))})),e.accessList&&(a.accessList=Wn(e.accessList)),a}}]),g}(nI),mI=new He(Te),bI=1;function pI(e,t){var g="Web3LegacyFetcher";return function(e,n){var r=this,I={method:e,params:n,id:bI++,jsonrpc:"2.0"};return new Promise((function(e,n){r.emit("debug",{action:"request",fetcher:g,request:Le(I),provider:r}),t(I,(function(t,a){if(t)return r.emit("debug",{action:"response",fetcher:g,error:t,request:I,provider:r}),n(t);if(r.emit("debug",{action:"response",fetcher:g,request:I,response:a,provider:r}),a.error){var o=new Error(a.error.message);return o.code=a.error.code,o.data=a.error.data,n(o)}e(a.result)}))}))}}var fI=function(e){Ze(g,e);var t=ve(g);function g(e,n){var r;de(this,g),null==e&&mI.throwArgumentError("missing provider","provider",e);var I=null,a=null,o=null;return"function"===typeof e?(I="unknown:",a=e):(!(I=e.host||e.path||"")&&e.isMetaMask&&(I="metamask"),o=e,e.request?(""===I&&(I="eip-1193:"),a=function(e){return function(t,g){var n=this;null==g&&(g=[]);var r={method:t,params:g};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Le(r),provider:this}),e.request(r).then((function(e){return n.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:e,provider:n}),e}),(function(e){throw n.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:e,provider:n}),e}))}}(e)):e.sendAsync?a=pI(0,e.sendAsync.bind(e)):e.send?a=pI(0,e.send.bind(e)):mI.throwArgumentError("unsupported provider","provider",e),I||(I="unknown:")),Ke(pe(r=t.call(this,I,n)),"jsonRpcFetchFunc",a),Ke(pe(r),"provider",o),r}return be(g,[{key:"send",value:function(e,t){return this.jsonRpcFetchFunc(e,t)}}]),g}(hI),ZI="abi/5.7.0",yI=new He(ZI);var GI=function(){function e(t,g,n,r){de(this,e),this.name=t,this.type=g,this.localName=n,this.dynamic=r}return be(e,[{key:"_throwError",value:function(e,t){yI.throwArgumentError(e,this.localName,t)}}]),e}(),BI=function(){function e(t){de(this,e),Ke(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}return be(e,[{key:"data",get:function(){return bt(this._data)}},{key:"length",get:function(){return this._dataLength}},{key:"_writeData",value:function(e){return this._data.push(e),this._dataLength+=e.length,e.length}},{key:"appendWriter",value:function(e){return this._writeData(ut(e._data))}},{key:"writeBytes",value:function(e){var t=lt(e),g=t.length%this.wordSize;return g&&(t=ut([t,this._padding.slice(g)])),this._writeData(t)}},{key:"_getValue",value:function(e){var t=lt(St.from(e));return t.length>this.wordSize&&yI.throwError("value out-of-bounds",He.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=ut([this._padding.slice(t.length%this.wordSize),t])),t}},{key:"writeValue",value:function(e){return this._writeData(this._getValue(e))}},{key:"writeUpdatableValue",value:function(){var e=this,t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,function(g){e._data[t]=e._getValue(g)}}}]),e}(),vI=function(){function e(t,g,n,r){de(this,e),Ke(this,"_data",lt(t)),Ke(this,"wordSize",g||32),Ke(this,"_coerceFunc",n),Ke(this,"allowLoose",r),this._offset=0}return be(e,[{key:"data",get:function(){return dt(this._data)}},{key:"consumed",get:function(){return this._offset}},{key:"coerce",value:function(t,g){return this._coerceFunc?this._coerceFunc(t,g):e.coerce(t,g)}},{key:"_peekBytes",value:function(e,t,g){var n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&g&&this._offset+t<=this._data.length?n=t:yI.throwError("data out-of-bounds",He.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}},{key:"subReader",value:function(t){return new e(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}},{key:"readBytes",value:function(e,t){var g=this._peekBytes(0,e,!!t);return this._offset+=g.length,g.slice(0,e)}},{key:"readValue",value:function(){return St.from(this.readBytes(this.wordSize))}}],[{key:"coerce",value:function(e,t){var g=e.match("^u?int([0-9]+)$");return g&&parseInt(g[1])<=48&&(t=t.toNumber()),t}}]),e}(),kI=function(e){Ze(g,e);var t=ve(g);function g(e){return de(this,g),t.call(this,"address","address",e,!1)}return be(g,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000"}},{key:"encode",value:function(e,t){try{t=_t(t)}catch(g){this._throwError(g.message,t)}return e.writeValue(t)}},{key:"decode",value:function(e){return _t(ft(e.readValue().toHexString(),20))}}]),g}(GI),SI=function(e){Ze(g,e);var t=ve(g);function g(e){var n;return de(this,g),(n=t.call(this,e.name,e.type,void 0,e.dynamic)).coder=e,n}return be(g,[{key:"defaultValue",value:function(){return this.coder.defaultValue()}},{key:"encode",value:function(e,t){return this.coder.encode(e,t)}},{key:"decode",value:function(e){return this.coder.decode(e)}}]),g}(GI),WI=new He(ZI);function VI(e,t,g){var n=null;if(Array.isArray(g))n=g;else if(g&&"object"===typeof g){var r={};n=t.map((function(e){var t=e.localName;return t||WI.throwError("cannot encode object for signature with missing names",He.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:g}),r[t]&&WI.throwError("cannot encode object for signature with duplicate names",He.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:g}),r[t]=!0,g[t]}))}else WI.throwArgumentError("invalid tuple value","tuple",g);t.length!==n.length&&WI.throwArgumentError("types/value length mismatch","tuple",g);var I=new BI(e.wordSize),a=new BI(e.wordSize),o=[];t.forEach((function(e,t){var g=n[t];if(e.dynamic){var r=a.length;e.encode(a,g);var i=I.writeUpdatableValue();o.push((function(e){i(e+r)}))}else e.encode(I,g)})),o.forEach((function(e){e(I.length)}));var i=e.appendWriter(I);return i+=e.appendWriter(a)}function wI(e,t){var g=[],n=e.subReader(0);t.forEach((function(t){var r=null;if(t.dynamic){var I=e.readValue(),a=n.subReader(I.toNumber());try{r=t.decode(a)}catch(o){if(o.code===He.errors.BUFFER_OVERRUN)throw o;(r=o).baseType=t.name,r.name=t.localName,r.type=t.type}}else try{r=t.decode(e)}catch(o){if(o.code===He.errors.BUFFER_OVERRUN)throw o;(r=o).baseType=t.name,r.name=t.localName,r.type=t.type}void 0!=r&&g.push(r)}));var r=t.reduce((function(e,t){var g=t.localName;return g&&(e[g]||(e[g]=0),e[g]++),e}),{});t.forEach((function(e,t){var n=e.localName;if(n&&1===r[n]&&("length"===n&&(n="_length"),null==g[n])){var I=g[t];I instanceof Error?Object.defineProperty(g,n,{enumerable:!0,get:function(){throw I}}):g[n]=I}}));for(var I=function(e){var t=g[e];t instanceof Error&&Object.defineProperty(g,e,{enumerable:!0,get:function(){throw t}})},a=0;a<g.length;a++)I(a);return Object.freeze(g)}var RI=function(e){Ze(g,e);var t=ve(g);function g(e,n,r){var I;de(this,g);var a=e.type+"["+(n>=0?n:"")+"]",o=-1===n||e.dynamic;return(I=t.call(this,"array",a,r,o)).coder=e,I.length=n,I}return be(g,[{key:"defaultValue",value:function(){for(var e=this.coder.defaultValue(),t=[],g=0;g<this.length;g++)t.push(e);return t}},{key:"encode",value:function(e,t){Array.isArray(t)||this._throwError("expected array value",t);var g=this.length;-1===g&&(g=t.length,e.writeValue(t.length)),WI.checkArgumentCount(t.length,g,"coder array"+(this.localName?" "+this.localName:""));for(var n=[],r=0;r<t.length;r++)n.push(this.coder);return VI(e,n,t)}},{key:"decode",value:function(e){var t=this.length;-1===t&&32*(t=e.readValue().toNumber())>e._data.length&&WI.throwError("insufficient data length",He.errors.BUFFER_OVERRUN,{length:e._data.length,count:t});for(var g=[],n=0;n<t;n++)g.push(new SI(this.coder));return e.coerce(this.name,wI(e,g))}}]),g}(GI),XI=function(e){Ze(g,e);var t=ve(g);function g(e){return de(this,g),t.call(this,"bool","bool",e,!1)}return be(g,[{key:"defaultValue",value:function(){return!1}},{key:"encode",value:function(e,t){return e.writeValue(t?1:0)}},{key:"decode",value:function(e){return e.coerce(this.type,!e.readValue().isZero())}}]),g}(GI),JI=function(e){Ze(g,e);var t=ve(g);function g(e,n){return de(this,g),t.call(this,e,e,n,!0)}return be(g,[{key:"defaultValue",value:function(){return"0x"}},{key:"encode",value:function(e,t){t=lt(t);var g=e.writeValue(t.length);return g+=e.writeBytes(t)}},{key:"decode",value:function(e){return e.readBytes(e.readValue().toNumber(),!0)}}]),g}(GI),YI=function(e){Ze(g,e);var t=ve(g);function g(e){return de(this,g),t.call(this,"bytes",e)}return be(g,[{key:"decode",value:function(e){return e.coerce(this.name,dt(Pe(ye(g.prototype),"decode",this).call(this,e)))}}]),g}(JI),HI=function(e){Ze(g,e);var t=ve(g);function g(e,n){var r;de(this,g);var I="bytes"+String(e);return(r=t.call(this,I,I,n,!1)).size=e,r}return be(g,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}},{key:"encode",value:function(e,t){var g=lt(t);return g.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(g)}},{key:"decode",value:function(e){return e.coerce(this.name,dt(e.readBytes(this.size)))}}]),g}(GI),NI=function(e){Ze(g,e);var t=ve(g);function g(e){return de(this,g),t.call(this,"null","",e,!1)}return be(g,[{key:"defaultValue",value:function(){return null}},{key:"encode",value:function(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}},{key:"decode",value:function(e){return e.readBytes(0),e.coerce(this.name,null)}}]),g}(GI),FI=function(e){Ze(g,e);var t=ve(g);function g(e,n,r){var I;de(this,g);var a=(n?"int":"uint")+8*e;return(I=t.call(this,a,a,r,!1)).size=e,I.signed=n,I}return be(g,[{key:"defaultValue",value:function(){return 0}},{key:"encode",value:function(e,t){var g=St.from(t),n=Wg.mask(8*e.wordSize);if(this.signed){var r=n.mask(8*this.size-1);(g.gt(r)||g.lt(r.add(Sg).mul(vg)))&&this._throwError("value out-of-bounds",t)}else(g.lt(kg)||g.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return g=g.toTwos(8*this.size).mask(8*this.size),this.signed&&(g=g.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(g)}},{key:"decode",value:function(e){var t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}]),g}(GI),KI=function(e){Ze(g,e);var t=ve(g);function g(e){return de(this,g),t.call(this,"string",e)}return be(g,[{key:"defaultValue",value:function(){return""}},{key:"encode",value:function(e,t){return Pe(ye(g.prototype),"encode",this).call(this,e,ag(t))}},{key:"decode",value:function(e){return og(Pe(ye(g.prototype),"decode",this).call(this,e))}}]),g}(JI),xI=function(e){Ze(g,e);var t=ve(g);function g(e,n){var r;de(this,g);var I=!1,a=[];e.forEach((function(e){e.dynamic&&(I=!0),a.push(e.type)}));var o="tuple("+a.join(",")+")";return(r=t.call(this,"tuple",o,n,I)).coders=e,r}return be(g,[{key:"defaultValue",value:function(){var e=[];this.coders.forEach((function(t){e.push(t.defaultValue())}));var t=this.coders.reduce((function(e,t){var g=t.localName;return g&&(e[g]||(e[g]=0),e[g]++),e}),{});return this.coders.forEach((function(g,n){var r=g.localName;r&&1===t[r]&&("length"===r&&(r="_length"),null==e[r]&&(e[r]=e[n]))})),Object.freeze(e)}},{key:"encode",value:function(e,t){return VI(e,this.coders,t)}},{key:"decode",value:function(e){return e.coerce(this.name,wI(e,this.coders))}}]),g}(GI),EI=new He(ZI),MI={},DI={calldata:!0,memory:!0,storage:!0},UI={calldata:!0,memory:!0};function zI(e,t){if("bytes"===e||"string"===e){if(DI[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&UI[t])return!0;return(DI[t]||"payable"===t)&&EI.throwArgumentError("invalid modifier","name",t),!1}function LI(e,t){for(var g in t)Ke(e,g,t[g])}var QI=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),TI=new RegExp(/^(.*)\[([0-9]*)\]$/),jI=function(){function e(t,g){de(this,e),t!==MI&&EI.throwError("use fromString",He.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),LI(this,g);var n=this.type.match(TI);LI(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:e.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}return be(e,[{key:"format",value:function(e){if(e||(e=QI.sighash),QI[e]||EI.throwArgumentError("invalid format type","format",e),e===QI.json){var t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"===typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((function(t){return JSON.parse(t.format(e))}))),JSON.stringify(t)}var g="";return"array"===this.baseType?(g+=this.arrayChildren.format(e),g+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==QI.sighash&&(g+=this.type),g+="("+this.components.map((function(t){return t.format(e)})).join(e===QI.full?", ":",")+")"):g+=this.type,e!==QI.sighash&&(!0===this.indexed&&(g+=" indexed"),e===QI.full&&this.name&&(g+=" "+this.name)),g}}],[{key:"from",value:function(t,g){return"string"===typeof t?e.fromString(t,g):e.fromObject(t)}},{key:"fromObject",value:function(t){return e.isParamType(t)?t:new e(MI,{name:t.name||null,type:Ia(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(e.fromObject):null})}},{key:"fromString",value:function(t,g){return n=function(e,t){var g=e;function n(t){EI.throwArgumentError("unexpected character at position ".concat(t),"param",e)}function r(e){var g={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(g.indexed=!1),g}e=e.replace(/\s/g," ");for(var I={type:"",name:"",state:{allowType:!0}},a=I,o=0;o<e.length;o++){var i=e[o];switch(i){case"(":a.state.allowType&&""===a.type?a.type="tuple":a.state.allowParams||n(o),a.state.allowType=!1,a.type=Ia(a.type),a.components=[r(a)],a=a.components[0];break;case")":delete a.state,"indexed"===a.name&&(t||n(o),a.indexed=!0,a.name=""),zI(a.type,a.name)&&(a.name=""),a.type=Ia(a.type);var C=a;(a=a.parent)||n(o),delete C.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,"indexed"===a.name&&(t||n(o),a.indexed=!0,a.name=""),zI(a.type,a.name)&&(a.name=""),a.type=Ia(a.type);var l=r(a.parent);a.parent.components.push(l),delete a.parent,a=l;break;case" ":a.state.allowType&&""!==a.type&&(a.type=Ia(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&""!==a.name&&("indexed"===a.name?(t||n(o),a.indexed&&n(o),a.indexed=!0,a.name=""):zI(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(o),a.type+=i,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(o),a.type+=i,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=i,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=i,delete a.state.allowArray):a.state.readArray?a.type+=i:n(o)}}return a.parent&&EI.throwArgumentError("unexpected eof","param",e),delete I.state,"indexed"===a.name?(t||n(g.length-7),a.indexed&&n(g.length-7),a.indexed=!0,a.name=""):zI(a.type,a.name)&&(a.name=""),I.type=Ia(I.type),I}(t,!!g),e.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n}},{key:"isParamType",value:function(e){return!(null==e||!e._isParamType)}}]),e}();function PI(e,t){return function(e){e=e.trim();for(var t=[],g="",n=0,r=0;r<e.length;r++){var I=e[r];","===I&&0===n?(t.push(g),g=""):(g+=I,"("===I?n++:")"===I&&-1===--n&&EI.throwArgumentError("unbalanced parenthesis","value",e))}g&&t.push(g);return t}(e).map((function(e){return jI.fromString(e,t)}))}var OI=function(){function e(t,g){de(this,e),t!==MI&&EI.throwError("use a static from method",He.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),LI(this,g),this._isFragment=!0,Object.freeze(this)}return be(e,null,[{key:"from",value:function(t){return e.isFragment(t)?t:"string"===typeof t?e.fromString(t):e.fromObject(t)}},{key:"fromObject",value:function(t){if(e.isFragment(t))return t;switch(t.type){case"function":return ga.fromObject(t);case"event":return _I.fromObject(t);case"constructor":return ta.fromObject(t);case"error":return ra.fromObject(t);case"fallback":case"receive":return null}return EI.throwArgumentError("invalid fragment object","value",t)}},{key:"fromString",value:function(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?_I.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?ga.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?ta.fromString(e.trim()):"error"===e.split(" ")[0]?ra.fromString(e.substring(5).trim()):EI.throwArgumentError("unsupported fragment","value",e)}},{key:"isFragment",value:function(e){return!(!e||!e._isFragment)}}]),e}(),_I=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g,[{key:"format",value:function(e){if(e||(e=QI.sighash),QI[e]||EI.throwArgumentError("invalid format type","format",e),e===QI.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==QI.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===QI.full?", ":",")+") ",e!==QI.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?g.fromString(e):g.fromObject(e)}},{key:"fromObject",value:function(e){if(g.isEventFragment(e))return e;"event"!==e.type&&EI.throwArgumentError("invalid event object","value",e);var t={name:oa(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(jI.fromObject):[],type:"event"};return new g(MI,t)}},{key:"fromString",value:function(e){var t=e.match(ia);t||EI.throwArgumentError("invalid event string","value",e);var n=!1;return t[3].split(" ").forEach((function(e){switch(e.trim()){case"anonymous":n=!0;break;case"":break;default:EI.warn("unknown modifier: "+e)}})),g.fromObject({name:t[1].trim(),anonymous:n,inputs:PI(t[2],!0),type:"event"})}},{key:"isEventFragment",value:function(e){return e&&e._isFragment&&"event"===e.type}}]),g}(OI);function qI(e,t){t.gas=null;var g=e.split("@");return 1!==g.length?(g.length>2&&EI.throwArgumentError("invalid human-readable ABI signature","value",e),g[1].match(/^[0-9]+$/)||EI.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=St.from(g[1]),g[0]):e}function $I(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((function(e){switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function ea(e){var t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&EI.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&EI.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||EI.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&EI.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&EI.throwArgumentError("unable to determine stateMutability","value",e),t}var ta=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g,[{key:"format",value:function(e){if(e||(e=QI.sighash),QI[e]||EI.throwArgumentError("invalid format type","format",e),e===QI.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});e===QI.sighash&&EI.throwError("cannot format a constructor for sighash",He.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});var t="constructor("+this.inputs.map((function(t){return t.format(e)})).join(e===QI.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?g.fromString(e):g.fromObject(e)}},{key:"fromObject",value:function(e){if(g.isConstructorFragment(e))return e;"constructor"!==e.type&&EI.throwArgumentError("invalid constructor object","value",e);var t=ea(e);t.constant&&EI.throwArgumentError("constructor cannot be constant","value",e);var n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(jI.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?St.from(e.gas):null};return new g(MI,n)}},{key:"fromString",value:function(e){var t={type:"constructor"},n=(e=qI(e,t)).match(ia);return n&&"constructor"===n[1].trim()||EI.throwArgumentError("invalid constructor string","value",e),t.inputs=PI(n[2].trim(),!1),$I(n[3].trim(),t),g.fromObject(t)}},{key:"isConstructorFragment",value:function(e){return e&&e._isFragment&&"constructor"===e.type}}]),g}(OI),ga=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g,[{key:"format",value:function(e){if(e||(e=QI.sighash),QI[e]||EI.throwArgumentError("invalid format type","format",e),e===QI.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))})),outputs:this.outputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==QI.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===QI.full?", ":",")+") ",e!==QI.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((function(t){return t.format(e)})).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?g.fromString(e):g.fromObject(e)}},{key:"fromObject",value:function(e){if(g.isFunctionFragment(e))return e;"function"!==e.type&&EI.throwArgumentError("invalid function object","value",e);var t=ea(e),n={type:e.type,name:oa(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(jI.fromObject):[],outputs:e.outputs?e.outputs.map(jI.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?St.from(e.gas):null};return new g(MI,n)}},{key:"fromString",value:function(e){var t={type:"function"},n=(e=qI(e,t)).split(" returns ");n.length>2&&EI.throwArgumentError("invalid function string","value",e);var r=n[0].match(ia);if(r||EI.throwArgumentError("invalid function signature","value",e),t.name=r[1].trim(),t.name&&oa(t.name),t.inputs=PI(r[2],!1),$I(r[3].trim(),t),n.length>1){var I=n[1].match(ia);""==I[1].trim()&&""==I[3].trim()||EI.throwArgumentError("unexpected tokens","value",e),t.outputs=PI(I[2],!1)}else t.outputs=[];return g.fromObject(t)}},{key:"isFunctionFragment",value:function(e){return e&&e._isFragment&&"function"===e.type}}]),g}(ta);function na(e){var t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||EI.throwArgumentError("cannot specify user defined ".concat(t," error"),"fragment",e),e}var ra=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g,[{key:"format",value:function(e){if(e||(e=QI.sighash),QI[e]||EI.throwArgumentError("invalid format type","format",e),e===QI.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==QI.sighash&&(t+="error "),(t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===QI.full?", ":",")+") ").trim()}}],[{key:"from",value:function(e){return"string"===typeof e?g.fromString(e):g.fromObject(e)}},{key:"fromObject",value:function(e){if(g.isErrorFragment(e))return e;"error"!==e.type&&EI.throwArgumentError("invalid error object","value",e);var t={type:e.type,name:oa(e.name),inputs:e.inputs?e.inputs.map(jI.fromObject):[]};return na(new g(MI,t))}},{key:"fromString",value:function(e){var t={type:"error"},n=e.match(ia);return n||EI.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&oa(t.name),t.inputs=PI(n[2],!1),na(g.fromObject(t))}},{key:"isErrorFragment",value:function(e){return e&&e._isFragment&&"error"===e.type}}]),g}(OI);function Ia(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}var aa=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function oa(e){return e&&e.match(aa)||EI.throwArgumentError('invalid identifier "'.concat(e,'"'),"value",e),e}var ia=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");var Ca=new He(ZI),la=new RegExp(/^bytes([0-9]*)$/),ua=new RegExp(/^(u?int)([0-9]*)$/),ca=function(){function e(t){de(this,e),Ke(this,"coerceFunc",t||null)}return be(e,[{key:"_getCoder",value:function(e){var t=this;switch(e.baseType){case"address":return new kI(e.name);case"bool":return new XI(e.name);case"string":return new KI(e.name);case"bytes":return new YI(e.name);case"array":return new RI(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new xI((e.components||[]).map((function(e){return t._getCoder(e)})),e.name);case"":return new NI(e.name)}var g=e.type.match(ua);if(g){var n=parseInt(g[2]||"256");return(0===n||n>256||n%8!==0)&&Ca.throwArgumentError("invalid "+g[1]+" bit length","param",e),new FI(n/8,"int"===g[1],e.name)}if(g=e.type.match(la)){var r=parseInt(g[1]);return(0===r||r>32)&&Ca.throwArgumentError("invalid bytes length","param",e),new HI(r,e.name)}return Ca.throwArgumentError("invalid type","type",e.type)}},{key:"_getWordSize",value:function(){return 32}},{key:"_getReader",value:function(e,t){return new vI(e,this._getWordSize(),this.coerceFunc,t)}},{key:"_getWriter",value:function(){return new BI(this._getWordSize())}},{key:"getDefaultValue",value:function(e){var t=this,g=e.map((function(e){return t._getCoder(jI.from(e))}));return new xI(g,"_").defaultValue()}},{key:"encode",value:function(e,t){var g=this;e.length!==t.length&&Ca.throwError("types/values length mismatch",He.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});var n=e.map((function(e){return g._getCoder(jI.from(e))})),r=new xI(n,"_"),I=this._getWriter();return r.encode(I,t),I.data}},{key:"decode",value:function(e,t,g){var n=this,r=e.map((function(e){return n._getCoder(jI.from(e))}));return new xI(r,"_").decode(this._getReader(lt(t),g))}}]),e}(),sa=new ca,Aa=new He(ZI),da=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g)}(Qe),ha=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g)}(Qe),ma=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g)}(Qe),ba=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g,null,[{key:"isIndexed",value:function(e){return!(!e||!e._isIndexed)}}]),g}(Qe),pa={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function fa(e,t){var g=new Error("deferred error during ABI decoding triggered accessing ".concat(e));return g.error=t,g}var Za=function(){function e(t){var g=this;de(this,e);Ke(this,"fragments",("string"===typeof t?JSON.parse(t):t).map((function(e){return OI.from(e)})).filter((function(e){return null!=e}))),Ke(this,"_abiCoder",xe(this instanceof e?this.constructor:void 0,"getAbiCoder")()),Ke(this,"functions",{}),Ke(this,"errors",{}),Ke(this,"events",{}),Ke(this,"structs",{}),this.fragments.forEach((function(e){var t=null;switch(e.type){case"constructor":return g.deploy?void Aa.warn("duplicate definition - constructor"):void Ke(g,"deploy",e);case"function":t=g.functions;break;case"event":t=g.events;break;case"error":t=g.errors;break;default:return}var n=e.format();t[n]?Aa.warn("duplicate definition - "+n):t[n]=e})),this.deploy||Ke(this,"deploy",ta.from({payable:!1,type:"constructor"})),Ke(this,"_isInterface",!0)}return be(e,[{key:"format",value:function(e){e||(e=QI.full),e===QI.sighash&&Aa.throwArgumentError("interface does not support formatting sighash","format",e);var t=this.fragments.map((function(t){return t.format(e)}));return e===QI.json?JSON.stringify(t.map((function(e){return JSON.parse(e)}))):t}},{key:"getFunction",value:function(e){if(st(e)){for(var t in this.functions)if(e===this.getSighash(t))return this.functions[t];Aa.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){var g=e.trim(),n=Object.keys(this.functions).filter((function(e){return e.split("(")[0]===g}));return 0===n.length?Aa.throwArgumentError("no matching function","name",g):n.length>1&&Aa.throwArgumentError("multiple matching functions","name",g),this.functions[n[0]]}var r=this.functions[ga.fromString(e).format()];return r||Aa.throwArgumentError("no matching function","signature",e),r}},{key:"getEvent",value:function(e){if(st(e)){var t=e.toLowerCase();for(var g in this.events)if(t===this.getEventTopic(g))return this.events[g];Aa.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){var n=e.trim(),r=Object.keys(this.events).filter((function(e){return e.split("(")[0]===n}));return 0===r.length?Aa.throwArgumentError("no matching event","name",n):r.length>1&&Aa.throwArgumentError("multiple matching events","name",n),this.events[r[0]]}var I=this.events[_I.fromString(e).format()];return I||Aa.throwArgumentError("no matching event","signature",e),I}},{key:"getError",value:function(e){if(st(e)){var t=xe(this.constructor,"getSighash");for(var g in this.errors){if(e===t(this.errors[g]))return this.errors[g]}Aa.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){var n=e.trim(),r=Object.keys(this.errors).filter((function(e){return e.split("(")[0]===n}));return 0===r.length?Aa.throwArgumentError("no matching error","name",n):r.length>1&&Aa.throwArgumentError("multiple matching errors","name",n),this.errors[r[0]]}var I=this.errors[ga.fromString(e).format()];return I||Aa.throwArgumentError("no matching error","signature",e),I}},{key:"getSighash",value:function(e){if("string"===typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(g){throw t}}return xe(this.constructor,"getSighash")(e)}},{key:"getEventTopic",value:function(e){return"string"===typeof e&&(e=this.getEvent(e)),xe(this.constructor,"getEventTopic")(e)}},{key:"_decodeParams",value:function(e,t){return this._abiCoder.decode(e,t)}},{key:"_encodeParams",value:function(e,t){return this._abiCoder.encode(e,t)}},{key:"encodeDeploy",value:function(e){return this._encodeParams(this.deploy.inputs,e||[])}},{key:"decodeErrorResult",value:function(e,t){"string"===typeof e&&(e=this.getError(e));var g=lt(t);return dt(g.slice(0,4))!==this.getSighash(e)&&Aa.throwArgumentError("data signature does not match error ".concat(e.name,"."),"data",dt(g)),this._decodeParams(e.inputs,g.slice(4))}},{key:"encodeErrorResult",value:function(e,t){return"string"===typeof e&&(e=this.getError(e)),dt(ut([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}},{key:"decodeFunctionData",value:function(e,t){"string"===typeof e&&(e=this.getFunction(e));var g=lt(t);return dt(g.slice(0,4))!==this.getSighash(e)&&Aa.throwArgumentError("data signature does not match function ".concat(e.name,"."),"data",dt(g)),this._decodeParams(e.inputs,g.slice(4))}},{key:"encodeFunctionData",value:function(e,t){return"string"===typeof e&&(e=this.getFunction(e)),dt(ut([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}},{key:"decodeFunctionResult",value:function(e,t){"string"===typeof e&&(e=this.getFunction(e));var g=lt(t),n=null,r="",I=null,a=null,o=null;switch(g.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,g)}catch(l){}break;case 4:var i=dt(g.slice(0,4)),C=pa[i];if(C)I=this._abiCoder.decode(C.inputs,g.slice(4)),a=C.name,o=C.signature,C.reason&&(n=I[0]),"Error"===a?r="; VM Exception while processing transaction: reverted with reason string ".concat(JSON.stringify(I[0])):"Panic"===a&&(r="; VM Exception while processing transaction: reverted with panic code ".concat(I[0]));else try{var l=this.getError(i);I=this._abiCoder.decode(l.inputs,g.slice(4)),a=l.name,o=l.format()}catch(l){}}return Aa.throwError("call revert exception"+r,He.errors.CALL_EXCEPTION,{method:e.format(),data:dt(t),errorArgs:I,errorName:a,errorSignature:o,reason:n})}},{key:"encodeFunctionResult",value:function(e,t){return"string"===typeof e&&(e=this.getFunction(e)),dt(this._abiCoder.encode(e.outputs,t||[]))}},{key:"encodeFilterTopics",value:function(e,t){var g=this;"string"===typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&Aa.throwError("too many arguments for "+e.format(),He.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});var n=[];e.anonymous||n.push(this.getEventTopic(e));var r=function(e,t){return"string"===e.type?ig(t):"bytes"===e.type?Yt(dt(t)):("bool"===e.type&&"boolean"===typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=St.from(t).toHexString()),"address"===e.type&&g._abiCoder.encode(["address"],[t]),ft(dt(t),32))};for(t.forEach((function(t,g){var I=e.inputs[g];I.indexed?null==t?n.push(null):"array"===I.baseType||"tuple"===I.baseType?Aa.throwArgumentError("filtering with tuples or arrays not supported","contract."+I.name,t):Array.isArray(t)?n.push(t.map((function(e){return r(I,e)}))):n.push(r(I,t)):null!=t&&Aa.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+I.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}},{key:"encodeEventLog",value:function(e,t){var g=this;"string"===typeof e&&(e=this.getEvent(e));var n=[],r=[],I=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Aa.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((function(e,a){var o=t[a];if(e.indexed)if("string"===e.type)n.push(ig(o));else if("bytes"===e.type)n.push(Yt(o));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(g._abiCoder.encode([e.type],[o]))}else r.push(e),I.push(o)})),{data:this._abiCoder.encode(r,I),topics:n}}},{key:"decodeEventLog",value:function(e,t,g){if("string"===typeof e&&(e=this.getEvent(e)),null!=g&&!e.anonymous){var n=this.getEventTopic(e);st(g[0],32)&&g[0].toLowerCase()===n||Aa.throwError("fragment/topic mismatch",He.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:n,value:g[0]}),g=g.slice(1)}var r=[],I=[],a=[];e.inputs.forEach((function(e,t){e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(jI.fromObject({type:"bytes32",name:e.name})),a.push(!0)):(r.push(e),a.push(!1)):(I.push(e),a.push(!1))}));var o=null!=g?this._abiCoder.decode(r,ut(g)):null,i=this._abiCoder.decode(I,t,!0),C=[],l=0,u=0;e.inputs.forEach((function(e,t){if(e.indexed)if(null==o)C[t]=new ba({_isIndexed:!0,hash:null});else if(a[t])C[t]=new ba({_isIndexed:!0,hash:o[u++]});else try{C[t]=o[u++]}catch(n){C[t]=n}else try{C[t]=i[l++]}catch(n){C[t]=n}if(e.name&&null==C[e.name]){var g=C[t];g instanceof Error?Object.defineProperty(C,e.name,{enumerable:!0,get:function(){throw fa("property ".concat(JSON.stringify(e.name)),g)}}):C[e.name]=g}}));for(var c=function(e){var t=C[e];t instanceof Error&&Object.defineProperty(C,e,{enumerable:!0,get:function(){throw fa("index ".concat(e),t)}})},s=0;s<C.length;s++)c(s);return Object.freeze(C)}},{key:"parseTransaction",value:function(e){var t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new ha({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:St.from(e.value||"0")}):null}},{key:"parseLog",value:function(e){var t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new da({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}},{key:"parseError",value:function(e){var t=dt(e),g=this.getError(t.substring(0,10).toLowerCase());return g?new ma({args:this._abiCoder.decode(g.inputs,"0x"+t.substring(10)),errorFragment:g,name:g.name,signature:g.format(),sighash:this.getSighash(g)}):null}}],[{key:"getAbiCoder",value:function(){return sa}},{key:"getAddress",value:function(e){return _t(e)}},{key:"getSighash",value:function(e){return mt(ig(e.format()),0,4)}},{key:"getEventTopic",value:function(e){return ig(e.format())}},{key:"isInterface",value:function(e){return!(!e||!e._isInterface)}}]),e}(),ya=function(e,t,g,n){return new(g||(g=Promise))((function(r,I){function a(e){try{i(n.next(e))}catch(t){I(t)}}function o(e){try{i(n.throw(e))}catch(t){I(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof g?t:new g((function(e){e(t)}))).then(a,o)}i((n=n.apply(e,t||[])).next())}))},Ga=new He("contracts/5.7.0");function Ba(e,t){return ya(this,void 0,void 0,Ce().mark((function g(){var n,r;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,t;case 2:return"string"!==typeof(n=g.sent)&&Ga.throwArgumentError("invalid address or ENS name","name",n),g.prev=4,g.abrupt("return",_t(n));case 8:g.prev=8,g.t0=g.catch(4);case 10:return e||Ga.throwError("a provider or signer is needed to resolve ENS names",He.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"}),g.next=13,e.resolveName(n);case 13:return null==(r=g.sent)&&Ga.throwArgumentError("resolver or addr is not configured for ENS name","name",n),g.abrupt("return",r);case 16:case"end":return g.stop()}}),g,null,[[4,8]])})))}function va(e,t,g){return ya(this,void 0,void 0,Ce().mark((function n(){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Array.isArray(g)){n.next=4;break}return n.next=3,Promise.all(g.map((function(g,n){return va(e,Array.isArray(t)?t[n]:t[g.name],g)})));case 3:case 7:case 11:case 17:return n.abrupt("return",n.sent);case 4:if("address"!==g.type){n.next=8;break}return n.next=7,Ba(e,t);case 8:if("tuple"!==g.type){n.next=12;break}return n.next=11,va(e,t,g.components);case 12:if("array"!==g.baseType){n.next=18;break}if(Array.isArray(t)){n.next=15;break}return n.abrupt("return",Promise.reject(Ga.makeError("invalid value for array",He.errors.INVALID_ARGUMENT,{argument:"value",value:t})));case 15:return n.next=17,Promise.all(t.map((function(t){return va(e,t,g.arrayChildren)})));case 18:return n.abrupt("return",t);case 19:case"end":return n.stop()}}),n)})))}function ka(e,t,g){return ya(this,void 0,void 0,Ce().mark((function n(){var r,I,a,o,i,C,l,u,c,s,A=this;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={},g.length===t.inputs.length+1&&"object"===typeof g[g.length-1]&&(r=Me(g.pop())),Ga.checkArgumentCount(g.length,t.inputs.length,"passed to contract"),e.signer?r.from?r.from=Ee({override:Ba(e.signer,r.from),signer:e.signer.getAddress()}).then((function(e){return ya(A,void 0,void 0,Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _t(e.signer)!==e.override&&Ga.throwError("Contract with a Signer cannot override from",He.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),t.abrupt("return",e.override);case 2:case"end":return t.stop()}}),t)})))})):r.from=e.signer.getAddress():r.from&&(r.from=Ba(e.provider,r.from)),n.next=6,Ee({args:va(e.signer||e.provider,g,t.inputs),address:e.resolvedAddress,overrides:Ee(r)||{}});case 6:if(I=n.sent,a=e.interface.encodeFunctionData(t,I.args),o={data:a,to:I.address},null!=(i=I.overrides).nonce&&(o.nonce=St.from(i.nonce).toNumber()),null!=i.gasLimit&&(o.gasLimit=St.from(i.gasLimit)),null!=i.gasPrice&&(o.gasPrice=St.from(i.gasPrice)),null!=i.maxFeePerGas&&(o.maxFeePerGas=St.from(i.maxFeePerGas)),null!=i.maxPriorityFeePerGas&&(o.maxPriorityFeePerGas=St.from(i.maxPriorityFeePerGas)),null!=i.from&&(o.from=i.from),null!=i.type&&(o.type=i.type),null!=i.accessList&&(o.accessList=Wn(i.accessList)),null==o.gasLimit&&null!=t.gas){for(C=21e3,l=lt(a),u=0;u<l.length;u++)C+=4,l[u]&&(C+=64);o.gasLimit=St.from(t.gas).add(C)}return i.value&&((c=St.from(i.value)).isZero()||t.payable||Ga.throwError("non-payable method cannot override value",He.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=c),i.customData&&(o.customData=Me(i.customData)),i.ccipReadEnabled&&(o.ccipReadEnabled=!!i.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled,s=Object.keys(r).filter((function(e){return null!=r[e]})),s.length&&Ga.throwError("cannot override ".concat(s.map((function(e){return JSON.stringify(e)})).join(",")),He.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:s}),n.abrupt("return",o);case 36:case"end":return n.stop()}}),n)})))}function Sa(e,t){var g=t.wait.bind(t);t.wait=function(t){return g(t).then((function(t){return t.events=t.logs.map((function(g){var n=Le(g),r=null;try{r=e.interface.parseLog(g)}catch(I){}return r&&(n.args=r.args,n.decode=function(t,g){return e.interface.decodeEventLog(r.eventFragment,t,g)},n.event=r.name,n.eventSignature=r.signature),n.removeListener=function(){return e.provider},n.getBlock=function(){return e.provider.getBlock(t.blockHash)},n.getTransaction=function(){return e.provider.getTransaction(t.transactionHash)},n.getTransactionReceipt=function(){return Promise.resolve(t)},n})),t}))}}function Wa(e,t,g){var n=e.signer||e.provider;return function(){for(var r=arguments.length,I=new Array(r),a=0;a<r;a++)I[a]=arguments[a];return ya(this,void 0,void 0,Ce().mark((function r(){var a,o,i,C,l;return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=void 0,I.length!==t.inputs.length+1||"object"!==typeof I[I.length-1]){r.next=9;break}if(null==(o=Me(I.pop())).blockTag){r.next=7;break}return r.next=6,o.blockTag;case 6:a=r.sent;case 7:delete o.blockTag,I.push(o);case 9:if(null==e.deployTransaction){r.next=12;break}return r.next=12,e._deployed(a);case 12:return r.next=14,ka(e,t,I);case 14:return i=r.sent,r.next=17,n.call(i,a);case 17:return C=r.sent,r.prev=18,l=e.interface.decodeFunctionResult(t,C),g&&1===t.outputs.length&&(l=l[0]),r.abrupt("return",l);case 24:throw r.prev=24,r.t0=r.catch(18),r.t0.code===He.errors.CALL_EXCEPTION&&(r.t0.address=e.address,r.t0.args=I,r.t0.transaction=i),r.t0;case 28:case"end":return r.stop()}}),r,null,[[18,24]])})))}}function Va(e,t,g){return t.constant?Wa(e,t,g):function(e,t){return function(){for(var g=arguments.length,n=new Array(g),r=0;r<g;r++)n[r]=arguments[r];return ya(this,void 0,void 0,Ce().mark((function g(){var r,I;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(e.signer||Ga.throwError("sending a transaction requires a signer",He.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null==e.deployTransaction){g.next=4;break}return g.next=4,e._deployed();case 4:return g.next=6,ka(e,t,n);case 6:return r=g.sent,g.next=9,e.signer.sendTransaction(r);case 9:return I=g.sent,Sa(e,I),g.abrupt("return",I);case 12:case"end":return g.stop()}}),g)})))}}(e,t)}function wa(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map((function(e){return Array.isArray(e)?e.join("|"):e})).join(":"):""):"*"}var Ra=function(){function e(t,g){de(this,e),Ke(this,"tag",t),Ke(this,"filter",g),this._listeners=[]}return be(e,[{key:"addListener",value:function(e,t){this._listeners.push({listener:e,once:t})}},{key:"removeListener",value:function(e){var t=!1;this._listeners=this._listeners.filter((function(g){return!(!t&&g.listener===e)||(t=!0,!1)}))}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"listeners",value:function(){return this._listeners.map((function(e){return e.listener}))}},{key:"listenerCount",value:function(){return this._listeners.length}},{key:"run",value:function(e){var t=this,g=this.listenerCount();return this._listeners=this._listeners.filter((function(g){var n=e.slice();return setTimeout((function(){g.listener.apply(t,n)}),0),!g.once})),g}},{key:"prepareEvent",value:function(e){}},{key:"getEmit",value:function(e){return[e]}}]),e}(),Xa=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.call(this,"error",null)}return be(g)}(Ra),Ja=function(e){Ze(g,e);var t=ve(g);function g(e,n,r,I){var a;de(this,g);var o={address:e},i=n.getEventTopic(r);return I?(i!==I[0]&&Ga.throwArgumentError("topic mismatch","topics",I),o.topics=I.slice()):o.topics=[i],Ke(pe(a=t.call(this,wa(o),o)),"address",e),Ke(pe(a),"interface",n),Ke(pe(a),"fragment",r),a}return be(g,[{key:"prepareEvent",value:function(e){var t=this;Pe(ye(g.prototype),"prepareEvent",this).call(this,e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=function(e,g){return t.interface.decodeEventLog(t.fragment,e,g)};try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(n){e.args=null,e.decodeError=n}}},{key:"getEmit",value:function(e){var t=function(e){var t=[];return function e(g,n){if(Array.isArray(n))for(var r in n){var I=g.slice();I.push(r);try{e(I,n[r])}catch(a){t.push({path:I,error:a})}}}([],e),t}(e.args);if(t.length)throw t[0].error;var g=(e.args||[]).slice();return g.push(e),g}}]),g}(Ra),Ya=function(e){Ze(g,e);var t=ve(g);function g(e,n){var r;return de(this,g),Ke(pe(r=t.call(this,"*",{address:e})),"address",e),Ke(pe(r),"interface",n),r}return be(g,[{key:"prepareEvent",value:function(e){var t=this;Pe(ye(g.prototype),"prepareEvent",this).call(this,e);try{var n=this.interface.parseLog(e);e.event=n.name,e.eventSignature=n.signature,e.decode=function(e,g){return t.interface.decodeEventLog(n.eventFragment,e,g)},e.args=n.args}catch(r){}}}]),g}(Ra),Ha=function(){function e(t,g,n){var r=this;de(this,e),Ke(this,"interface",xe(this instanceof e?this.constructor:void 0,"getInterface")(g)),null==n?(Ke(this,"provider",null),Ke(this,"signer",null)):et.isSigner(n)?(Ke(this,"provider",n.provider||null),Ke(this,"signer",n)):Tn.isProvider(n)?(Ke(this,"provider",n),Ke(this,"signer",null)):Ga.throwArgumentError("invalid signer or provider","signerOrProvider",n),Ke(this,"callStatic",{}),Ke(this,"estimateGas",{}),Ke(this,"functions",{}),Ke(this,"populateTransaction",{}),Ke(this,"filters",{});var I={};if(Object.keys(this.interface.events).forEach((function(e){var t=r.interface.events[e];Ke(r.filters,e,(function(){for(var e=arguments.length,g=new Array(e),n=0;n<e;n++)g[n]=arguments[n];return{address:r.address,topics:r.interface.encodeFilterTopics(t,g)}})),I[t.name]||(I[t.name]=[]),I[t.name].push(e)})),Object.keys(I).forEach((function(e){var t=I[e];1===t.length?Ke(r.filters,e,r.filters[t[0]]):Ga.warn("Duplicate definition of ".concat(e," (").concat(t.join(", "),")"))})),Ke(this,"_runningEvents",{}),Ke(this,"_wrappedEmits",{}),null==t&&Ga.throwArgumentError("invalid contract address or ENS name","addressOrName",t),Ke(this,"address",t),this.provider)Ke(this,"resolvedAddress",Ba(this.provider,t));else try{Ke(this,"resolvedAddress",Promise.resolve(_t(t)))}catch(i){Ga.throwError("provider is required to use ENS name as contract address",He.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch((function(e){}));var a={},o={};Object.keys(this.interface.functions).forEach((function(e){var t=r.interface.functions[e];if(o[e])Ga.warn("Duplicate ABI entry for ".concat(JSON.stringify(e)));else{o[e]=!0;var g=t.name;a["%".concat(g)]||(a["%".concat(g)]=[]),a["%".concat(g)].push(e),null==r[e]&&Ke(r,e,Va(r,t,!0)),null==r.functions[e]&&Ke(r.functions,e,Va(r,t,!1)),null==r.callStatic[e]&&Ke(r.callStatic,e,Wa(r,t,!0)),null==r.populateTransaction[e]&&Ke(r.populateTransaction,e,function(e,t){return function(){for(var g=arguments.length,n=new Array(g),r=0;r<g;r++)n[r]=arguments[r];return ka(e,t,n)}}(r,t)),null==r.estimateGas[e]&&Ke(r.estimateGas,e,function(e,t){var g=e.signer||e.provider;return function(){for(var n=arguments.length,r=new Array(n),I=0;I<n;I++)r[I]=arguments[I];return ya(this,void 0,void 0,Ce().mark((function n(){var I;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g||Ga.throwError("estimate require a provider or signer",He.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"}),n.next=3,ka(e,t,r);case 3:return I=n.sent,n.next=6,g.estimateGas(I);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))}}(r,t))}})),Object.keys(a).forEach((function(e){var t=a[e];if(!(t.length>1)){e=e.substring(1);var g=t[0];try{null==r[e]&&Ke(r,e,r[g])}catch(n){}null==r.functions[e]&&Ke(r.functions,e,r.functions[g]),null==r.callStatic[e]&&Ke(r.callStatic,e,r.callStatic[g]),null==r.populateTransaction[e]&&Ke(r.populateTransaction,e,r.populateTransaction[g]),null==r.estimateGas[e]&&Ke(r.estimateGas,e,r.estimateGas[g])}}))}return be(e,[{key:"deployed",value:function(){return this._deployed()}},{key:"_deployed",value:function(e){var t=this;return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((function(){return t})):this._deployedPromise=this.provider.getCode(this.address,e).then((function(e){return"0x"===e&&Ga.throwError("contract not deployed",He.errors.UNSUPPORTED_OPERATION,{contractAddress:t.address,operation:"getDeployed"}),t}))),this._deployedPromise}},{key:"fallback",value:function(e){var t=this;this.signer||Ga.throwError("sending a transactions require a signer",He.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});var g=Me(e||{});return["from","to"].forEach((function(e){null!=g[e]&&Ga.throwError("cannot override "+e,He.errors.UNSUPPORTED_OPERATION,{operation:e})})),g.to=this.resolvedAddress,this.deployed().then((function(){return t.signer.sendTransaction(g)}))}},{key:"connect",value:function(e){"string"===typeof e&&(e=new tt(e,this.provider));var t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Ke(t,"deployTransaction",this.deployTransaction),t}},{key:"attach",value:function(e){return new this.constructor(e,this.interface,this.signer||this.provider)}},{key:"_normalizeRunningEvent",value:function(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}},{key:"_getRunningEvent",value:function(e){if("string"===typeof e){if("error"===e)return this._normalizeRunningEvent(new Xa);if("event"===e)return this._normalizeRunningEvent(new Ra("event",null));if("*"===e)return this._normalizeRunningEvent(new Ya(this.address,this.interface));var t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Ja(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{var g=e.topics[0];if("string"!==typeof g)throw new Error("invalid topic");var n=this.interface.getEvent(g);return this._normalizeRunningEvent(new Ja(this.address,this.interface,n,e.topics))}catch(I){}var r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Ra(wa(r),r))}return this._normalizeRunningEvent(new Ya(this.address,this.interface))}},{key:"_checkRunningEvents",value:function(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];var t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}},{key:"_wrapEvent",value:function(e,t,g){var n=this,r=Le(t);return r.removeListener=function(){g&&(e.removeListener(g),n._checkRunningEvents(e))},r.getBlock=function(){return n.provider.getBlock(t.blockHash)},r.getTransaction=function(){return n.provider.getTransaction(t.transactionHash)},r.getTransactionReceipt=function(){return n.provider.getTransactionReceipt(t.transactionHash)},e.prepareEvent(r),r}},{key:"_addEventListener",value:function(e,t,g){var n=this;if(this.provider||Ga.throwError("events require a provider or a signer with a provider",He.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,g),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){var r=function(g){var r=n._wrapEvent(e,g,t);if(null==r.decodeError)try{var I=e.getEmit(r);n.emit.apply(n,[e.filter].concat(On(I)))}catch(a){r.decodeError=a.error}null!=e.filter&&n.emit("event",r),null!=r.decodeError&&n.emit("error",r.decodeError,r)};this._wrappedEmits[e.tag]=r,null!=e.filter&&this.provider.on(e.filter,r)}}},{key:"queryFilter",value:function(e,t,g){var n=this,r=this._getRunningEvent(e),I=Me(r.filter);return"string"===typeof t&&st(t,32)?(null!=g&&Ga.throwArgumentError("cannot specify toBlock with blockhash","toBlock",g),I.blockHash=t):(I.fromBlock=null!=t?t:0,I.toBlock=null!=g?g:"latest"),this.provider.getLogs(I).then((function(e){return e.map((function(e){return n._wrapEvent(r,e,null)}))}))}},{key:"on",value:function(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}},{key:"once",value:function(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}},{key:"emit",value:function(e){if(!this.provider)return!1;for(var t=this._getRunningEvent(e),g=arguments.length,n=new Array(g>1?g-1:0),r=1;r<g;r++)n[r-1]=arguments[r];var I=t.run(n)>0;return this._checkRunningEvents(t),I}},{key:"listenerCount",value:function(e){var t=this;return this.provider?null==e?Object.keys(this._runningEvents).reduce((function(e,g){return e+t._runningEvents[g].listenerCount()}),0):this._getRunningEvent(e).listenerCount():0}},{key:"listeners",value:function(e){var t=this;if(!this.provider)return[];if(null==e){var g=function(){var e=[];for(var g in t._runningEvents)t._runningEvents[g].listeners().forEach((function(t){e.push(t)}));return{v:e}}();if("object"===typeof g)return g.v}return this._getRunningEvent(e).listeners()}},{key:"removeAllListeners",value:function(e){if(!this.provider)return this;if(null==e){for(var t in this._runningEvents){var g=this._runningEvents[t];g.removeAllListeners(),this._checkRunningEvents(g)}return this}var n=this._getRunningEvent(e);return n.removeAllListeners(),this._checkRunningEvents(n),this}},{key:"off",value:function(e,t){if(!this.provider)return this;var g=this._getRunningEvent(e);return g.removeListener(t),this._checkRunningEvents(g),this}},{key:"removeListener",value:function(e,t){return this.off(e,t)}}],[{key:"getContractAddress",value:function(e){return qt(e)}},{key:"getInterface",value:function(e){return Za.isInterface(e)?e:new Za(e)}},{key:"isIndexed",value:function(e){return ba.isIndexed(e)}}]),e}(),Na=function(e){Ze(g,e);var t=ve(g);function g(){return de(this,g),t.apply(this,arguments)}return be(g)}(Ha),Fa=function(e){return Promise.reject(new Error('No base found for "'.concat(e,'"')))},Ka=function(){function e(t){de(this,e),this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase||Fa;var g,n=_n(t.bases);try{for(n.s();!(g=n.n()).done;){var r=g.value;this.addBase(r)}}catch(I){n.e(I)}finally{n.f()}}return be(e,[{key:"addBase",value:function(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error('Codec already exists for codec "'.concat(e.name,'"'));this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}},{key:"removeBase",value:function(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}},{key:"getBase",value:function(){var e=ue(Ce().mark((function e(t){var g;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._basesByName[t]){e.next=2;break}return e.abrupt("return",this._basesByName[t]);case 2:if(!this._basesByPrefix[t]){e.next=4;break}return e.abrupt("return",this._basesByPrefix[t]);case 4:return e.next=6,this._loadBase(t);case 6:return g=e.sent,null==this._basesByName[g.name]&&null==this._basesByPrefix[g.prefix]&&this.addBase(g),e.abrupt("return",g);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listBases",value:function(){return Object.values(this._basesByName)}}]),e}(),xa=function(e){return Promise.reject(new Error('No codec found for "'.concat(e,'"')))},Ea=function(){function e(t){de(this,e),this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec||xa;var g,n=_n(t.codecs);try{for(n.s();!(g=n.n()).done;){var r=g.value;this.addCodec(r)}}catch(I){n.e(I)}finally{n.f()}}return be(e,[{key:"addCodec",value:function(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}},{key:"removeCodec",value:function(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}},{key:"getCodec",value:function(){var e=ue(Ce().mark((function e(t){var g,n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g="string"===typeof t?this._codecsByName:this._codecsByCode)[t]){e.next=3;break}return e.abrupt("return",g[t]);case 3:return e.next=5,this._loadCodec(t);case 5:return n=e.sent,null==g[t]&&this.addCodec(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listCodecs",value:function(){return Object.values(this._codecsByName)}}]),e}(),Ma=function(e){return Promise.reject(new Error('No hasher found for "'.concat(e,'"')))},Da=function(){function e(t){de(this,e),this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher||Ma;var g,n=_n(t.hashers);try{for(n.s();!(g=n.n()).done;){var r=g.value;this.addHasher(r)}}catch(I){n.e(I)}finally{n.f()}}return be(e,[{key:"addHasher",value:function(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}},{key:"removeHasher",value:function(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}},{key:"getHasher",value:function(){var e=ue(Ce().mark((function e(t){var g,n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g="string"===typeof t?this._hashersByName:this._hashersByCode)[t]){e.next=3;break}return e.abrupt("return",g[t]);case 3:return e.next=5,this._loadHasher(t);case 5:return n=e.sent,null==g[t]&&this.addHasher(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listHashers",value:function(){return Object.values(this._hashersByName)}}]),e}(),Ua=function e(t,g,n){g=g||[];var r=n=n||0;for(;t>=za;)g[n++]=255&t|128,t/=128;for(;-128&t;)g[n++]=255&t|128,t>>>=7;return g[n]=0|t,e.bytes=n-r+1,g},za=Math.pow(2,31);var La=function e(t,g){var n,r=0,I=0,a=g=g||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");n=t[a++],r+=I<28?(127&n)<<I:(127&n)*Math.pow(2,I),I+=7}while(n>=128);return e.bytes=a-g,r};var Qa=Math.pow(2,7),Ta=Math.pow(2,14),ja=Math.pow(2,21),Pa=Math.pow(2,28),Oa=Math.pow(2,35),_a=Math.pow(2,42),qa=Math.pow(2,49),$a=Math.pow(2,56),eo=Math.pow(2,63),to={encode:Ua,decode:La,encodingLength:function(e){return e<Qa?1:e<Ta?2:e<ja?3:e<Pa?4:e<Oa?5:e<_a?6:e<qa?7:e<$a?8:e<eo?9:10}},go=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,g=to.decode(e,t);return[g,to.decode.bytes]},no=function(e,t){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return to.encode(e,t,g),t},ro=function(e){return to.encodingLength(e)},Io=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),ao=function(e,t){var g=t.byteLength,n=ro(e),r=n+ro(g),I=new Uint8Array(r+g);return no(e,I,0),no(g,I,n),I.set(t,r),new oo(e,g,t,I)},oo=be((function e(t,g,n,r){de(this,e),this.code=t,this.size=g,this.digest=n,this.bytes=r}));function io(e,t,g){return(t=he(t))in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e}function Co(e,t){var g=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),g.push.apply(g,n)}return g}function lo(e){for(var t=1;t<arguments.length;t++){var g=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(g),!0).forEach((function(t){io(e,t,g[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(g)):Co(Object(g)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(g,t))}))}return e}var uo=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),n=0;n<g.length;n++)g[n]=255;for(var r=0;r<e.length;r++){var I=e.charAt(r),a=I.charCodeAt(0);if(255!==g[a])throw new TypeError(I+" is ambiguous");g[a]=r}var o=e.length,i=e.charAt(0),C=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,r=0;e[t]===i;)n++,t++;for(var I=(e.length-t)*C+1>>>0,a=new Uint8Array(I);e[t];){var l=g[e.charCodeAt(t)];if(255===l)return;for(var u=0,c=I-1;(0!==l||u<r)&&-1!==c;c--,u++)l+=o*a[c]>>>0,a[c]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");r=u,t++}if(" "!==e[t]){for(var s=I-r;s!==I&&0===a[s];)s++;for(var A=new Uint8Array(n+(I-s)),d=n;s!==I;)A[d++]=a[s++];return A}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var g=0,n=0,r=0,I=t.length;r!==I&&0===t[r];)r++,g++;for(var a=(I-r)*l+1>>>0,C=new Uint8Array(a);r!==I;){for(var u=t[r],c=0,s=a-1;(0!==u||c<n)&&-1!==s;s--,c++)u+=256*C[s]>>>0,C[s]=u%o>>>0,u=u/o>>>0;if(0!==u)throw new Error("Non-zero carry");n=c,r++}for(var A=a-n;A!==a&&0===C[A];)A++;for(var d=i.repeat(g);A<a;++A)d+=e.charAt(C[A]);return d},decodeUnsafe:u,decode:function(e){var g=u(e);if(g)return g;throw new Error("Non-".concat(t," character"))}}},co=uo,so=function(){function e(t,g,n){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n}return be(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Ao=function(){function e(t,g,n){if(de(this,e),this.name=t,this.prefix=g,void 0===g.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=g.codePointAt(0),this.baseDecode=n}return be(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return mo(this,e)}}]),e}(),ho=function(){function e(t){de(this,e),this.decoders=t}return be(e,[{key:"or",value:function(e){return mo(this,e)}},{key:"decode",value:function(e){var t=e[0],g=this.decoders[t];if(g)return g.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),mo=function(e,t){return new ho(lo(lo({},e.decoders||io({},e.prefix,e)),t.decoders||io({},t.prefix,t)))},bo=function(){function e(t,g,n,r){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n,this.baseDecode=r,this.encoder=new so(t,g,n),this.decoder=new Ao(t,g,r)}return be(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),po=function(e){var t=e.name,g=e.prefix,n=e.encode,r=e.decode;return new bo(t,g,n,r)},fo=function(e){var t=e.prefix,g=e.name,n=e.alphabet,r=co(n,g),I=r.encode,a=r.decode;return po({prefix:t,name:g,encode:I,decode:function(e){return Io(a(e))}})},Zo=function(e){var t=e.name,g=e.prefix,n=e.bitsPerChar,r=e.alphabet;return po({prefix:g,name:t,encode:function(e){return function(e,t,g){for(var n="="===t[t.length-1],r=(1<<g)-1,I="",a=0,o=0,i=0;i<e.length;++i)for(o=o<<8|e[i],a+=8;a>g;)I+=t[r&o>>(a-=g)];if(a&&(I+=t[r&o<<g-a]),n)for(;I.length*g&7;)I+="=";return I}(e,r,n)},decode:function(e){return function(e,t,g,n){for(var r={},I=0;I<t.length;++I)r[t[I]]=I;for(var a=e.length;"="===e[a-1];)--a;for(var o=new Uint8Array(a*g/8|0),i=0,C=0,l=0,u=0;u<a;++u){var c=r[e[u]];if(void 0===c)throw new SyntaxError("Non-".concat(n," character"));C=C<<g|c,(i+=g)>=8&&(i-=8,o[l++]=255&C>>i)}if(i>=g||255&C<<8-i)throw new SyntaxError("Unexpected end of data");return o}(e,r,n,t)}})},yo=fo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Go=fo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Bo=Zo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vo=Zo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ko=Zo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),So=Zo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wo=Zo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Vo=Zo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wo=Zo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ro=Zo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xo=Zo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Jo=function(e,t){function g(e,t,n,r){de(this,g),this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Do,byteLength:Do,code:Mo,version:Mo,multihash:Mo,bytes:Mo,_baseCache:Do,asCID:Do})}return be(g,[{key:"toV0",value:function(){if(0===this.version)return this;var e=this.code,t=this.multihash;if(e!==Fo)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Ko)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return g.createV0(t)}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,r=ao(t,n);return g.createV1(this.code,r);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"equals",value:function(e){return e&&this.code===e.code&&this.version===e.version&&(t=this.multihash,g=e.multihash,t===g||t.code===g.code&&t.size===g.size&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var g=0;g<e.byteLength;g++)if(e[g]!==t[g])return!1;return!0}(t.bytes,g.bytes));var t,g}},{key:"toString",value:function(e){var t=this.bytes,g=this.version,n=this._baseCache;return 0===g?Ho(t,n,e||yo.encoder):No(t,n,e||Bo.encoder)}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID("+this.toString()+")"}},{key:"toBaseEncodedString",get:function(){throw new Error("Deprecated, use .toString()")}},{key:"codec",get:function(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}},{key:"buffer",get:function(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}},{key:"multibaseName",get:function(){throw new Error('"multibaseName" property is deprecated')}},{key:"prefix",get:function(){throw new Error('"prefix" property is deprecated')}}],[{key:"isCID",value:function(e){return Uo(/^0\.0/,zo),!(!e||!e[Eo]&&e.asCID!==e)}},{key:"asCID",value:function(e){if(e instanceof g)return e;if(null!=e&&e.asCID===e){var t=e.version,n=e.code,r=e.multihash;return new g(t,n,r,e.bytes||xo(t,n,r.bytes))}if(null!=e&&!0===e[Eo]){var I=e.version,a=e.multihash,o=e.code,i=function(e){var t=Io(e),g=Ae(go(t),2),n=g[0],r=g[1],I=Ae(go(t.subarray(r)),2),a=I[0],o=I[1],i=t.subarray(r+o);if(i.byteLength!==a)throw new Error("Incorrect length");return new oo(n,a,i,t)}(a);return g.create(I,o,i)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==Fo)throw new Error("Version 0 CID must use dag-pb (code: ".concat(Fo,") block encoding"));return new g(e,t,n,n.bytes);case 1:return new g(e,t,n,xo(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return g.create(0,Fo,e)}},{key:"createV1",value:function(e,t){return g.create(1,e,t)}},{key:"decode",value:function(e){var t=Ae(g.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=g.inspectBytes(e),n=t.size-t.multihashSize,r=Io(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");var I=r.subarray(t.multihashSize-t.digestSize),a=new oo(t.multihashCode,t.digestSize,I,r);return[0===t.version?g.createV0(a):g.createV1(t.codec,a),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,g=function(){var g=Ae(go(e.subarray(t)),2),n=g[0],r=g[1];return t+=r,n},n=g(),r=Fo;if(18===n?(n=0,t=0):1===n&&(r=g()),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var I=t,a=g(),o=g(),i=t+o;return{version:n,codec:r,multihashCode:a,digestSize:o,multihashSize:i-I,size:i}}},{key:"parse",value:function(e,t){var n=Ae(Yo(e,t),2),r=n[0],I=n[1],a=g.decode(I);return a._baseCache.set(r,e),a}}]),g}(),Yo=function(e,t){switch(e[0]){case"Q":var g=t||yo;return[yo.prefix,g.decode("".concat(yo.prefix).concat(e))];case yo.prefix:var n=t||yo;return[yo.prefix,n.decode(e)];case Bo.prefix:var r=t||Bo;return[Bo.prefix,r.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Ho=function(e,t,g){var n=g.prefix;if(n!==yo.prefix)throw Error("Cannot string encode V0 in ".concat(g.name," encoding"));var r=t.get(n);if(null==r){var I=g.encode(e).slice(1);return t.set(n,I),I}return r},No=function(e,t,g){var n=g.prefix,r=t.get(n);if(null==r){var I=g.encode(e);return t.set(n,I),I}return r},Fo=112,Ko=18,xo=function(e,t,g){var n=ro(e),r=n+ro(t),I=new Uint8Array(r+g.byteLength);return no(e,I,0),no(t,I,n),I.set(g,r),I},Eo=Symbol.for("@ipld/js-cid/CID"),Mo={writable:!1,configurable:!1,enumerable:!0},Do={writable:!1,enumerable:!1,configurable:!1},Uo=function(e,t){if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},zo="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",Lo=new TextDecoder;function Qo(e,t){for(var g=0,n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");var r=e[t++];if(g+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),r<128)break}return[g,t]}function To(e,t){var g,n=Ae(Qo(e,t),2);g=n[0];var r=(t=n[1])+g;if(g<0||r<0)throw new Error("protobuf: invalid length");if(r>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,r),r]}function jo(e,t){var g,n=Ae(Qo(e,t),2);return[7&(g=n[0]),g>>3,t=n[1]]}function Po(e){for(var t={},g=e.length,n=0;n<g;){var r,I,a=Ae(jo(e,n),3);if(r=a[0],I=a[1],n=a[2],1===I){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==r)throw new Error("protobuf: (PBLink) wrong wireType (".concat(r,") for Hash"));if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");var o=Ae(To(e,n),2);t.Hash=o[0],n=o[1]}else if(2===I){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==r)throw new Error("protobuf: (PBLink) wrong wireType (".concat(r,") for Name"));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");var i,C=Ae(To(e,n),2);i=C[0],n=C[1],t.Name=Lo.decode(i)}else{if(3!==I)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ".concat(I));if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==r)throw new Error("protobuf: (PBLink) wrong wireType (".concat(r,") for Tsize"));var l=Ae(Qo(e,n),2);t.Tsize=l[0],n=l[1]}}if(n>g)throw new Error("protobuf: (PBLink) unexpected end of data");return t}var Oo=new TextEncoder,_o=Math.pow(2,32),qo=Math.pow(2,31);function $o(e,t){var g=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t[g=gi(t,g,e.Tsize)-1]=24}if("string"===typeof e.Name){var n=Oo.encode(e.Name);g-=n.length,t.set(n,g),t[g=gi(t,g,n.length)-1]=18}return e.Hash&&(g-=e.Hash.length,t.set(e.Hash,g),t[g=gi(t,g,e.Hash.length)-1]=10),t.length-g}function ei(e){var t=function(e){var t=0;if(e.Data){var g=e.Data.length;t+=1+g+ni(g)}if(e.Links){var n,r=_n(e.Links);try{for(r.s();!(n=r.n()).done;){var I=ti(n.value);t+=1+I+ni(I)}}catch(a){r.e(a)}finally{r.f()}}return t}(e),g=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,g.set(e.Data,n),g[n=gi(g,n,e.Data.length)-1]=10),e.Links)for(var r=e.Links.length-1;r>=0;r--){var I=$o(e.Links[r],g.subarray(0,n));g[n=gi(g,n-=I,I)-1]=18}return g}function ti(e){var t=0;if(e.Hash){var g=e.Hash.length;t+=1+g+ni(g)}if("string"===typeof e.Name){var n=Oo.encode(e.Name).length;t+=1+n+ni(n)}return"number"===typeof e.Tsize&&(t+=1+ni(e.Tsize)),t}function gi(e,t,g){for(var n=t-=ni(g);g>=qo;)e[t++]=127&g|128,g/=128;for(;g>=128;)e[t++]=127&g|128,g>>>=7;return e[t]=g,n}function ni(e){return e%2===0&&e++,Math.floor((function(e){var t=0;e>=_o&&(e=Math.floor(e/_o),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+ri[e]}(e)+6)/7)}var ri=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Ii=["Data","Links"],ai=["Hash","Name","Tsize"],oi=new TextEncoder;function ii(e,t){if(e===t)return 0;for(var g=e.Name?oi.encode(e.Name):[],n=t.Name?oi.encode(t.Name):[],r=g.length,I=n.length,a=0,o=Math.min(r,I);a<o;++a)if(g[a]!==n[a]){r=g[a],I=n[a];break}return r<I?-1:I<r?1:0}function Ci(e,t){return!Object.keys(e).some((function(e){return!t.includes(e)}))}function li(e){if("object"===typeof e.asCID){var t=Jo.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var g={};if(e.Hash){var n=Jo.asCID(e.Hash);try{n||("string"===typeof e.Hash?n=Jo.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=Jo.decode(e.Hash)))}catch(r){throw new TypeError("Invalid DAG-PB form: ".concat(r.message))}n&&(g.Hash=n)}if(!g.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(g.Name=e.Name),"number"===typeof e.Tsize&&(g.Tsize=e.Tsize),g}function ui(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=oi.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(li),t.Links.sort(ii)}else t.Links=[];return t}function ci(e){if(!e||"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Ci(e,Ii))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(var t=0;t<e.Links.length;t++){var g=e.Links[t];if(!g||"object"!==typeof g||Array.isArray(g))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Ci(g,ai))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!g.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(g.Hash.asCID!==g.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==g.Name&&"string"!==typeof g.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==g.Tsize&&("number"!==typeof g.Tsize||g.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===ii(g,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function si(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return ui({Data:e,Links:t})}function Ai(e,t,g){return li({Hash:g,Name:e,Tsize:t})}var di="dag-pb",hi=112;function mi(e){ci(e);var t={};return e.Links&&(t.Links=e.Links.map((function(e){var t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),ei(t)}function bi(e){var t=function(e){for(var t,g,n=e.length,r=0,I=!1;r<n;){var a,o,i=Ae(jo(e,r),3);if(a=i[0],o=i[1],r=i[2],2!==a)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got ".concat(a));if(1===o){if(g)throw new Error("protobuf: (PBNode) duplicate Data section");var C=Ae(To(e,r),2);g=C[0],r=C[1],t&&(I=!0)}else{if(2!==o)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ".concat(o));if(I)throw new Error("protobuf: (PBNode) duplicate Links section");t||(t=[]);var l,u=Ae(To(e,r),2);l=u[0],r=u[1],t.push(Po(l))}}if(r>n)throw new Error("protobuf: (PBNode) unexpected end of data");var c={};return g&&(c.Data=g),c.Links=t||[],c}(e),g={};return t.Data&&(g.Data=t.Data),t.Links&&(g.Links=t.Links.map((function(e){var t={};try{t.Hash=Jo.decode(e.Hash)}catch(g){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),g}var pi=["string","number","bigint","symbol"],fi=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Zi(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";var t=typeof e;if(pi.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";var g=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);if(fi.includes(t))return t;return}(e);return g||"Object"}var yi=function(){function e(t,g,n){de(this,e),this.major=t,this.majorEncoded=t<<5,this.name=g,this.terminal=n}return be(e,[{key:"toString",value:function(){return"Type[".concat(this.major,"].").concat(this.name)}},{key:"compare",value:function(e){return this.major<e.major?-1:this.major>e.major?1:0}}]),e}();yi.uint=new yi(0,"uint",!0),yi.negint=new yi(1,"negint",!0),yi.bytes=new yi(2,"bytes",!0),yi.string=new yi(3,"string",!0),yi.array=new yi(4,"array",!1),yi.map=new yi(5,"map",!1),yi.tag=new yi(6,"tag",!1),yi.float=new yi(7,"float",!0),yi.false=new yi(7,"false",!0),yi.true=new yi(7,"true",!0),yi.null=new yi(7,"null",!0),yi.undefined=new yi(7,"undefined",!0),yi.break=new yi(7,"break",!0);var Gi=function(){function e(t,g,n){de(this,e),this.type=t,this.value=g,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}return be(e,[{key:"toString",value:function(){return"Token[".concat(this.type,"].").concat(this.value)}}]),e}(),Bi=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,vi=new TextDecoder,ki=new TextEncoder;function Si(e){return Bi&&globalThis.Buffer.isBuffer(e)}function Wi(e){return e instanceof Uint8Array?Si(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var Vi=Bi?function(e,t,g){return g-t>64?globalThis.Buffer.from(e.subarray(t,g)).toString("utf8"):Ni(e,t,g)}:function(e,t,g){return g-t>64?vi.decode(e.subarray(t,g)):Ni(e,t,g)},wi=Bi?function(e){return e.length>64?globalThis.Buffer.from(e):Hi(e)}:function(e){return e.length>64?ki.encode(e):Hi(e)},Ri=function(e){return Uint8Array.from(e)},Xi=Bi?function(e,t,g){return Si(e)?new Uint8Array(e.subarray(t,g)):e.slice(t,g)}:function(e,t,g){return e.slice(t,g)},Ji=Bi?function(e,t){return e=e.map((function(e){return e instanceof Uint8Array?e:globalThis.Buffer.from(e)})),Wi(globalThis.Buffer.concat(e,t))}:function(e,t){var g,n=new Uint8Array(t),r=0,I=_n(e);try{for(I.s();!(g=I.n()).done;){var a=g.value;r+a.length>n.length&&(a=a.subarray(0,n.length-r)),n.set(a,r),r+=a.length}}catch(o){I.e(o)}finally{I.f()}return n},Yi=Bi?function(e){return globalThis.Buffer.allocUnsafe(e)}:function(e){return new Uint8Array(e)};function Hi(e){for(var t,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=e.length,r=null,I=[],a=0;a<n;++a){if((t=e.charCodeAt(a))>55295&&t<57344){if(!r){if(t>56319){(g-=3)>-1&&I.push(239,191,189);continue}if(a+1===n){(g-=3)>-1&&I.push(239,191,189);continue}r=t;continue}if(t<56320){(g-=3)>-1&&I.push(239,191,189),r=t;continue}t=65536+(r-55296<<10|t-56320)}else r&&(g-=3)>-1&&I.push(239,191,189);if(r=null,t<128){if((g-=1)<0)break;I.push(t)}else if(t<2048){if((g-=2)<0)break;I.push(t>>6|192,63&t|128)}else if(t<65536){if((g-=3)<0)break;I.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((g-=4)<0)break;I.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return I}function Ni(e,t,g){for(var n=[];t<g;){var r=e[t],I=null,a=r>239?4:r>223?3:r>191?2:1;if(t+a<=g){var o=void 0,i=void 0,C=void 0,l=void 0;switch(a){case 1:r<128&&(I=r);break;case 2:128===(192&(o=e[t+1]))&&(l=(31&r)<<6|63&o)>127&&(I=l);break;case 3:o=e[t+1],i=e[t+2],128===(192&o)&&128===(192&i)&&(l=(15&r)<<12|(63&o)<<6|63&i)>2047&&(l<55296||l>57343)&&(I=l);break;case 4:o=e[t+1],i=e[t+2],C=e[t+3],128===(192&o)&&128===(192&i)&&128===(192&C)&&(l=(15&r)<<18|(63&o)<<12|(63&i)<<6|63&C)>65535&&l<1114112&&(I=l)}}null===I?(I=65533,a=1):I>65535&&(I-=65536,n.push(I>>>10&1023|55296),I=56320|1023&I),n.push(I),t+=a}return Fi(n)}function Fi(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var g="",n=0;n<t;)g+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return g}var Ki=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;de(this,e),this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}return be(e,[{key:"reset",value:function(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}},{key:"push",value:function(e){var t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){var g=t.length-(this.maxCursor-this.cursor)-1;t.set(e,g)}else{if(t){var n=t.length-(this.maxCursor-this.cursor)-1;n<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Yi(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}},{key:"toBytes",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){var g=this.chunks[0];t&&this.cursor>g.length/2?(e=this.cursor===g.length?g:g.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=Xi(g,0,this.cursor)}else e=Ji(this.chunks,this.cursor);return t&&this.reset(),e}}]),e}(),xi="CBOR decode error:",Ei="CBOR encode error:",Mi=[];function Di(e,t,g){if(e.length-t<g)throw new Error("".concat(xi," not enough data for type"))}Mi[23]=1,Mi[24]=2,Mi[25]=3,Mi[26]=5,Mi[27]=9;var Ui=[24,256,65536,4294967296,BigInt("18446744073709551616")];function zi(e,t,g){Di(e,t,1);var n=e[t];if(!0===g.strict&&n<Ui[0])throw new Error("".concat(xi," integer encoded in more bytes than necessary (strict decode)"));return n}function Li(e,t,g){Di(e,t,2);var n=e[t]<<8|e[t+1];if(!0===g.strict&&n<Ui[1])throw new Error("".concat(xi," integer encoded in more bytes than necessary (strict decode)"));return n}function Qi(e,t,g){Di(e,t,4);var n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===g.strict&&n<Ui[2])throw new Error("".concat(xi," integer encoded in more bytes than necessary (strict decode)"));return n}function Ti(e,t,g){Di(e,t,8);var n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],r=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],I=(BigInt(n)<<BigInt(32))+BigInt(r);if(!0===g.strict&&I<Ui[3])throw new Error("".concat(xi," integer encoded in more bytes than necessary (strict decode)"));if(I<=Number.MAX_SAFE_INTEGER)return Number(I);if(!0===g.allowBigInt)return I;throw new Error("".concat(xi," integers outside of the safe integer range are not supported"))}function ji(e,t){return Pi(e,0,t.value)}function Pi(e,t,g){if(g<Ui[0]){var n=Number(g);e.push([t|n])}else if(g<Ui[1]){var r=Number(g);e.push([24|t,r])}else if(g<Ui[2]){var I=Number(g);e.push([25|t,I>>>8,255&I])}else if(g<Ui[3]){var a=Number(g);e.push([26|t,a>>>24&255,a>>>16&255,a>>>8&255,255&a])}else{var o=BigInt(g);if(!(o<Ui[4]))throw new Error("".concat(xi," encountered BigInt larger than allowable range"));var i=[27|t,0,0,0,0,0,0,0],C=Number(o&BigInt(4294967295)),l=Number(o>>BigInt(32)&BigInt(4294967295));i[8]=255&C,C>>=8,i[7]=255&C,C>>=8,i[6]=255&C,C>>=8,i[5]=255&C,i[4]=255&l,l>>=8,i[3]=255&l,l>>=8,i[2]=255&l,l>>=8,i[1]=255&l,e.push(i)}}ji.encodedSize=function(e){return Pi.encodedSize(e.value)},Pi.encodedSize=function(e){return e<Ui[0]?1:e<Ui[1]?2:e<Ui[2]?3:e<Ui[3]?5:9},ji.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};var Oi=BigInt(-1),_i=BigInt(1);function qi(e,t){var g=t.value,n="bigint"===typeof g?g*Oi-_i:-1*g-1;Pi(e,t.type.majorEncoded,n)}function $i(e,t,g,n){Di(e,t,g+n);var r=Xi(e,t+g,t+g+n);return new Gi(yi.bytes,r,g+n)}function eC(e,t,g,n){return $i(e,t,1,g)}function tC(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===yi.string?wi(e.value):e.value),e.encodedBytes}function gC(e,t){var g=tC(t);Pi(e,t.type.majorEncoded,g.length),e.push(g)}function nC(e,t,g,n,r){var I=g+n;Di(e,t,I);var a=new Gi(yi.string,Vi(e,t+g,t+I),I);return!0===r.retainStringBytes&&(a.byteValue=Xi(e,t+g,t+I)),a}function rC(e,t,g,n){return nC(e,t,1,g,n)}qi.encodedSize=function(e){var t=e.value,g="bigint"===typeof t?t*Oi-_i:-1*t-1;return g<Ui[0]?1:g<Ui[1]?2:g<Ui[2]?3:g<Ui[3]?5:9},qi.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},gC.encodedSize=function(e){var t=tC(e);return Pi.encodedSize(t.length)+t.length},gC.compareTokens=function(e,t){return g=tC(e),n=tC(t),g.length<n.length?-1:g.length>n.length?1:function(e,t){if(Si(e)&&Si(t))return e.compare(t);for(var g=0;g<e.length;g++)if(e[g]!==t[g])return e[g]<t[g]?-1:1;return 0}(g,n);var g,n};var IC=gC;function aC(e,t,g,n){return new Gi(yi.array,n,g)}function oC(e,t,g,n){return aC(0,0,1,g)}function iC(e,t){Pi(e,yi.array.majorEncoded,t.value)}function CC(e,t,g,n){return new Gi(yi.map,n,g)}function lC(e,t,g,n){return CC(0,0,1,g)}function uC(e,t){Pi(e,yi.map.majorEncoded,t.value)}function cC(e,t,g,n){return new Gi(yi.tag,g,1)}function sC(e,t){Pi(e,yi.tag.majorEncoded,t.value)}iC.compareTokens=ji.compareTokens,iC.encodedSize=function(e){return Pi.encodedSize(e.value)},uC.compareTokens=ji.compareTokens,uC.encodedSize=function(e){return Pi.encodedSize(e.value)},sC.compareTokens=ji.compareTokens,sC.encodedSize=function(e){return Pi.encodedSize(e.value)};function AC(e,t,g){if(g){if(!1===g.allowNaN&&Number.isNaN(e))throw new Error("".concat(xi," NaN values are not supported"));if(!1===g.allowInfinity&&(e===1/0||e===-1/0))throw new Error("".concat(xi," Infinity values are not supported"))}return new Gi(yi.float,e,t)}function dC(e,t,g){var n,r=t.value;if(!1===r)e.push([20|yi.float.majorEncoded]);else if(!0===r)e.push([21|yi.float.majorEncoded]);else if(null===r)e.push([22|yi.float.majorEncoded]);else if(void 0===r)e.push([23|yi.float.majorEncoded]);else{var I=!1;g&&!0===g.float64||(pC(r),r===fC(bC,1)||Number.isNaN(r)?(bC[0]=249,e.push(bC.slice(0,3)),I=!0):(ZC(r),r===yC(bC,1)&&(bC[0]=250,e.push(bC.slice(0,5)),I=!0))),I||(n=r,mC.setFloat64(0,n,!1),GC(bC,1),bC[0]=251,e.push(bC.slice(0,9)))}}dC.encodedSize=function(e,t){var g=e.value;if(!1===g||!0===g||null===g||void 0===g)return 1;if(!t||!0!==t.float64){pC(g);var n=fC(bC,1);if(g===n||Number.isNaN(g))return 3;if(ZC(g),g===(n=yC(bC,1)))return 5}return 9};var hC=new ArrayBuffer(9),mC=new DataView(hC,1),bC=new Uint8Array(hC,0);function pC(e){if(e===1/0)mC.setUint16(0,31744,!1);else if(e===-1/0)mC.setUint16(0,64512,!1);else if(Number.isNaN(e))mC.setUint16(0,32256,!1);else{mC.setFloat32(0,e);var t=mC.getUint32(0),g=(2139095040&t)>>23,n=8388607&t;if(255===g)mC.setUint16(0,31744,!1);else if(0===g)mC.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{var r=g-127;r<-24?mC.setUint16(0,0):r<-14?mC.setUint16(0,(2147483648&t)>>16|1<<24+r,!1):mC.setUint16(0,(2147483648&t)>>16|r+15<<10|n>>13,!1)}}}function fC(e,t){if(e.length-t<2)throw new Error("".concat(xi," not enough data for float16"));var g=(e[t]<<8)+e[t+1];if(31744===g)return 1/0;if(64512===g)return-1/0;if(32256===g)return NaN;var n,r=g>>10&31,I=1023&g;return n=0===r?I*Math.pow(2,-24):31!==r?(I+1024)*Math.pow(2,r-25):0===I?1/0:NaN,32768&g?-n:n}function ZC(e){mC.setFloat32(0,e,!1)}function yC(e,t){if(e.length-t<4)throw new Error("".concat(xi," not enough data for float32"));var g=(e.byteOffset||0)+t;return new DataView(e.buffer,g,4).getFloat32(0,!1)}function GC(e,t){if(e.length-t<8)throw new Error("".concat(xi," not enough data for float64"));var g=(e.byteOffset||0)+t;return new DataView(e.buffer,g,8).getFloat64(0,!1)}function BC(e,t,g){throw new Error("".concat(xi," encountered invalid minor (").concat(g,") for major ").concat(e[t]>>>5))}function vC(e){return function(){throw new Error("".concat(xi," ").concat(e))}}dC.compareTokens=ji.compareTokens;for(var kC=[],SC=0;SC<=23;SC++)kC[SC]=BC;kC[24]=function(e,t,g,n){return new Gi(yi.uint,zi(e,t+1,n),2)},kC[25]=function(e,t,g,n){return new Gi(yi.uint,Li(e,t+1,n),3)},kC[26]=function(e,t,g,n){return new Gi(yi.uint,Qi(e,t+1,n),5)},kC[27]=function(e,t,g,n){return new Gi(yi.uint,Ti(e,t+1,n),9)},kC[28]=BC,kC[29]=BC,kC[30]=BC,kC[31]=BC;for(var WC=32;WC<=55;WC++)kC[WC]=BC;kC[56]=function(e,t,g,n){return new Gi(yi.negint,-1-zi(e,t+1,n),2)},kC[57]=function(e,t,g,n){return new Gi(yi.negint,-1-Li(e,t+1,n),3)},kC[58]=function(e,t,g,n){return new Gi(yi.negint,-1-Qi(e,t+1,n),5)},kC[59]=function(e,t,g,n){var r=Ti(e,t+1,n);if("bigint"!==typeof r){var I=-1-r;if(I>=Number.MIN_SAFE_INTEGER)return new Gi(yi.negint,I,9)}if(!0!==n.allowBigInt)throw new Error("".concat(xi," integers outside of the safe integer range are not supported"));return new Gi(yi.negint,Oi-BigInt(r),9)},kC[60]=BC,kC[61]=BC,kC[62]=BC,kC[63]=BC;for(var VC=64;VC<=87;VC++)kC[VC]=eC;kC[88]=function(e,t,g,n){return $i(e,t,2,zi(e,t+1,n))},kC[89]=function(e,t,g,n){return $i(e,t,3,Li(e,t+1,n))},kC[90]=function(e,t,g,n){return $i(e,t,5,Qi(e,t+1,n))},kC[91]=function(e,t,g,n){var r=Ti(e,t+1,n);if("bigint"===typeof r)throw new Error("".concat(xi," 64-bit integer bytes lengths not supported"));return $i(e,t,9,r)},kC[92]=BC,kC[93]=BC,kC[94]=BC,kC[95]=vC("indefinite length bytes/strings are not supported");for(var wC=96;wC<=119;wC++)kC[wC]=rC;kC[120]=function(e,t,g,n){return nC(e,t,2,zi(e,t+1,n),n)},kC[121]=function(e,t,g,n){return nC(e,t,3,Li(e,t+1,n),n)},kC[122]=function(e,t,g,n){return nC(e,t,5,Qi(e,t+1,n),n)},kC[123]=function(e,t,g,n){var r=Ti(e,t+1,n);if("bigint"===typeof r)throw new Error("".concat(xi," 64-bit integer string lengths not supported"));return nC(e,t,9,r,n)},kC[124]=BC,kC[125]=BC,kC[126]=BC,kC[127]=vC("indefinite length bytes/strings are not supported");for(var RC=128;RC<=151;RC++)kC[RC]=oC;kC[152]=function(e,t,g,n){return aC(0,0,2,zi(e,t+1,n))},kC[153]=function(e,t,g,n){return aC(0,0,3,Li(e,t+1,n))},kC[154]=function(e,t,g,n){return aC(0,0,5,Qi(e,t+1,n))},kC[155]=function(e,t,g,n){var r=Ti(e,t+1,n);if("bigint"===typeof r)throw new Error("".concat(xi," 64-bit integer array lengths not supported"));return aC(0,0,9,r)},kC[156]=BC,kC[157]=BC,kC[158]=BC,kC[159]=function(e,t,g,n){if(!1===n.allowIndefinite)throw new Error("".concat(xi," indefinite length items not allowed"));return aC(0,0,1,1/0)};for(var XC=160;XC<=183;XC++)kC[XC]=lC;kC[184]=function(e,t,g,n){return CC(0,0,2,zi(e,t+1,n))},kC[185]=function(e,t,g,n){return CC(0,0,3,Li(e,t+1,n))},kC[186]=function(e,t,g,n){return CC(0,0,5,Qi(e,t+1,n))},kC[187]=function(e,t,g,n){var r=Ti(e,t+1,n);if("bigint"===typeof r)throw new Error("".concat(xi," 64-bit integer map lengths not supported"));return CC(0,0,9,r)},kC[188]=BC,kC[189]=BC,kC[190]=BC,kC[191]=function(e,t,g,n){if(!1===n.allowIndefinite)throw new Error("".concat(xi," indefinite length items not allowed"));return CC(0,0,1,1/0)};for(var JC=192;JC<=215;JC++)kC[JC]=cC;kC[216]=function(e,t,g,n){return new Gi(yi.tag,zi(e,t+1,n),2)},kC[217]=function(e,t,g,n){return new Gi(yi.tag,Li(e,t+1,n),3)},kC[218]=function(e,t,g,n){return new Gi(yi.tag,Qi(e,t+1,n),5)},kC[219]=function(e,t,g,n){return new Gi(yi.tag,Ti(e,t+1,n),9)},kC[220]=BC,kC[221]=BC,kC[222]=BC,kC[223]=BC;for(var YC=224;YC<=243;YC++)kC[YC]=vC("simple values are not supported");kC[244]=BC,kC[245]=BC,kC[246]=BC,kC[247]=function(e,t,g,n){if(!1===n.allowUndefined)throw new Error("".concat(xi," undefined values are not supported"));return!0===n.coerceUndefinedToNull?new Gi(yi.null,null,1):new Gi(yi.undefined,void 0,1)},kC[248]=vC("simple values are not supported"),kC[249]=function(e,t,g,n){return AC(fC(e,t+1),3,n)},kC[250]=function(e,t,g,n){return AC(yC(e,t+1),5,n)},kC[251]=function(e,t,g,n){return AC(GC(e,t+1),9,n)},kC[252]=BC,kC[253]=BC,kC[254]=BC,kC[255]=function(e,t,g,n){if(!1===n.allowIndefinite)throw new Error("".concat(xi," indefinite length items not allowed"));return new Gi(yi.break,void 0,1)};for(var HC=[],NC=0;NC<24;NC++)HC[NC]=new Gi(yi.uint,NC,1);for(var FC=-1;FC>=-24;FC--)HC[31-FC]=new Gi(yi.negint,FC,1);HC[64]=new Gi(yi.bytes,new Uint8Array(0),1),HC[96]=new Gi(yi.string,"",1),HC[128]=new Gi(yi.array,0,1),HC[160]=new Gi(yi.map,0,1),HC[244]=new Gi(yi.false,!1,1),HC[245]=new Gi(yi.true,!0,1),HC[246]=new Gi(yi.null,null,1);var KC={float64:!1,mapSorter:function(e,t){var g=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(g.type!==n.type)return g.type.compare(n.type);var r=g.type.major,I=xC[r].compareTokens(g,n);0===I&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return I},quickEncodeToken:function(e){switch(e.type){case yi.false:return Ri([244]);case yi.true:return Ri([245]);case yi.null:return Ri([246]);case yi.bytes:return e.value.length?void 0:Ri([64]);case yi.string:return""===e.value?Ri([96]):void 0;case yi.array:return 0===e.value?Ri([128]):void 0;case yi.map:return 0===e.value?Ri([160]):void 0;case yi.uint:return e.value<24?Ri([Number(e.value)]):void 0;case yi.negint:if(e.value>=-24)return Ri([31-Number(e.value)])}}};var xC=function(){var e=[];return e[yi.uint.major]=ji,e[yi.negint.major]=qi,e[yi.bytes.major]=gC,e[yi.string.major]=IC,e[yi.array.major]=iC,e[yi.map.major]=uC,e[yi.tag.major]=sC,e[yi.float.major]=dC,e}(),EC=new Ki,MC=function(){function e(t,g){de(this,e),this.obj=t,this.parent=g}return be(e,[{key:"includes",value:function(e){var t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}}],[{key:"createCheck",value:function(t,g){if(t&&t.includes(g))throw new Error("".concat(Ei," object contains circular references"));return new e(g,t)}}]),e}(),DC={null:new Gi(yi.null,null),undefined:new Gi(yi.undefined,void 0),true:new Gi(yi.true,!0),false:new Gi(yi.false,!1),emptyArray:new Gi(yi.array,0),emptyMap:new Gi(yi.map,0)},UC={number:function(e,t,g,n){return Number.isInteger(e)&&Number.isSafeInteger(e)?new Gi(e>=0?yi.uint:yi.negint,e):new Gi(yi.float,e)},bigint:function(e,t,g,n){return e>=BigInt(0)?new Gi(yi.uint,e):new Gi(yi.negint,e)},Uint8Array:function(e,t,g,n){return new Gi(yi.bytes,e)},string:function(e,t,g,n){return new Gi(yi.string,e)},boolean:function(e,t,g,n){return e?DC.true:DC.false},null:function(e,t,g,n){return DC.null},undefined:function(e,t,g,n){return DC.undefined},ArrayBuffer:function(e,t,g,n){return new Gi(yi.bytes,new Uint8Array(e))},DataView:function(e,t,g,n){return new Gi(yi.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array:function(e,t,g,n){if(!e.length)return!0===g.addBreakTokens?[DC.emptyArray,new Gi(yi.break)]:DC.emptyArray;n=MC.createCheck(n,e);var r,I=[],a=0,o=_n(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;I[a++]=TC(i,g,n)}}catch(C){o.e(C)}finally{o.f()}return g.addBreakTokens?[new Gi(yi.array,e.length),I,new Gi(yi.break)]:[new Gi(yi.array,e.length),I]},Object:function(e){function t(t,g,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,g,n){var r="Object"!==t,I=r?e.keys():Object.keys(e),a=r?e.size:I.length;if(!a)return!0===g.addBreakTokens?[DC.emptyMap,new Gi(yi.break)]:DC.emptyMap;n=MC.createCheck(n,e);var o,i=[],C=0,l=_n(I);try{for(l.s();!(o=l.n()).done;){var u=o.value;i[C++]=[TC(u,g,n),TC(r?e.get(u):e[u],g,n)]}}catch(c){l.e(c)}finally{l.f()}return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(i,g),g.addBreakTokens?[new Gi(yi.map,a),i,new Gi(yi.break)]:[new Gi(yi.map,a),i]}))};UC.Map=UC.Object,UC.Buffer=UC.Uint8Array;var zC,LC=_n("Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "));try{for(LC.s();!(zC=LC.n()).done;){var QC=zC.value;UC["".concat(QC,"Array")]=UC.DataView}}catch(Yy){LC.e(Yy)}finally{LC.f()}function TC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0,n=Zi(e),r=t&&t.typeEncoders&&t.typeEncoders[n]||UC[n];if("function"===typeof r){var I=r(e,n,t,g);if(null!=I)return I}var a=UC[n];if(!a)throw new Error("".concat(Ei," unsupported type: ").concat(n));return a(e,n,t,g)}function jC(e,t,g,n){if(Array.isArray(t)){var r,I=_n(t);try{for(I.s();!(r=I.n()).done;){jC(e,r.value,g,n)}}catch(Yy){I.e(Yy)}finally{I.f()}}else g[t.type.major](e,t,n)}function PC(e,t,g){var n=TC(e,g);if(!Array.isArray(n)&&g.quickEncodeToken){var r=g.quickEncodeToken(n);if(r)return r;var I=t[n.type.major];if(I.encodedSize){var a=I.encodedSize(n,g),o=new Ki(a);if(I(o,n,g),1!==o.chunks.length)throw new Error("Unexpected error: pre-calculated length for ".concat(n," was wrong"));return Wi(o.chunks[0])}}return EC.reset(),jC(EC,n,t,g),EC.toBytes(!0)}var OC={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},_C=function(){function e(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};de(this,e),this.pos=0,this.data=t,this.options=g}return be(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"next",value:function(){var e=this.data[this.pos],t=HC[e];if(void 0===t){var g=kC[e];if(!g)throw new Error("".concat(xi," no decoder for major type ").concat(e>>>5," (byte 0x").concat(e.toString(16).padStart(2,"0"),")"));var n=31&e;t=g(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}}]),e}(),qC=Symbol.for("DONE"),$C=Symbol.for("BREAK");function el(e,t){if(e.done())return qC;var g=e.next();if(g.type===yi.break)return $C;if(g.type.terminal)return g.value;if(g.type===yi.array)return function(e,t,g){for(var n=[],r=0;r<e.value;r++){var I=el(t,g);if(I===$C){if(e.value===1/0)break;throw new Error("".concat(xi," got unexpected break to lengthed array"))}if(I===qC)throw new Error("".concat(xi," found array but not enough entries (got ").concat(r,", expected ").concat(e.value,")"));n[r]=I}return n}(g,e,t);if(g.type===yi.map)return function(e,t,g){for(var n=!0===g.useMaps,r=n?void 0:{},I=n?new Map:void 0,a=0;a<e.value;a++){var o=el(t,g);if(o===$C){if(e.value===1/0)break;throw new Error("".concat(xi," got unexpected break to lengthed map"))}if(o===qC)throw new Error("".concat(xi," found map but not enough entries (got ").concat(a," [no key], expected ").concat(e.value,")"));if(!0!==n&&"string"!==typeof o)throw new Error("".concat(xi," non-string keys not supported (got ").concat(typeof o,")"));var i=el(t,g);if(i===qC)throw new Error("".concat(xi," found map but not enough entries (got ").concat(a," [no value], expected ").concat(e.value,")"));n?I.set(o,i):r[o]=i}return n?I:r}(g,e,t);if(g.type===yi.tag){if(t.tags&&"function"===typeof t.tags[g.value]){var n=el(e,t);return t.tags[g.value](n)}throw new Error("".concat(xi," tag not supported (").concat(g.value,")"))}throw new Error("unsupported")}function tl(e,t){if(!(e instanceof Uint8Array))throw new Error("".concat(xi," data to decode must be a Uint8Array"));var g=(t=Object.assign({},OC,t)).tokenizer||new _C(e,t),n=el(g,t);if(n===qC)throw new Error("".concat(xi," did not find any content to decode"));if(n===$C)throw new Error("".concat(xi," got unexpected break"));if(!g.done())throw new Error("".concat(xi," too many terminals, data makes no sense"));return n}var gl={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;var t=Jo.asCID(e);if(!t)return null;var g=new Uint8Array(t.bytes.byteLength+1);return g.set(t.bytes,1),[new Gi(yi.tag,42),new Gi(yi.bytes,g)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};var nl={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};nl.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Jo.decode(e.subarray(1))};var rl="dag-cbor",Il=113,al=function(e){return t=e,g=gl,g=Object.assign({},KC,g),PC(t,xC,g);var t,g},ol=function(e){return tl(e,nl)},il=function(e){var t=e.name,g=e.code,n=e.encode;return new Cl(t,g,n)},Cl=function(){function e(t,g,n){de(this,e),this.name=t,this.code=g,this.encode=n}return be(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var g=this.encode(e);return g instanceof Uint8Array?ao(this.code,g):g.then((function(e){return ao(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),ll=Zo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ul=Zo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cl=Zo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sl=Zo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Al(e,t,g){return Al=Ge()?Reflect.construct.bind():function(e,t,g){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return g&&fe(r,g.prototype),r},Al.apply(null,arguments)}function dl(e){var t="function"===typeof Map?new Map:void 0;return dl=function(e){if(null===e||(g=e,-1===Function.toString.call(g).indexOf("[native code]")))return e;var g;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Al(e,arguments,ye(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),fe(n,e)},dl(e)}var hl=function(e,t,g,n,r,I,a,o,i){Ze(l,e);var C=ve(l);function l(){var e;return de(this,l),(e=C.call(this)).inRecursive=[],e}return be(l,[{key:"prefix",value:function(e){var t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===yi.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===yi.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}},{key:t,value:function(e,t){this.prefix(e);for(var g=String(t.value),n=[],r=0;r<g.length;r++)n[r]=g.charCodeAt(r);e.push(n)}},{key:g,value:function(e,t){this[yi.uint.major](e,t)}},{key:n,value:function(e,t){throw new Error("".concat(Ei," unsupported type: Uint8Array"))}},{key:r,value:function(e,t){this.prefix(e);var g=wi(JSON.stringify(t.value));e.push(g.length>32?Wi(g):g)}},{key:I,value:function(e,t){this.prefix(e),this.inRecursive.push({type:yi.array,elements:0}),e.push([91])}},{key:a,value:function(e,t){this.prefix(e),this.inRecursive.push({type:yi.map,elements:0}),e.push([123])}},{key:o,value:function(e,t){}},{key:i,value:function(e,t){if("break"===t.type.name){var g=this.inRecursive.pop();if(g){if(g.type===yi.array)e.push([93]);else{if(g.type!==yi.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error("".concat(Ei," unsupported type: undefined"));if(this.prefix(e),"true"!==t.type.name)if("false"!==t.type.name)if("null"!==t.type.name){for(var n=String(t.value),r=[],I=!1,a=0;a<n.length;a++)r[a]=n.charCodeAt(a),I||46!==r[a]&&101!==r[a]&&69!==r[a]||(I=!0);I||(r.push(46),r.push(48)),e.push(r)}else e.push([110,117,108,108]);else e.push([102,97,108,115,101]);else e.push([116,114,117,101])}}]),l}(dl(Array),yi.uint.major,yi.negint.major,yi.bytes.major,yi.string.major,yi.array.major,yi.map.major,yi.tag.major,yi.float.major);var ml={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error("".concat(Ei," complex map keys are not supported"));var g=e[0],n=t[0];if(g.type!==yi.string||n.type!==yi.string)throw new Error("".concat(Ei," non-string map keys are not supported"));if(g<n)return-1;if(g>n)return 1;throw new Error("".concat(Ei," unexpected duplicate map keys, this is not supported"))}};var bl=function(){function e(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};de(this,e),this.pos=0,this.data=t,this.options=g,this.modeStack=["value"],this.lastToken=""}return be(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"ch",value:function(){return this.data[this.pos]}},{key:"currentMode",value:function(){return this.modeStack[this.modeStack.length-1]}},{key:"skipWhitespace",value:function(){for(var e=this.ch();32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}},{key:"expect",value:function(e){if(this.data.length-this.pos<e.length)throw new Error("".concat(xi," unexpected end of input at position ").concat(this.pos));for(var t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error("".concat(xi," unexpected token at position ").concat(this.pos,", expected to find '").concat(String.fromCharCode.apply(String,On(e)),"'"))}},{key:"parseNumber",value:function(){var e=this,t=this.pos,g=!1,n=!1,r=function(t){for(;!e.done();){var g=e.ch();if(!t.includes(g))break;e.pos++}};if(45===this.ch()&&(g=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new Gi(yi.uint,0,this.pos-t);this.pos++,n=!0}if(r([48,49,50,51,52,53,54,55,56,57]),g&&this.pos===t+1)throw new Error("".concat(xi," unexpected token at position ").concat(this.pos));if(!this.done()&&46===this.ch()){if(n)throw new Error("".concat(xi," unexpected token at position ").concat(this.pos));n=!0,this.pos++,r([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,r([48,49,50,51,52,53,54,55,56,57]));var I=String.fromCharCode.apply(null,this.data.subarray(t,this.pos)),a=parseFloat(I);return n?new Gi(yi.float,a,this.pos-t):!0!==this.options.allowBigInt||Number.isSafeInteger(a)?new Gi(a>=0?yi.uint:yi.negint,a,this.pos-t):new Gi(a>=0?yi.uint:yi.negint,BigInt(I),this.pos-t)}},{key:"parseString",value:function(){var e=this;if(34!==this.ch())throw new Error("".concat(xi," unexpected character at position ").concat(this.pos,"; this shouldn't happen"));this.pos++;for(var t=this.pos,g=0;t<this.data.length&&g<65536;t++,g++){var n=this.data[t];if(92===n||n<32||n>=128)break;if(34===n){var r=String.fromCharCode.apply(null,this.data.subarray(this.pos,t));return this.pos=t+1,new Gi(yi.string,r,g)}}for(var I=this.pos,a=[],o=function(){if(e.pos+4>=e.data.length)throw new Error("".concat(xi," unexpected end of unicode escape sequence at position ").concat(e.pos));for(var t=0,g=0;g<4;g++){var n=e.ch();if(n>=48&&n<=57)n-=48;else if(n>=97&&n<=102)n=n-97+10;else{if(!(n>=65&&n<=70))throw new Error("".concat(xi," unexpected unicode escape character at position ").concat(e.pos));n=n-65+10}t=16*t+n,e.pos++}return t},i=function(){var t,g,n,r,I=e.ch(),o=null,i=I>239?4:I>223?3:I>191?2:1;if(e.pos+i>e.data.length)throw new Error("".concat(xi," unexpected unicode sequence at position ").concat(e.pos));switch(i){case 1:I<128&&(o=I);break;case 2:128===(192&(t=e.data[e.pos+1]))&&(r=(31&I)<<6|63&t)>127&&(o=r);break;case 3:t=e.data[e.pos+1],g=e.data[e.pos+2],128===(192&t)&&128===(192&g)&&(r=(15&I)<<12|(63&t)<<6|63&g)>2047&&(r<55296||r>57343)&&(o=r);break;case 4:t=e.data[e.pos+1],g=e.data[e.pos+2],n=e.data[e.pos+3],128===(192&t)&&128===(192&g)&&128===(192&n)&&(r=(15&I)<<18|(63&t)<<12|(63&g)<<6|63&n)>65535&&r<1114112&&(o=r)}null===o?(o=65533,i=1):o>65535&&(o-=65536,a.push(o>>>10&1023|55296),o=56320|1023&o),a.push(o),e.pos+=i};!this.done();){var C=this.ch(),l=void 0;switch(C){case 92:if(this.pos++,this.done())throw new Error("".concat(xi," unexpected string termination at position ").concat(this.pos));switch(l=this.ch(),this.pos++,l){case 34:case 39:case 92:case 47:a.push(l);break;case 98:a.push(8);break;case 116:a.push(9);break;case 110:a.push(10);break;case 102:a.push(12);break;case 114:a.push(13);break;case 117:a.push(o());break;default:throw new Error("".concat(xi," unexpected string escape character at position ").concat(this.pos))}break;case 34:return this.pos++,new Gi(yi.string,Fi(a),this.pos-I);default:if(C<32)throw new Error("".concat(xi," invalid control character at position ").concat(this.pos));C<128?(a.push(C),this.pos++):i()}}throw new Error("".concat(xi," unexpected end of string at position ").concat(this.pos))}},{key:"parseValue",value:function(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Gi(yi.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Gi(yi.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Gi(yi.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Gi(yi.false,!1,5);case 116:return this.expect([116,114,117,101]),new Gi(yi.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error("".concat(xi," unexpected character at position ").concat(this.pos))}}},{key:"next",value:function(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new Gi(yi.break,void 0,1);if(44!==this.ch())throw new Error("".concat(xi," unexpected character at position ").concat(this.pos,", was expecting array delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new Gi(yi.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Gi(yi.break,void 0,1);if(44!==this.ch())throw new Error("".concat(xi," unexpected character at position ").concat(this.pos,", was expecting object delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));this.pos++,this.skipWhitespace();case"obj-start":if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new Gi(yi.break,void 0,1);var e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error("".concat(xi," unexpected character at position ").concat(this.pos,", was expecting key/value delimiter ':' but found '").concat(String.fromCharCode(this.ch()),"'"));return this.pos++,this.modeStack.push("obj-value"),e;case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error("".concat(xi," unexpected parse state at position ").concat(this.pos,"; this shouldn't happen"))}}}]),e}();function pl(e){var t=ll.encode(e).slice(1);return[new Gi(yi.map,1/0,1),new Gi(yi.string,"/",1),new Gi(yi.map,1/0,1),new Gi(yi.string,"bytes",5),new Gi(yi.string,t,t.length),new Gi(yi.break,void 0,1),new Gi(yi.break,void 0,1)]}var fl={typeEncoders:{Object:function(e){if(e.asCID!==e)return null;var t=Jo.asCID(e);if(!t)return null;var g=t.toString();return[new Gi(yi.map,1/0,1),new Gi(yi.string,"/",1),new Gi(yi.string,g,g.length),new Gi(yi.break,void 0,1)]},Uint8Array:pl,Buffer:pl,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},Zl=function(e){Ze(g,e);var t=ve(g);function g(e,n){var r;return de(this,g),(r=t.call(this,e,n)).tokenBuffer=[],r}return be(g,[{key:"done",value:function(){return 0===this.tokenBuffer.length&&Pe(ye(g.prototype),"done",this).call(this)}},{key:"_next",value:function(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():Pe(ye(g.prototype),"next",this).call(this)}},{key:"next",value:function(){var e=this._next();if(e.type===yi.map){var t=this._next();if(t.type===yi.string&&"/"===t.value){var g=this._next();if(g.type===yi.string){if(this._next().type!==yi.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(g),new Gi(yi.tag,42,0)}if(g.type===yi.map){var n=this._next();if(n.type===yi.string&&"bytes"===n.value){var r=this._next();if(r.type===yi.string){for(var I=0;I<2;I++){if(this._next().type!==yi.break)throw new Error("Invalid encoded Bytes form")}var a=ll.decode("m".concat(r.value));return new Gi(yi.bytes,a,r.value.length)}this.tokenBuffer.push(r)}this.tokenBuffer.push(n)}this.tokenBuffer.push(g)}this.tokenBuffer.push(t)}return e}}]),g}(bl),yl={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};yl.tags[42]=Jo.parse;var Gl="dag-json",Bl=297,vl=function(e){return t=e,g=fl,g=Object.assign({},ml,g),PC(t,new hl,g);var t,g},kl=function(e){return function(e,t){return tl(e,t=Object.assign({tokenizer:new bl(e,t)},t))}(e,Object.assign(yl,{tokenizer:new Zl(e,yl)}))};function Sl(e){return cl.encode(e).slice(1)}function Wl(e){return cl.decode("u".concat(e))}function Vl(e){var t={signature:Wl(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Wl(e.protected)),t}function wl(e){var t={signature:Sl(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Sl(e.protected)),t}function Rl(e){var t={};return e.encrypted_key&&(t.encrypted_key=Wl(e.encrypted_key)),e.header&&(t.header=e.header),t}function Xl(e){var t={};return e.encrypted_key&&(t.encrypted_key=Sl(e.encrypted_key)),e.header&&(t.header=e.header),t}var Jl="dag-jose",Yl=133;function Hl(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function Nl(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function Fl(e){if("string"===typeof e){var t=e.split(".");if(3===t.length)return function(e){var t=Ae(e,3),g=t[0],n=t[1];return{payload:n,signatures:[{protected:g,signature:t[2]}],link:Jo.decode(Wl(n))}}(t);if(5===t.length)return function(e){var t=Ae(e,5),g=t[0],n=t[1],r=t[2],I={ciphertext:t[3],iv:r,protected:g,tag:t[4]};return n&&(I.recipients=[{encrypted_key:n}]),I}(t);throw new Error("Not a valid JOSE string")}if(Hl(e)||Nl(e))return e;throw new Error("Not a valid unencoded JOSE object")}function Kl(e){var t;if("string"===typeof e&&(e=Fl(e)),Hl(e))t=function(e){var t=Wl(e.payload);try{Jo.decode(t)}catch(g){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(Vl)}}(e);else{if(!Nl(e))throw new Error("Not a valid JOSE object");t=function(e){var t={ciphertext:Wl(e.ciphertext),protected:Wl(e.protected),iv:Wl(e.iv),tag:Wl(e.tag)};return e.aad&&(t.aad=Wl(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Rl)),e.unprotected&&(t.unprotected=e.unprotected),t}(e)}return new Uint8Array(al(t))}function xl(e){var t,g;try{t=ol(e)}catch(n){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(g=t)&&g.payload instanceof Uint8Array&&"signatures"in g&&Array.isArray(g.signatures))return function(e){var t={payload:Sl(e.payload),signatures:e.signatures.map(wl)};return t.link=Jo.decode(new Uint8Array(e.payload)),t}(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return function(e){var t={ciphertext:Sl(e.ciphertext),protected:Sl(e.protected),iv:Sl(e.iv),tag:Sl(e.tag)};return e.aad&&(t.aad=Sl(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Xl)),e.unprotected&&(t.unprotected=e.unprotected),t}(t);throw new Error("Not a valid DAG-JOSE object")}var El=Io,Ml={code:0,name:"identity",encode:El,digest:function(e){return ao(0,El(e))}},Dl=po({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Ul=Zo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),zl=Zo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Ll=fo({prefix:"9",name:"base10",alphabet:"0123456789"}),Ql=Zo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tl=Zo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),jl=fo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Pl=fo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ol=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),_l=Ol.reduce((function(e,t,g){return e[g]=t,e}),[]),ql=Ol.reduce((function(e,t,g){return e[t.codePointAt(0)]=g,e}),[]);var $l=po({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=_l[t]}),"")},decode:function(e){var t,g=[],n=_n(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,I=ql[r.codePointAt(0)];if(void 0===I)throw new Error("Non-base256emoji character: ".concat(r));g.push(I)}}catch(Yy){n.e(Yy)}finally{n.f()}return new Uint8Array(g)}}),eu=function(e){return function(){var t=ue(Ce().mark((function t(g){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,g);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},tu=il({name:"sha2-256",code:18,encode:eu("SHA-256")}),gu=il({name:"sha2-512",code:19,encode:eu("SHA-512")}),nu="raw",ru=85,Iu=function(e){return Io(e)},au=function(e){return Io(e)},ou=new TextEncoder,iu=new TextDecoder,Cu="json",lu=512,uu=function(e){return ou.encode(JSON.stringify(e))},cu=function(e){return JSON.parse(iu.decode(e))},su=lo(lo(lo(lo(lo(lo(lo(lo(lo(lo({},i),C),l),u),c),t),s),e),r),A),Au=lo(lo({},d),o),du={raw:h,json:m},hu=function(){function e(){de(this,e),io(this,"index",0),io(this,"input","")}return be(e,[{key:"new",value:function(e){return this.index=0,this.input=e,this}},{key:"readAtomically",value:function(e){var t=this.index,g=e();return void 0===g&&(this.index=t),g}},{key:"parseWith",value:function(e){var t=e();if(this.index===this.input.length)return t}},{key:"peekChar",value:function(){if(!(this.index>=this.input.length))return this.input[this.index]}},{key:"readChar",value:function(){if(!(this.index>=this.input.length))return this.input[this.index++]}},{key:"readGivenChar",value:function(e){var t=this;return this.readAtomically((function(){var g=t.readChar();if(g===e)return g}))}},{key:"readSeparator",value:function(e,t,g){var n=this;return this.readAtomically((function(){if(!(t>0&&void 0===n.readGivenChar(e)))return g()}))}},{key:"readNumber",value:function(e,t,g,n){var r=this;return this.readAtomically((function(){var I=0,a=0,o=r.peekChar();if(void 0!==o){for(var i="0"===o,C=Math.pow(2,8*n)-1;;){var l=r.readAtomically((function(){var t=r.readChar();if(void 0!==t){var g=Number.parseInt(t,e);if(!Number.isNaN(g))return g}}));if(void 0===l)break;if(I*=e,(I+=l)>C)return;if(a+=1,void 0!==t&&a>t)return}return 0===a||!g&&i&&a>1?void 0:I}}))}},{key:"readIPv4Addr",value:function(){var e=this;return this.readAtomically((function(){for(var t=new Uint8Array(4),g=0;g<t.length;g++){var n=e.readSeparator(".",g,(function(){return e.readNumber(10,3,!1,1)}));if(void 0===n)return;t[g]=n}return t}))}},{key:"readIPv6Addr",value:function(){var e=this,t=function(t){for(var g=0;g<t.length/2;g++){var n=2*g;if(g<t.length-3){var r=e.readSeparator(":",g,(function(){return e.readIPv4Addr()}));if(void 0!==r)return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],[n+4,!0]}var I=e.readSeparator(":",g,(function(){return e.readNumber(16,4,!0,2)}));if(void 0===I)return[n,!1];t[n]=I>>8,t[n+1]=255&I}return[t.length,!1]};return this.readAtomically((function(){var g=new Uint8Array(16),n=Ae(t(g),2),r=n[0],I=n[1];if(16===r)return g;if(!I&&void 0!==e.readGivenChar(":")&&void 0!==e.readGivenChar(":")){var a=new Uint8Array(14),o=16-(r+2),i=Ae(t(a.subarray(0,o)),1)[0];return g.set(a.subarray(0,i),16-i),g}}))}},{key:"readIPAddr",value:function(){var e;return null!==(e=this.readIPv4Addr())&&void 0!==e?e:this.readIPv6Addr()}}]),e}(),mu=new hu;function bu(e){return Boolean(function(e){if(!(e.length>15))return mu.new(e).parseWith((function(){return mu.readIPv4Addr()}))}(e))}function pu(e){return Boolean(function(e){if(!(e.length>45))return mu.new(e).parseWith((function(){return mu.readIPv6Addr()}))}(e))}function fu(e){return Boolean(function(e){if(!(e.length>45))return mu.new(e).parseWith((function(){return mu.readIPAddr()}))}(e))}var Zu=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),n=0;n<g.length;n++)g[n]=255;for(var r=0;r<e.length;r++){var I=e.charAt(r),a=I.charCodeAt(0);if(255!==g[a])throw new TypeError(I+" is ambiguous");g[a]=r}var o=e.length,i=e.charAt(0),C=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,r=0;e[t]===i;)n++,t++;for(var I=(e.length-t)*C+1>>>0,a=new Uint8Array(I);e[t];){var l=g[e.charCodeAt(t)];if(255===l)return;for(var u=0,c=I-1;(0!==l||u<r)&&-1!==c;c--,u++)l+=o*a[c]>>>0,a[c]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");r=u,t++}if(" "!==e[t]){for(var s=I-r;s!==I&&0===a[s];)s++;for(var A=new Uint8Array(n+(I-s)),d=n;s!==I;)A[d++]=a[s++];return A}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var g=0,n=0,r=0,I=t.length;r!==I&&0===t[r];)r++,g++;for(var a=(I-r)*l+1>>>0,C=new Uint8Array(a);r!==I;){for(var u=t[r],c=0,s=a-1;(0!==u||c<n)&&-1!==s;s--,c++)u+=256*C[s]>>>0,C[s]=u%o>>>0,u=u/o>>>0;if(0!==u)throw new Error("Non-zero carry");n=c,r++}for(var A=a-n;A!==a&&0===C[A];)A++;for(var d=i.repeat(g);A<a;++A)d+=e.charAt(C[A]);return d},decodeUnsafe:u,decode:function(e){var g=u(e);if(g)return g;throw new Error("Non-".concat(t," character"))}}},yu=Zu,Gu=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Bu=function(){function e(t,g,n){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n}return be(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),vu=function(){function e(t,g,n){if(de(this,e),this.name=t,this.prefix=g,void 0===g.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=g.codePointAt(0),this.baseDecode=n}return be(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Su(this,e)}}]),e}(),ku=function(){function e(t){de(this,e),this.decoders=t}return be(e,[{key:"or",value:function(e){return Su(this,e)}},{key:"decode",value:function(e){var t=e[0],g=this.decoders[t];if(g)return g.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Su=function(e,t){return new ku(lo(lo({},e.decoders||io({},e.prefix,e)),t.decoders||io({},t.prefix,t)))},Wu=function(){function e(t,g,n,r){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n,this.baseDecode=r,this.encoder=new Bu(t,g,n),this.decoder=new vu(t,g,r)}return be(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Vu=function(e){var t=e.name,g=e.prefix,n=e.encode,r=e.decode;return new Wu(t,g,n,r)},wu=function(e){var t=e.prefix,g=e.name,n=e.alphabet,r=yu(n,g),I=r.encode,a=r.decode;return Vu({prefix:t,name:g,encode:I,decode:function(e){return Gu(a(e))}})},Ru=function(e){var t=e.name,g=e.prefix,n=e.bitsPerChar,r=e.alphabet;return Vu({prefix:g,name:t,encode:function(e){return function(e,t,g){for(var n="="===t[t.length-1],r=(1<<g)-1,I="",a=0,o=0,i=0;i<e.length;++i)for(o=o<<8|e[i],a+=8;a>g;)I+=t[r&o>>(a-=g)];if(a&&(I+=t[r&o<<g-a]),n)for(;I.length*g&7;)I+="=";return I}(e,r,n)},decode:function(e){return function(e,t,g,n){for(var r={},I=0;I<t.length;++I)r[t[I]]=I;for(var a=e.length;"="===e[a-1];)--a;for(var o=new Uint8Array(a*g/8|0),i=0,C=0,l=0,u=0;u<a;++u){var c=r[e[u]];if(void 0===c)throw new SyntaxError("Non-".concat(n," character"));C=C<<g|c,(i+=g)>=8&&(i-=8,o[l++]=255&C>>i)}if(i>=g||255&C<<8-i)throw new SyntaxError("Unexpected end of data");return o}(e,r,n,t)}})},Xu=Vu({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Ju=Ru({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Yu=Ru({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Hu=wu({prefix:"9",name:"base10",alphabet:"0123456789"}),Nu=Ru({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fu=Ru({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Ku=Ru({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xu=Ru({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Eu=Ru({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Mu=Ru({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Du=Ru({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Uu=Ru({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zu=Ru({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Lu=Ru({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qu=Ru({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Tu=wu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ju=wu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Pu=wu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ou=wu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),_u=Ru({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qu=Ru({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$u=Ru({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ec=Ru({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),tc=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),gc=tc.reduce((function(e,t,g){return e[g]=t,e}),[]),nc=tc.reduce((function(e,t,g){return e[t.codePointAt(0)]=g,e}),[]);var rc=Vu({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=gc[t]}),"")},decode:function(e){var t,g=[],n=_n(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,I=nc[r.codePointAt(0)];if(void 0===I)throw new Error("Non-base256emoji character: ".concat(r));g.push(I)}}catch(Yy){n.e(Yy)}finally{n.f()}return new Uint8Array(g)}}),Ic=function e(t,g,n){g=g||[];var r=n=n||0;for(;t>=ac;)g[n++]=255&t|128,t/=128;for(;-128&t;)g[n++]=255&t|128,t>>>=7;return g[n]=0|t,e.bytes=n-r+1,g},ac=Math.pow(2,31);var oc=function e(t,g){var n,r=0,I=0,a=g=g||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");n=t[a++],r+=I<28?(127&n)<<I:(127&n)*Math.pow(2,I),I+=7}while(n>=128);return e.bytes=a-g,r};var ic=Math.pow(2,7),Cc=Math.pow(2,14),lc=Math.pow(2,21),uc=Math.pow(2,28),cc=Math.pow(2,35),sc=Math.pow(2,42),Ac=Math.pow(2,49),dc=Math.pow(2,56),hc=Math.pow(2,63),mc={encode:Ic,decode:oc,encodingLength:function(e){return e<ic?1:e<Cc?2:e<lc?3:e<uc?4:e<cc?5:e<sc?6:e<Ac?7:e<dc?8:e<hc?9:10}},bc=function(e,t){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return mc.encode(e,t,g),t},pc=function(e){return mc.encodingLength(e)},fc=function(e,t){var g=t.byteLength,n=pc(e),r=n+pc(g),I=new Uint8Array(r+g);return bc(e,I,0),bc(g,I,n),I.set(t,r),new Zc(e,g,t,I)},Zc=be((function e(t,g,n,r){de(this,e),this.code=t,this.size=g,this.digest=n,this.bytes=r})),yc=function(e){var t=e.name,g=e.code,n=e.encode;return new Gc(t,g,n)},Gc=function(){function e(t,g,n){de(this,e),this.name=t,this.code=g,this.encode=n}return be(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var g=this.encode(e);return g instanceof Uint8Array?fc(this.code,g):g.then((function(e){return fc(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Bc=function(e){return function(){var t=ue(Ce().mark((function t(g){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,g);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},vc=yc({name:"sha2-256",code:18,encode:Bc("SHA-256")}),kc=yc({name:"sha2-512",code:19,encode:Bc("SHA-512")}),Sc=Gu,Wc={code:0,name:"identity",encode:Sc,digest:function(e){return fc(0,Sc(e))}},Vc="raw",wc=85,Rc=function(e){return Gu(e)},Xc=function(e){return Gu(e)},Jc=new TextEncoder,Yc=new TextDecoder,Hc="json",Nc=512,Fc=function(e){return Jc.encode(JSON.stringify(e))},Kc=function(e){return JSON.parse(Yc.decode(e))},xc=(new WeakMap,Symbol.for("@ipld/js-cid/CID"),lo(lo(lo(lo(lo(lo(lo(lo(lo(lo({},b),p),f),Z),y),G),B),v),k),S));lo(lo({},W),V);function Ec(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Mc(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Ec(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Dc(e,t,g,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:g},decoder:{decode:n}}}var Uc=Dc("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),zc=Dc("ascii","a",(function(e){for(var t="a",g=0;g<e.length;g++)t+=String.fromCharCode(e[g]);return t}),(function(e){for(var t=Mc((e=e.substring(1)).length),g=0;g<e.length;g++)t[g]=e.charCodeAt(g);return t})),Lc=lo({utf8:Uc,"utf-8":Uc,hex:xc.base16,latin1:zc,ascii:zc,binary:zc},xc);function Qc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",g=Lc[t];if(null==g)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?g.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Tc=bu,jc=pu,Pc=function e(t){var g=0;if(t=t.toString().trim(),Tc(t)){var n=new Uint8Array(g+4);return t.split(/\./g).forEach((function(e){n[g++]=255&parseInt(e,10)})),n}if(jc(t)){var r,I=t.split(":",8);for(r=0;r<I.length;r++){var a=void 0;Tc(I[r])&&(a=e(I[r]),I[r]=Qc(a.slice(0,2),"base16")),null!=a&&++r<8&&I.splice(r,0,Qc(a.slice(2,4),"base16"))}if(""===I[0])for(;I.length<8;)I.unshift("0");else if(""===I[I.length-1])for(;I.length<8;)I.push("0");else if(I.length<8){for(r=0;r<I.length&&""!==I[r];r++);var o=[r,1];for(r=9-I.length;r>0;r--)o.push("0");I.splice.apply(I,o)}var i=new Uint8Array(g+16);for(r=0;r<I.length;r++){var C=parseInt(I[r],16);i[g++]=C>>8&255,i[g++]=255&C}return i}throw new Error("invalid ip address")},Oc=-1,_c={},qc={};function $c(e,t,g,n,r){return{code:e,size:t,name:g,resolvable:Boolean(n),path:Boolean(r)}}function es(e){if("number"===typeof e){if(null!=qc[e])return qc[e];throw new Error("no protocol with code: ".concat(e))}if("string"===typeof e){if(null!=_c[e])return _c[e];throw new Error("no protocol with name: ".concat(e))}throw new Error("invalid protocol id type: ".concat(typeof e))}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Oc,"ip6zone"],[53,Oc,"dns",!0],[54,Oc,"dns4",!0],[55,Oc,"dns6",!0],[56,Oc,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Oc,"unix",!1,!0],[421,Oc,"ipfs"],[421,Oc,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Oc,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Oc,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Oc,"memory"]].forEach((function(e){var t=$c.apply(void 0,On(e));qc[t.code]=t,_c[t.name]=t}));var ts=function e(t,g,n){g=g||[];var r=n=n||0;for(;t>=gs;)g[n++]=255&t|128,t/=128;for(;-128&t;)g[n++]=255&t|128,t>>>=7;return g[n]=0|t,e.bytes=n-r+1,g},gs=Math.pow(2,31);var ns=function e(t,g){var n,r=0,I=0,a=g=g||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");n=t[a++],r+=I<28?(127&n)<<I:(127&n)*Math.pow(2,I),I+=7}while(n>=128);return e.bytes=a-g,r};var rs=Math.pow(2,7),Is=Math.pow(2,14),as=Math.pow(2,21),os=Math.pow(2,28),is=Math.pow(2,35),Cs=Math.pow(2,42),ls=Math.pow(2,49),us=Math.pow(2,56),cs=Math.pow(2,63),ss={encode:ts,decode:ns,encodingLength:function(e){return e<rs?1:e<Is?2:e<as?3:e<os?4:e<is?5:e<Cs?6:e<ls?7:e<us?8:e<cs?9:10}},As=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,g=ss.decode(e,t);return[g,ss.decode.bytes]},ds=function(e,t){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ss.encode(e,t,g),t},hs=function(e){return ss.encodingLength(e)},ms=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),bs=function(e,t){var g=t.byteLength,n=hs(e),r=n+hs(g),I=new Uint8Array(r+g);return ds(e,I,0),ds(g,I,n),I.set(t,r),new fs(e,g,t,I)},ps=function(e){var t=ms(e),g=Ae(As(t),2),n=g[0],r=g[1],I=Ae(As(t.subarray(r)),2),a=I[0],o=I[1],i=t.subarray(r+o);if(i.byteLength!==a)throw new Error("Incorrect length");return new fs(n,a,i,t)},fs=be((function e(t,g,n,r){de(this,e),this.code=t,this.size=g,this.digest=n,this.bytes=r}));var Zs=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),n=0;n<g.length;n++)g[n]=255;for(var r=0;r<e.length;r++){var I=e.charAt(r),a=I.charCodeAt(0);if(255!==g[a])throw new TypeError(I+" is ambiguous");g[a]=r}var o=e.length,i=e.charAt(0),C=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,r=0;e[t]===i;)n++,t++;for(var I=(e.length-t)*C+1>>>0,a=new Uint8Array(I);e[t];){var l=g[e.charCodeAt(t)];if(255===l)return;for(var u=0,c=I-1;(0!==l||u<r)&&-1!==c;c--,u++)l+=o*a[c]>>>0,a[c]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");r=u,t++}if(" "!==e[t]){for(var s=I-r;s!==I&&0===a[s];)s++;for(var A=new Uint8Array(n+(I-s)),d=n;s!==I;)A[d++]=a[s++];return A}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var g=0,n=0,r=0,I=t.length;r!==I&&0===t[r];)r++,g++;for(var a=(I-r)*l+1>>>0,C=new Uint8Array(a);r!==I;){for(var u=t[r],c=0,s=a-1;(0!==u||c<n)&&-1!==s;s--,c++)u+=256*C[s]>>>0,C[s]=u%o>>>0,u=u/o>>>0;if(0!==u)throw new Error("Non-zero carry");n=c,r++}for(var A=a-n;A!==a&&0===C[A];)A++;for(var d=i.repeat(g);A<a;++A)d+=e.charAt(C[A]);return d},decodeUnsafe:u,decode:function(e){var g=u(e);if(g)return g;throw new Error("Non-".concat(t," character"))}}},ys=Zs,Gs=function(){function e(t,g,n){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n}return be(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Bs=function(){function e(t,g,n){if(de(this,e),this.name=t,this.prefix=g,void 0===g.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=g.codePointAt(0),this.baseDecode=n}return be(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return ks(this,e)}}]),e}(),vs=function(){function e(t){de(this,e),this.decoders=t}return be(e,[{key:"or",value:function(e){return ks(this,e)}},{key:"decode",value:function(e){var t=e[0],g=this.decoders[t];if(g)return g.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),ks=function(e,t){return new vs(lo(lo({},e.decoders||io({},e.prefix,e)),t.decoders||io({},t.prefix,t)))},Ss=function(){function e(t,g,n,r){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n,this.baseDecode=r,this.encoder=new Gs(t,g,n),this.decoder=new Bs(t,g,r)}return be(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Ws=function(e){var t=e.name,g=e.prefix,n=e.encode,r=e.decode;return new Ss(t,g,n,r)},Vs=function(e){var t=e.prefix,g=e.name,n=e.alphabet,r=ys(n,g),I=r.encode,a=r.decode;return Ws({prefix:t,name:g,encode:I,decode:function(e){return ms(a(e))}})},ws=function(e){var t=e.name,g=e.prefix,n=e.bitsPerChar,r=e.alphabet;return Ws({prefix:g,name:t,encode:function(e){return function(e,t,g){for(var n="="===t[t.length-1],r=(1<<g)-1,I="",a=0,o=0,i=0;i<e.length;++i)for(o=o<<8|e[i],a+=8;a>g;)I+=t[r&o>>(a-=g)];if(a&&(I+=t[r&o<<g-a]),n)for(;I.length*g&7;)I+="=";return I}(e,r,n)},decode:function(e){return function(e,t,g,n){for(var r={},I=0;I<t.length;++I)r[t[I]]=I;for(var a=e.length;"="===e[a-1];)--a;for(var o=new Uint8Array(a*g/8|0),i=0,C=0,l=0,u=0;u<a;++u){var c=r[e[u]];if(void 0===c)throw new SyntaxError("Non-".concat(n," character"));C=C<<g|c,(i+=g)>=8&&(i-=8,o[l++]=255&C>>i)}if(i>=g||255&C<<8-i)throw new SyntaxError("Unexpected end of data");return o}(e,r,n,t)}})},Rs=Vs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Xs=Vs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Js=ws({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ys=ws({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Hs=ws({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ns=ws({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Fs=ws({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ks=ws({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xs=ws({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Es=ws({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ms=ws({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ds=new WeakMap,Us=function(e){var t=Ds.get(e);if(null==t){var g=new Map;return Ds.set(e,g),g}return t},zs=function(e,t){function g(e,t,n,r){de(this,g),this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}return be(g,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==js)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Ps)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return g.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,r=bs(t,n);return g.createV1(this.code,r);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return g.equals(this,e)}},{key:"toString",value:function(e){return function(e,t){var g=e.bytes;return 0===e.version?Qs(g,Us(e),t||Rs.encoder):Ts(g,Us(e),t||Js.encoder)}(this,e)}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var g=t;return g&&e.code===g.code&&e.version===g.version&&function(e,t){if(e===t)return!0;var g=t;return e.code===g.code&&e.size===g.size&&g.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var g=0;g<e.byteLength;g++)if(e[g]!==t[g])return!1;return!0}(e.bytes,g.bytes)}(e.multihash,g.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof g)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,r=t.code,I=t.multihash;return new g(n,r,I,t.bytes||Os(n,r,I.bytes))}if(!0===t[_s]){var a=t.version,o=t.multihash,i=t.code,C=ps(o);return g.create(a,i,C)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==js)throw new Error("Version 0 CID must use dag-pb (code: ".concat(js,") block encoding"));return new g(e,t,n,n.bytes);case 1:return new g(e,t,n,Os(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return g.create(0,js,e)}},{key:"createV1",value:function(e,t){return g.create(1,e,t)}},{key:"decode",value:function(e){var t=Ae(g.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=g.inspectBytes(e),n=t.size-t.multihashSize,r=ms(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");var I=r.subarray(t.multihashSize-t.digestSize),a=new fs(t.multihashCode,t.digestSize,I,r);return[0===t.version?g.createV0(a):g.createV1(t.codec,a),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,g=function(){var g=Ae(As(e.subarray(t)),2),n=g[0],r=g[1];return t+=r,n},n=g(),r=js;if(18===n?(n=0,t=0):r=g(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var I=t,a=g(),o=g(),i=t+o;return{version:n,codec:r,multihashCode:a,digestSize:o,multihashSize:i-I,size:i}}},{key:"parse",value:function(e,t){var n=Ae(Ls(e,t),2),r=n[0],I=n[1],a=g.decode(I);return Us(a).set(r,e),a}}]),g}(),Ls=function(e,t){switch(e[0]){case"Q":var g=t||Rs;return[Rs.prefix,g.decode("".concat(Rs.prefix).concat(e))];case Rs.prefix:var n=t||Rs;return[Rs.prefix,n.decode(e)];case Js.prefix:var r=t||Js;return[Js.prefix,r.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Qs=function(e,t,g){var n=g.prefix;if(n!==Rs.prefix)throw Error("Cannot string encode V0 in ".concat(g.name," encoding"));var r=t.get(n);if(null==r){var I=g.encode(e).slice(1);return t.set(n,I),I}return r},Ts=function(e,t,g){var n=g.prefix,r=t.get(n);if(null==r){var I=g.encode(e);return t.set(n,I),I}return r},js=112,Ps=18,Os=function(e,t,g){var n=hs(e),r=n+hs(t),I=new Uint8Array(r+g.byteLength);return ds(e,I,0),ds(t,I,n),I.set(g,r),I},_s=Symbol.for("@ipld/js-cid/CID"),qs=Ws({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),$s=ws({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),eA=ws({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),tA=Vs({prefix:"9",name:"base10",alphabet:"0123456789"}),gA=ws({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nA=ws({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),rA=Vs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),IA=Vs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),aA=ws({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oA=ws({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iA=ws({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),CA=ws({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),lA=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),uA=lA.reduce((function(e,t,g){return e[g]=t,e}),[]),cA=lA.reduce((function(e,t,g){return e[t.codePointAt(0)]=g,e}),[]);var sA=Ws({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=uA[t]}),"")},decode:function(e){var t,g=[],n=_n(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,I=cA[r.codePointAt(0)];if(void 0===I)throw new Error("Non-base256emoji character: ".concat(r));g.push(I)}}catch(Yy){n.e(Yy)}finally{n.f()}return new Uint8Array(g)}}),AA=function(e){var t=e.name,g=e.code,n=e.encode;return new dA(t,g,n)},dA=function(){function e(t,g,n){de(this,e),this.name=t,this.code=g,this.encode=n}return be(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var g=this.encode(e);return g instanceof Uint8Array?bs(this.code,g):g.then((function(e){return bs(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),hA=function(e){return function(){var t=ue(Ce().mark((function t(g){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,g);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},mA=AA({name:"sha2-256",code:18,encode:hA("SHA-256")}),bA=AA({name:"sha2-512",code:19,encode:hA("SHA-512")}),pA=ms,fA={code:0,name:"identity",encode:pA,digest:function(e){return bs(0,pA(e))}},ZA="raw",yA=85,GA=function(e){return ms(e)},BA=function(e){return ms(e)},vA=new TextEncoder,kA=new TextDecoder,SA="json",WA=512,VA=function(e){return vA.encode(JSON.stringify(e))},wA=function(e){return JSON.parse(kA.decode(e))},RA=lo(lo(lo(lo(lo(lo(lo(lo(lo(lo({},Y),H),N),F),K),J),x),X),E),M),XA=(lo(lo({},D),U),__webpack_require__(1684));function JA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",g=Lc[t];if(null==g)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?g.decoder.decode("".concat(g.prefix).concat(e)):Ec(globalThis.Buffer.from(e,"utf-8"))}function YA(e,t){null==t&&(t=e.reduce((function(e,t){return e+t.length}),0));var g,n=Mc(t),r=0,I=_n(e);try{for(I.s();!(g=I.n()).done;){var a=g.value;n.set(a,r),r+=a.length}}catch(Yy){I.e(Yy)}finally{I.f()}return Ec(n)}function HA(e,t){switch(es(e).code){case 4:case 41:return function(e){var t=function(e){var t,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;g=~~g,n=null!==(t=n)&&void 0!==t?t:e.length-g;var r=new DataView(e.buffer);if(4===n){for(var I=[],a=0;a<n;a++)I.push(e[g+a]);return I.join(".")}if(16===n){for(var o=[],i=0;i<n;i+=2)o.push(r.getUint16(g+i).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""}(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!fu(t))throw new Error("invalid ip address");return t}(t);case 6:case 273:case 33:case 132:return MA(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function(e){var t=XA.decode(e);if(e=e.slice(XA.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Qc(e)}(t);case 421:return function(e){var t=XA.decode(e),g=e.slice(XA.decode.bytes);if(g.length!==t)throw new Error("inconsistent lengths");return Qc(g,"base58btc")}(t);case 444:case 445:return DA(t);case 466:return function(e){var t=XA.decode(e),g=e.slice(XA.decode.bytes);if(g.length!==t)throw new Error("inconsistent lengths");return"u"+Qc(g,"base64url")}(t);default:return Qc(t,"base16")}}function NA(e,t){switch(es(e).code){case 4:case 41:return xA(t);case 6:case 273:case 33:case 132:return EA(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return function(e){var t=JA(e),g=Uint8Array.from(XA.encode(t.length));return YA([g,t],g.length+t.length)}(t);case 421:return function(e){var t;t="Q"===e[0]||"1"===e[0]?ps(Rs.decode("z".concat(e))).bytes:zs.parse(e).multihash.bytes;var g=Uint8Array.from(XA.encode(t.length));return YA([g,t],g.length+t.length)}(t);case 444:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(16!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion address."));var g=Js.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var r=EA(n);return YA([g,r],g.length+r.length)}(t);case 445:return function(e){var t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(56!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion3 address."));var g=Js.decode("b".concat(t[0])),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");var r=EA(n);return YA([g,r],g.length+r.length)}(t);case 466:return function(e){var t=KA.decode(e),g=Uint8Array.from(XA.encode(t.length));return YA([g,t],g.length+t.length)}(t);default:return JA(t,"base16")}}var FA=Object.values(RA).map((function(e){return e.decoder})),KA=function(){var e=FA[0].or(FA[1]);return FA.slice(2).forEach((function(t){return e=e.or(t)})),e}();function xA(e){if(!fu(e))throw new Error("invalid ip address");return Pc(e)}function EA(e){var t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function MA(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function DA(e){var t=e.slice(0,e.length-2),g=e.slice(e.length-2),n=Qc(t,"base32"),r=MA(g);return"".concat(n,":").concat(r)}function UA(e){return e.map((function(e){var t=$A(e);return null!=e[1]?[t.code,HA(t.code,e[1])]:[t.code]}))}function zA(e){return PA(YA(e.map((function(e){var t=$A(e),g=Uint8Array.from(XA.encode(t.code));return e.length>1&&null!=e[1]&&(g=YA([g,e[1]])),g}))))}function LA(e,t){return e.size>0?e.size/8:0===e.size?0:XA.decode(t)+(null!==(g=XA.decode.bytes)&&void 0!==g?g:0);var g}function QA(e){for(var t=[],g=0;g<e.length;){var n,r=XA.decode(e,g),I=null!==(n=XA.decode.bytes)&&void 0!==n?n:0,a=LA(es(r),e.slice(g+I));if(0!==a){var o=e.slice(g+I,g+I+a);if((g+=a+I)>e.length)throw qA("Invalid address Uint8Array: "+Qc(e,"base16"));t.push([r,o])}else t.push([r]),g+=I}return t}function TA(e){return function(e){var t=[];return e.map((function(e){var g=$A(e);return t.push(g.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),_A(t.join("/"))}(UA(QA(e)))}function jA(e){var t=function(e){var t=[],g=e.split("/").slice(1);if(1===g.length&&""===g[0])return[];for(var n=0;n<g.length;n++){var r=g[n],I=es(r);if(0!==I.size){if(++n>=g.length)throw qA("invalid address: "+e);if(!0===I.path){t.push([r,_A(g.slice(n).join("/"))]);break}t.push([r,g[n]])}else t.push([r])}return t}(e=_A(e));return zA(t.map((function(e){Array.isArray(e)||(e=[e]);var t=$A(e);return e.length>1?[t.code,NA(t.code,e[1])]:[t.code]})))}function PA(e){var t=OA(e);if(null!=t)throw t;return Uint8Array.from(e)}function OA(e){try{QA(e)}catch(Yy){return Yy}}function _A(e){return"/"+e.trim().split("/").filter((function(e){return e})).join("/")}function qA(e){return new Error("Error parsing address: "+e)}function $A(e){return es(e[0])}var ed=__webpack_require__(8166);function td(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var g=0;g<e.byteLength;g++)if(e[g]!==t[g])return!1;return!0}var gd,nd,rd,Id,ad=function(e,t,g,n){if("a"===g&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===g?n:"a"===g?n.call(e):n?n.value:t.get(e)},od=function(e,t,g,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,g):r?r.value=g:t.set(e,g),g},id=Symbol.for("nodejs.util.inspect.custom"),Cd=[es("dns").code,es("dns4").code,es("dns6").code,es("dnsaddr").code],ld=[es("p2p").code,es("ipfs").code],ud=new Map,cd=Symbol.for("@multiformats/js-multiaddr/multiaddr");function sd(e){return Boolean(null===e||void 0===e?void 0:e[cd])}var Ad=function(e){function t(e){if(de(this,t),gd.set(this,void 0),nd.set(this,void 0),rd.set(this,void 0),this[Id]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=PA(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error('multiaddr "'.concat(e,'" must start with a "/"'));this.bytes=jA(e)}else{if(!sd(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=PA(e.bytes)}}return be(t,[{key:"toString",value:function(){return null==ad(this,gd,"f")&&od(this,gd,TA(this.bytes),"f"),ad(this,gd,"f")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toOptions",value:function(){var e,t,g=this.protoCodes(),n=this.toString().split("/").slice(1);if(n.length>2)Cd.includes(g[0])&&ld.includes(g[1])?(e=es("tcp").name,t=443):(e=es(n[2]).name,t=parseInt(n[3]));else{if(!Cd.includes(g[0]))throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');e=es("tcp").name,t=443}return{family:41===g[0]||55===g[0]?6:4,host:n[1],transport:e,port:t}}},{key:"protos",value:function(){return this.protoCodes().map((function(e){return Object.assign({},es(e))}))}},{key:"protoCodes",value:function(){for(var e=[],t=this.bytes,g=0;g<t.length;){var n,r=XA.decode(t,g),I=null!==(n=XA.decode.bytes)&&void 0!==n?n:0;g+=LA(es(r),t.slice(g+I))+I,e.push(r)}return e}},{key:"protoNames",value:function(){return this.protos().map((function(e){return e.name}))}},{key:"tuples",value:function(){return null==ad(this,nd,"f")&&od(this,nd,QA(this.bytes),"f"),ad(this,nd,"f")}},{key:"stringTuples",value:function(){return null==ad(this,rd,"f")&&od(this,rd,UA(this.tuples()),"f"),ad(this,rd,"f")}},{key:"encapsulate",value:function(e){return e=new t(e),new t(this.toString()+e.toString())}},{key:"decapsulate",value:function(e){var g=e.toString(),n=this.toString(),r=n.lastIndexOf(g);if(r<0)throw new Error("Address ".concat(this.toString()," does not contain subaddress: ").concat(e.toString()));return new t(n.slice(0,r))}},{key:"decapsulateCode",value:function(e){for(var g=this.tuples(),n=g.length-1;n>=0;n--)if(g[n][0]===e)return new t(zA(g.slice(0,n)));return this}},{key:"getPeerId",value:function(){try{var e=this.stringTuples().filter((function(e){return e[0]===_c.ipfs.code})),t=e.pop();if(null!=(null===t||void 0===t?void 0:t[1])){var g=t[1];return"Q"===g[0]||"1"===g[0]?Qc(Rs.decode("z".concat(g)),"base58btc"):Qc(zs.parse(g).multihash.bytes,"base58btc")}return null}catch(n){return null}}},{key:"getPath",value:function(){var e=null;try{null==(e=this.stringTuples().filter((function(e){return!0===es(e[0]).path}))[0][1])&&(e=null)}catch(t){e=null}return e}},{key:"equals",value:function(e){return td(this.bytes,e.bytes)}},{key:"resolve",value:function(){var e=ue(Ce().mark((function e(g){var n,r,I;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.protos().find((function(e){return e.resolvable})))){e.next=3;break}return e.abrupt("return",[this]);case 3:if(null!=(r=ud.get(n.name))){e.next=6;break}throw ed(new Error("no available resolver for ".concat(n.name)),"ERR_NO_AVAILABLE_RESOLVER");case 6:return e.next=8,r(this,g);case 8:return I=e.sent,e.abrupt("return",I.map((function(e){return new t(e)})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nodeAddress",value:function(){var e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error('multiaddr must have a valid format - no protocol with name: "'.concat(e.transport,'". Must have a valid transport protocol: "{tcp, udp}"'));return{family:e.family,address:e.host,port:e.port}}},{key:"isThinWaistAddress",value:function(e){var t=(null!==e&&void 0!==e?e:this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}},{key:e,value:function(){return"Multiaddr(".concat(TA(this.bytes),")")}}]),t}((gd=new WeakMap,nd=new WeakMap,rd=new WeakMap,Id=cd,id));function dd(e){return new Ad(e)}var hd=__webpack_require__(1947),md=/(\x2D?(?:[0-9]+\.?[0-9]*|[0-9]*\.?[0-9]+)(?:e[\+\x2D]?[0-9]+)?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*)/gi;function bd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms",g=null;return(e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2")).replace(md,(function(e,t,n){(n=pd(n))&&(g=(g||0)+parseFloat(t,10)*n)})),g&&g/(pd(t)||1)}function pd(e){return bd[e]||bd[e.toLowerCase().replace(/s$/,"")]}bd.nanosecond=bd.ns=1e-6,bd["\xb5s"]=bd["\u03bcs"]=bd.us=bd.microsecond=.001,bd.millisecond=bd.ms=bd[""]=1,bd.second=bd.sec=bd.s=1e3*bd.ms,bd.minute=bd.min=bd.m=60*bd.s,bd.hour=bd.hr=bd.h=60*bd.m,bd.day=bd.d=24*bd.h,bd.week=bd.wk=bd.w=7*bd.d,bd.month=bd.b=30.4375*bd.d,bd.year=bd.yr=bd.y=365.25*bd.d;var fd=bd,Zd=__webpack_require__(8921);var yd=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),n=0;n<g.length;n++)g[n]=255;for(var r=0;r<e.length;r++){var I=e.charAt(r),a=I.charCodeAt(0);if(255!==g[a])throw new TypeError(I+" is ambiguous");g[a]=r}var o=e.length,i=e.charAt(0),C=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,r=0;e[t]===i;)n++,t++;for(var I=(e.length-t)*C+1>>>0,a=new Uint8Array(I);e[t];){var l=g[e.charCodeAt(t)];if(255===l)return;for(var u=0,c=I-1;(0!==l||u<r)&&-1!==c;c--,u++)l+=o*a[c]>>>0,a[c]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");r=u,t++}if(" "!==e[t]){for(var s=I-r;s!==I&&0===a[s];)s++;for(var A=new Uint8Array(n+(I-s)),d=n;s!==I;)A[d++]=a[s++];return A}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var g=0,n=0,r=0,I=t.length;r!==I&&0===t[r];)r++,g++;for(var a=(I-r)*l+1>>>0,C=new Uint8Array(a);r!==I;){for(var u=t[r],c=0,s=a-1;(0!==u||c<n)&&-1!==s;s--,c++)u+=256*C[s]>>>0,C[s]=u%o>>>0,u=u/o>>>0;if(0!==u)throw new Error("Non-zero carry");n=c,r++}for(var A=a-n;A!==a&&0===C[A];)A++;for(var d=i.repeat(g);A<a;++A)d+=e.charAt(C[A]);return d},decodeUnsafe:u,decode:function(e){var g=u(e);if(g)return g;throw new Error("Non-".concat(t," character"))}}},Gd=yd,Bd=(new Uint8Array(0),function(){function e(t,g,n){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n}return be(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}()),vd=function(){function e(t,g,n){if(de(this,e),this.name=t,this.prefix=g,void 0===g.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=g.codePointAt(0),this.baseDecode=n}return be(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Sd(this,e)}}]),e}(),kd=function(){function e(t){de(this,e),this.decoders=t}return be(e,[{key:"or",value:function(e){return Sd(this,e)}},{key:"decode",value:function(e){var t=e[0],g=this.decoders[t];if(g)return g.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Sd=function(e,t){return new kd(lo(lo({},e.decoders||io({},e.prefix,e)),t.decoders||io({},t.prefix,t)))},Wd=function(){function e(t,g,n,r){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n,this.baseDecode=r,this.encoder=new Bd(t,g,n),this.decoder=new vd(t,g,r)}return be(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Vd=function(e){var t=e.name,g=e.prefix,n=e.encode,r=e.decode;return new Wd(t,g,n,r)},wd=function(e){var t=e.prefix,g=e.name,n=e.alphabet,r=Gd(n,g),I=r.encode,a=r.decode;return Vd({prefix:t,name:g,encode:I,decode:function(e){return function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}(a(e))}})},Rd=function(e){var t=e.name,g=e.prefix,n=e.bitsPerChar,r=e.alphabet;return Vd({prefix:g,name:t,encode:function(e){return function(e,t,g){for(var n="="===t[t.length-1],r=(1<<g)-1,I="",a=0,o=0,i=0;i<e.length;++i)for(o=o<<8|e[i],a+=8;a>g;)I+=t[r&o>>(a-=g)];if(a&&(I+=t[r&o<<g-a]),n)for(;I.length*g&7;)I+="=";return I}(e,r,n)},decode:function(e){return function(e,t,g,n){for(var r={},I=0;I<t.length;++I)r[t[I]]=I;for(var a=e.length;"="===e[a-1];)--a;for(var o=new Uint8Array(a*g/8|0),i=0,C=0,l=0,u=0;u<a;++u){var c=r[e[u]];if(void 0===c)throw new SyntaxError("Non-".concat(n," character"));C=C<<g|c,(i+=g)>=8&&(i-=8,o[l++]=255&C>>i)}if(i>=g||255&C<<8-i)throw new SyntaxError("Unexpected end of data");return o}(e,r,n,t)}})},Xd=wd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Jd=(wd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Rd({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),Yd=(Rd({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Rd({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rd({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rd({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rd({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rd({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Rd({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Rd({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Rd({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}));Rd({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Rd({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Rd({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Hd(e){return Object.assign(Zd(e),{error:Zd("".concat(e,":error")),trace:Zd("".concat(e,":trace"))})}Zd.formatters.b=function(e){return null==e?"undefined":Xd.baseEncode(e)},Zd.formatters.t=function(e){return null==e?"undefined":Jd.baseEncode(e)},Zd.formatters.m=function(e){return null==e?"undefined":Yd.baseEncode(e)},Zd.formatters.p=function(e){return null==e?"undefined":e.toString()},Zd.formatters.c=function(e){return null==e?"undefined":e.toString()},Zd.formatters.k=function(e){return null==e?"undefined":e.toString()};var Nd=__webpack_require__(9652),Fd=__webpack_require__(6861),Kd=function(e,t){return t},xd={ip4:Kd,ip6:function(e,t,g,n){return 1===n.length&&"ip6"===n[0].protocol?t:"[".concat(t,"]")},tcp:function(e,t,g,n,r){return n.some((function(e){return["http","https","ws","wss"].includes(e.protocol)}))?"".concat(e,":").concat(t):function(e,t,g,n){if(null!=n&&!1===n.assumeHttp)return"tcp://".concat(e,":").concat(t);var r="tcp",I=":".concat(t);return"tcp"===g[g.length-1].protocol&&(r="443"===t?"https":"http",I="443"===t||"80"===t?"":I),"".concat(r,"://").concat(e).concat(I)}(e,t,n,r)},udp:function(e,t){return"udp://".concat(e,":").concat(t)},dnsaddr:Kd,dns4:Kd,dns6:Kd,ipfs:function(e,t){return"".concat(e,"/ipfs/").concat(t)},p2p:function(e,t){return"".concat(e,"/p2p/").concat(t)},http:function(e){return"http://".concat(e)},https:function(e){return"https://".concat(e)},ws:function(e){return"ws://".concat(e)},wss:function(e){return"wss://".concat(e)},"p2p-websocket-star":function(e){return"".concat(e,"/p2p-websocket-star")},"p2p-webrtc-star":function(e){return"".concat(e,"/p2p-webrtc-star")},"p2p-webrtc-direct":function(e){return"".concat(e,"/p2p-webrtc-direct")}};function Ed(e){try{e=function(e,t){var g=dd(e),n=g.toString().split("/").slice(1);return g.tuples().map((function(e){var t,g;return{protocol:null!==(t=n.shift())&&void 0!==t?t:"",content:null!=e[1]&&null!==(g=n.shift())&&void 0!==g?g:""}})).reduce((function(e,g,n,r){var I=xd[g.protocol];if(null==I)throw new Error("Unsupported protocol ".concat(g.protocol));return I(e,g.content,n,r,t)}),"")}(dd(e))}catch(Yy){}return e=e.toString()}var Md=Hd("ipfs-http-client:lib:error-handler"),Dd=Fd.bind({ignoreUndefined:!0}),Ud=hd.isBrowser||hd.isWebWorker?location.protocol:"http",zd=hd.isBrowser||hd.isWebWorker?location.hostname:"localhost",Ld=hd.isBrowser||hd.isWebWorker?location.port:"5001",Qd=function(){var e,t,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};if("string"===typeof g||sd(g))e=new URL(Ed(g));else if(g instanceof URL)e=g;else if("string"===typeof g.url||sd(g.url))e=new URL(Ed(g.url)),n=g;else if(g.url instanceof URL)e=g.url,n=g;else{var r=((n=g||{}).protocol||Ud).replace(":",""),I=(n.host||zd).split(":")[0],a=n.port||Ld;e=new URL("".concat(r,"://").concat(I,":").concat(a))}if(n.apiPath?e.pathname=n.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),hd.isNode){var o=void 0;t=n.agent||new o({keepAlive:!0,maxSockets:6})}return lo(lo({},n),{},{host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:t})},Td=function(){var e=ue(Ce().mark((function e(t){var g,n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.headers.get("Content-Type")||"").startsWith("application/json")){e.next=9;break}return e.next=4,t.json();case 4:n=e.sent,Md(n),g=n.Message||n.message,e.next=12;break;case 9:return e.next=11,t.text();case 11:g=e.sent;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),Md("Failed to parse error response",e.t0),g=e.t0.message;case 18:throw r=new Nd.HTTPError(t),g&&(g.includes("deadline has elapsed")&&(r=new Nd.TimeoutError),g&&g.includes("context deadline exceeded")&&(r=new Nd.TimeoutError)),g&&g.includes("request timed out")&&(r=new Nd.TimeoutError),g&&(r.message=g),r;case 23:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),jd=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Pd=function(e){return e.replace(jd,(function(e){return"-"+e.toLowerCase()}))},Od=function(e){return"string"===typeof e?fd(e):e},_d=function(e){Ze(g,e);var t=ve(g);function g(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};de(this,g);var r=Qd(n);e=t.call(this,{timeout:Od(r.timeout||0)||void 0,headers:r.headers,base:"".concat(r.url),handleError:Td,transformSearchParams:function(e){var t,g=new URLSearchParams,n=_n(e);try{for(n.s();!(t=n.n()).done;){var r=Ae(t.value,2),I=r[0],a=r[1];"undefined"!==a&&"null"!==a&&"signal"!==I&&g.append(Pd(I),a),"timeout"!==I||isNaN(a)||g.append(Pd(I),a)}}catch(Yy){n.e(Yy)}finally{n.f()}return g},agent:r.agent}),delete e.get,delete e.put,delete e.delete,delete e.options;var I=e.fetch;return e.fetch=function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof t||t.startsWith("/")||(t="".concat(r.url,"/").concat(t)),I.call(pe(e),t,Dd(g,{method:"POST"}))},e}return be(g)}(Nd),qd=(Nd.HTTPError,function(e){return function(t){return e(new _d(t),t)}});function $d(e,t){if(null==e)return{};var g,n,r=function(e,t){if(null==e)return{};var g,n,r={},I=Object.keys(e);for(n=0;n<I.length;n++)g=I[n],t.indexOf(g)>=0||(r[g]=e[g]);return r}(e,t);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);for(n=0;n<I.length;n++)g=I[n],t.indexOf(g)>=0||Object.prototype.propertyIsEnumerable.call(e,g)&&(r[g]=e[g])}return r}function eh(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function th(e){if(null!=e){var t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){var g=e.getTime(),n=Math.floor(g/1e3);t={secs:n,nsecs:1e3*(g-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw ed(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}var gh=["arg","searchParams","hashAlg","mtime","mode"];function nh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.arg,g=e.searchParams,n=e.hashAlg,r=e.mtime,I=e.mode,a=$d(e,gh);g&&(a=lo(lo({},a),g)),n&&(a.hash=n),null!=r&&(r=th(r),a.mtime=r.secs,a.mtimeNsecs=r.nsecs),null!=I&&(a.mode=eh(I)),a.timeout&&!isNaN(a.timeout)&&(a.timeout="".concat(a.timeout,"ms")),void 0===t||null===t?t=[]:Array.isArray(t)||(t=[t]);var o=new URLSearchParams(a);return t.forEach((function(e){return o.append("arg",e)})),o}var rh=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("bitswap/wantlist",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,t.abrupt("return",(n.Keys||[]).map((function(e){return Jo.parse(e["/"])})));case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Ih=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.length>1&&void 0!==I[1]?I[1]:{},t.next=3,e.post("bitswap/wantlist",{signal:n.signal,searchParams:nh(lo(lo({},n),{},{peer:g.toString()})),headers:n.headers});case 3:return t.next=5,t.sent.json();case 5:return r=t.sent,t.abrupt("return",(r.Keys||[]).map((function(e){return Jo.parse(e["/"])})));case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),ah=function e(t,g,n){g=g||[];var r=n=n||0;for(;t>=oh;)g[n++]=255&t|128,t/=128;for(;-128&t;)g[n++]=255&t|128,t>>>=7;return g[n]=0|t,e.bytes=n-r+1,g},oh=Math.pow(2,31);var ih=function e(t,g){var n,r=0,I=0,a=g=g||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");n=t[a++],r+=I<28?(127&n)<<I:(127&n)*Math.pow(2,I),I+=7}while(n>=128);return e.bytes=a-g,r};var Ch=Math.pow(2,7),lh=Math.pow(2,14),uh=Math.pow(2,21),ch=Math.pow(2,28),sh=Math.pow(2,35),Ah=Math.pow(2,42),dh=Math.pow(2,49),hh=Math.pow(2,56),mh=Math.pow(2,63),bh={encode:ah,decode:ih,encodingLength:function(e){return e<Ch?1:e<lh?2:e<uh?3:e<ch?4:e<sh?5:e<Ah?6:e<dh?7:e<hh?8:e<mh?9:10}},ph=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,g=bh.decode(e,t);return[g,bh.decode.bytes]},fh=function(e,t){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return bh.encode(e,t,g),t},Zh=function(e){return bh.encodingLength(e)},yh=(new Uint8Array(0),function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Gh=function(e,t){var g=t.byteLength,n=Zh(e),r=n+Zh(g),I=new Uint8Array(r+g);return fh(e,I,0),fh(g,I,n),I.set(t,r),new vh(e,g,t,I)},Bh=function(e){var t=yh(e),g=Ae(ph(t),2),n=g[0],r=g[1],I=Ae(ph(t.subarray(r)),2),a=I[0],o=I[1],i=t.subarray(r+o);if(i.byteLength!==a)throw new Error("Incorrect length");return new vh(n,a,i,t)},vh=be((function e(t,g,n,r){de(this,e),this.code=t,this.size=g,this.digest=n,this.bytes=r}));var kh=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),n=0;n<g.length;n++)g[n]=255;for(var r=0;r<e.length;r++){var I=e.charAt(r),a=I.charCodeAt(0);if(255!==g[a])throw new TypeError(I+" is ambiguous");g[a]=r}var o=e.length,i=e.charAt(0),C=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,r=0;e[t]===i;)n++,t++;for(var I=(e.length-t)*C+1>>>0,a=new Uint8Array(I);e[t];){var l=g[e.charCodeAt(t)];if(255===l)return;for(var u=0,c=I-1;(0!==l||u<r)&&-1!==c;c--,u++)l+=o*a[c]>>>0,a[c]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");r=u,t++}if(" "!==e[t]){for(var s=I-r;s!==I&&0===a[s];)s++;for(var A=new Uint8Array(n+(I-s)),d=n;s!==I;)A[d++]=a[s++];return A}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var g=0,n=0,r=0,I=t.length;r!==I&&0===t[r];)r++,g++;for(var a=(I-r)*l+1>>>0,C=new Uint8Array(a);r!==I;){for(var u=t[r],c=0,s=a-1;(0!==u||c<n)&&-1!==s;s--,c++)u+=256*C[s]>>>0,C[s]=u%o>>>0,u=u/o>>>0;if(0!==u)throw new Error("Non-zero carry");n=c,r++}for(var A=a-n;A!==a&&0===C[A];)A++;for(var d=i.repeat(g);A<a;++A)d+=e.charAt(C[A]);return d},decodeUnsafe:u,decode:function(e){var g=u(e);if(g)return g;throw new Error("Non-".concat(t," character"))}}},Sh=kh,Wh=function(){function e(t,g,n){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n}return be(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Vh=function(){function e(t,g,n){if(de(this,e),this.name=t,this.prefix=g,void 0===g.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=g.codePointAt(0),this.baseDecode=n}return be(e,[{key:"decode",value:function(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Rh(this,e)}}]),e}(),wh=function(){function e(t){de(this,e),this.decoders=t}return be(e,[{key:"or",value:function(e){return Rh(this,e)}},{key:"decode",value:function(e){var t=e[0],g=this.decoders[t];if(g)return g.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Rh=function(e,t){return new wh(lo(lo({},e.decoders||io({},e.prefix,e)),t.decoders||io({},t.prefix,t)))},Xh=function(){function e(t,g,n,r){de(this,e),this.name=t,this.prefix=g,this.baseEncode=n,this.baseDecode=r,this.encoder=new Wh(t,g,n),this.decoder=new Vh(t,g,r)}return be(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Jh=function(e){var t=e.name,g=e.prefix,n=e.encode,r=e.decode;return new Xh(t,g,n,r)},Yh=function(e){var t=e.prefix,g=e.name,n=e.alphabet,r=Sh(n,g),I=r.encode,a=r.decode;return Jh({prefix:t,name:g,encode:I,decode:function(e){return yh(a(e))}})},Hh=function(e){var t=e.name,g=e.prefix,n=e.bitsPerChar,r=e.alphabet;return Jh({prefix:g,name:t,encode:function(e){return function(e,t,g){for(var n="="===t[t.length-1],r=(1<<g)-1,I="",a=0,o=0,i=0;i<e.length;++i)for(o=o<<8|e[i],a+=8;a>g;)I+=t[r&o>>(a-=g)];if(a&&(I+=t[r&o<<g-a]),n)for(;I.length*g&7;)I+="=";return I}(e,r,n)},decode:function(e){return function(e,t,g,n){for(var r={},I=0;I<t.length;++I)r[t[I]]=I;for(var a=e.length;"="===e[a-1];)--a;for(var o=new Uint8Array(a*g/8|0),i=0,C=0,l=0,u=0;u<a;++u){var c=r[e[u]];if(void 0===c)throw new SyntaxError("Non-".concat(n," character"));C=C<<g|c,(i+=g)>=8&&(i-=8,o[l++]=255&C>>i)}if(i>=g||255&C<<8-i)throw new SyntaxError("Unexpected end of data");return o}(e,r,n,t)}})},Nh=Yh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Fh=Yh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Kh=Hh({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xh=Hh({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Eh=Hh({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Mh=Hh({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Dh=Hh({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Uh=Hh({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zh=Hh({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Lh=Hh({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qh=Hh({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Th=new WeakMap,jh=function(e){var t=Th.get(e);if(null==t){var g=new Map;return Th.set(e,g),g}return t},Ph=function(e,t){function g(e,t,n,r){de(this,g),this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}return be(g,[{key:"asCID",get:function(){return this}},{key:"byteOffset",get:function(){return this.bytes.byteOffset}},{key:"byteLength",get:function(){return this.bytes.byteLength}},{key:"toV0",value:function(){switch(this.version){case 0:return this;case 1:var e=this.code,t=this.multihash;if(e!==$h)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==em)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return g.createV0(t);default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"toV1",value:function(){switch(this.version){case 0:var e=this.multihash,t=e.code,n=e.digest,r=Gh(t,n);return g.createV1(this.code,r);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}},{key:"equals",value:function(e){return g.equals(this,e)}},{key:"toString",value:function(e){return function(e,t){var g=e.bytes;return 0===e.version?_h(g,jh(e),t||Nh.encoder):qh(g,jh(e),t||Kh.encoder)}(this,e)}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:"link",value:function(){return this}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID(".concat(this.toString(),")")}}],[{key:"equals",value:function(e,t){var g=t;return g&&e.code===g.code&&e.version===g.version&&function(e,t){if(e===t)return!0;var g=t;return e.code===g.code&&e.size===g.size&&g.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var g=0;g<e.byteLength;g++)if(e[g]!==t[g])return!1;return!0}(e.bytes,g.bytes)}(e.multihash,g.multihash)}},{key:"asCID",value:function(e){if(null==e)return null;var t=e;if(t instanceof g)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){var n=t.version,r=t.code,I=t.multihash;return new g(n,r,I,t.bytes||tm(n,r,I.bytes))}if(!0===t[gm]){var a=t.version,o=t.multihash,i=t.code,C=Bh(o);return g.create(a,i,C)}return null}},{key:"create",value:function(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==$h)throw new Error("Version 0 CID must use dag-pb (code: ".concat($h,") block encoding"));return new g(e,t,n,n.bytes);case 1:return new g(e,t,n,tm(e,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(e){return g.create(0,$h,e)}},{key:"createV1",value:function(e,t){return g.create(1,e,t)}},{key:"decode",value:function(e){var t=Ae(g.decodeFirst(e),2),n=t[0];if(t[1].length)throw new Error("Incorrect length");return n}},{key:"decodeFirst",value:function(e){var t=g.inspectBytes(e),n=t.size-t.multihashSize,r=yh(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");var I=r.subarray(t.multihashSize-t.digestSize),a=new vh(t.multihashCode,t.digestSize,I,r);return[0===t.version?g.createV0(a):g.createV1(t.codec,a),e.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var t=0,g=function(){var g=Ae(ph(e.subarray(t)),2),n=g[0],r=g[1];return t+=r,n},n=g(),r=$h;if(18===n?(n=0,t=0):r=g(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));var I=t,a=g(),o=g(),i=t+o;return{version:n,codec:r,multihashCode:a,digestSize:o,multihashSize:i-I,size:i}}},{key:"parse",value:function(e,t){var n=Ae(Oh(e,t),2),r=n[0],I=n[1],a=g.decode(I);return jh(a).set(r,e),a}}]),g}(),Oh=function(e,t){switch(e[0]){case"Q":var g=t||Nh;return[Nh.prefix,g.decode("".concat(Nh.prefix).concat(e))];case Nh.prefix:var n=t||Nh;return[Nh.prefix,n.decode(e)];case Kh.prefix:var r=t||Kh;return[Kh.prefix,r.decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},_h=function(e,t,g){var n=g.prefix;if(n!==Nh.prefix)throw Error("Cannot string encode V0 in ".concat(g.name," encoding"));var r=t.get(n);if(null==r){var I=g.encode(e).slice(1);return t.set(n,I),I}return r},qh=function(e,t,g){var n=g.prefix,r=t.get(n);if(null==r){var I=g.encode(e);return t.set(n,I),I}return r},$h=112,em=18,tm=function(e,t,g){var n=Zh(e),r=n+Zh(t),I=new Uint8Array(r+g.byteLength);return fh(e,I,0),fh(t,I,n),I.set(g,r),I},gm=Symbol.for("@ipld/js-cid/CID"),nm=Jh({prefix:"\0",name:"identity",encode:function(e){return t=e,(new TextDecoder).decode(t);var t},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),rm=Hh({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Im=Hh({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),am=Yh({prefix:"9",name:"base10",alphabet:"0123456789"}),om=Hh({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),im=Hh({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Cm=Yh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lm=Yh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),um=Hh({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cm=Hh({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),sm=Hh({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Am=Hh({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),dm=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),hm=dm.reduce((function(e,t,g){return e[g]=t,e}),[]),mm=dm.reduce((function(e,t,g){return e[t.codePointAt(0)]=g,e}),[]);var bm=Jh({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((function(e,t){return e+=hm[t]}),"")},decode:function(e){var t,g=[],n=_n(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,I=mm[r.codePointAt(0)];if(void 0===I)throw new Error("Non-base256emoji character: ".concat(r));g.push(I)}}catch(Yy){n.e(Yy)}finally{n.f()}return new Uint8Array(g)}}),pm=function(e){var t=e.name,g=e.code,n=e.encode;return new fm(t,g,n)},fm=function(){function e(t,g,n){de(this,e),this.name=t,this.code=g,this.encode=n}return be(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var g=this.encode(e);return g instanceof Uint8Array?Gh(this.code,g):g.then((function(e){return Gh(t.code,e)}))}throw Error("Unknown type, must be binary type")}}]),e}(),Zm=function(e){return function(){var t=ue(Ce().mark((function t(g){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,g);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ym=pm({name:"sha2-256",code:18,encode:Zm("SHA-256")}),Gm=pm({name:"sha2-512",code:19,encode:Zm("SHA-512")}),Bm=yh,vm={code:0,name:"identity",encode:Bm,digest:function(e){return Gh(0,Bm(e))}},km="raw",Sm=85,Wm=function(e){return yh(e)},Vm=function(e){return yh(e)},wm=new TextEncoder,Rm=new TextDecoder,Xm="json",Jm=512,Ym=function(e){return wm.encode(JSON.stringify(e))},Hm=function(e){return JSON.parse(Rm.decode(e))},Nm=lo(lo(lo(lo(lo(lo(lo(lo(lo(lo({},j),P),O),_),q),T),$),Q),ee),te),Fm=(lo(lo({},ge),ne),Symbol.for("@libp2p/peer-id"));var Km=Symbol.for("nodejs.util.inspect.custom"),xm=Object.values(Nm).map((function(e){return e.decoder})).reduce((function(e,t){return e.or(t)}),Nm.identity.decoder),Em=36,Mm=37,Dm=function(e){function t(e){de(this,t),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}return be(t,[{key:Symbol.toStringTag,get:function(){return"PeerId(".concat(this.toString(),")")}},{key:Fm,get:function(){return!0}},{key:"toString",value:function(){return null==this.string&&(this.string=Nh.encode(this.multihash.bytes).slice(1)),this.string}},{key:"toCID",value:function(){return Ph.createV1(114,this.multihash)}},{key:"toBytes",value:function(){return this.multihash.bytes}},{key:"toJSON",value:function(){return this.toString()}},{key:"equals",value:function(e){var t;if(e instanceof Uint8Array)return td(this.multihash.bytes,e);if("string"===typeof e)return Qm(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return td(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},{key:Km,value:function(){return"PeerId(".concat(this.toString(),")")}}]),t}(),Um=function(e){Ze(g,e);var t=ve(g);function g(e){var n;return de(this,g),(n=t.call(this,lo(lo({},e),{},{type:"RSA"}))).type="RSA",n.publicKey=e.publicKey,n}return be(g)}(Dm),zm=function(e){Ze(g,e);var t=ve(g);function g(e){var n;return de(this,g),(n=t.call(this,lo(lo({},e),{},{type:"Ed25519"}))).type="Ed25519",n.publicKey=e.multihash.digest,n}return be(g)}(Dm),Lm=function(e){Ze(g,e);var t=ve(g);function g(e){var n;return de(this,g),(n=t.call(this,lo(lo({},e),{},{type:"secp256k1"}))).type="secp256k1",n.publicKey=e.multihash.digest,n}return be(g)}(Dm);function Qm(e,t){var g;if(t=null!==(g=t)&&void 0!==g?g:xm,"1"===e.charAt(0)||"Q"===e.charAt(0)){var n=Bh(Nh.decode("z".concat(e)));return e.startsWith("12D")?new zm({multihash:n}):e.startsWith("16U")?new Lm({multihash:n}):new Um({multihash:n})}return function(e){try{var t=Bh(e);if(t.code===vm.code){if(36===t.digest.length)return new zm({multihash:t});if(37===t.digest.length)return new Lm({multihash:t})}if(t.code===ym.code)return new Um({multihash:t})}catch(g){return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");var t=e.multihash;if(t.code===ym.code)return new Um({multihash:e.multihash});if(t.code===vm.code){if(t.digest.length===Em)return new zm({multihash:e.multihash});if(t.digest.length===Mm)return new Lm({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Ph.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(xm.decode(e))}var Tm=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("bitswap/stat",{searchParams:nh(g),signal:g.signal,headers:g.headers});case 3:return n=t.sent,t.t0=jm,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function jm(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((function(e){return Jo.parse(e["/"])})),peers:(e.Peers||[]).map((function(e){return Qm(e)})),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}var Pm=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.length>1&&void 0!==I[1]?I[1]:{},t.next=3,e.post("bitswap/unwant",{signal:n.signal,searchParams:nh(lo({arg:g.toString()},n)),headers:n.headers});case 3:return r=t.sent,t.abrupt("return",r.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Om(e){return{wantlist:rh(e),wantlistForPeer:Ih(e),unwant:Pm(e),stat:Tm(e)}}var _m=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.length>1&&void 0!==I[1]?I[1]:{},t.next=3,e.post("block/get",{signal:n.signal,searchParams:nh(lo({arg:g.toString()},n)),headers:n.headers});case 3:return r=t.sent,t.t0=Uint8Array,t.next=7,r.arrayBuffer();case 7:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function qm(e){var t,g,n,r=2;for("undefined"!=typeof Symbol&&(g=Symbol.asyncIterator,n=Symbol.iterator);r--;){if(g&&null!=(t=e[g]))return t.call(e);if(n&&null!=(t=e[n]))return new $m(t.call(e));g="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function $m(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return $m=function(e){this.s=e,this.n=e.next},$m.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var g=this.s.return;return void 0===g?Promise.resolve({value:e,done:!0}):t(g.apply(this.s,arguments))},throw:function(e){var g=this.s.return;return void 0===g?Promise.reject(e):t(g.apply(this.s,arguments))}},new $m(e)}var eb=__webpack_require__(5498),tb=__webpack_require__(6828),gb=__webpack_require__(6936);function nb(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function rb(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function Ib(e){return"object"===typeof e&&(e.path||e.content)}var ab=function(e){return e&&"function"===typeof e.getReader};function ob(e){return ib.apply(this,arguments)}function ib(){return(ib=ue(Ce().mark((function e(t){var g,n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nb(t)){e.next=2;break}return e.abrupt("return",new Blob([t]));case 2:if(!("string"===typeof t||t instanceof String)){e.next=4;break}return e.abrupt("return",new Blob([t.toString()]));case 4:if(!rb(t)){e.next=6;break}return e.abrupt("return",t);case 6:if(ab(t)&&(t=tb(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=28;break}return g=eb(t),e.next=11,g.peek();case 11:if(n=e.sent,r=n.value,!n.done){e.next=16;break}return e.abrupt("return",Cb(g));case 16:if(g.push(r),!Number.isInteger(r)){e.next=26;break}return e.t0=Blob,e.t1=Uint8Array,e.next=22,gb(g);case 22:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.t4=[e.t3],e.abrupt("return",new e.t0(e.t4));case 26:if(!(nb(r)||"string"===typeof r||r instanceof String)){e.next=28;break}return e.abrupt("return",Cb(g));case 28:throw ed(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cb(e){return lb.apply(this,arguments)}function lb(){return(lb=ue(Ce().mark((function e(t){var g,n,r,I,a,o,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=[],n=!1,r=!1,e.prev=3,a=qm(t);case 5:return e.next=7,a.next();case 7:if(!(n=!(o=e.sent).done)){e.next=13;break}i=o.value,g.push(i);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),r=!0,I=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==a.return){e.next=24;break}return e.next=24,a.return();case 24:if(e.prev=24,!r){e.next=27;break}throw I;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",new Blob(g));case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}function ub(e,t){this.v=e,this.k=t}function cb(e){var t,g;function n(t,g){try{var I=e[t](g),a=I.value,o=a instanceof ub;Promise.resolve(o?a.v:a).then((function(g){if(o){var i="return"===t?"return":"next";if(!a.k||g.done)return n(i,g);g=e[i](g).value}r(I.done?"return":"normal",g)}),(function(e){n("throw",e)}))}catch(Yy){r("throw",Yy)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):g=null}this._invoke=function(e,r){return new Promise((function(I,a){var o={key:e,arg:r,resolve:I,reject:a,next:null};g?g=g.next=o:(t=g=o,n(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function sb(e){return function(){return new cb(e.apply(this,arguments))}}function Ab(e){return new ub(e,0)}function db(e){var t={},g=!1;function n(t,n){return g=!0,n=new Promise((function(g){g(e[t](n))})),{done:!1,value:new ub(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return g?(g=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(g)throw g=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return g?(g=!1,e):n("return",e)}),t}cb.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},cb.prototype.next=function(e){return this._invoke("next",e)},cb.prototype.throw=function(e){return this._invoke("throw",e)},cb.prototype.return=function(e){return this._invoke("return",e)};var hb=__webpack_require__(1116),mb=__webpack_require__(1406),bb=mb.Reader,pb=mb.Writer,fb=mb.util,Zb=mb.roots["ipfs-unixfs"]||(mb.roots["ipfs-unixfs"]={});Zb.Data=function(){function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),g=0;g<t.length;++g)null!=e[t[g]]&&(this[t[g]]=e[t[g]])}return e.prototype.Type=0,e.prototype.Data=fb.newBuffer([]),e.prototype.filesize=fb.Long?fb.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=fb.emptyArray,e.prototype.hashType=fb.Long?fb.Long.fromBits(0,0,!0):0,e.prototype.fanout=fb.Long?fb.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=pb.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var g=0;g<e.blocksizes.length;++g)t.uint32(32).uint64(e.blocksizes[g]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&Zb.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof bb||(e=bb.create(e));for(var g=void 0===t?e.len:e.pos+t,n=new Zb.Data;e.pos<g;){var r=e.uint32();switch(r>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),2===(7&r))for(var I=e.uint32()+e.pos;e.pos<I;)n.blocksizes.push(e.uint64());else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=Zb.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&r)}}if(!n.hasOwnProperty("Type"))throw fb.ProtocolError("missing required 'Type'",{instance:n});return n},e.fromObject=function(e){if(e instanceof Zb.Data)return e;var t=new Zb.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"===typeof e.Data?fb.base64.decode(e.Data,t.Data=fb.newBuffer(fb.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(fb.Long?(t.filesize=fb.Long.fromValue(e.filesize)).unsigned=!0:"string"===typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"===typeof e.filesize?t.filesize=e.filesize:"object"===typeof e.filesize&&(t.filesize=new fb.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var g=0;g<e.blocksizes.length;++g)fb.Long?(t.blocksizes[g]=fb.Long.fromValue(e.blocksizes[g])).unsigned=!0:"string"===typeof e.blocksizes[g]?t.blocksizes[g]=parseInt(e.blocksizes[g],10):"number"===typeof e.blocksizes[g]?t.blocksizes[g]=e.blocksizes[g]:"object"===typeof e.blocksizes[g]&&(t.blocksizes[g]=new fb.LongBits(e.blocksizes[g].low>>>0,e.blocksizes[g].high>>>0).toNumber(!0))}if(null!=e.hashType&&(fb.Long?(t.hashType=fb.Long.fromValue(e.hashType)).unsigned=!0:"string"===typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"===typeof e.hashType?t.hashType=e.hashType:"object"===typeof e.hashType&&(t.hashType=new fb.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(fb.Long?(t.fanout=fb.Long.fromValue(e.fanout)).unsigned=!0:"string"===typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"===typeof e.fanout?t.fanout=e.fanout:"object"===typeof e.fanout&&(t.fanout=new fb.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!==typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=Zb.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var g={};if((t.arrays||t.defaults)&&(g.blocksizes=[]),t.defaults){if(g.Type=t.enums===String?"Raw":0,t.bytes===String?g.Data="":(g.Data=[],t.bytes!==Array&&(g.Data=fb.newBuffer(g.Data))),fb.Long){var n=new fb.Long(0,0,!0);g.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else g.filesize=t.longs===String?"0":0;if(fb.Long){n=new fb.Long(0,0,!0);g.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else g.hashType=t.longs===String?"0":0;if(fb.Long){n=new fb.Long(0,0,!0);g.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else g.fanout=t.longs===String?"0":0;g.mode=0,g.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(g.Type=t.enums===String?Zb.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(g.Data=t.bytes===String?fb.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"===typeof e.filesize?g.filesize=t.longs===String?String(e.filesize):e.filesize:g.filesize=t.longs===String?fb.Long.prototype.toString.call(e.filesize):t.longs===Number?new fb.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){g.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r)"number"===typeof e.blocksizes[r]?g.blocksizes[r]=t.longs===String?String(e.blocksizes[r]):e.blocksizes[r]:g.blocksizes[r]=t.longs===String?fb.Long.prototype.toString.call(e.blocksizes[r]):t.longs===Number?new fb.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(!0):e.blocksizes[r]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"===typeof e.hashType?g.hashType=t.longs===String?String(e.hashType):e.hashType:g.hashType=t.longs===String?fb.Long.prototype.toString.call(e.hashType):t.longs===Number?new fb.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"===typeof e.fanout?g.fanout=t.longs===String?String(e.fanout):e.fanout:g.fanout=t.longs===String?fb.Long.prototype.toString.call(e.fanout):t.longs===Number?new fb.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(g.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(g.mtime=Zb.UnixTime.toObject(e.mtime,t)),g},e.prototype.toJSON=function(){return this.constructor.toObject(this,mb.util.toJSONOptions)},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e}(),Zb.UnixTime=function(){function e(e){if(e)for(var t=Object.keys(e),g=0;g<t.length;++g)null!=e[t[g]]&&(this[t[g]]=e[t[g]])}return e.prototype.Seconds=fb.Long?fb.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=pb.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof bb||(e=bb.create(e));for(var g=void 0===t?e.len:e.pos+t,n=new Zb.UnixTime;e.pos<g;){var r=e.uint32();switch(r>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&r)}}if(!n.hasOwnProperty("Seconds"))throw fb.ProtocolError("missing required 'Seconds'",{instance:n});return n},e.fromObject=function(e){if(e instanceof Zb.UnixTime)return e;var t=new Zb.UnixTime;return null!=e.Seconds&&(fb.Long?(t.Seconds=fb.Long.fromValue(e.Seconds)).unsigned=!1:"string"===typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"===typeof e.Seconds?t.Seconds=e.Seconds:"object"===typeof e.Seconds&&(t.Seconds=new fb.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var g={};if(t.defaults){if(fb.Long){var n=new fb.Long(0,0,!1);g.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else g.Seconds=t.longs===String?"0":0;g.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"===typeof e.Seconds?g.Seconds=t.longs===String?String(e.Seconds):e.Seconds:g.Seconds=t.longs===String?fb.Long.prototype.toString.call(e.Seconds):t.longs===Number?new fb.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(g.FractionalNanoseconds=e.FractionalNanoseconds),g},e.prototype.toJSON=function(){return this.constructor.toObject(this,mb.util.toJSONOptions)},e}(),Zb.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),g=0;g<t.length;++g)null!=e[t[g]]&&(this[t[g]]=e[t[g]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=pb.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof bb||(e=bb.create(e));for(var g=void 0===t?e.len:e.pos+t,n=new Zb.Metadata;e.pos<g;){var r=e.uint32();if(r>>>3===1)n.MimeType=e.string();else e.skipType(7&r)}return n},e.fromObject=function(e){if(e instanceof Zb.Metadata)return e;var t=new Zb.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var g={};return t.defaults&&(g.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(g.MimeType=e.MimeType),g},e.prototype.toJSON=function(){return this.constructor.toObject(this,mb.util.toJSONOptions)},e}(),parseInt("0644",8),parseInt("0755",8);function yb(e){if(null!=e)return"number"===typeof e?4095&e:"0"===(e=e.toString()).substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10)}function Gb(e){if(null!=e){var t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){var g=e.getTime(),n=Math.floor(g/1e3);t={secs:n,nsecs:1e3*(g-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw ed(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}function Bb(){return Bb=sb(Ce().mark((function e(t,g){var n,r,I;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"===typeof t||t instanceof String||nb(t)||rb(t)||t._readableState)){e.next=2;break}throw ed(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 2:if(ab(t)&&(t=tb(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=26;break}return n=eb(t),e.next=7,Ab(n.peek());case 7:if(r=e.sent,I=r.value,!r.done){e.next=13;break}return e.delegateYield(db(qm([])),"t0",12);case 12:case 18:case 22:case 25:return e.abrupt("return");case 13:if(n.push(I),!Number.isInteger(I)){e.next=16;break}throw ed(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 16:if(!I._readableState){e.next=19;break}return e.delegateYield(db(qm(hb(n,(function(e){return vb({content:e},g)})))),"t1",18);case 19:if(!nb(I)){e.next=23;break}return e.next=22,vb({content:n},g);case 23:if(!(Ib(I)||I[Symbol.iterator]||I[Symbol.asyncIterator]||ab(I)||rb(I))){e.next=26;break}return e.delegateYield(db(qm(hb(n,(function(e){return vb(e,g)})))),"t2",25);case 26:if(!Ib(t)){e.next=28;break}throw ed(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");case 28:throw ed(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 29:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function vb(e,t){return kb.apply(this,arguments)}function kb(){return kb=ue(Ce().mark((function e(t,g){var n,r,I,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,r=t.mode,I=t.mtime,a=t.content,o={path:n||"",mode:yb(r),mtime:Gb(I)},!a){e.next=8;break}return e.next=5,g(a);case 5:o.content=e.sent,e.next=12;break;case 8:if(n){e.next=12;break}return e.next=11,g(t);case 11:o.content=e.sent;case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),kb.apply(this,arguments)}function Sb(e){return function(e,t){return Bb.apply(this,arguments)}(e,ob,!0)}function Wb(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function Vb(e,t){return wb.apply(this,arguments)}function wb(){return wb=ue(Ce().mark((function e(t,g){var n,r,I,a,o,i,C,l,u,c,s,A,d,h,m,b,p,f,Z,y,G,B,v=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=v.length>2&&void 0!==v[2]?v[2]:{},r=[],I=new FormData,a=0,o=0,i=!1,C=!1,e.prev=7,u=qm(Sb(t));case 9:return e.next=11,u.next();case 11:if(!(i=!(c=e.sent).done)){e.next=37;break}if(s=c.value,A=s.content,d=s.path,h=s.mode,m=s.mtime,b="",p=A?"file":"dir",a>0&&(b="-".concat(a)),f=p+b,Z=[],null!==h&&void 0!==h&&Z.push("mode=".concat(Wb(h))),null!=m&&(y=m.secs,G=m.nsecs,Z.push("mtime=".concat(y)),null!=G&&Z.push("mtime-nsecs=".concat(G))),Z.length&&(f="".concat(f,"?").concat(Z.join("&"))),!A){e.next=28;break}I.set(f,A,null!=d?encodeURIComponent(d):void 0),B=o+A.size,r.push({name:d,start:o,end:B}),o=B,e.next=33;break;case 28:if(null==d){e.next=32;break}I.set(f,new File([""],encodeURIComponent(d),{type:"application/x-directory"})),e.next=33;break;case 32:throw new Error("path or content or both must be set");case 33:a++;case 34:i=!1,e.next=9;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(7),C=!0,l=e.t0;case 43:if(e.prev=43,e.prev=44,!i||null==u.return){e.next=48;break}return e.next=48,u.return();case 48:if(e.prev=48,!C){e.next=51;break}throw l;case 51:return e.finish(48);case 52:return e.finish(43);case 53:return e.abrupt("return",{total:o,parts:r,headers:n,body:I});case 54:case"end":return e.stop()}}),e,null,[[7,39,43,53],[44,,48,52]])}))),wb.apply(this,arguments)}var Rb=__webpack_require__(3162);function Xb(e){return e.filter(Boolean)}function Jb(){for(var e=arguments.length,t=new Array(e),g=0;g<e;g++)t[g]=arguments[g];return(0,Rb.anySignal)(Xb(t))}var Yb=qd((function(e){function t(e){return g.apply(this,arguments)}function g(){return g=ue(Ce().mark((function g(n){var r,I,a,o,i,C=arguments;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return r=C.length>1&&void 0!==C[1]?C[1]:{},I=new AbortController,a=Jb(I.signal,r.signal),g.prev=3,g.t0=e,g.t1=lo,g.t2={signal:a,searchParams:nh(r)},g.next=9,Vb([n],I,r.headers);case 9:return g.t3=g.sent,g.t4=(0,g.t1)(g.t2,g.t3),g.next=13,g.t0.post.call(g.t0,"block/put",g.t4);case 13:return i=g.sent,g.next=16,i.json();case 16:o=g.sent,g.next=28;break;case 19:if(g.prev=19,g.t5=g.catch(3),"dag-pb"!==r.format){g.next=25;break}return g.abrupt("return",t(n,lo(lo({},r),{},{format:"protobuf"})));case 25:if("dag-cbor"!==r.format){g.next=27;break}return g.abrupt("return",t(n,lo(lo({},r),{},{format:"cbor"})));case 27:throw g.t5;case 28:return g.abrupt("return",Jo.parse(o.Key));case 29:case"end":return g.stop()}}),g,null,[[3,19]])}))),g.apply(this,arguments)}return t})),Hb=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Array.isArray(t)||(t=[t]),n.next=3,Ab(e.post("block/rm",{signal:g.signal,searchParams:nh(lo({arg:t.map((function(e){return e.toString()})),"stream-channels":!0},g)),headers:g.headers}));case 3:r=n.sent,I=!1,a=!1,n.prev=6,i=qm(r.ndjson());case 8:return n.next=10,Ab(i.next());case 10:if(!(I=!(C=n.sent).done)){n.next=17;break}return l=C.value,n.next=14,Nb(l);case 14:I=!1,n.next=8;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(6),a=!0,o=n.t0;case 23:if(n.prev=23,n.prev=24,!I||null==i.return){n.next=28;break}return n.next=28,Ab(i.return());case 28:if(n.prev=28,!a){n.next=31;break}throw o;case 31:return n.finish(28);case 32:return n.finish(23);case 33:case"end":return n.stop()}}),n,null,[[6,19,23,33],[24,,28,32]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Nb(e){var t={cid:Jo.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}var Fb=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("block/stat",{signal:n.signal,searchParams:nh(lo({arg:g.toString()},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",{cid:Jo.parse(I.Key),size:I.Size});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Kb(e){return{get:_m(e),put:Yb(e),rm:Hb(e),stat:Fb(e)}}var xb=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("bootstrap/add",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,a=I.Peers,t.abrupt("return",{Peers:a.map((function(e){return dd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Eb=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bootstrap/rm",{signal:g.signal,searchParams:nh(lo(lo({},g),{},{all:!0})),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,I=r.Peers,t.abrupt("return",{Peers:I.map((function(e){return dd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Mb=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bootstrap/list",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,I=r.Peers,t.abrupt("return",{Peers:I.map((function(e){return dd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Db=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("bootstrap/add",{signal:g.signal,searchParams:nh(lo(lo({},g),{},{default:!0})),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,I=r.Peers,t.abrupt("return",{Peers:I.map((function(e){return dd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Ub=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("bootstrap/rm",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,a=I.Peers,t.abrupt("return",{Peers:a.map((function(e){return dd(e)}))});case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function zb(e){return{add:xb(e),clear:Eb(e),list:Mb(e),reset:Db(e),rm:Ub(e)}}var Lb=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("config/profile/apply",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",{original:I.OldCfg,updated:I.NewCfg});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Qb(e){if(null==e)return e;var t=/^[A-Z]+$/;return Object.keys(e).reduce((function(g,n){return t.test(n)?g[n.toLowerCase()]=e[n]:t.test(n[0])?g[n[0].toLowerCase()+n.slice(1)]=e[n]:g[n]=e[n],g}),{})}var Tb=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=I.length>0&&void 0!==I[0]?I[0]:{},t.next=3,e.post("config/profile/list",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",r.map((function(e){return Qb(e)})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function jb(e){return{apply:Lb(e),list:Tb(e)}}var Pb=qd((function(e){var t=function(){var t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},g){t.next=3;break}throw new Error("key argument is required");case 3:return t.next=5,e.post("config",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 5:return r=t.sent,t.next=8,r.json();case 8:return I=t.sent,t.abrupt("return",I.Value);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),Ob=qd((function(e){var t=function(){var t=ue(Ce().mark((function t(){var g,n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=I.length>0&&void 0!==I[0]?I[0]:{},t.next=3,e.post("config/show",{signal:g.signal,searchParams:nh(lo({},g)),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t}));function _b(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function qb(e,t,g,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:g},decoder:{decode:n}}}var $b=qb("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),ep=qb("ascii","a",(function(e){for(var t="a",g=0;g<e.length;g++)t+=String.fromCharCode(e[g]);return t}),(function(e){for(var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?_b(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length),g=0;g<e.length;g++)t[g]=e.charCodeAt(g);return t})),tp=lo({utf8:$b,"utf-8":$b,hex:su.base16,latin1:ep,ascii:ep,binary:ep},su);function gp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",g=tp[t];if(!g)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?g.decoder.decode("".concat(g.prefix).concat(e)):_b(globalThis.Buffer.from(e,"utf-8"))}var np=qd((function(e){var t=function(){var t=ue(Ce().mark((function t(g){var n,r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r=new AbortController,I=Jb(r.signal,n.signal),t.t0=e,t.t1=lo,t.t2={signal:I,searchParams:nh(n)},t.next=8,Vb([gp(JSON.stringify(g))],r,n.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"config/replace",t.t4);case 12:return a=t.sent,t.next=15,a.text();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),rp=qd((function(e){var t=function(){var t=ue(Ce().mark((function t(g,n){var r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:{},"string"===typeof g){t.next=3;break}throw new Error("Invalid key type");case 3:return I=lo(lo({},r),Ip(g,n)),t.next=6,e.post("config",{signal:r.signal,searchParams:nh(I),headers:r.headers});case 6:return a=t.sent,t.next=9,a.text();case 9:case"end":return t.stop()}}),t)})));return function(e,g){return t.apply(this,arguments)}}();return t})),Ip=function(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function ap(e){return{getAll:Ob(e),get:Pb(e),set:rp(e),replace:np(e),profiles:jb(e)}}var op=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("dag/export",{signal:g.signal,searchParams:nh({arg:t.toString()}),headers:g.headers}));case 2:return r=n.sent,n.delegateYield(db(qm(r.iterator())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function ip(e,t,g,n,r){return Cp.apply(this,arguments)}function Cp(){return Cp=sb(Ce().mark((function e(t,g,n,r,I){var a,o,i,C,l,u;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=ue(Ce().mark((function e(t){var g,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCodec(t.code);case 2:return g=e.sent,e.next=5,r(t,I);case 5:return a=e.sent,e.abrupt("return",g.decode(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=g.split("/").filter(Boolean),e.next=4,Ab(a(t));case 4:i=e.sent,C=t;case 6:if(!o.length){e.next=25;break}if(l=o.shift()){e.next=10;break}throw ed(new Error('Could not resolve path "'.concat(g,'"')),"ERR_INVALID_PATH");case 10:if(!Object.prototype.hasOwnProperty.call(i,l)){e.next=16;break}return i=i[l],e.next=14,{value:i,remainderPath:o.join("/")};case 14:e.next=17;break;case 16:throw ed(new Error('no link named "'.concat(l,'" under ').concat(C)),"ERR_NO_LINK");case 17:if(!(u=Jo.asCID(i))){e.next=23;break}return C=u,e.next=22,Ab(a(i));case 22:i=e.sent;case 23:e.next=6;break;case 25:return e.next=27,{value:i,remainderPath:""};case 27:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}var lp=__webpack_require__(6735),up=__webpack_require__(5068),cp=function(e,t){var g=qd((function(t,g){var n=_m(g),r=function(){var t=ue(Ce().mark((function t(g){var r,I,a,o,i,C,l=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=l.length>1&&void 0!==l[1]?l[1]:{}).path){t.next=16;break}if(!r.localResolve){t.next=8;break}return t.next=5,lp(ip(g,r.path,e,n,r));case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,up(ip(g,r.path,e,n,r));case 10:t.t0=t.sent;case 11:if(I=t.t0,a=I){t.next=15;break}throw ed(new Error("Not found"),"ERR_NOT_FOUND");case 15:return t.abrupt("return",a);case 16:return t.next=18,e.getCodec(g.code);case 18:return o=t.sent,t.next=21,n(g,r);case 21:return i=t.sent,C=o.decode(i),t.abrupt("return",{value:C,remainderPath:""});case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r}));return g(t)},sp=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l,u,c,s,A,d,h,m;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new AbortController,I=Jb(r.signal,g.signal),n.next=4,Ab(Vb(t,r,g.headers));case 4:return a=n.sent,o=a.headers,i=a.body,n.next=9,Ab(e.post("dag/import",{signal:I,headers:o,body:i,searchParams:nh({"pin-roots":g.pinRoots})}));case 9:C=n.sent,l=!1,u=!1,n.prev=12,s=qm(C.ndjson());case 14:return n.next=16,Ab(s.next());case 16:if(!(l=!(A=n.sent).done)){n.next=25;break}if(void 0===(d=A.value.Root)){n.next=22;break}return h=d.Cid["/"],m=d.PinErrorMsg,n.next=22,{root:{cid:Jo.parse(h),pinErrorMsg:m}};case 22:l=!1,n.next=14;break;case 25:n.next=31;break;case 27:n.prev=27,n.t0=n.catch(12),u=!0,c=n.t0;case 31:if(n.prev=31,n.prev=32,!l||null==s.return){n.next=36;break}return n.next=36,Ab(s.return());case 36:if(n.prev=36,!u){n.next=39;break}throw c;case 39:return n.finish(36);case 40:return n.finish(31);case 41:case"end":return n.stop()}}),n,null,[[12,27,31,41],[32,,36,40]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Ap=function(e,t){var g=qd((function(t){var g=function(){var g=ue(Ce().mark((function g(n){var r,I,a,o,i,C,l,u,c=arguments;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},!(I=lo({storeCodec:"dag-cbor",hashAlg:"sha2-256"},r)).inputCodec){g.next=8;break}if(n instanceof Uint8Array){g.next=5;break}throw new Error("Can only inputCodec on raw bytes that can be decoded");case 5:a=n,g.next=13;break;case 8:return g.next=10,e.getCodec(I.storeCodec);case 10:o=g.sent,a=o.encode(n),I.inputCodec=I.storeCodec;case 13:return i=new AbortController,C=Jb(i.signal,I.signal),g.t0=t,g.t1=lo,g.t2={timeout:I.timeout,signal:C,searchParams:nh(I)},g.next=20,Vb([a],i,I.headers);case 20:return g.t3=g.sent,g.t4=(0,g.t1)(g.t2,g.t3),g.next=24,g.t0.post.call(g.t0,"dag/put",g.t4);case 24:return l=g.sent,g.next=27,l.json();case 27:return u=g.sent,g.abrupt("return",Jo.parse(u.Cid["/"]));case 29:case"end":return g.stop()}}),g)})));return function(e){return g.apply(this,arguments)}}();return g}));return g(t)},dp=qd((function(e){var t=function(){var t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("dag/resolve",{signal:n.signal,searchParams:nh(lo({arg:"".concat(g).concat(n.path?"/".concat(n.path).replace(/\/[/]+/g,"/"):"")},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",{cid:Jo.parse(I.Cid["/"]),remainderPath:I.RemPath});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t}));function hp(e,t){return{export:op(t),get:cp(e,t),import:sp(t),put:Ap(e,t),resolve:dp(t)}}var mp=function(e){if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:Qm(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((function(e){var t=e.ID,g=e.Addrs;return{id:Qm(t),multiaddrs:g.map((function(e){return dd(e)})),protocols:[]}})),providers:(e.Responses||[]).map((function(e){var t=e.ID,g=e.Addrs;return{id:Qm(t),multiaddrs:g.map((function(e){return dd(e)})),protocols:[]}}))};if(2===e.Type){var t,g={id:null!==(t=e.ID)&&void 0!==t?t:Qm(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(g={id:Qm(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((function(e){return dd(e)})),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:g}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((function(e){var t=e.ID,g=e.Addrs;return{id:Qm(t),multiaddrs:g.map((function(e){return dd(e)})),protocols:[]}}))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:gp(e.Extra,"base64pad")};if(6===e.Type){var n=e.Responses.map((function(e){return Qm(e.ID)}));if(!n.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:n[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:Qm(e.ID)};throw new Error("Unknown DHT event type")},bp=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("dht/findpeer",{signal:g.signal,searchParams:nh(lo({arg:t},g)),headers:g.headers}));case 2:r=n.sent,I=!1,a=!1,n.prev=5,i=qm(r.ndjson());case 7:return n.next=9,Ab(i.next());case 9:if(!(I=!(C=n.sent).done)){n.next=16;break}return l=C.value,n.next=13,mp(l);case 13:I=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),a=!0,o=n.t0;case 22:if(n.prev=22,n.prev=23,!I||null==i.return){n.next=27;break}return n.next=27,Ab(i.return());case 27:if(n.prev=27,!a){n.next=30;break}throw o;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),pp=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("dht/findprovs",{signal:g.signal,searchParams:nh(lo({arg:t.toString()},g)),headers:g.headers}));case 2:r=n.sent,I=!1,a=!1,n.prev=5,i=qm(r.ndjson());case 7:return n.next=9,Ab(i.next());case 9:if(!(I=!(C=n.sent).done)){n.next=16;break}return l=C.value,n.next=13,mp(l);case 13:I=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),a=!0,o=n.t0;case 22:if(n.prev=22,n.prev=23,!I||null==i.return){n.next=27;break}return n.next=27,Ab(i.return());case 27:if(n.prev=27,!a){n.next=30;break}throw o;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function fp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",g=tp[t];if(!g)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?g.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Zp=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("dht/get",{signal:g.signal,searchParams:nh(lo({arg:t instanceof Uint8Array?fp(t):t.toString()},g)),headers:g.headers}));case 2:r=n.sent,I=!1,a=!1,n.prev=5,i=qm(r.ndjson());case 7:return n.next=9,Ab(i.next());case 9:if(!(I=!(C=n.sent).done)){n.next=16;break}return l=C.value,n.next=13,mp(l);case 13:I=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),a=!0,o=n.t0;case 22:if(n.prev=22,n.prev=23,!I||null==i.return){n.next=27;break}return n.next=27,Ab(i.return());case 27:if(n.prev=27,!a){n.next=30;break}throw o;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),yp=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return Ce().mark((function n(){var r,I,a,o,i,C,l,u;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.isArray(t)?t:[t],n.next=3,Ab(e.post("dht/provide",{signal:g.signal,searchParams:nh(lo({arg:r.map((function(e){return e.toString()}))},g)),headers:g.headers}));case 3:I=n.sent,a=!1,o=!1,n.prev=6,C=qm(I.ndjson());case 8:return n.next=10,Ab(C.next());case 10:if(!(a=!(l=n.sent).done)){n.next=17;break}return u=l.value,n.next=14,mp(u);case 14:a=!1,n.next=8;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(6),o=!0,i=n.t0;case 23:if(n.prev=23,n.prev=24,!a||null==C.return){n.next=28;break}return n.next=28,Ab(C.return());case 28:if(n.prev=28,!o){n.next=31;break}throw i;case 31:return n.finish(28);case 32:return n.finish(23);case 33:case"end":return n.stop()}}),n,null,[[6,19,23,33],[24,,28,32]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Gp=qd((function(e){function t(){return t=sb((function(t,g){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ce().mark((function r(){var I,a,o,i,C,l,u,c,s;return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return I=new AbortController,a=Jb(I.signal,n.signal),r.t0=Ab,r.t1=e,r.t2=lo,r.t3={signal:a,searchParams:nh(lo({arg:t instanceof Uint8Array?fp(t):t.toString()},n))},r.next=8,Ab(Vb([g],I,n.headers));case 8:return r.t4=r.sent,r.t5=(0,r.t2)(r.t3,r.t4),r.t6=r.t1.post.call(r.t1,"dht/put",r.t5),r.next=13,(0,r.t0)(r.t6);case 13:o=r.sent,i=!1,C=!1,r.prev=16,u=qm(o.ndjson());case 18:return r.next=20,Ab(u.next());case 20:if(!(i=!(c=r.sent).done)){r.next=27;break}return s=c.value,r.next=24,mp(s);case 24:i=!1,r.next=18;break;case 27:r.next=33;break;case 29:r.prev=29,r.t7=r.catch(16),C=!0,l=r.t7;case 33:if(r.prev=33,r.prev=34,!i||null==u.return){r.next=38;break}return r.next=38,Ab(u.return());case 38:if(r.prev=38,!C){r.next=41;break}throw l;case 41:return r.finish(38);case 42:return r.finish(33);case 43:case"end":return r.stop()}}),r,null,[[16,29,33,43],[34,,38,42]])}))()})),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),Bp=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("dht/query",{signal:g.signal,searchParams:nh(lo({arg:t.toString()},g)),headers:g.headers}));case 2:r=n.sent,I=!1,a=!1,n.prev=5,i=qm(r.ndjson());case 7:return n.next=9,Ab(i.next());case 9:if(!(I=!(C=n.sent).done)){n.next=16;break}return l=C.value,n.next=13,mp(l);case 13:I=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),a=!0,o=n.t0;case 22:if(n.prev=22,n.prev=23,!I||null==i.return){n.next=27;break}return n.next=27,Ab(i.return());case 27:if(n.prev=27,!a){n.next=30;break}throw o;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function vp(e){return{findPeer:bp(e),findProvs:pp(e),get:Zp(e),provide:yp(e),put:Gp(e),query:Bp(e)}}var kp=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("diag/cmds",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Sp=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("diag/net",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Wp=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("diag/sys",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function Vp(e){return{cmds:kp(e),net:Sp(e),sys:Wp(e)}}var wp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},t.next=3,e.post("files/chmod",{signal:r.signal,searchParams:nh(lo({arg:g,mode:n},r)),headers:r.headers});case 3:return I=t.sent,t.next=6,I.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),Rp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},I=Array.isArray(g)?g:[g],t.next=4,e.post("files/cp",{signal:r.signal,searchParams:nh(lo({arg:I.concat(n).map((function(e){return Jo.asCID(e)?"/ipfs/".concat(e):e}))},r)),headers:r.headers});case 4:return a=t.sent,t.next=7,a.text();case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),Xp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},g&&"string"===typeof g){t.next=3;break}throw new Error("ipfs.files.flush requires a path");case 3:return t.next=5,e.post("files/flush",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 5:return r=t.sent,t.next=8,r.json();case 8:return I=t.sent,t.abrupt("return",Jo.parse(I.Cid));case 10:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Jp(e){var t=Qb(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}var Yp=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l,u,c,s;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}throw new Error("ipfs.files.ls requires a path");case 2:return n.next=4,Ab(e.post("files/ls",{signal:g.signal,searchParams:nh(lo(lo({arg:Jo.asCID(t)?"/ipfs/".concat(t):t,long:!0},g),{},{stream:!0})),headers:g.headers}));case 4:r=n.sent,I=!1,a=!1,n.prev=7,i=qm(r.ndjson());case 9:return n.next=11,Ab(i.next());case 11:if(!(I=!(C=n.sent).done)){n.next=38;break}if(!("Entries"in(l=C.value))){n.next=33;break}u=_n(l.Entries||[]),n.prev=15,u.s();case 17:if((c=u.n()).done){n.next=23;break}return s=c.value,n.next=21,Hp(Jp(s));case 21:n.next=17;break;case 23:n.next=28;break;case 25:n.prev=25,n.t0=n.catch(15),u.e(n.t0);case 28:return n.prev=28,u.f(),n.finish(28);case 31:n.next=35;break;case 33:return n.next=35,Hp(Jp(l));case 35:I=!1,n.next=9;break;case 38:n.next=44;break;case 40:n.prev=40,n.t1=n.catch(7),a=!0,o=n.t1;case 44:if(n.prev=44,n.prev=45,!I||null==i.return){n.next=49;break}return n.next=49,Ab(i.return());case 49:if(n.prev=49,!a){n.next=52;break}throw o;case 52:return n.finish(49);case 53:return n.finish(44);case 54:case"end":return n.stop()}}),n,null,[[7,40,44,54],[15,25,28,31],[45,,49,53]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Hp(e){return e.hash&&(e.cid=Jo.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}var Np=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.length>1&&void 0!==I[1]?I[1]:{},t.next=3,e.post("files/mkdir",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Fp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},Array.isArray(g)||(g=[g]),t.next=4,e.post("files/mv",{signal:r.signal,searchParams:nh(lo({arg:g.concat(n)},r)),headers:r.headers});case 4:return I=t.sent,t.next=7,I.text();case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),Kp=__webpack_require__(5601),xp=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("files/read",{signal:g.signal,searchParams:nh(lo({arg:t,count:g.length},g)),headers:g.headers}));case 2:return r=n.sent,n.delegateYield(db(qm(Kp(r.body))),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Ep=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("files/rm",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.text();case 6:if(""===(I=t.sent)){t.next=11;break}throw(a=new Nd.HTTPError(r)).message=I,a;case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Mp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("files/stat",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return(I=t.sent).WithLocality=I.WithLocality||!1,t.abrupt("return",Dp(Jp(I)));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Dp(e){return e.cid=Jo.parse(e.hash),delete e.hash,e}var Up=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.length>1&&void 0!==I[1]?I[1]:{},t.next=3,e.post("files/touch",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),zp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a,o,i=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},I=new AbortController,a=Jb(I.signal,r.signal),t.t0=e,t.t1=lo,t.t2={signal:a,searchParams:nh(lo({arg:g,streamChannels:!0,count:r.length},r))},t.next=8,Vb([{content:n,path:"arg",mode:eh(r.mode),mtime:th(r.mtime)}],I,r.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"files/write",t.t4);case 12:return o=t.sent,t.next=15,o.text();case 15:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}}));function Lp(e){return{chmod:wp(e),cp:Rp(e),flush:Xp(e),ls:Yp(e),mkdir:Np(e),mv:Fp(e),read:xp(e),rm:Ep(e),stat:Mp(e),touch:Up(e),write:zp(e)}}var Qp=qd((function(e){var t=function(){var e=ue(Ce().mark((function e(t,g){var n=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.length>2&&void 0!==n[2]?n[2]:{},ed(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(t,g){return e.apply(this,arguments)}}();return t})),Tp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{type:"Ed25519"},t.next=3,e.post("key/gen",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",Qb(I));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),jp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n,r){var I,a,o,i=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I=i.length>3&&void 0!==i[3]?i[3]:{},t.next=3,e.post("key/import",{signal:I.signal,searchParams:nh(lo({arg:g,pem:n,password:r},I)),headers:I.headers});case 3:return a=t.sent,t.next=6,a.json();case 6:return o=t.sent,t.abrupt("return",Qb(o));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g,n){return t.apply(this,arguments)}})),Pp=qd((function(e){var t=function(){var e=ue(Ce().mark((function e(t){var g=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw g.length>1&&void 0!==g[1]?g[1]:{},ed(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t})),Op=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=I.length>0&&void 0!==I[0]?I[0]:{},t.next=3,e.post("key/list",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",(r.Keys||[]).map((function(e){return Qb(e)})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),_p=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},t.next=3,e.post("key/rename",{signal:r.signal,searchParams:nh(lo({arg:[g,n]},r)),headers:r.headers});case 3:return I=t.sent,t.t0=Qb,t.next=7,I.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),qp=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("key/rm",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",Qb(I.Keys[0]));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function $p(e){return{export:Qp(e),gen:Tp(e),import:jp(e),info:Pp(e),list:Op(e),rename:_p(e),rm:qp(e)}}var ef=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},t.next=3,e.post("log/level",{signal:r.signal,searchParams:nh(lo({arg:[g,n]},r)),headers:r.headers});case 3:return I=t.sent,t.t0=Qb,t.next=7,I.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),tf=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=I.length>0&&void 0!==I[0]?I[0]:{},t.next=3,e.post("log/ls",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",r.Strings);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),gf=qd((function(e){function t(){return t=sb((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce().mark((function g(){var n;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Ab(e.post("log/tail",{signal:t.signal,searchParams:nh(t),headers:t.headers}));case 2:return n=g.sent,g.delegateYield(db(qm(n.ndjson())),"t0",4);case 4:case"end":return g.stop()}}),g)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function nf(e){return{level:ef(e),ls:tf(e),tail:gf(e)}}var rf=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.length>1&&void 0!==I[1]?I[1]:{},t.next=3,e.post("name/publish",{signal:n.signal,searchParams:nh(lo({arg:"".concat(g)},n)),headers:n.headers});case 3:return r=t.sent,t.t0=Qb,t.next=7,r.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),If=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("name/resolve",{signal:g.signal,searchParams:nh(lo({arg:t,stream:!0},g)),headers:g.headers}));case 2:r=n.sent,I=!1,a=!1,n.prev=5,i=qm(r.ndjson());case 7:return n.next=9,Ab(i.next());case 9:if(!(I=!(C=n.sent).done)){n.next=16;break}return l=C.value,n.next=13,l.Path;case 13:I=!1,n.next=7;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),a=!0,o=n.t0;case 22:if(n.prev=22,n.prev=23,!I||null==i.return){n.next=27;break}return n.next=27,Ab(i.return());case 27:if(n.prev=27,!a){n.next=30;break}throw o;case 30:return n.finish(27);case 31:return n.finish(22);case 32:case"end":return n.stop()}}),n,null,[[5,18,22,32],[23,,27,31]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),af=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.length>1&&void 0!==I[1]?I[1]:{},t.next=3,e.post("name/pubsub/cancel",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.t0=Qb,t.next=7,r.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),of=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("name/pubsub/state",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.t0=Qb,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Cf=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=I.length>0&&void 0!==I[0]?I[0]:{},t.next=3,e.post("name/pubsub/subs",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",r.Strings||[]);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function lf(e){return{cancel:af(e),state:of(e),subs:Cf(e)}}function uf(e){return{publish:rf(e),resolve:If(e),pubsub:lf(e)}}var cf=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("object/data",{signal:n.signal,searchParams:nh(lo({arg:"".concat(g instanceof Uint8Array?Jo.decode(g):g)},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.arrayBuffer();case 6:return I=t.sent,t.abrupt("return",new Uint8Array(I,0,I.byteLength));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),sf=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("object/get",{signal:n.signal,searchParams:nh(lo({arg:"".concat(g instanceof Uint8Array?Jo.decode(g):g),dataEncoding:"base64"},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",{Data:gp(I.Data,"base64pad"),Links:(I.Links||[]).map((function(e){return{Name:e.Name,Hash:Jo.parse(e.Hash),Tsize:e.Size}}))});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Af=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("object/links",{signal:n.signal,searchParams:nh(lo({arg:"".concat(g instanceof Uint8Array?Jo.decode(g):g)},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",(I.Links||[]).map((function(e){return{Name:e.Name,Tsize:e.Size,Hash:Jo.parse(e.Hash)}})));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),df=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("object/new",{signal:g.signal,searchParams:nh(lo({arg:g.template},g)),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,I=r.Hash,t.abrupt("return",Jo.parse(I));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),hf=function(e,t){var g=qd((function(g){var n=Ap(e,t);function r(){return r=ue(Ce().mark((function e(t){var g,r=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",n(t,lo(lo({},g),{},{storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})));case 2:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return function(e){return r.apply(this,arguments)}}));return g(t)},mf=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("object/stat",{signal:n.signal,searchParams:nh(lo({arg:"".concat(g)},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",lo(lo({},I),{},{Hash:Jo.parse(I.Hash)}));case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),bf=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a,o,i=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},t.next=3,e.post("object/patch/add-link",{signal:r.signal,searchParams:nh(lo({arg:["".concat(g),n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null]},r)),headers:r.headers});case 3:return I=t.sent,t.next=6,I.json();case 6:return a=t.sent,o=a.Hash,t.abrupt("return",Jo.parse(o));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),pf=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a,o,i,C,l=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},I=new AbortController,a=Jb(I.signal,r.signal),t.t0=e,t.t1=lo,t.t2={signal:a,searchParams:nh(lo({arg:"".concat(g)},r))},t.next=8,Vb([n],I,r.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"object/patch/append-data",t.t4);case 12:return o=t.sent,t.next=15,o.json();case 15:return i=t.sent,C=i.Hash,t.abrupt("return",Jo.parse(C));case 18:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),ff=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a,o,i=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},t.next=3,e.post("object/patch/rm-link",{signal:r.signal,searchParams:nh(lo({arg:["".concat(g),n.Name||n.name||null]},r)),headers:r.headers});case 3:return I=t.sent,t.next=6,I.json();case 6:return a=t.sent,o=a.Hash,t.abrupt("return",Jo.parse(o));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),Zf=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a,o,i,C,l=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},I=new AbortController,a=Jb(I.signal,r.signal),t.t0=e,t.t1=lo,t.t2={signal:a,searchParams:nh(lo({arg:["".concat(g)]},r))},t.next=8,Vb([n],I,r.headers);case 8:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=12,t.t0.post.call(t.t0,"object/patch/set-data",t.t4);case 12:return o=t.sent,t.next=15,o.json();case 15:return i=t.sent,C=i.Hash,t.abrupt("return",Jo.parse(C));case 18:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}}));function yf(e){return{addLink:bf(e),appendData:pf(e),rmLink:ff(e),setData:Zf(e)}}function Gf(e,t){return{data:cf(t),get:sf(t),links:Af(t),new:df(t),put:hf(e,t),stat:mf(t),patch:yf(t)}}function Bf(e){return vf.apply(this,arguments)}function vf(){return vf=sb(Ce().mark((function e(t){var g,n,r,I,a,o,i,C,l,u,c,s,A,d,h,m,b,p,f,Z,y,G,B;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t){e.next=2;break}throw ed(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 2:if(!(g=Jo.asCID(t))){e.next=7;break}return e.next=6,kf({cid:g});case 6:return e.abrupt("return");case 7:if(!(t instanceof String||"string"===typeof t)){e.next=11;break}return e.next=10,kf({path:t});case 10:return e.abrupt("return");case 11:if(null==t.cid&&null==t.path){e.next=15;break}return e.next=14,kf(t);case 14:return e.abrupt("return",e.sent);case 15:if(!(Symbol.iterator in t)){e.next=63;break}if(n=t[Symbol.iterator](),!(r=n.next()).done){e.next=20;break}return e.abrupt("return",n);case 20:if(!(Jo.asCID(r.value)||r.value instanceof String||"string"===typeof r.value)){e.next=41;break}return e.next=23,kf({cid:r.value});case 23:I=_n(n),e.prev=24,I.s();case 26:if((a=I.n()).done){e.next=32;break}return o=a.value,e.next=30,kf({cid:o});case 30:e.next=26;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(24),I.e(e.t0);case 37:return e.prev=37,I.f(),e.finish(37);case 40:return e.abrupt("return");case 41:if(null==r.value.cid&&null==r.value.path){e.next=62;break}return e.next=44,kf(r.value);case 44:i=_n(n),e.prev=45,i.s();case 47:if((C=i.n()).done){e.next=53;break}return l=C.value,e.next=51,kf(l);case 51:e.next=47;break;case 53:e.next=58;break;case 55:e.prev=55,e.t1=e.catch(45),i.e(e.t1);case 58:return e.prev=58,i.f(),e.finish(58);case 61:return e.abrupt("return");case 62:throw ed(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 63:if(!(Symbol.asyncIterator in t)){e.next=137;break}return u=t[Symbol.asyncIterator](),e.next=67,Ab(u.next());case 67:if(!(c=e.sent).done){e.next=70;break}return e.abrupt("return",u);case 70:if(!(Jo.asCID(c.value)||c.value instanceof String||"string"===typeof c.value)){e.next=103;break}return e.next=73,kf({cid:c.value});case 73:s=!1,A=!1,e.prev=75,h=qm(u);case 77:return e.next=79,Ab(h.next());case 79:if(!(s=!(m=e.sent).done)){e.next=86;break}return b=m.value,e.next=83,kf({cid:b});case 83:s=!1,e.next=77;break;case 86:e.next=92;break;case 88:e.prev=88,e.t2=e.catch(75),A=!0,d=e.t2;case 92:if(e.prev=92,e.prev=93,!s||null==h.return){e.next=97;break}return e.next=97,Ab(h.return());case 97:if(e.prev=97,!A){e.next=100;break}throw d;case 100:return e.finish(97);case 101:return e.finish(92);case 102:return e.abrupt("return");case 103:if(null==c.value.cid&&null==c.value.path){e.next=136;break}return e.next=106,kf(c.value);case 106:p=!1,f=!1,e.prev=108,y=qm(u);case 110:return e.next=112,Ab(y.next());case 112:if(!(p=!(G=e.sent).done)){e.next=119;break}return B=G.value,e.next=116,kf(B);case 116:p=!1,e.next=110;break;case 119:e.next=125;break;case 121:e.prev=121,e.t3=e.catch(108),f=!0,Z=e.t3;case 125:if(e.prev=125,e.prev=126,!p||null==y.return){e.next=130;break}return e.next=130,Ab(y.return());case 130:if(e.prev=130,!f){e.next=133;break}throw Z;case 133:return e.finish(130);case 134:return e.finish(125);case 135:return e.abrupt("return");case 136:case 137:throw ed(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT");case 138:case"end":return e.stop()}}),e,null,[[24,34,37,40],[45,55,58,61],[75,88,92,102],[93,,97,101],[108,121,125,135],[126,,130,134]])}))),vf.apply(this,arguments)}function kf(e){var t=e.cid||"".concat(e.path);if(!t)throw ed(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");var g={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(g.metadata=e.metadata),g}var Sf=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l,u,c,s,A,d,h,m,b,p,f,Z,y;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=!1,I=!1,n.prev=2,o=qm(Bf(t));case 4:return n.next=6,Ab(o.next());case 6:if(!(r=!(i=n.sent).done)){n.next=62;break}return C=i.value,l=C.path,u=C.recursive,c=C.metadata,n.next=10,Ab(e.post("pin/add",{signal:g.signal,searchParams:nh(lo(lo({},g),{},{arg:l,recursive:u,metadata:c?JSON.stringify(c):void 0,stream:!0})),headers:g.headers}));case 10:s=n.sent,A=!1,d=!1,n.prev=13,m=qm(s.ndjson());case 15:return n.next=17,Ab(m.next());case 17:if(!(A=!(b=n.sent).done)){n.next=43;break}if(!(p=b.value).Pins){n.next=38;break}f=_n(p.Pins),n.prev=21,f.s();case 23:if((Z=f.n()).done){n.next=29;break}return y=Z.value,n.next=27,Jo.parse(y);case 27:n.next=23;break;case 29:n.next=34;break;case 31:n.prev=31,n.t0=n.catch(21),f.e(n.t0);case 34:return n.prev=34,f.f(),n.finish(34);case 37:return n.abrupt("continue",40);case 38:return n.next=40,Jo.parse(p);case 40:A=!1,n.next=15;break;case 43:n.next=49;break;case 45:n.prev=45,n.t1=n.catch(13),d=!0,h=n.t1;case 49:if(n.prev=49,n.prev=50,!A||null==m.return){n.next=54;break}return n.next=54,Ab(m.return());case 54:if(n.prev=54,!d){n.next=57;break}throw h;case 57:return n.finish(54);case 58:return n.finish(49);case 59:r=!1,n.next=4;break;case 62:n.next=68;break;case 64:n.prev=64,n.t2=n.catch(2),I=!0,a=n.t2;case 68:if(n.prev=68,n.prev=69,!r||null==o.return){n.next=73;break}return n.next=73,Ab(o.return());case 73:if(n.prev=73,!I){n.next=76;break}throw a;case 76:return n.finish(73);case 77:return n.finish(68);case 78:case"end":return n.stop()}}),n,null,[[2,64,68,78],[13,45,49,59],[21,31,34,37],[50,,54,58],[69,,73,77]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}));function Wf(e){var t=Sf(e);return qd((function(){function e(){return e=ue(Ce().mark((function e(g){var n,r=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",up(t([lo({path:g},n)],n)));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)}function Vf(e,t,g){var n={type:e,cid:Jo.parse(t)};return g&&(n.metadata=g),n}var wf=qd((function(e){function t(){return t=sb((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce().mark((function g(){var n,r,I,a,o,i,C,l,u,c,s;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return n=[],t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]),g.next=4,Ab(e.post("pin/ls",{signal:t.signal,searchParams:nh(lo(lo({},t),{},{arg:n.map((function(e){return"".concat(e)})),stream:!0})),headers:t.headers}));case 4:r=g.sent,I=!1,a=!1,g.prev=7,i=qm(r.ndjson());case 9:return g.next=11,Ab(i.next());case 11:if(!(I=!(C=g.sent).done)){g.next=28;break}if(!(l=C.value).Keys){g.next=23;break}u=0,c=Object.keys(l.Keys);case 15:if(!(u<c.length)){g.next=22;break}return s=c[u],g.next=19,Vf(l.Keys[s].Type,s,l.Keys[s].Metadata);case 19:u++,g.next=15;break;case 22:return g.abrupt("return");case 23:return g.next=25,Vf(l.Type,l.Cid,l.Metadata);case 25:I=!1,g.next=9;break;case 28:g.next=34;break;case 30:g.prev=30,g.t0=g.catch(7),a=!0,o=g.t0;case 34:if(g.prev=34,g.prev=35,!I||null==i.return){g.next=39;break}return g.next=39,Ab(i.return());case 39:if(g.prev=39,!a){g.next=42;break}throw o;case 42:return g.finish(39);case 43:return g.finish(34);case 44:case"end":return g.stop()}}),g,null,[[7,30,34,44],[35,,39,43]])}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),Rf=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l,u,c,s,A,d,h,m,b,p;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=!1,I=!1,n.prev=2,o=qm(Bf(t));case 4:return n.next=6,Ab(o.next());case 6:if(!(r=!(i=n.sent).done)){n.next=49;break}return C=i.value,l=C.path,u=C.recursive,(c=new URLSearchParams(g.searchParams)).append("arg","".concat(l)),null!=u&&c.set("recursive",String(u)),n.next=13,Ab(e.post("pin/rm",{signal:g.signal,headers:g.headers,searchParams:nh(lo(lo({},g),{},{arg:"".concat(l),recursive:u}))}));case 13:s=n.sent,A=!1,d=!1,n.prev=16,m=qm(s.ndjson());case 18:return n.next=20,Ab(m.next());case 20:if(!(A=!(b=n.sent).done)){n.next=30;break}if(!(p=b.value).Pins){n.next=25;break}return n.delegateYield(db(qm(p.Pins.map((function(e){return Jo.parse(e)})))),"t0",24);case 24:return n.abrupt("continue",27);case 25:return n.next=27,Jo.parse(p);case 27:A=!1,n.next=18;break;case 30:n.next=36;break;case 32:n.prev=32,n.t1=n.catch(16),d=!0,h=n.t1;case 36:if(n.prev=36,n.prev=37,!A||null==m.return){n.next=41;break}return n.next=41,Ab(m.return());case 41:if(n.prev=41,!d){n.next=44;break}throw h;case 44:return n.finish(41);case 45:return n.finish(36);case 46:r=!1,n.next=4;break;case 49:n.next=55;break;case 51:n.prev=51,n.t2=n.catch(2),I=!0,a=n.t2;case 55:if(n.prev=55,n.prev=56,!r||null==o.return){n.next=60;break}return n.next=60,Ab(o.return());case 60:if(n.prev=60,!I){n.next=63;break}throw a;case 63:return n.finish(60);case 64:return n.finish(55);case 65:case"end":return n.stop()}}),n,null,[[2,51,55,65],[16,32,36,46],[37,,41,45],[56,,60,64]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),Xf=function(e){var t=Rf(e);return qd((function(){function e(){return e=ue(Ce().mark((function e(g){var n,r=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",up(t([lo({path:g},n)],n)));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)},Jf=function(e){var t=e.Name,g=e.Status,n=e.Cid;return{cid:Jo.parse(n),name:t,status:g}},Yf=function(e){if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},Hf=function(e){if(Jo.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of ".concat(typeof e))},Nf=function(e){var t=e.service,g=e.cid,n=e.name,r=e.status,I=e.all,a=nh({service:Yf(t),name:n,force:!!I||void 0});if(g){var o,i=_n(g);try{for(i.s();!(o=i.n()).done;){var C=o.value;a.append("cid",Hf(C))}}catch(Yy){i.e(Yy)}finally{i.f()}}if(r){var l,u=_n(r);try{for(u.s();!(l=u.n()).done;){var c=l.value;a.append("status",c)}}catch(Yy){u.e(Yy)}finally{u.f()}}return a},Ff=function(e){var t=e.cid,g=e.service,n=e.background,r=e.name,I=e.origins,a=nh({arg:Hf(t),service:Yf(g),name:r,background:!!n||void 0});if(I){var o,i=_n(I);try{for(i.s();!(o=i.n()).done;){var C=o.value;a.append("origin",C.toString())}}catch(Yy){i.e(Yy)}finally{i.f()}}return a},Kf=["timeout","signal","headers"];function xf(e){function t(){return(t=ue(Ce().mark((function t(g,n){var r,I,a,o,i;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.timeout,I=n.signal,a=n.headers,o=$d(n,Kf),t.next=3,e.post("pin/remote/add",{timeout:r,signal:I,headers:a,searchParams:Ff(lo({cid:g},o))});case 3:return i=t.sent,t.t0=Jf,t.next=7,i.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}}var Ef=["timeout","signal","headers"];function Mf(e){function t(){return(t=sb((function(t){var g=t.timeout,n=t.signal,r=t.headers,I=$d(t,Ef);return Ce().mark((function t(){var a,o,i,C,l,u,c;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ab(e.post("pin/remote/ls",{timeout:g,signal:n,headers:r,searchParams:Nf(I)}));case 2:a=t.sent,o=!1,i=!1,t.prev=5,l=qm(a.ndjson());case 7:return t.next=9,Ab(l.next());case 9:if(!(o=!(u=t.sent).done)){t.next=16;break}return c=u.value,t.next=13,Jf(c);case 13:o=!1,t.next=7;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),i=!0,C=t.t0;case 22:if(t.prev=22,t.prev=23,!o||null==l.return){t.next=27;break}return t.next=27,Ab(l.return());case 27:if(t.prev=27,!i){t.next=30;break}throw C;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[5,18,22,32],[23,,27,31]])}))()}))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}var Df=["timeout","signal","headers"];function Uf(e){function t(){return(t=ue(Ce().mark((function t(g){var n,r,I,a;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g.timeout,r=g.signal,I=g.headers,a=$d(g,Df),t.next=3,e.post("pin/remote/rm",{timeout:n,signal:r,headers:I,searchParams:Nf(lo(lo({},a),{},{all:!1}))});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}var zf=["timeout","signal","headers"];function Lf(e){function t(){return(t=ue(Ce().mark((function t(g){var n,r,I,a;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g.timeout,r=g.signal,I=g.headers,a=$d(g,zf),t.next=3,e.post("pin/remote/rm",{timeout:n,signal:r,headers:I,searchParams:Nf(lo(lo({},a),{},{all:!0}))});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function Qf(e){var t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function Tf(e){return lo({service:e.Service,endpoint:new URL(e.ApiEndpoint)},e.Stat&&{stat:jf(e.Stat)})}function jf(e){switch(e.Status){case"valid":var t=e.PinCount,g=t.Pinning,n=t.Pinned;return{status:"valid",pinCount:{queued:t.Queued,pinning:g,pinned:n,failed:t.Failed}};case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function Pf(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a,o,i;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.endpoint,I=n.key,a=n.headers,o=n.timeout,i=n.signal,t.next=3,e.post("pin/remote/service/add",{timeout:o,signal:i,searchParams:nh({arg:[g,Qf(r),I]}),headers:a});case 3:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}}function Of(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a,o,i,C,l=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=l.length>0&&void 0!==l[0]?l[0]:{},n=g.stat,r=g.headers,I=g.timeout,a=g.signal,t.next=4,e.post("pin/remote/service/ls",{timeout:I,signal:a,headers:r,searchParams:!0===n?nh({stat:n}):void 0});case 4:return o=t.sent,t.next=7,o.json();case 7:return i=t.sent,C=i.RemoteServices,t.abrupt("return",C.map(Tf));case 10:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}function _f(e){function t(){return t=ue(Ce().mark((function t(g){var n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},t.next=3,e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:nh({arg:g})});case 3:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function qf(e){var t=new _d(e);return{add:Pf(t),ls:Of(t),rm:_f(t)}}function $f(e){var t=new _d(e);return{add:xf(t),ls:Mf(t),rm:Uf(t),rmAll:Lf(t),service:qf(e)}}function eZ(e){return{addAll:Sf(e),add:Wf(e),ls:wf(e),rmAll:Rf(e),rm:Xf(e),remote:$f(e)}}var tZ=function(e){return Array.isArray(e)?e.map(gZ):e},gZ=function(e){return fp(nZ(e))},nZ=function(e){return cl.decode(e)},rZ=function(e){return BigInt("0x".concat(fp(cl.decode(e),"base16")))},IZ=function(e){return cl.encode(gp(e))},aZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=I.length>0&&void 0!==I[0]?I[0]:{},t.next=3,e.post("pubsub/ls",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,r=n.Strings,t.abrupt("return",tZ(r)||[]);case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),oZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("pubsub/peers",{signal:n.signal,searchParams:nh(lo({arg:IZ(g)},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,a=I.Strings,t.abrupt("return",a||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),iZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(g,n){var r,I,a,o,i,C=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=C.length>2&&void 0!==C[2]?C[2]:{},I=nh(lo({arg:IZ(g)},r)),a=new AbortController,o=Jb(a.signal,r.signal),t.t0=e,t.t1=lo,t.t2={signal:o,searchParams:I},t.next=9,Vb([n],a,r.headers);case 9:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.next=13,t.t0.post.call(t.t0,"pubsub/pub",t.t4);case 13:return i=t.sent,t.next=16,i.text();case 16:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}})),CZ=Hd("ipfs-http-client:pubsub:subscribe");function lZ(e,t){return uZ.apply(this,arguments)}function uZ(){return(uZ=ue(Ce().mark((function e(t,g){var n,r,I,a,o,i,C,l,u,c,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.onMessage,r=g.onEnd,I=(I=g.onError)||CZ,e.prev=2,a=!1,o=!1,e.prev=5,C=qm(t.ndjson());case 7:return e.next=9,C.next();case 9:if(!(a=!(l=e.sent).done)){e.next=24;break}if(u=l.value,e.prev=11,u.from){e.next=14;break}return e.abrupt("continue",21);case 14:null!=u.from&&null!=u.seqno?n({type:"signed",from:Qm(u.from),data:nZ(u.data),sequenceNumber:rZ(u.seqno),topic:gZ(u.topicIDs[0]),key:nZ(null!==(c=u.key)&&void 0!==c?c:"u"),signature:nZ(null!==(s=u.signature)&&void 0!==s?s:"u")}):n({type:"unsigned",data:nZ(u.data),topic:gZ(u.topicIDs[0])}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(11),e.t0.message="Failed to parse pubsub message: ".concat(e.t0.message),I(e.t0,!1,u);case 21:a=!1,e.next=7;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(5),o=!0,i=e.t1;case 30:if(e.prev=30,e.prev=31,!a||null==C.return){e.next=35;break}return e.next=35,C.return();case 35:if(e.prev=35,!o){e.next=38;break}throw i;case 38:return e.finish(35);case 39:return e.finish(30);case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(2),cZ(e.t2)||I(e.t2,!0);case 45:return e.prev=45,r(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[2,42,45,48],[5,26,30,40],[11,17],[31,,35,39]])})))).apply(this,arguments)}var cZ=function(e){switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}},sZ=function(e,t){function g(){return(g=ue(Ce().mark((function e(g,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unsubscribe(g,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(e,t){return g.apply(this,arguments)}},AZ=function(){function e(){de(this,e),this._subs=new Map}return be(e,[{key:"subscribe",value:function(e,t,g){var n=this,r=this._subs.get(e)||[];if(r.find((function(e){return e.handler===t})))throw new Error("Already subscribed to ".concat(e," with this handler"));var I=new AbortController;return this._subs.set(e,[{handler:t,controller:I}].concat(r)),g&&g.addEventListener("abort",(function(){return n.unsubscribe(e,t)})),I.signal}},{key:"unsubscribe",value:function(e,t){var g,n=this._subs.get(e)||[];t?(this._subs.set(e,n.filter((function(e){return e.handler!==t}))),g=n.filter((function(e){return e.handler===t}))):(this._subs.set(e,[]),g=n),(this._subs.get(e)||[]).length||this._subs.delete(e),g.forEach((function(e){return e.controller.abort()}))}}]),e}();function dZ(e){var t,g,n=new AZ;return{ls:aZ(e),peers:oZ(e),publish:iZ(e),subscribe:(t=e,g=n,qd((function(e){function t(){return t=ue(Ce().mark((function t(n,r){var I,a,o,i,C,l=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(I=l.length>2&&void 0!==l[2]?l[2]:{}).signal=g.subscribe(n,r,I.signal),i=new Promise((function(e,t){a=e,o=t})),C=setTimeout((function(){return a()}),1e3),e.post("pubsub/sub",{signal:I.signal,searchParams:nh(lo({arg:IZ(n)},I)),headers:I.headers}).catch((function(e){g.unsubscribe(n,r),o(e)})).then((function(e){clearTimeout(C),e&&(lZ(e,{onMessage:function(e){r&&("function"!==typeof r?"function"===typeof r.handleEvent&&r.handleEvent(e):r(e))},onEnd:function(){return g.unsubscribe(n,r)},onError:I.onError}),a())})),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e,g){return t.apply(this,arguments)}}))(t)),unsubscribe:sZ(0,n)}}var hZ=qd((function(e){function t(){return t=sb((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce().mark((function g(){var n;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Ab(e.post("refs/local",{signal:t.signal,transform:Qb,searchParams:nh(t),headers:t.headers}));case 2:return n=g.sent,g.delegateYield(db(qm(n.ndjson())),"t0",4);case 4:case"end":return g.stop()}}),g)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),mZ=qd((function(e,t){var g=function(){var t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.isArray(t)?t:[t],n.next=3,Ab(e.post("refs",{signal:g.signal,searchParams:nh(lo({arg:r.map((function(e){return"".concat(e instanceof Uint8Array?Jo.decode(e):e)}))},g)),headers:g.headers,transform:Qb}));case 3:return I=n.sent,n.delegateYield(db(qm(I.ndjson())),"t0",5);case 5:case"end":return n.stop()}}),n)}))()}));return function(e){return t.apply(this,arguments)}}();return Object.assign(g,{local:hZ(t)})})),bZ=qd((function(e){function t(){return t=sb((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce().mark((function g(){var n;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Ab(e.post("repo/gc",{signal:t.signal,searchParams:nh(t),headers:t.headers,transform:function(e){return{err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?Jo.parse(e.Key["/"]):null}}}));case 2:return n=g.sent,g.delegateYield(db(qm(n.ndjson())),"t0",4);case 4:case"end":return g.stop()}}),g)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),pZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=I.length>0&&void 0!==I[0]?I[0]:{},t.next=3,e.post("repo/stat",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)});case 8:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),fZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("repo/version",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return t.next=5,t.sent.json();case 5:return n=t.sent,t.abrupt("return",n.Version);case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function ZZ(e){return{gc:bZ(e),stat:pZ(e),version:fZ(e)}}var yZ=qd((function(e){function t(){return t=sb((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce().mark((function g(){var n;return Ce().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Ab(e.post("stats/bw",{signal:t.signal,searchParams:nh(t),headers:t.headers,transform:function(e){return{totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)}}}));case 2:return n=g.sent,g.delegateYield(db(qm(n.ndjson())),"t0",4);case 4:case"end":return g.stop()}}),g)}))()})),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function GZ(e){return{bitswap:Tm(e),repo:pZ(e),bw:yZ(e)}}var BZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("swarm/addrs",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,I=r.Addrs,t.abrupt("return",Object.keys(I).map((function(e){return{id:Qm(e),addrs:(I[e]||[]).map((function(e){return dd(e)}))}})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),vZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("swarm/connect",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,a=I.Strings,t.abrupt("return",a||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),kZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("swarm/disconnect",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,a=I.Strings,t.abrupt("return",a||[]);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),SZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("swarm/addrs/local",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,I=r.Strings,t.abrupt("return",(I||[]).map((function(e){return dd(e)})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),WZ=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("swarm/peers",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,I=r.Peers,t.abrupt("return",(I||[]).map((function(e){return{addr:dd(e.Addr),peer:Qm(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"}})));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));function VZ(e){return{addrs:BZ(e),connect:vZ(e),disconnect:kZ(e),localAddrs:SZ(e),peers:WZ(e)}}var wZ=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I,a,o,i,C,l,u,c,s,A,d,h,m,b,p,f,Z;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new AbortController,I=Jb(r.signal,g.signal),n.next=4,Ab(Vb(t,r,g.headers));case 4:return a=n.sent,o=a.headers,i=a.body,C=a.total,l=a.parts,u="function"===typeof g.progress?RZ(C,l,g.progress):[void 0,void 0],c=Ae(u,2),s=c[0],A=c[1],n.next=12,Ab(e.post("add",{searchParams:nh(lo(lo({"stream-channels":!0},g),{},{progress:Boolean(s)})),onUploadProgress:A,signal:I,headers:o,body:i}));case 12:d=n.sent,h=!1,m=!1,n.prev=15,p=qm(d.ndjson());case 17:return n.next=19,Ab(p.next());case 19:if(!(h=!(f=n.sent).done)){n.next=31;break}if(void 0===(Z=Qb(Z=f.value)).hash){n.next=27;break}return n.next=25,JZ(Z);case 25:n.next=28;break;case 27:s&&s(Z.bytes||0,Z.name);case 28:h=!1,n.next=17;break;case 31:n.next=37;break;case 33:n.prev=33,n.t0=n.catch(15),m=!0,b=n.t0;case 37:if(n.prev=37,n.prev=38,!h||null==p.return){n.next=42;break}return n.next=42,Ab(p.return());case 42:if(n.prev=42,!m){n.next=45;break}throw b;case 45:return n.finish(42);case 46:return n.finish(37);case 47:case"end":return n.stop()}}),n,null,[[15,33,37,47],[38,,42,46]])}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),RZ=function(e,t,g){return t?[void 0,XZ(e,t,g)]:[g,void 0]},XZ=function(e,t,g){var n=0,r=t.length;return function(I){for(var a=I.loaded,o=I.total,i=Math.floor(a/o*e);n<r;){var C=t[n],l=C.start,u=C.end,c=C.name;if(i<u){g(i-l,c);break}g(u-l,c),n+=1}}};function JZ(e){var t=e.name,g=e.hash,n=e.size,r=e.mode,I=e.mtime,a=e.mtimeNsecs,o={path:t,cid:Jo.parse(g),size:parseInt(n)};return null!=r&&(o.mode=parseInt(r,8)),null!=I&&(o.mtime={secs:I,nsecs:a||0}),o}function YZ(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function HZ(e,t,g,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:g},decoder:{decode:n}}}var NZ=HZ("utf8","u",(function(e){return"u"+new TextDecoder("utf8").decode(e)}),(function(e){return(new TextEncoder).encode(e.substring(1))})),FZ=HZ("ascii","a",(function(e){for(var t="a",g=0;g<e.length;g++)t+=String.fromCharCode(e[g]);return t}),(function(e){for(var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?YZ(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length),g=0;g<e.length;g++)t[g]=e.charCodeAt(g);return t})),KZ=lo({utf8:NZ,"utf-8":NZ,hex:su.base16,latin1:FZ,ascii:FZ,binary:FZ},su);var xZ=__webpack_require__(3926);function EZ(e){return MZ.apply(this,arguments)}function MZ(){return(MZ=sb(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DZ(e){return UZ.apply(this,arguments)}function UZ(){return(UZ=ue(Ce().mark((function e(t){var g,n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nb(t)){e.next=2;break}return e.abrupt("return",EZ(zZ(t)));case 2:if(!("string"===typeof t||t instanceof String)){e.next=4;break}return e.abrupt("return",EZ(zZ(t.toString())));case 4:if(!rb(t)){e.next=6;break}return e.abrupt("return",xZ(t));case 6:if(ab(t)&&(t=tb(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=27;break}return g=eb(t),e.next=11,g.peek();case 11:if(n=e.sent,r=n.value,!n.done){e.next=16;break}return e.abrupt("return",EZ(new Uint8Array(0)));case 16:if(g.push(r),!Number.isInteger(r)){e.next=25;break}return e.t0=EZ,e.t1=Uint8Array,e.next=22,gb(g);case 22:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 25:if(!(nb(r)||"string"===typeof r||r instanceof String)){e.next=27;break}return e.abrupt("return",hb(g,zZ));case 27:throw ed(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zZ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",g=KZ[t];if(!g)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?g.decoder.decode("".concat(g.prefix).concat(e)):YZ(globalThis.Buffer.from(e,"utf-8"))}(e.toString())}function LZ(){return LZ=sb(Ce().mark((function e(t,g){var n,r,I;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t){e.next=2;break}throw ed(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");case 2:if(!("string"===typeof t||t instanceof String)){e.next=6;break}return e.next=5,QZ(t.toString(),g);case 5:case 9:case 21:case 26:case 31:return e.abrupt("return");case 6:if(!nb(t)&&!rb(t)){e.next=10;break}return e.next=9,QZ(t,g);case 10:if(ab(t)&&(t=tb(t)),!(Symbol.iterator in t)&&!(Symbol.asyncIterator in t)){e.next=28;break}return n=eb(t),e.next=15,Ab(n.peek());case 15:if(r=e.sent,I=r.value,!r.done){e.next=22;break}return e.next=21,{content:[]};case 22:if(n.push(I),!(Number.isInteger(I)||nb(I)||"string"===typeof I||I instanceof String)){e.next=27;break}return e.next=26,QZ(n,g);case 27:throw ed(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT");case 28:if(!Ib(t)){e.next=32;break}return e.next=31,QZ(t,g);case 32:throw ed(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");case 33:case"end":return e.stop()}}),e)}))),LZ.apply(this,arguments)}function QZ(e,t){return TZ.apply(this,arguments)}function TZ(){return TZ=ue(Ce().mark((function e(t,g){var n,r,I,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,r=t.mode,I=t.mtime,a=t.content,o={path:n||"",mode:yb(r),mtime:Gb(I)},!a){e.next=8;break}return e.next=5,g(a);case 5:o.content=e.sent,e.next=12;break;case 8:if(n){e.next=12;break}return e.next=11,g(t);case 11:o.content=e.sent;case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),TZ.apply(this,arguments)}function jZ(e){return function(e,t){return LZ.apply(this,arguments)}(e,DZ)}function PZ(e){var t=wZ(e);return qd((function(){function e(){return e=ue(Ce().mark((function e(g){var n,r=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,up(t(jZ(g),n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(t){return e.apply(this,arguments)}}))(e)}var OZ=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("cat",{signal:g.signal,searchParams:nh(lo({arg:t.toString()},g)),headers:g.headers}));case 2:return r=n.sent,n.delegateYield(db(qm(r.iterator())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),_Z=qd((function(e){var t=function(){var t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("commands",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.abrupt("return",n.json());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t})),qZ=qd((function(e){var t=function(){var t=ue(Ce().mark((function t(g){var n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,e.post("dns",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,t.abrupt("return",I.Path);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t})),$Z=qd((function(e){return function(){var t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}})),ey=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r,I;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=lo({arg:"".concat(t instanceof Uint8Array?Jo.decode(t):t)},g)).compressionLevel&&(r["compression-level"]=r.compressionLevel,delete r.compressionLevel),n.next=4,Ab(e.post("get",{signal:g.signal,searchParams:nh(r),headers:g.headers}));case 4:return I=n.sent,n.delegateYield(db(qm(I.iterator())),"t0",6);case 6:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),ty=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r,I,a=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,e.post("id",{signal:g.signal,searchParams:nh(lo({arg:g.peerId?g.peerId.toString():void 0},g)),headers:g.headers});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,(I=lo({},Qb(r))).id=Qm(I.id),I.addresses&&(I.addresses=I.addresses.map((function(e){return dd(e)}))),t.abrupt("return",I);case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),gy=function(e){var t=ty(e);function g(){return g=ue(Ce().mark((function e(){var g,n,r=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,t(g);case 3:return n=e.sent,e.abrupt("return",Boolean(n&&n.addresses&&n.addresses.length));case 5:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}return function(){return g.apply(this,arguments)}},ny=qd((function(e,t){function g(){return g=sb((function(g){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function r(){var I,a,o,i,C,l,u,c,s,A,d;return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=function(){return(o=ue(Ce().mark((function e(g){var n,r,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=g.Hash).includes("/")){e.next=9;break}return r=n.startsWith("/ipfs/")?n:"/ipfs/".concat(n),e.next=5,Mp(t)(r);case 5:a=e.sent,n=a.cid,e.next=10;break;case 9:n=Jo.parse(n);case 10:return o={name:g.Name,path:I+(g.Name?"/".concat(g.Name):""),size:g.Size,cid:n,type:ry(g)},g.Mode&&(o.mode=parseInt(g.Mode,8)),void 0!==g.Mtime&&null!==g.Mtime&&(o.mtime={secs:g.Mtime},void 0!==g.MtimeNsecs&&null!==g.MtimeNsecs&&(o.mtime.nsecs=g.MtimeNsecs)),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(e){return o.apply(this,arguments)},I="".concat(g instanceof Uint8Array?Jo.decode(g):g),r.next=5,Ab(e.post("ls",{signal:n.signal,searchParams:nh(lo({arg:I},n)),headers:n.headers}));case 5:i=r.sent,C=!1,l=!1,r.prev=8,c=qm(i.ndjson());case 10:return r.next=12,Ab(c.next());case 12:if(!(C=!(s=r.sent).done)){r.next=31;break}if(A=(A=s.value).Objects){r.next=17;break}throw new Error("expected .Objects in results");case 17:if(A=A[0]){r.next=20;break}throw new Error("expected one array in results.Objects");case 20:if(d=A.Links,Array.isArray(d)){r.next=23;break}throw new Error("expected one array in results.Objects[0].Links");case 23:if(d.length){r.next=27;break}return r.next=26,a(A);case 26:return r.abrupt("return");case 27:return r.delegateYield(db(qm(d.map(a))),"t0",28);case 28:C=!1,r.next=10;break;case 31:r.next=37;break;case 33:r.prev=33,r.t1=r.catch(8),l=!0,u=r.t1;case 37:if(r.prev=37,r.prev=38,!C||null==c.return){r.next=42;break}return r.next=42,Ab(c.return());case 42:if(r.prev=42,!l){r.next=45;break}throw u;case 45:return r.finish(42);case 46:return r.finish(37);case 47:case"end":return r.stop()}}),r,null,[[8,33,37,47],[38,,42,46]])}))()})),g.apply(this,arguments)}return function(e){return g.apply(this,arguments)}}));function ry(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}var Iy=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("dns",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.t0=Qb,t.next=7,n.json();case 7:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),ay=qd((function(e){function t(){return t=sb((function(t){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce().mark((function n(){var r;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ab(e.post("ping",{signal:g.signal,searchParams:nh(lo({arg:"".concat(t)},g)),headers:g.headers,transform:Qb}));case 2:return r=n.sent,n.delegateYield(db(qm(r.ndjson())),"t0",4);case 4:case"end":return n.stop()}}),n)}))()})),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),oy=qd((function(e){function t(){return t=ue(Ce().mark((function t(g){var n,r,I,a,o=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,e.post("resolve",{signal:n.signal,searchParams:nh(lo({arg:g},n)),headers:n.headers});case 3:return r=t.sent,t.next=6,r.json();case 6:return I=t.sent,a=I.Path,t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(e){return t.apply(this,arguments)}})),iy=qd((function(e){var t=function(){var e=ue(Ce().mark((function e(){var t=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw t.length>0&&void 0!==t[0]?t[0]:{},ed(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t})),Cy=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("shutdown",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.next=6,n.text();case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}})),ly=qd((function(e){function t(){return t=ue(Ce().mark((function t(){var g,n,r=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.post("version",{signal:g.signal,searchParams:nh(g),headers:g.headers});case 3:return n=t.sent,t.t0=lo,t.t1=lo,t.t2={},t.t3=Qb,t.next=10,n.json();case 10:return t.t4=t.sent,t.t5=(0,t.t3)(t.t4),t.t6=(0,t.t1)(t.t2,t.t5),t.t7={},t.t8={"ipfs-http-client":"1.0.0"},t.abrupt("return",(0,t.t0)(t.t6,t.t7,t.t8));case 16:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){return t.apply(this,arguments)}}));__webpack_require__(9880),__webpack_require__(3307);var uy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:Ml.name,code:Ml.code,encode:function(e){return e},decode:function(e){return e}},r=Object.values(su);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach((function(e){return r.push(e)}));var o=new Ka({bases:r,loadBase:e.ipld&&e.ipld.loadBase}),i=Object.values(du);[g,n,I,a,t].concat(e.ipld&&e.ipld.codecs||[]).forEach((function(e){return i.push(e)}));var C=new Ea({codecs:i,loadCodec:e.ipld&&e.ipld.loadCodec}),l=Object.values(Au);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach((function(e){return l.push(e)}));var u=new Da({hashers:l,loadHasher:e.ipld&&e.ipld.loadHasher}),c={add:PZ(e),addAll:wZ(e),bitswap:Om(e),block:Kb(e),bootstrap:zb(e),cat:OZ(e),commands:_Z(e),config:ap(e),dag:hp(C,e),dht:vp(e),diag:Vp(e),dns:qZ(e),files:Lp(e),get:ey(e),getEndpointConfig:$Z(e),id:ty(e),isOnline:gy(e),key:$p(e),log:nf(e),ls:ny(e),mount:Iy(e),name:uf(e),object:Gf(C,e),pin:eZ(e),ping:ay(e),pubsub:dZ(e),refs:mZ(e),repo:ZZ(e),resolve:oy(e),start:iy(e),stats:GZ(e),stop:Cy(e),swarm:VZ(e),version:ly(e),bases:o,codecs:C,hashers:u};return c}({url:"https://ipfs.infura.io:5001/api/v0",headers:{authorization:"Basic "+btoa("2DxpAMDUxnEwmX2dp5U3YrLjlRZ:2a7dbfdfb1d708794a3b7a1c4bac0e4e")}}),cy=function(){for(var e=arguments.length,t=new Array(e),g=0;g<e;g++)t[g]=arguments[g];return t.filter(Boolean).join(" ")},sy=__webpack_require__(2834),Ay=["children","className","variant","type"],dy=function(e){var t=e.children,g=e.className,n=e.variant,r=void 0===n?"primary":n,I=e.type,a=void 0===I?"button":I,o=$d(e,Ay),i=ae.useMemo((function(){return{primary:"bg-custom-primary text-white shadow-md hover:shadow-lg hover:opacity-70",danger:"bg-custom-danger text-white shadow-md hover:shadow-lg",success:"bg-custom-success text-white shadow-md hover:shadow-lg",white:"bg-white shadow-md hover:shadow-lg",outline:"bg-transparent border transition-colors  hover:border-white hover:bg-white hover:text-custom-dark ",text:"hover:text-custom-primary"}[r]}),[r]);return(0,sy.jsx)("button",lo(lo({},o),{},{className:cy("flex justify-center px-4 py-2 rounded-lg transition-all duration-500",i,g),type:a,children:t}))},hy=["tag","text","className"],my=function(e){var t=e.tag,g=e.text,n=e.className,r=void 0===n?"":n,I=$d(e,hy),a=ae.useMemo((function(){switch(t){case"h1":return"text-h1 font-bold ";case"h2":return"text-h2 font-medium ";case"h3":return"text-h3 ";case"h4":return"text-h4 ";case"h5":return"text-h5 ";case"p":return"text-p ";default:return""}}),[t]);return(0,sy.jsx)(t,lo(lo({className:cy(a,r)},I),{},{children:g}))},by=["label","parentClassName","className","error","value","onFocus"],py=function(e){var t=e.label,g=e.parentClassName,n=void 0===g?"":g,r=e.className,I=void 0===r?"":r,a=e.error,o=e.value,i=e.onFocus,C=$d(e,by),l=Ae(ae.useState(!1),2),u=l[0],c=l[1];return(0,sy.jsxs)("div",{className:cy("w-full mb-4",I),children:[(0,sy.jsxs)("div",{className:cy("relative rounded-sm overflow-hidden w-full flex justify-center",n),children:[(0,sy.jsx)("input",lo(lo({id:t},C),{},{className:cy("bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg border-1 focus:border-custom-secondary block w-4/5 p-2.5",I),onFocus:function(e){null===i||void 0===i||i(e),c(!0)},value:o})),t?(0,sy.jsx)("label",{htmlFor:t,className:cy("absolute cursor-text top-1/2 transition-all transform -translate-y-1/2 duration-500 opacity-40 font-display text-xs",u||!1===!o?"top-2 text-xxs":""),children:t}):null]}),a?(0,sy.jsx)("span",{className:"text-left text-custom-danger",children:a}):null]})},fy=function(e){var t=e.children,g=e.className,n=void 0===g?"":g;return(0,sy.jsx)("div",{className:cy("flex justify-center flex-col my-3 rounded-lg  bg-gray-100 p-4",n),children:t})},Zy=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"string","name":"Cid","type":"string"}],"name":"addcid","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"cid_count","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getRole","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address payable","name":"Carrier","type":"address"}],"name":"register","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"Cid","type":"string"},{"internalType":"string","name":"cidverify","type":"string"}],"name":"show","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"carrier","type":"address"}],"name":"showcarrier","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"showcert","outputs":[{"components":[{"internalType":"string","name":"hashedcid","type":"string"},{"internalType":"uint256","name":"regcid","type":"uint256"}],"internalType":"struct SCA.Cert","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"showcid","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"showdeliv","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"supplier","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"Hashcid","type":"string"},{"internalType":"string","name":"Cid","type":"string"},{"internalType":"address","name":"_carrier","type":"address"}],"name":"supply","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address payable","name":"Carrier","type":"address"}],"name":"unregister","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),yy=(__webpack_require__.p,function(e){var t=e.role,g=e.text,n=e.text2,r=e.className;return(0,sy.jsxs)("div",{className:cy("flex flex-col md:align-middle md:place-content-center bg-custom-primary",r),children:[(0,sy.jsx)(my,{text:"\ud83d\udc4b Hello ".concat(t),tag:"h1",className:"text-white text-center md:pt-2"}),(0,sy.jsx)(my,{text:"IPFS Supply Chain Assurance",tag:"h2",className:"text-white text-center pt-2 mb-8"}),(0,sy.jsx)(my,{text:g,tag:"h3",className:"md:w-4/5 w-full self-center text-white p-2 hidden md:block"}),(0,sy.jsx)(my,{text:n,tag:"h3",className:"md:w-4/5 w-full self-center text-white p-6 hidden md:block"})]})}),Gy=__webpack_require__(5602),By=function(e){var t=e.contract,g=Ae(ae.useState([]),2),n=g[0],r=g[1],I=Ae(ae.useState([]),2),a=I[0],o=I[1];return ae.useEffect((function(){function e(){return e=ue(Ce().mark((function e(){var g,n,I,a,i,C;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===t||void 0===t?void 0:t.cid_count();case 2:g=e.sent,console.log("The counter is: "+g),n=[],I=[],a=0;case 7:if(!(a<g)){e.next=19;break}return e.next=10,t.showcid(a);case 10:return i=e.sent,e.next=13,t.showdeliv(a);case 13:C=e.sent,n.push(i),I.push(C);case 16:a++,e.next=7;break;case 19:r(n),o(I);case 21:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,sy.jsxs)(sy.Fragment,{children:[(0,sy.jsx)(my,{tag:"h2",text:"Historical Signed Transactions",className:"text-left"}),(0,sy.jsx)("div",{className:"flex flex-wrap",children:n.map((function(e,t){return(0,sy.jsxs)(fy,{className:"flex flex-col bg-slate-300 mr-4 justify-center ",children:[(0,sy.jsx)(my,{tag:"h4",text:a[t].slice(0,20)+"...",className:"w-20 "}),(0,sy.jsx)("img",{className:"",alt:"Bidding document",src:"https://skywalker.infura-ipfs.io/ipfs/"+e,style:{maxWidth:"150px",margin:"15px"},onError:function(e){e.target.src="https://skywalker.infura-ipfs.io/ipfs/QmYEGHkGxNut1zGGFiW6ERNgCcV5cwmXcpZgtT2NXUtGDP",e.target.style="padding: 8px; margin: 16px"}})]})}))})]})},vy=function(){var e=Ae(ae.useState([]),2),t=e[0],g=e[1],n=Ae(ae.useState(),2),r=n[0],I=n[1],a=Ae(ae.useState(""),2),o=a[0],i=a[1],C=Ae(ae.useState([]),2),l=C[0],u=C[1],c=ae.useMemo((function(){var e;if("undefined"!==typeof window.ethereum){var t=new fI(window.ethereum).getSigner();e=new Na("0x8787C1F9353c945fD1B79a6565F3e44aa236B137",Zy.Mt,t)}return e}),[]),s=function(){var e=ue(Ce().mark((function e(t){var g,n,r,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),g=t.target,(n=g[0].files)&&0!==n.length){e.next=5;break}return e.abrupt("return",alert("No files selected"));case 5:return r=n[0],e.next=8,uy.add(r);case 8:if(a=e.sent,u([].concat(On(l),[{cid:a.cid,path:a.path}])),"undefined"===typeof window.ethereum){e.next=23;break}return e.prev=11,e.next=14,c.addcid(a.path);case 14:return o=e.sent,e.next=17,o.wait();case 17:I("File upload successfuly"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),console.log("Error: ",e.t0);case 23:g.reset();case 24:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t){return e.apply(this,arguments)}}();function A(){return(A=ue(Ce().mark((function e(){var g;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum){e.next=14;break}return e.prev=1,e.next=4,c.register(t);case 4:return g=e.sent,e.next=7,g.wait();case 7:i("Registration OK"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),i("Registration failed"),console.log("Error: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return uy?(0,sy.jsxs)("div",{className:"flex md:flex-row flex-col justify-center text-center h-full",children:[(0,sy.jsx)("div",{className:"md:w-1/3 w-full bg-custom-primary md:min-h-screen",children:(0,sy.jsx)(yy,{role:"Supplier",text:"Our platform offers suppliers the unique opportunity to register their carriers on a blockchain to ensure that all their transactions are carried out securely. Protect your assets and make sure you maintain a high level of security.",text2:"Join the future of blockchain today and discover the ease and security our platform offers!",className:" h-full justify-start"})}),(0,sy.jsxs)("div",{className:"md:w-2/3 w-full px-6",children:[(0,sy.jsxs)(fy,{className:"self-center",children:[(0,sy.jsx)(my,{text:"Register the carrier",tag:"h2",className:"text-left"}),(0,sy.jsx)(my,{text:"The carrier address will be registered in the smart contract to allow him sign new photos.",tag:"h4",className:"text-left"}),(0,sy.jsxs)("div",{className:"self-center w-full text-center mt-4",children:[(0,sy.jsx)(py,{onChange:function(e){return g(e.target.value)},placeholder:"0xf39Fd6e51a....",required:!0}),(0,sy.jsx)("p",{children:o})]}),(0,sy.jsx)(dy,{onClick:function(){return A.apply(this,arguments)},className:"w-32 self-center",children:"Register"})]}),(0,sy.jsxs)(fy,{className:"self-center",children:[(0,sy.jsx)(my,{text:"Upload the photo of the goods",tag:"h2",className:"text-left"}),(0,sy.jsx)(my,{text:"This photo will be uploaded through IPFS to the smart contract for carrier's revision",tag:"h4",className:"text-left"}),(0,sy.jsxs)("form",{onSubmit:s,className:"flex flex-col self-center w-full mt-4",children:[(0,sy.jsx)(py,{type:"file",id:"file"}),(0,sy.jsx)(dy,{type:"submit",className:" w-32 self-center",children:"Upload file"})]}),(0,sy.jsx)("div",{className:"flex flex-wrap justify-center",children:l.map((function(e,t){return(0,sy.jsx)("img",{alt:"Uploaded #".concat(t+1),src:"https://skywalker.infura-ipfs.io/ipfs/"+e.path,className:"p-1 bg-white border rounded max-w-sm",style:{maxWidth:"400px",margin:"15px"}},e.cid.toString()+t)}))}),r?(0,sy.jsxs)(sy.Fragment,{children:[l.map((function(e,t){return(0,sy.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,sy.jsxs)("h3",{children:["CID:",e.path]}),(0,sy.jsx)(Gy.Z,{value:e.path,className:"self-center py-2 h-40"})]})})),(0,sy.jsx)("h3",{children:r})]}):null]}),(0,sy.jsx)(fy,{className:"self-center mb-4",children:(0,sy.jsx)(By,{contract:c})})]})]}):null},ky=function(){var e=Ae(ae.useState(""),2),t=e[0],g=e[1];return(0,sy.jsxs)(sy.Fragment,{children:[(0,sy.jsx)(my,{text:"Download the photo",tag:"h2",className:"text-left"}),(0,sy.jsx)(my,{text:"This step is for validating or viewing again the photo.",tag:"h4",className:"text-left"}),(0,sy.jsx)(py,{onChange:function(e){return g(e.target.value)},placeholder:"Insert CID",required:!0,className:"w-4/5 self-center mt-2"}),t&&(0,sy.jsx)("div",{className:"flex flex-wrap justify-center",children:(0,sy.jsx)("img",{alt:"Bidding document",src:"https://skywalker.infura-ipfs.io/ipfs/"+t,style:{maxWidth:"400px",margin:"15px"},onError:function(e){e.target.src="https://skywalker.infura-ipfs.io/ipfs/QmYEGHkGxNut1zGGFiW6ERNgCcV5cwmXcpZgtT2NXUtGDP",e.target.style="padding: 8px; margin: 16px"}})})]})},Sy=__webpack_require__(6993),Wy=__webpack_require__.n(Sy),Vy=function(){var e=Ae(ae.useState([]),2),t=e[0],g=(e[1],Ae(ae.useState(),2)),n=g[0],r=(g[1],Ae(ae.useState(!1),2)),I=r[0],a=r[1],o=Ae(ae.useState(!1),2),i=o[0],C=o[1],l=Ae(ae.useState(),2),u=l[0],c=l[1],s=Ae(ae.useState(""),2),A=(s[0],s[1]),d=Ae(ae.useState(""),2),h=d[0],m=d[1],b=Ae(ae.useState(""),2),p=b[0],f=b[1];function Z(){return y.apply(this,arguments)}function y(){return(y=ue(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return B.apply(this,arguments)}function B(){return(B=ue(Ce().mark((function e(t){var g,n,r,I;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum){e.next=11;break}return e.next=3,Z();case 3:return g=new fI(window.ethereum),n=g.getSigner(),r=new Na("0x8787C1F9353c945fD1B79a6565F3e44aa236B137",Zy.Mt,n),e.next=8,r.supply(t.signature,t.message,t.address);case 8:return I=e.sent,e.next=11,I.wait();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(){var e=ue(Ce().mark((function e(t){var g,n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g=new FormData(t.target),c(),e.next=5,k({setError:c,message:g.get("message")});case 5:(n=e.sent)&&G(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=ue(Ce().mark((function e(t){var g,n,r,I,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=t.setError,n=t.message,e.prev=1,window.ethereum){e.next=4;break}throw new Error("No crypto wallet found. Please install it.");case 4:return e.next=6,window.ethereum.send("eth_requestAccounts");case 6:return r=new fI(window.ethereum),I=r.getSigner(),e.next=10,I.signMessage(n);case 10:return a=e.sent,A(a),e.next=14,I.getAddress();case 14:return o=e.sent,a,e.abrupt("return",{message:n,signature:a,address:o});case 19:e.prev=19,e.t0=e.catch(1),g(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=ue(Ce().mark((function e(t){var g,n,r,I,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g=new FormData(t.target),c(),e.next=5,k({setError:c,message:g.get("message")});case 5:if(n=e.sent,"undefined"===typeof window.ethereum){e.next=19;break}return r=new fI(window.ethereum),I=new Na("0x8787C1F9353c945fD1B79a6565F3e44aa236B137",Zy.Mt,r),e.prev=9,e.next=12,I.show(n.message,n.signature);case 12:a=e.sent,f(!0===a?"CID OK":"CID Incorrect"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.log("Error: ",e.t0);case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return(0,sy.jsxs)("div",{className:"flex md:flex-row flex-col justify-center text-center h-full",children:[(0,sy.jsx)("div",{className:"md:w-1/3 w-full bg-custom-primary md:min-h-screen",children:(0,sy.jsx)(yy,{role:"Carrier",text:"Our platform offers suppliers the unique opportunity to register their carriers on a blockchain to ensure that all their transactions are carried out securely. Protect your assets and make sure you maintain a high level of security.",text2:"Join the future of blockchain today and discover the ease and security our platform offers!",className:" h-full justify-start"})}),(0,sy.jsxs)("div",{className:"md:w-2/3 w-full px-6",children:[t.map((function(e,t){return(0,sy.jsxs)("h3",{children:["Path:",e.path]})})),(0,sy.jsx)("h3",{children:n}),(0,sy.jsxs)(fy,{className:" self-center",children:[(0,sy.jsx)(my,{text:"Sign the photo",tag:"h2",className:"text-left"}),(0,sy.jsx)(my,{text:"By signing the photo you are accepting that you have received the good with status OK.",tag:"h4",className:"text-left"}),(0,sy.jsx)("div",{className:"flex justify-around md:p-4 md:mx-24",children:(0,sy.jsxs)(sy.Fragment,{children:[(0,sy.jsx)(dy,{onClick:function(){return a(!I)},children:(0,sy.jsx)(my,{text:"Scan QR Code",tag:"h3",className:"text-bold"})}),(0,sy.jsx)(my,{text:"or",tag:"h3",className:"text-bold pt-2"}),(0,sy.jsx)(dy,{onClick:function(){return C(!i)},children:(0,sy.jsx)(my,{text:"Enter CID",tag:"h3",className:"text-bold"})})]})}),I?(0,sy.jsx)(Wy(),{className:"h-44",onScan:function(e){console.log("e",e),null!==e&&void 0!==e&&e.text&&(m(e.text),a(!1),C(!0))}}):null,i?(0,sy.jsxs)("form",{onSubmit:v,className:"flex flex-col self-center w-full ",children:[(0,sy.jsx)(py,{onChange:function(e){return m(e.target.value)},placeholder:"Insert CID",name:"message",value:h,required:!0,className:"w-4/5 self-center mt-2"}),(0,sy.jsx)(dy,{type:"submit",className:"self-center",children:"Sign photo"}),u]}):null]}),(0,sy.jsx)(fy,{className:"self-center mb-4",children:(0,sy.jsx)(ky,{})}),(0,sy.jsxs)(fy,{className:" self-center mb-5",children:[(0,sy.jsx)(my,{text:"Verification of the sign",tag:"h2",className:"text-left"}),(0,sy.jsx)(my,{text:"This step is for showing the customer the photo was properly signed",tag:"h4",className:"text-left"}),(0,sy.jsxs)("form",{className:"flex flex-col",onSubmit:S,children:[(0,sy.jsx)(py,{onChange:function(e){return m(e.target.value)},placeholder:"Insert CID",name:"message",required:!0,className:"w-4/5 self-center mt-2"}),(0,sy.jsx)(dy,{type:"submit",className:"self-center",children:"Show Verification"}),u,(0,sy.jsx)("p",{children:p})]})]})]})]})},wy=function(e){var t=e.children,g=e.className;return(0,sy.jsxs)("div",{className:cy("flex justify-center text-center h-full",g),children:[(0,sy.jsx)("div",{className:"w-1/3",children:(0,sy.jsx)(yy,{role:"",text:"Our platform offers suppliers the unique opportunity to register their carriers on a blockchain to ensure that all their transactions are carried out securely. Protect your assets and make sure you maintain a high level of security.",text2:"Join the future of blockchain today and discover the ease and security our platform offers!",className:"min-h-screen h-full justify-start pt-32"})}),t]})},Ry=function(){return(0,sy.jsx)(wy,{children:(0,sy.jsxs)(fy,{className:"md:w-2/3 w-full self-center mb-4 mx-6",children:[(0,sy.jsx)(my,{tag:"h2",text:"Steps for testing the application",className:"mb-8"}),(0,sy.jsx)(my,{tag:"h3",text:"1-  Testnet network configuration: Open your  Metamask wallet and add a Mumbai network, following the instruction in: https://docs.unstoppabledomains.com/manage-domains/guides/add-polygon-to-metamask/ ",className:"text-left"}),(0,sy.jsx)(my,{tag:"h3",text:".",className:"text-left"}),(0,sy.jsx)(my,{tag:"h3",text:"2- Supplier Role: Add a new account with the following private testing key: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80",className:"text-left"}),(0,sy.jsx)(my,{tag:"h3",text:"3- Add credit to the previously created account, entering the website: https://faucet.polygon.technology/",className:"text-left mt-4"}),(0,sy.jsx)(my,{tag:"h3",text:"4- Carrier Role: Configure Metamask with the following private testing key: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d.\r If it is neccesary, add credit by faucet Mumbai website",className:"text-left mt-4"}),(0,sy.jsx)(my,{tag:"h3",text:"5-  Once configured both keys, connect metamask with the corresponding's metamask account and refresh the application.",className:"text-left mt-4"}),(0,sy.jsx)(my,{tag:"h3",text:"6-Test the supplier role by inserting a carrier (second metamask account) and uploading a photo to IPFS.",className:"text-left mt-4"}),(0,sy.jsx)(my,{tag:"h3",text:"7- Test the carrier role by signing the CID provided by the supplier.Switch between roles by changing the connected metamask account.",className:"text-left mt-4"}),(0,sy.jsx)(my,{tag:"h3",text:"8- Customer role: is only enabled to see the photos provided by the supplier/carrier by the ID.This role is assigned to the user who\r log in with no metamask, or with metamask account not registered as carrier",className:"text-left mt-4"}),(0,sy.jsx)(ky,{})]})})};var Xy=function(){var e=Ae((0,ae.useState)(""),2),t=e[0],g=e[1],n="0x8787C1F9353c945fD1B79a6565F3e44aa236B137";return(0,ae.useEffect)((function(){function e(){return(e=ue(Ce().mark((function e(){var t,r,I,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.ethereum){e.next=3;break}throw new Error("No crypto wallet found. Please install it.");case 3:return e.next=5,window.ethereum.send("eth_requestAccounts");case 5:return t=new fI(window.ethereum),r=t.getSigner(),e.next=9,r.getAddress();case 9:return I=e.sent,a=new Na(n,Zy.Mt,r),e.next=13,a.getRole(I);case 13:o=e.sent,g("0"===o?"Supplier":"1"===o?"Carrier":"Customer"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("error"),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,sy.jsx)(sy.Fragment,{children:"Supplier"===t?(0,sy.jsx)(vy,{}):"Carrier"===t?(0,sy.jsx)(Vy,{}):(0,sy.jsx)(Ry,{})})},Jy=function(e){e&&e instanceof Function&&__webpack_require__.e(988).then(__webpack_require__.bind(__webpack_require__,4988)).then((function(t){var g=t.getCLS,n=t.getFID,r=t.getFCP,I=t.getLCP,a=t.getTTFB;g(e),n(e),r(e),I(e),a(e)}))};oe.createRoot(document.getElementById("root")).render((0,sy.jsx)(ae.StrictMode,{children:(0,sy.jsx)(Xy,{})})),Jy()}()})();
//# sourceMappingURL=main.70b742b3.js.map